import{_ as g,G as x,M as S,g as y,r as C,R as L,a as m,b as E,s as P,t as A,c as l,d as I,w as c,e as R,o as u,f as r,h as t,i as B,v as F,j as p,k as G,l as v,F as M,m as N}from"./index-RSd0p-ZE.js";const V=[...parsers.keys()],q=`
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
`,z={components:{GraphLayout:x,Splitpanes:S,Pane:y,ArrowPathIcon:C,ResourceCard:L},data(){return{format:"text/turtle",formats:V,shacl:q,datamodel:{tables:[],viewports:[],isIntrospected:!1},error:null,activeLinks:[]}},computed:{links(){const i=this.datamodel.tables,n=new Set(i.map(({id:e})=>e));return i.flatMap(e=>e.properties.map(o=>({...o,table:e}))).reduce((e,o)=>(o.values.forEach(s=>{const d=o.table.id,h=s.id;n.has(h)&&e.push({source:d,target:h,sourceProperty:o.id,label:o.name})}),e),[])}},methods:{async loadShacl(){const i=this.$refs.shaclEditor;this.error=null,this.datamodel.tables=[];const n=e=>R(e)||e;try{const e=await i.quads,o=m.dataset(e),s=m.clownface({dataset:o}).has(E.type,P.NodeShape);this.datamodel.tables=A(s,n)}catch(e){this.error=e.toString()}}}},D=t("h2",{class:"font-bold text-lg px-4 py-2 bg-gray-200"},"SHACL editor",-1),H={class:"field"},U=t("label",{class:"label",for:"format"},"Format",-1),j={class:"select"},X=["value"],J=t("span",null,"Update",-1),K={class:"flex-grow flex flex-col"},O=t("h2",{class:"font-bold text-lg px-4 py-2 bg-gray-200"},"Representation",-1),Q={key:0,class:"section"},T={class:"message is-danger"},W={class:"message-body"};function Y(i,n,e,o,s,d){const h=l("rdf-editor"),k=l("ArrowPathIcon"),_=l("Pane"),w=l("ResourceCard"),b=l("GraphLayout"),f=l("Splitpanes");return u(),I(f,{class:"default-theme"},{default:c(()=>[r(_,{size:"40"},{default:c(()=>[D,r(h,{class:"w-full h-full overflow-hidden",format:s.format,value:s.shacl,ref:"shaclEditor"},null,8,["format","value"]),t("div",H,[U,t("div",j,[B(t("select",{id:"format","onUpdate:modelValue":n[0]||(n[0]=a=>s.format=a)},[(u(!0),p(M,null,G(s.formats,a=>(u(),p("option",{key:a,value:a},v(a),9,X))),128))],512),[[F,s.format]])])]),t("button",{class:"button is-primary",onClick:n[1]||(n[1]=(...a)=>d.loadShacl&&d.loadShacl(...a))},[r(k,{class:"icon"}),J])]),_:1}),r(_,null,{default:c(()=>[r(f,{horizontal:""},{default:c(()=>[r(_,null,{default:c(()=>[t("div",K,[O,r(b,{nodes:s.datamodel.tables,links:d.links,"active-links":s.activeLinks},{node:c(({node:a})=>[r(w,{resource:a,"active-links":s.activeLinks},null,8,["resource","active-links"])]),_:1},8,["nodes","links","active-links"]),s.error?(u(),p("div",Q,[t("div",T,[t("div",W," Error loading data: "+v(s.error),1)])])):N("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})}const $=g(z,[["render",Y]]);export{$ as default};
