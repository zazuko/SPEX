import{u as Oe,x as Pe,y as Ue,z as De,A as oo,B as ko,C as Mo,D as jo,E as Vo}from"./index-CIRByK6l.js";import{r as bn}from"./index-Bk9Nd8TQ.js";import{r as $o}from"./canonicalize-53SzByLi.js";var ze={},ht={},Xe={},bt={},yr={},In;function qt(){return In||(In=1,function(l){Object.defineProperty(l,"__esModule",{value:!0}),l.ERROR_CODES=l.ErrorCoded=void 0;class o extends Error{constructor(A,h){super(A),this.code=h}}l.ErrorCoded=o,function(d){d.COLLIDING_KEYWORDS="colliding keywords",d.CONFLICTING_INDEXES="conflicting indexes",d.CYCLIC_IRI_MAPPING="cyclic IRI mapping",d.INVALID_ID_VALUE="invalid @id value",d.INVALID_INDEX_VALUE="invalid @index value",d.INVALID_NEST_VALUE="invalid @nest value",d.INVALID_PREFIX_VALUE="invalid @prefix value",d.INVALID_PROPAGATE_VALUE="invalid @propagate value",d.INVALID_REVERSE_VALUE="invalid @reverse value",d.INVALID_IMPORT_VALUE="invalid @import value",d.INVALID_VERSION_VALUE="invalid @version value",d.INVALID_BASE_IRI="invalid base IRI",d.INVALID_CONTAINER_MAPPING="invalid container mapping",d.INVALID_CONTEXT_ENTRY="invalid context entry",d.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",d.INVALID_DEFAULT_LANGUAGE="invalid default language",d.INVALID_INCLUDED_VALUE="invalid @included value",d.INVALID_IRI_MAPPING="invalid IRI mapping",d.INVALID_JSON_LITERAL="invalid JSON literal",d.INVALID_KEYWORD_ALIAS="invalid keyword alias",d.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",d.INVALID_LANGUAGE_MAPPING="invalid language mapping",d.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",d.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",d.INVALID_LOCAL_CONTEXT="invalid local context",d.INVALID_REMOTE_CONTEXT="invalid remote context",d.INVALID_REVERSE_PROPERTY="invalid reverse property",d.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",d.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",d.INVALID_SCOPED_CONTEXT="invalid scoped context",d.INVALID_SCRIPT_ELEMENT="invalid script element",d.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",d.INVALID_TERM_DEFINITION="invalid term definition",d.INVALID_TYPE_MAPPING="invalid type mapping",d.INVALID_TYPE_VALUE="invalid type value",d.INVALID_TYPED_VALUE="invalid typed value",d.INVALID_VALUE_OBJECT="invalid value object",d.INVALID_VALUE_OBJECT_VALUE="invalid value object value",d.INVALID_VOCAB_MAPPING="invalid vocab mapping",d.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",d.KEYWORD_REDEFINITION="keyword redefinition",d.LOADING_DOCUMENT_FAILED="loading document failed",d.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",d.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",d.PROCESSING_MODE_CONFLICT="processing mode conflict",d.PROTECTED_TERM_REDEFINITION="protected term redefinition",d.CONTEXT_OVERFLOW="context overflow",d.INVALID_BASE_DIRECTION="invalid base direction",d.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",d.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",d.INVALID_EMBEDDED_NODE="invalid embedded node",d.INVALID_ANNOTATION="invalid annotation"}(l.ERROR_CODES||(l.ERROR_CODES={}))}(yr)),yr}var yt={},pr,An;function ao(){if(An)return pr;An=1;var l=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,d=/\s|\uFEFF|\xA0/,A=/\r?\n[\x20\x09]+/g,h=/[;,"]/,y=/[;,"]|\s/,i=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,e={IDLE:1,URI:2,ATTR:4};function t(m){return m.replace(o,"")}function r(m){return d.test(m)}function s(m,g){for(;r(m[g]);)g++;return g}function u(m){return y.test(m)||!i.test(m)}function E(m,g){return Object.keys(m).length===Object.keys(g).length&&Object.keys(m).every(b=>b in g&&m[b]===g[b])}class R{constructor(g){this.refs=[],g&&this.parse(g)}rel(g){for(var b=[],v=g.toLowerCase(),I=0;I<this.refs.length;I++)typeof this.refs[I].rel=="string"&&this.refs[I].rel.toLowerCase()===v&&b.push(this.refs[I]);return b}get(g,b){g=g.toLowerCase(),b=b.toLowerCase();for(var v=[],I=0;I<this.refs.length;I++)typeof this.refs[I][g]=="string"&&this.refs[I][g].toLowerCase()===b&&v.push(this.refs[I]);return v}set(g){return this.refs.push(g),this}setUnique(g){return this.refs.some(b=>E(b,g))||this.refs.push(g),this}has(g,b){g=g.toLowerCase(),b=b.toLowerCase();for(var v=0;v<this.refs.length;v++)if(typeof this.refs[v][g]=="string"&&this.refs[v][g].toLowerCase()===b)return!0;return!1}parse(g,c){c=c||0,g=c?g.slice(c):g,g=t(g).replace(A,"");for(var v=e.IDLE,I=g.length,c=0,B=null;c<I;)if(v===e.IDLE){if(r(g[c])){c++;continue}else if(g[c]==="<"){B!=null&&(B.rel!=null?this.refs.push(...R.expandRelations(B)):this.refs.push(B));var O=g.indexOf(">",c);if(O===-1)throw new Error("Expected end of URI delimiter at offset "+c);B={uri:g.slice(c+1,O)},c=O,v=e.URI}else throw new Error('Unexpected character "'+g[c]+'" at offset '+c);c++}else if(v===e.URI)if(r(g[c])){c++;continue}else if(g[c]===";")v=e.ATTR,c++;else if(g[c]===",")v=e.IDLE,c++;else throw new Error('Unexpected character "'+g[c]+'" at offset '+c);else if(v===e.ATTR){if(g[c]===";"||r(g[c])){c++;continue}var O=g.indexOf("=",c);O===-1&&(O=g.indexOf(";",c)),O===-1&&(O=g.length);var $=t(g.slice(c,O)).toLowerCase(),Y="";if(c=O+1,c=s(g,c),g[c]==='"')for(c++;c<I;){if(g[c]==='"'){c++;break}g[c]==="\\"&&c++,Y+=g[c],c++}else{for(var O=c+1;!h.test(g[O])&&O<I;)O++;Y=g.slice(c,O),c=O}switch(B[$]&&R.isSingleOccurenceAttr($)||($[$.length-1]==="*"?B[$]=R.parseExtendedValue(Y):(Y=$==="type"?Y.toLowerCase():Y,B[$]!=null?Array.isArray(B[$])?B[$].push(Y):B[$]=[B[$],Y]:B[$]=Y)),g[c]){case",":v=e.IDLE;break;case";":v=e.ATTR;break}c++}else throw new Error('Unknown parser state "'+v+'"');return B!=null&&(B.rel!=null?this.refs.push(...R.expandRelations(B)):this.refs.push(B)),B=null,this}toString(){for(var g=[],b="",v=null,I=0;I<this.refs.length;I++)v=this.refs[I],b=Object.keys(this.refs[I]).reduce(function(c,B){return B==="uri"?c:c+"; "+R.formatAttribute(B,v[B])},"<"+v.uri+">"),g.push(b);return g.join(", ")}}return R.isCompatibleEncoding=function(m){return l.test(m)},R.parse=function(m,g){return new R().parse(m,g)},R.isSingleOccurenceAttr=function(m){return m==="rel"||m==="type"||m==="media"||m==="title"||m==="title*"},R.isTokenAttr=function(m){return m==="rel"||m==="type"||m==="anchor"},R.escapeQuotes=function(m){return m.replace(/"/g,'\\"')},R.expandRelations=function(m){var g=m.rel.split(" ");return g.map(function(b){var v=Object.assign({},m);return v.rel=b,v})},R.parseExtendedValue=function(m){var g=/([^']+)?(?:'([^']*)')?(.+)/.exec(m);return{language:g[2].toLowerCase(),encoding:R.isCompatibleEncoding(g[1])?null:g[1].toLowerCase(),value:R.isCompatibleEncoding(g[1])?decodeURIComponent(g[3]):g[3]}},R.formatExtendedAttribute=function(m,g){var b=(g.encoding||"utf-8").toUpperCase(),v=g.language||"en",I="";return Buffer.isBuffer(g.value)&&R.isCompatibleEncoding(b)?I=g.value.toString(b):Buffer.isBuffer(g.value)?I=g.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):I=encodeURIComponent(g.value),m+"="+b+"'"+v+"'"+I},R.formatAttribute=function(m,g){return Array.isArray(g)?g.map(b=>R.formatAttribute(m,b)).join("; "):m[m.length-1]==="*"||typeof g!="string"?R.formatExtendedAttribute(m,g):(R.isTokenAttr(m)?g=u(g)?'"'+R.escapeQuotes(g)+'"':R.escapeQuotes(g):u(g)&&(g=encodeURIComponent(g),g=g.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),g='"'+g+'"'),m+"="+g)},pr=R,pr}var vn;function lo(){if(vn)return yt;vn=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.FetchDocumentLoader=void 0;const l=qt(),o=ao(),d=bn();let A=class{constructor(y){this.fetcher=y}async load(y){const i=await(this.fetcher||fetch)(y,{headers:new Headers({accept:"application/ld+json"})});if(i.ok&&i.headers){let e=i.headers.get("Content-Type");if(e){const t=e.indexOf(";");t>0&&(e=e.substr(0,t))}if(e==="application/ld+json")return await i.json();if(i.headers.has("Link")){let t;if(i.headers.forEach((r,s)=>{if(s==="link"){const u=(0,o.parse)(r);for(const E of u.get("type","application/ld+json"))if(E.rel==="alternate"){if(t)throw new Error("Multiple JSON-LD alternate links were found on "+y);t=(0,d.resolve)(E.uri,y)}}}),t)return this.load(t)}throw new l.ErrorCoded(`Unsupported JSON-LD media type ${e}`,l.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(i.statusText||`Status code: ${i.status}`)}};return yt.FetchDocumentLoader=A,yt}var wr={},pt={},mn;function yn(){if(mn)return pt;mn=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.Util=void 0;class l{static isCompactIri(d){return d.indexOf(":")>0&&!(d&&d[0]==="#")}static getPrefix(d,A){if(d&&d[0]==="#")return null;const h=d.indexOf(":");if(h>=0){if(d.length>h+1&&d.charAt(h+1)==="/"&&d.charAt(h+2)==="/")return null;const y=d.substr(0,h);if(y==="_")return null;if(A[y])return y}return null}static getContextValueId(d){if(d===null||typeof d=="string")return d;const A=d["@id"];return A||null}static isSimpleTermDefinitionPrefix(d,A){return!l.isPotentialKeyword(d)&&(A.allowPrefixNonGenDelims||typeof d=="string"&&(d[0]==="_"||l.isPrefixIriEndingWithGenDelim(d)))}static isPotentialKeyword(d){return typeof d=="string"&&l.KEYWORD_REGEX.test(d)}static isPrefixIriEndingWithGenDelim(d){return l.ENDS_WITH_GEN_DELIM.test(d)}static isPrefixValue(d){return d&&(typeof d=="string"||d&&typeof d=="object")}static isValidIri(d){return!!(d&&l.IRI_REGEX.test(d))}static isValidIriWeak(d){return!!d&&d[0]!==":"&&l.IRI_REGEX_WEAK.test(d)}static isValidKeyword(d){return l.VALID_KEYWORDS[d]}static isTermProtected(d,A){const h=d[A];return typeof h!="string"&&h&&h["@protected"]}static hasProtectedTerms(d){for(const A of Object.keys(d))if(l.isTermProtected(d,A))return!0;return!1}static isReservedInternalKeyword(d){return d.startsWith("@__")}static deepEqual(d,A){const h=Object.keys(d),y=Object.keys(A);return h.length!==y.length?!1:h.every(i=>{const e=d[i],t=A[i];return e===t||e!==null&&t!==null&&typeof e=="object"&&typeof t=="object"&&this.deepEqual(e,t)})}}return l.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,l.IRI_REGEX_WEAK=/(?::[^:])|\//,l.KEYWORD_REGEX=/^@[a-z]+$/i,l.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,l.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,l.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,l.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},l.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],l.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],l.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],l.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],l.CONTAINERS_1_0=["@list","@set","@index"],pt.Util=l,pt}var Tn;function so(){return Tn||(Tn=1,function(l){Object.defineProperty(l,"__esModule",{value:!0}),l.defaultExpandOptions=l.JsonLdContextNormalized=void 0;const o=bn(),d=qt(),A=yn();class h{constructor(i){this.contextRaw=i}getContextRaw(){return this.contextRaw}expandTerm(i,e,t=l.defaultExpandOptions){const r=this.contextRaw[i];if(r===null||r&&r["@id"]===null)return null;let s=!0;if(r&&e){const b=A.Util.getContextValueId(r);if(b&&b!==i)if(typeof b!="string"||!A.Util.isValidIri(b)&&!A.Util.isValidKeyword(b))A.Util.isPotentialKeyword(b)||(s=!1);else return b}const u=A.Util.getPrefix(i,this.contextRaw),E=this.contextRaw["@vocab"],R=(!!E||E==="")&&E.indexOf(":")<0,m=this.contextRaw["@base"],g=A.Util.isPotentialKeyword(i);if(u){const b=this.contextRaw[u],v=A.Util.getContextValueId(b);if(v){if(typeof b=="string"||!t.allowPrefixForcing){if(!A.Util.isSimpleTermDefinitionPrefix(v,t))return i}else if(v[0]!=="_"&&!g&&!b["@prefix"]&&!(i in this.contextRaw))return i;return v+i.substr(u.length+1)}}else if(e&&(E||E===""||t.allowVocabRelativeToBase&&m&&R)&&!g&&!A.Util.isCompactIri(i))if(R){if(t.allowVocabRelativeToBase)return(E||m?(0,o.resolve)(E,m):"")+i;throw new d.ErrorCoded(`Relative vocab expansion for term '${i}' with vocab '${E}' is not allowed.`,d.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return E+i;else if(!e&&m&&!g&&!A.Util.isCompactIri(i))return(0,o.resolve)(i,m);if(s)return i;throw new d.ErrorCoded(`Invalid IRI mapping found for context entry '${i}': '${JSON.stringify(r)}'`,d.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(i,e){if(e&&this.contextRaw["@vocab"]&&i.startsWith(this.contextRaw["@vocab"]))return i.substr(this.contextRaw["@vocab"].length);if(!e&&this.contextRaw["@base"]&&i.startsWith(this.contextRaw["@base"]))return i.substr(this.contextRaw["@base"].length);const t={prefix:"",suffix:i};for(const r in this.contextRaw){const s=this.contextRaw[r];if(s&&!A.Util.isPotentialKeyword(r)){const u=A.Util.getContextValueId(s);if(i.startsWith(u)){const E=i.substr(u.length);if(E)E.length<t.suffix.length&&(t.prefix=r,t.suffix=E);else if(e)return r}}}return t.prefix?t.prefix+":"+t.suffix:i}}l.JsonLdContextNormalized=h,l.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}}(wr)),wr}var Cn;function Fo(){if(Cn)return bt;Cn=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.ContextParser=void 0;const l=bn(),o=qt(),d=lo(),A=so(),h=yn();let y=class Ze{constructor(e){e=e||{},this.documentLoader=e.documentLoader||new d.FetchDocumentLoader,this.documentCache={},this.validateContext=!e.skipValidation,this.expandContentTypeToBase=!!e.expandContentTypeToBase,this.remoteContextsDepthLimit=e.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in e?!!e.redirectSchemaOrgHttps:!0}static validateLanguage(e,t,r){if(typeof e!="string")throw new o.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(e)}'`,r);if(!h.Util.REGEX_LANGUAGE_TAG.test(e)){if(t)throw new o.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(e)}'`,r);return!1}return!0}static validateDirection(e,t){if(typeof e!="string")throw new o.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(e)}'`,o.ERROR_CODES.INVALID_BASE_DIRECTION);if(!h.Util.REGEX_DIRECTION_TAG.test(e)){if(t)throw new o.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(e)}'`,o.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(e){for(const t of Object.keys(e)){let r=e[t];if(r&&typeof r=="object"&&r["@reverse"]&&!r["@id"]){if(typeof r["@reverse"]!="string"||h.Util.isValidKeyword(r["@reverse"]))throw new o.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${r["@reverse"]}'`,o.ERROR_CODES.INVALID_IRI_MAPPING);r=e[t]=Object.assign(Object.assign({},r),{"@id":r["@reverse"]}),r["@id"]=r["@reverse"],h.Util.isPotentialKeyword(r["@reverse"])?delete r["@reverse"]:r["@reverse"]=!0}}return e}expandPrefixedTerms(e,t,r){const s=e.getContextRaw();for(const u of r||Object.keys(s))if(h.Util.EXPAND_KEYS_BLACKLIST.indexOf(u)<0&&!h.Util.isReservedInternalKeyword(u)){const E=s[u];if(h.Util.isPotentialKeyword(u)&&h.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(u)>=0&&(u!=="@type"||typeof s[u]=="object"&&!(s[u]["@protected"]||s[u]["@container"]==="@set")))throw new o.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${u} to ${JSON.stringify(E)}`,o.ERROR_CODES.KEYWORD_REDEFINITION);if(h.Util.ALIAS_RANGE_BLACKLIST.indexOf(h.Util.getContextValueId(E))>=0)throw new o.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${u} to ${JSON.stringify(E)}`,o.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(E&&h.Util.isPotentialKeyword(h.Util.getContextValueId(E))&&E["@prefix"]===!0)throw new o.ErrorCoded(`Tried to use keyword aliases as prefix: '${u}': '${JSON.stringify(E)}'`,o.ERROR_CODES.INVALID_TERM_DEFINITION);for(;h.Util.isPrefixValue(s[u]);){const R=s[u];let m=!1;if(typeof R=="string")s[u]=e.expandTerm(R,!0),m=m||R!==s[u];else{const g=R["@id"],b=R["@type"],v=!("@prefix"in R)||h.Util.isValidIri(u);if("@id"in R)g!=null&&typeof g=="string"&&(s[u]=Object.assign(Object.assign({},s[u]),{"@id":e.expandTerm(g,!0)}),m=m||g!==s[u]["@id"]);else if(!h.Util.isPotentialKeyword(u)&&v){const I=e.expandTerm(u,!0);I!==u&&(s[u]=Object.assign(Object.assign({},s[u]),{"@id":I}),m=!0)}if(b&&typeof b=="string"&&b!=="@vocab"&&(!R["@container"]||!R["@container"]["@type"])&&v){let I=e.expandTerm(b,!0);t&&b===I&&(I=e.expandTerm(b,!1)),I!==b&&(m=!0,s[u]=Object.assign(Object.assign({},s[u]),{"@type":I}))}}if(!m)break}}}normalize(e,{processingMode:t,normalizeLanguageTags:r}){if(r||t===1)for(const s of Object.keys(e))if(s==="@language"&&typeof e[s]=="string")e[s]=e[s].toLowerCase();else{const u=e[s];if(u&&typeof u=="object"&&typeof u["@language"]=="string"){const E=u["@language"].toLowerCase();E!==u["@language"]&&(e[s]=Object.assign(Object.assign({},u),{"@language":E}))}}}containersToHash(e){for(const t of Object.keys(e)){const r=e[t];if(r&&typeof r=="object"){if(typeof r["@container"]=="string")e[t]=Object.assign(Object.assign({},r),{"@container":{[r["@container"]]:!0}});else if(Array.isArray(r["@container"])){const s={};for(const u of r["@container"])s[u]=!0;e[t]=Object.assign(Object.assign({},r),{"@container":s})}}}}applyScopedProtected(e,{processingMode:t},r){if(t&&t>=1.1&&e["@protected"]){for(const s of Object.keys(e))if(!h.Util.isReservedInternalKeyword(s)&&!h.Util.isPotentialKeyword(s)&&!h.Util.isTermProtected(e,s)){const u=e[s];u&&typeof u=="object"?"@protected"in e[s]||(e[s]=Object.assign(Object.assign({},e[s]),{"@protected":!0})):(e[s]={"@id":u,"@protected":!0},h.Util.isSimpleTermDefinitionPrefix(u,r)&&(e[s]=Object.assign(Object.assign({},e[s]),{"@prefix":!0})))}delete e["@protected"]}}validateKeywordRedefinitions(e,t,r,s){for(const u of s??Object.keys(t))if(h.Util.isTermProtected(e,u)&&(typeof t[u]=="string"?t[u]={"@id":t[u],"@protected":!0}:t[u]=Object.assign(Object.assign({},t[u]),{"@protected":!0}),!h.Util.deepEqual(e[u],t[u])))throw new o.ErrorCoded(`Attempted to override the protected keyword ${u} from ${JSON.stringify(h.Util.getContextValueId(e[u]))} to ${JSON.stringify(h.Util.getContextValueId(t[u]))}`,o.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(e,{processingMode:t}){for(const r of Object.keys(e)){if(h.Util.isReservedInternalKeyword(r))continue;if(r==="")throw new o.ErrorCoded(`The empty term is not allowed, got: '${r}': '${JSON.stringify(e[r])}'`,o.ERROR_CODES.INVALID_TERM_DEFINITION);const s=e[r],u=typeof s;if(h.Util.isPotentialKeyword(r)){switch(r.substr(1)){case"vocab":if(s!==null&&u!=="string")throw new o.ErrorCoded(`Found an invalid @vocab IRI: ${s}`,o.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(s!==null&&u!=="string")throw new o.ErrorCoded(`Found an invalid @base IRI: ${e[r]}`,o.ERROR_CODES.INVALID_BASE_IRI);break;case"language":s!==null&&Ze.validateLanguage(s,!0,o.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(s!==null&&u!=="number")throw new o.ErrorCoded(`Found an invalid @version number: ${s}`,o.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":s!==null&&Ze.validateDirection(s,!0);break;case"propagate":if(t===1)throw new o.ErrorCoded(`Found an illegal @propagate keyword: ${s}`,o.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(s!==null&&u!=="boolean")throw new o.ErrorCoded(`Found an invalid @propagate value: ${s}`,o.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(h.Util.isValidKeyword(r)&&h.Util.isValidKeyword(h.Util.getContextValueId(s)))throw new o.ErrorCoded(`Illegal keyword alias in term value, found: '${r}': '${h.Util.getContextValueId(s)}'`,o.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(s!==null)switch(u){case"string":if(h.Util.getPrefix(s,e)===r)throw new o.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${r}': '${JSON.stringify(s)}'`,o.ERROR_CODES.CYCLIC_IRI_MAPPING);if(h.Util.isValidIriWeak(r)){if(s==="@type")throw new o.ErrorCoded(`IRIs can not be mapped to @type, found: '${r}': '${s}'`,o.ERROR_CODES.INVALID_IRI_MAPPING);if(h.Util.isValidIri(s)&&s!==new A.JsonLdContextNormalized(e).expandTerm(r))throw new o.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${r}': '${s}'`,o.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!h.Util.isCompactIri(r)&&!("@id"in s)&&(s["@type"]==="@id"?!e["@base"]:!e["@vocab"]))throw new o.ErrorCoded(`Missing @id in context entry: '${r}': '${JSON.stringify(s)}'`,o.ERROR_CODES.INVALID_IRI_MAPPING);for(const E of Object.keys(s)){const R=s[E];if(R)switch(E){case"@id":if(h.Util.isValidKeyword(R)&&R!=="@type"&&R!=="@id"&&R!=="@graph"&&R!=="@nest")throw new o.ErrorCoded(`Illegal keyword alias in term value, found: '${r}': '${JSON.stringify(s)}'`,o.ERROR_CODES.INVALID_IRI_MAPPING);if(h.Util.isValidIriWeak(r)){if(R==="@type")throw new o.ErrorCoded(`IRIs can not be mapped to @type, found: '${r}': '${JSON.stringify(s)}'`,o.ERROR_CODES.INVALID_IRI_MAPPING);if(h.Util.isValidIri(R)&&R!==new A.JsonLdContextNormalized(e).expandTerm(r))throw new o.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${r}': '${JSON.stringify(s)}'`,o.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof R!="string")throw new o.ErrorCoded(`Detected non-string @id in context entry: '${r}': '${JSON.stringify(s)}'`,o.ERROR_CODES.INVALID_IRI_MAPPING);if(h.Util.getPrefix(R,e)===r)throw new o.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${r}': '${JSON.stringify(s)}'`,o.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(s["@container"]==="@type"&&R!=="@id"&&R!=="@vocab")throw new o.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${r}': '${R}'`,o.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof R!="string")throw new o.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(u)}'`,o.ERROR_CODES.INVALID_TYPE_MAPPING);if(R!=="@id"&&R!=="@vocab"&&(t===1||R!=="@json")&&(t===1||R!=="@none")&&(R[0]==="_"||!h.Util.isValidIri(R)))throw new o.ErrorCoded(`A context @type must be an absolute IRI, found: '${r}': '${R}'`,o.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof R=="string"&&s["@id"]&&s["@id"]!==R)throw new o.ErrorCoded(`Found non-matching @id and @reverse term values in '${r}':'${R}' and '${s["@id"]}'`,o.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in s)throw new o.ErrorCoded(`@nest is not allowed in the reverse property '${r}'`,o.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(t===1&&(Object.keys(R).length>1||h.Util.CONTAINERS_1_0.indexOf(Object.keys(R)[0])<0))throw new o.ErrorCoded(`Invalid term @container for '${r}' ('${Object.keys(R)}') in 1.0, must be only one of ${h.Util.CONTAINERS_1_0.join(", ")}`,o.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const m of Object.keys(R)){if(m==="@list"&&s["@reverse"])throw new o.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${r}'`,o.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(h.Util.CONTAINERS.indexOf(m)<0)throw new o.ErrorCoded(`Invalid term @container for '${r}' ('${m}'), must be one of ${h.Util.CONTAINERS.join(", ")}`,o.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":Ze.validateLanguage(R,!0,o.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":Ze.validateDirection(R,!0);break;case"@prefix":if(R!==null&&typeof R!="boolean")throw new o.ErrorCoded(`Found an invalid term @prefix boolean in: '${r}': '${JSON.stringify(s)}'`,o.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in s)&&!h.Util.isValidIri(r))throw new o.ErrorCoded(`Invalid @prefix definition for '${r}' ('${JSON.stringify(s)}'`,o.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(t===1||!s["@container"]||!s["@container"]["@index"])throw new o.ErrorCoded(`Attempt to add illegal key to value object: '${r}': '${JSON.stringify(s)}'`,o.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(h.Util.isPotentialKeyword(R)&&R!=="@nest")throw new o.ErrorCoded(`Found an invalid term @nest value in: '${r}': '${JSON.stringify(s)}'`,o.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new o.ErrorCoded(`Found an invalid term value: '${r}': '${s}'`,o.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(e,t,r){return typeof e=="string"||(r&&!("@base"in e)&&t.parentContext&&typeof t.parentContext=="object"&&"@base"in t.parentContext&&(e["@base"]=t.parentContext["@base"],t.parentContext["@__baseDocument"]&&(e["@__baseDocument"]=!0)),t.baseIRI&&!t.external&&("@base"in e?e["@base"]!==null&&typeof e["@base"]=="string"&&!h.Util.isValidIri(e["@base"])&&(e["@base"]=(0,l.resolve)(e["@base"],t.parentContext&&t.parentContext["@base"]||t.baseIRI)):(e["@base"]=t.baseIRI,e["@__baseDocument"]=!0))),e}normalizeContextIri(e,t){if(!h.Util.isValidIri(e))try{e=(0,l.resolve)(e,t)}catch{throw new Error(`Invalid context IRI: ${e}`)}return this.redirectSchemaOrgHttps&&e.startsWith("http://schema.org")&&(e="https://schema.org/"),e}async parseInnerContexts(e,t,r){for(const s of r??Object.keys(e)){const u=e[s];if(u&&typeof u=="object"&&"@context"in u&&u["@context"]!==null&&!t.ignoreScopedContexts){if(this.validateContext)try{const E=Object.assign(Object.assign({},e),{[s]:Object.assign({},e[s])});delete E[s]["@context"],await this.parse(u["@context"],Object.assign(Object.assign({},t),{external:!1,parentContext:E,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(E){throw new o.ErrorCoded(E.message,o.ERROR_CODES.INVALID_SCOPED_CONTEXT)}e[s]=Object.assign(Object.assign({},u),{"@context":(await this.parse(u["@context"],Object.assign(Object.assign({},t),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:e}))).getContextRaw()})}}return e}async parse(e,t={},r={}){const{baseIRI:s,parentContext:u,external:E,processingMode:R=Ze.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:m,ignoreProtection:g,minimalProcessing:b}=t,v=t.remoteContexts||{};if(Object.keys(v).length>=this.remoteContextsDepthLimit)throw new o.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(v),o.ERROR_CODES.CONTEXT_OVERFLOW);if(e==null){if(!g&&u&&h.Util.hasProtectedTerms(u))throw new o.ErrorCoded("Illegal context nullification when terms are protected",o.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new A.JsonLdContextNormalized(this.applyBaseEntry({},t,!1))}else if(typeof e=="string"){const I=this.normalizeContextIri(e,s),c=this.getOverriddenLoad(I,t);if(c)return new A.JsonLdContextNormalized(c);const B=await this.parse(await this.load(I),Object.assign(Object.assign({},t),{baseIRI:I,external:!0,remoteContexts:Object.assign(Object.assign({},v),{[I]:!0})}));return this.applyBaseEntry(B.getContextRaw(),t,!0),B}else if(Array.isArray(e)){const I=[],c=await Promise.all(e.map((O,$)=>{if(typeof O=="string"){const Y=this.normalizeContextIri(O,s);I[$]=Y;const U=this.getOverriddenLoad(Y,t);return U||this.load(Y)}else return O}));if(b)return new A.JsonLdContextNormalized(c);const B=await c.reduce((O,$,Y)=>O.then(U=>this.parse($,Object.assign(Object.assign({},t),{baseIRI:I[Y]||t.baseIRI,external:!!I[Y]||t.external,parentContext:U.getContextRaw(),remoteContexts:I[Y]?Object.assign(Object.assign({},v),{[I[Y]]:!0}):v}),{skipValidation:Y<c.length-1})),Promise.resolve(new A.JsonLdContextNormalized(u||{})));return this.applyBaseEntry(B.getContextRaw(),t,!0),B}else if(typeof e=="object"){if("@context"in e)return await this.parse(e["@context"],t);if(e=Object.assign({},e),E&&delete e["@base"],this.applyBaseEntry(e,t,!0),this.containersToHash(e),b)return new A.JsonLdContextNormalized(e);let I={};if("@import"in e)if(R>=1.1){if(typeof e["@import"]!="string")throw new o.ErrorCoded("An @import value must be a string, but got "+typeof e["@import"],o.ERROR_CODES.INVALID_IMPORT_VALUE);I=await this.loadImportContext(this.normalizeContextIri(e["@import"],s)),delete e["@import"]}else throw new o.ErrorCoded("Context importing is not supported in JSON-LD 1.0",o.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(I,{processingMode:R},A.defaultExpandOptions);const c=Object.assign(I,e);this.idifyReverseTerms(c),this.normalize(c,{processingMode:R,normalizeLanguageTags:m}),this.applyScopedProtected(c,{processingMode:R},A.defaultExpandOptions);const B=Object.keys(c),O=[];if(typeof u=="object")for(const Y in u)Y in c?O.push(Y):c[Y]=u[Y];await this.parseInnerContexts(c,t,B);const $=new A.JsonLdContextNormalized(c);return(c&&c["@version"]||Ze.DEFAULT_PROCESSING_MODE)>=1.1&&(e["@vocab"]&&typeof e["@vocab"]=="string"||e["@vocab"]==="")&&(u&&"@vocab"in u&&e["@vocab"].indexOf(":")<0?c["@vocab"]=u["@vocab"]+e["@vocab"]:(h.Util.isCompactIri(e["@vocab"])||e["@vocab"]in c)&&(c["@vocab"]=$.expandTerm(e["@vocab"],!0))),this.expandPrefixedTerms($,this.expandContentTypeToBase,B),!g&&u&&R>=1.1&&this.validateKeywordRedefinitions(u,c,A.defaultExpandOptions,O),this.validateContext&&!r.skipValidation&&this.validate(c,{processingMode:R}),$}else throw new o.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${e}`,o.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(e){const t=this.documentCache[e];if(t)return t;let r;try{r=await this.documentLoader.load(e)}catch(s){throw new o.ErrorCoded(`Failed to load remote context ${e}: ${s.message}`,o.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in r))throw new o.ErrorCoded(`Missing @context in remote context at ${e}`,o.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[e]=r["@context"]}getOverriddenLoad(e,t){if(e in(t.remoteContexts||{})){if(t.ignoreRemoteScopedContexts)return e;throw new o.ErrorCoded("Detected a cyclic context inclusion of "+e,o.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(e){let t=await this.load(e);if(typeof t!="object"||Array.isArray(t))throw new o.ErrorCoded("An imported context must be a single object: "+e,o.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in t)throw new o.ErrorCoded("An imported context can not import another context: "+e,o.ERROR_CODES.INVALID_CONTEXT_ENTRY);return t=Object.assign({},t),this.containersToHash(t),t}};return y.DEFAULT_PROCESSING_MODE=1.1,bt.ContextParser=y,bt}var gr={},Nn;function Uo(){return Nn||(Nn=1,Object.defineProperty(gr,"__esModule",{value:!0})),gr}var _r={},On;function Wo(){return On||(On=1,Object.defineProperty(_r,"__esModule",{value:!0})),_r}var Dn;function Le(){return Dn||(Dn=1,function(l){var o=Xe&&Xe.__createBinding||(Object.create?function(A,h,y,i){i===void 0&&(i=y);var e=Object.getOwnPropertyDescriptor(h,y);(!e||("get"in e?!h.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return h[y]}}),Object.defineProperty(A,i,e)}:function(A,h,y,i){i===void 0&&(i=y),A[i]=h[y]}),d=Xe&&Xe.__exportStar||function(A,h){for(var y in A)y!=="default"&&!Object.prototype.hasOwnProperty.call(h,y)&&o(h,A,y)};Object.defineProperty(l,"__esModule",{value:!0}),d(Fo(),l),d(qt(),l),d(lo(),l),d(Uo(),l),d(Wo(),l),d(so(),l),d(yn(),l)}(Xe)),Xe}var Er={exports:{}},Sr={exports:{}},Rr,Ln;function Ee(){if(Ln)return Rr;Ln=1;class l extends Error{constructor(d){if(!Array.isArray(d))throw new TypeError(`Expected input to be an Array, got ${typeof d}`);let A="";for(let h=0;h<d.length;h++)A+=`    ${d[h].stack}
`;super(A),this.name="AggregateError",this.errors=d}}return Rr={AggregateError:l,ArrayIsArray(o){return Array.isArray(o)},ArrayPrototypeIncludes(o,d){return o.includes(d)},ArrayPrototypeIndexOf(o,d){return o.indexOf(d)},ArrayPrototypeJoin(o,d){return o.join(d)},ArrayPrototypeMap(o,d){return o.map(d)},ArrayPrototypePop(o,d){return o.pop(d)},ArrayPrototypePush(o,d){return o.push(d)},ArrayPrototypeSlice(o,d,A){return o.slice(d,A)},Error,FunctionPrototypeCall(o,d,...A){return o.call(d,...A)},FunctionPrototypeSymbolHasInstance(o,d){return Function.prototype[Symbol.hasInstance].call(o,d)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(o,d){return Object.defineProperties(o,d)},ObjectDefineProperty(o,d,A){return Object.defineProperty(o,d,A)},ObjectGetOwnPropertyDescriptor(o,d){return Object.getOwnPropertyDescriptor(o,d)},ObjectKeys(o){return Object.keys(o)},ObjectSetPrototypeOf(o,d){return Object.setPrototypeOf(o,d)},Promise,PromisePrototypeCatch(o,d){return o.catch(d)},PromisePrototypeThen(o,d,A){return o.then(d,A)},PromiseReject(o){return Promise.reject(o)},PromiseResolve(o){return Promise.resolve(o)},ReflectApply:Reflect.apply,RegExpPrototypeTest(o,d){return o.test(d)},SafeSet:Set,String,StringPrototypeSlice(o,d,A){return o.slice(d,A)},StringPrototypeToLowerCase(o){return o.toLowerCase()},StringPrototypeToUpperCase(o){return o.toUpperCase()},StringPrototypeTrim(o){return o.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(o,d,A){return o.set(d,A)},Boolean,Uint8Array},Rr}var Ir={exports:{}},Ar,xn;function fo(){return xn||(xn=1,Ar={format(l,...o){return l.replace(/%([sdifj])/g,function(...[d,A]){const h=o.shift();return A==="f"?h.toFixed(6):A==="j"?JSON.stringify(h):A==="s"&&typeof h=="object"?`${h.constructor!==Object?h.constructor.name:""} {}`.trim():h.toString()})},inspect(l){switch(typeof l){case"string":if(l.includes("'"))if(l.includes('"')){if(!l.includes("`")&&!l.includes("${"))return`\`${l}\``}else return`"${l}"`;return`'${l}'`;case"number":return isNaN(l)?"NaN":Object.is(l,-0)?String(l):l;case"bigint":return`${String(l)}n`;case"boolean":case"undefined":return String(l);case"object":return"{}"}}}),Ar}var vr,Pn;function me(){if(Pn)return vr;Pn=1;const{format:l,inspect:o}=fo(),{AggregateError:d}=Ee(),A=globalThis.AggregateError||d,h=Symbol("kIsNodeError"),y=["string","function","number","object","Function","Object","boolean","bigint","symbol"],i=/^([A-Z][a-z0-9]*)+$/,e="__node_internal_",t={};function r(b,v){if(!b)throw new t.ERR_INTERNAL_ASSERTION(v)}function s(b){let v="",I=b.length;const c=b[0]==="-"?1:0;for(;I>=c+4;I-=3)v=`_${b.slice(I-3,I)}${v}`;return`${b.slice(0,I)}${v}`}function u(b,v,I){if(typeof v=="function")return r(v.length<=I.length,`Code: ${b}; The provided arguments length (${I.length}) does not match the required ones (${v.length}).`),v(...I);const c=(v.match(/%[dfijoOs]/g)||[]).length;return r(c===I.length,`Code: ${b}; The provided arguments length (${I.length}) does not match the required ones (${c}).`),I.length===0?v:l(v,...I)}function E(b,v,I){I||(I=Error);class c extends I{constructor(...O){super(u(b,v,O))}toString(){return`${this.name} [${b}]: ${this.message}`}}Object.defineProperties(c.prototype,{name:{value:I.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${b}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),c.prototype.code=b,c.prototype[h]=!0,t[b]=c}function R(b){const v=e+b.name;return Object.defineProperty(b,"name",{value:v}),b}function m(b,v){if(b&&v&&b!==v){if(Array.isArray(v.errors))return v.errors.push(b),v;const I=new A([v,b],v.message);return I.code=v.code,I}return b||v}class g extends Error{constructor(v="The operation was aborted",I=void 0){if(I!==void 0&&typeof I!="object")throw new t.ERR_INVALID_ARG_TYPE("options","Object",I);super(v,I),this.code="ABORT_ERR",this.name="AbortError"}}return E("ERR_ASSERTION","%s",Error),E("ERR_INVALID_ARG_TYPE",(b,v,I)=>{r(typeof b=="string","'name' must be a string"),Array.isArray(v)||(v=[v]);let c="The ";b.endsWith(" argument")?c+=`${b} `:c+=`"${b}" ${b.includes(".")?"property":"argument"} `,c+="must be ";const B=[],O=[],$=[];for(const U of v)r(typeof U=="string","All expected entries have to be of type string"),y.includes(U)?B.push(U.toLowerCase()):i.test(U)?O.push(U):(r(U!=="object",'The value "object" should be written as "Object"'),$.push(U));if(O.length>0){const U=B.indexOf("object");U!==-1&&(B.splice(B,U,1),O.push("Object"))}if(B.length>0){switch(B.length){case 1:c+=`of type ${B[0]}`;break;case 2:c+=`one of type ${B[0]} or ${B[1]}`;break;default:{const U=B.pop();c+=`one of type ${B.join(", ")}, or ${U}`}}(O.length>0||$.length>0)&&(c+=" or ")}if(O.length>0){switch(O.length){case 1:c+=`an instance of ${O[0]}`;break;case 2:c+=`an instance of ${O[0]} or ${O[1]}`;break;default:{const U=O.pop();c+=`an instance of ${O.join(", ")}, or ${U}`}}$.length>0&&(c+=" or ")}switch($.length){case 0:break;case 1:$[0].toLowerCase()!==$[0]&&(c+="an "),c+=`${$[0]}`;break;case 2:c+=`one of ${$[0]} or ${$[1]}`;break;default:{const U=$.pop();c+=`one of ${$.join(", ")}, or ${U}`}}if(I==null)c+=`. Received ${I}`;else if(typeof I=="function"&&I.name)c+=`. Received function ${I.name}`;else if(typeof I=="object"){var Y;if((Y=I.constructor)!==null&&Y!==void 0&&Y.name)c+=`. Received an instance of ${I.constructor.name}`;else{const U=o(I,{depth:-1});c+=`. Received ${U}`}}else{let U=o(I,{colors:!1});U.length>25&&(U=`${U.slice(0,25)}...`),c+=`. Received type ${typeof I} (${U})`}return c},TypeError),E("ERR_INVALID_ARG_VALUE",(b,v,I="is invalid")=>{let c=o(v);return c.length>128&&(c=c.slice(0,128)+"..."),`The ${b.includes(".")?"property":"argument"} '${b}' ${I}. Received ${c}`},TypeError),E("ERR_INVALID_RETURN_VALUE",(b,v,I)=>{var c;const B=I!=null&&(c=I.constructor)!==null&&c!==void 0&&c.name?`instance of ${I.constructor.name}`:`type ${typeof I}`;return`Expected ${b} to be returned from the "${v}" function but got ${B}.`},TypeError),E("ERR_MISSING_ARGS",(...b)=>{r(b.length>0,"At least one arg needs to be specified");let v;const I=b.length;switch(b=(Array.isArray(b)?b:[b]).map(c=>`"${c}"`).join(" or "),I){case 1:v+=`The ${b[0]} argument`;break;case 2:v+=`The ${b[0]} and ${b[1]} arguments`;break;default:{const c=b.pop();v+=`The ${b.join(", ")}, and ${c} arguments`}break}return`${v} must be specified`},TypeError),E("ERR_OUT_OF_RANGE",(b,v,I)=>{r(v,'Missing "range" argument');let c;if(Number.isInteger(I)&&Math.abs(I)>2**32)c=s(String(I));else if(typeof I=="bigint"){c=String(I);const B=BigInt(2)**BigInt(32);(I>B||I<-B)&&(c=s(c)),c+="n"}else c=o(I);return`The value of "${b}" is out of range. It must be ${v}. Received ${c}`},RangeError),E("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),E("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),E("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),E("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),E("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),E("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),E("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),E("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),E("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),E("ERR_STREAM_WRITE_AFTER_END","write after end",Error),E("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),vr={AbortError:g,aggregateTwoErrors:R(m),hideStackFrames:R,codes:t},vr}var kn;function Ce(){return kn||(kn=1,function(l){const o=Oe(),{format:d,inspect:A}=fo(),{codes:{ERR_INVALID_ARG_TYPE:h}}=me(),{kResistStopPropagation:y,AggregateError:i,SymbolDispose:e}=Ee(),t=globalThis.AbortSignal||Pe().AbortSignal,r=globalThis.AbortController||Pe().AbortController,s=Object.getPrototypeOf(async function(){}).constructor,u=globalThis.Blob||o.Blob,E=typeof u<"u"?function(b){return b instanceof u}:function(b){return!1},R=(g,b)=>{if(g!==void 0&&(g===null||typeof g!="object"||!("aborted"in g)))throw new h(b,"AbortSignal",g)},m=(g,b)=>{if(typeof g!="function")throw new h(b,"Function",g)};l.exports={AggregateError:i,kEmptyObject:Object.freeze({}),once(g){let b=!1;return function(...v){b||(b=!0,g.apply(this,v))}},createDeferredPromise:function(){let g,b;return{promise:new Promise((I,c)=>{g=I,b=c}),resolve:g,reject:b}},promisify(g){return new Promise((b,v)=>{g((I,...c)=>I?v(I):b(...c))})},debuglog(){return function(){}},format:d,inspect:A,types:{isAsyncFunction(g){return g instanceof s},isArrayBufferView(g){return ArrayBuffer.isView(g)}},isBlob:E,deprecate(g,b){return g},addAbortListener:Ue().addAbortListener||function(b,v){if(b===void 0)throw new h("signal","AbortSignal",b);R(b,"signal"),m(v,"listener");let I;return b.aborted?queueMicrotask(()=>v()):(b.addEventListener("abort",v,{__proto__:null,once:!0,[y]:!0}),I=()=>{b.removeEventListener("abort",v)}),{__proto__:null,[e](){var c;(c=I)===null||c===void 0||c()}}},AbortSignalAny:t.any||function(b){if(b.length===1)return b[0];const v=new r,I=()=>v.abort();return b.forEach(c=>{R(c,"signals"),c.addEventListener("abort",I,{once:!0})}),v.signal.addEventListener("abort",()=>{b.forEach(c=>c.removeEventListener("abort",I))},{once:!0}),v.signal}},l.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(Ir)),Ir.exports}var Yt={},mr,Mn;function Kt(){if(Mn)return mr;Mn=1;const{ArrayIsArray:l,ArrayPrototypeIncludes:o,ArrayPrototypeJoin:d,ArrayPrototypeMap:A,NumberIsInteger:h,NumberIsNaN:y,NumberMAX_SAFE_INTEGER:i,NumberMIN_SAFE_INTEGER:e,NumberParseInt:t,ObjectPrototypeHasOwnProperty:r,RegExpPrototypeExec:s,String:u,StringPrototypeToUpperCase:E,StringPrototypeTrim:R}=Ee(),{hideStackFrames:m,codes:{ERR_SOCKET_BAD_PORT:g,ERR_INVALID_ARG_TYPE:b,ERR_INVALID_ARG_VALUE:v,ERR_OUT_OF_RANGE:I,ERR_UNKNOWN_SIGNAL:c}}=me(),{normalizeEncoding:B}=Ce(),{isAsyncFunction:O,isArrayBufferView:$}=Ce().types,Y={};function U(p){return p===(p|0)}function le(p){return p===p>>>0}const N=/^[0-7]+$/,T="must be a 32-bit unsigned integer or an octal string";function V(p,j,H){if(typeof p>"u"&&(p=H),typeof p=="string"){if(s(N,p)===null)throw new v(j,p,T);p=t(p,8)}return Q(p,j),p}const S=m((p,j,H=e,x=i)=>{if(typeof p!="number")throw new b(j,"number",p);if(!h(p))throw new I(j,"an integer",p);if(p<H||p>x)throw new I(j,`>= ${H} && <= ${x}`,p)}),F=m((p,j,H=-2147483648,x=2147483647)=>{if(typeof p!="number")throw new b(j,"number",p);if(!h(p))throw new I(j,"an integer",p);if(p<H||p>x)throw new I(j,`>= ${H} && <= ${x}`,p)}),Q=m((p,j,H=!1)=>{if(typeof p!="number")throw new b(j,"number",p);if(!h(p))throw new I(j,"an integer",p);const x=H?1:0,fe=4294967295;if(p<x||p>fe)throw new I(j,`>= ${x} && <= ${fe}`,p)});function Z(p,j){if(typeof p!="string")throw new b(j,"string",p)}function se(p,j,H=void 0,x){if(typeof p!="number")throw new b(j,"number",p);if(H!=null&&p<H||x!=null&&p>x||(H!=null||x!=null)&&y(p))throw new I(j,`${H!=null?`>= ${H}`:""}${H!=null&&x!=null?" && ":""}${x!=null?`<= ${x}`:""}`,p)}const P=m((p,j,H)=>{if(!o(H,p)){const fe="must be one of: "+d(A(H,be=>typeof be=="string"?`'${be}'`:u(be)),", ");throw new v(j,p,fe)}});function ee(p,j){if(typeof p!="boolean")throw new b(j,"boolean",p)}function f(p,j,H){return p==null||!r(p,j)?H:p[j]}const k=m((p,j,H=null)=>{const x=f(H,"allowArray",!1),fe=f(H,"allowFunction",!1);if(!f(H,"nullable",!1)&&p===null||!x&&l(p)||typeof p!="object"&&(!fe||typeof p!="function"))throw new b(j,"Object",p)}),z=m((p,j)=>{if(p!=null&&typeof p!="object"&&typeof p!="function")throw new b(j,"a dictionary",p)}),L=m((p,j,H=0)=>{if(!l(p))throw new b(j,"Array",p);if(p.length<H){const x=`must be longer than ${H}`;throw new v(j,p,x)}});function re(p,j){L(p,j);for(let H=0;H<p.length;H++)Z(p[H],`${j}[${H}]`)}function ne(p,j){L(p,j);for(let H=0;H<p.length;H++)ee(p[H],`${j}[${H}]`)}function de(p,j){L(p,j);for(let H=0;H<p.length;H++){const x=p[H],fe=`${j}[${H}]`;if(x==null)throw new b(fe,"AbortSignal",x);oe(x,fe)}}function ae(p,j="signal"){if(Z(p,j),Y[p]===void 0)throw Y[E(p)]!==void 0?new c(p+" (signals must use all capital letters)"):new c(p)}const D=m((p,j="buffer")=>{if(!$(p))throw new b(j,["Buffer","TypedArray","DataView"],p)});function M(p,j){const H=B(j),x=p.length;if(H==="hex"&&x%2!==0)throw new v("encoding",j,`is invalid for data of length ${x}`)}function X(p,j="Port",H=!0){if(typeof p!="number"&&typeof p!="string"||typeof p=="string"&&R(p).length===0||+p!==+p>>>0||p>65535||p===0&&!H)throw new g(j,p,H);return p|0}const oe=m((p,j)=>{if(p!==void 0&&(p===null||typeof p!="object"||!("aborted"in p)))throw new b(j,"AbortSignal",p)}),ie=m((p,j)=>{if(typeof p!="function")throw new b(j,"Function",p)}),w=m((p,j)=>{if(typeof p!="function"||O(p))throw new b(j,"Function",p)}),_=m((p,j)=>{if(p!==void 0)throw new b(j,"undefined",p)});function C(p,j,H){if(!o(H,p))throw new b(j,`('${d(H,"|")}')`,p)}const q=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function G(p,j){if(typeof p>"u"||!s(q,p))throw new v(j,p,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function W(p){if(typeof p=="string")return G(p,"hints"),p;if(l(p)){const j=p.length;let H="";if(j===0)return H;for(let x=0;x<j;x++){const fe=p[x];G(fe,"hints"),H+=fe,x!==j-1&&(H+=", ")}return H}throw new v("hints",p,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return mr={isInt32:U,isUint32:le,parseFileMode:V,validateArray:L,validateStringArray:re,validateBooleanArray:ne,validateAbortSignalArray:de,validateBoolean:ee,validateBuffer:D,validateDictionary:z,validateEncoding:M,validateFunction:ie,validateInt32:F,validateInteger:S,validateNumber:se,validateObject:k,validateOneOf:P,validatePlainFunction:w,validatePort:X,validateSignalName:ae,validateString:Z,validateUint32:Q,validateUndefined:_,validateUnion:C,validateAbortSignal:oe,validateLinkHeaderValue:W},mr}var zt={exports:{}},Tr,jn;function Ve(){if(jn)return Tr;jn=1;const{SymbolAsyncIterator:l,SymbolIterator:o,SymbolFor:d}=Ee(),A=d("nodejs.stream.destroyed"),h=d("nodejs.stream.errored"),y=d("nodejs.stream.readable"),i=d("nodejs.stream.writable"),e=d("nodejs.stream.disturbed"),t=d("nodejs.webstream.isClosedPromise"),r=d("nodejs.webstream.controllerErrorFunction");function s(f,k=!1){var z;return!!(f&&typeof f.pipe=="function"&&typeof f.on=="function"&&(!k||typeof f.pause=="function"&&typeof f.resume=="function")&&(!f._writableState||((z=f._readableState)===null||z===void 0?void 0:z.readable)!==!1)&&(!f._writableState||f._readableState))}function u(f){var k;return!!(f&&typeof f.write=="function"&&typeof f.on=="function"&&(!f._readableState||((k=f._writableState)===null||k===void 0?void 0:k.writable)!==!1))}function E(f){return!!(f&&typeof f.pipe=="function"&&f._readableState&&typeof f.on=="function"&&typeof f.write=="function")}function R(f){return f&&(f._readableState||f._writableState||typeof f.write=="function"&&typeof f.on=="function"||typeof f.pipe=="function"&&typeof f.on=="function")}function m(f){return!!(f&&!R(f)&&typeof f.pipeThrough=="function"&&typeof f.getReader=="function"&&typeof f.cancel=="function")}function g(f){return!!(f&&!R(f)&&typeof f.getWriter=="function"&&typeof f.abort=="function")}function b(f){return!!(f&&!R(f)&&typeof f.readable=="object"&&typeof f.writable=="object")}function v(f){return m(f)||g(f)||b(f)}function I(f,k){return f==null?!1:k===!0?typeof f[l]=="function":k===!1?typeof f[o]=="function":typeof f[l]=="function"||typeof f[o]=="function"}function c(f){if(!R(f))return null;const k=f._writableState,z=f._readableState,L=k||z;return!!(f.destroyed||f[A]||L!=null&&L.destroyed)}function B(f){if(!u(f))return null;if(f.writableEnded===!0)return!0;const k=f._writableState;return k!=null&&k.errored?!1:typeof(k==null?void 0:k.ended)!="boolean"?null:k.ended}function O(f,k){if(!u(f))return null;if(f.writableFinished===!0)return!0;const z=f._writableState;return z!=null&&z.errored?!1:typeof(z==null?void 0:z.finished)!="boolean"?null:!!(z.finished||k===!1&&z.ended===!0&&z.length===0)}function $(f){if(!s(f))return null;if(f.readableEnded===!0)return!0;const k=f._readableState;return!k||k.errored?!1:typeof(k==null?void 0:k.ended)!="boolean"?null:k.ended}function Y(f,k){if(!s(f))return null;const z=f._readableState;return z!=null&&z.errored?!1:typeof(z==null?void 0:z.endEmitted)!="boolean"?null:!!(z.endEmitted||k===!1&&z.ended===!0&&z.length===0)}function U(f){return f&&f[y]!=null?f[y]:typeof(f==null?void 0:f.readable)!="boolean"?null:c(f)?!1:s(f)&&f.readable&&!Y(f)}function le(f){return f&&f[i]!=null?f[i]:typeof(f==null?void 0:f.writable)!="boolean"?null:c(f)?!1:u(f)&&f.writable&&!B(f)}function N(f,k){return R(f)?c(f)?!0:!((k==null?void 0:k.readable)!==!1&&U(f)||(k==null?void 0:k.writable)!==!1&&le(f)):null}function T(f){var k,z;return R(f)?f.writableErrored?f.writableErrored:(k=(z=f._writableState)===null||z===void 0?void 0:z.errored)!==null&&k!==void 0?k:null:null}function V(f){var k,z;return R(f)?f.readableErrored?f.readableErrored:(k=(z=f._readableState)===null||z===void 0?void 0:z.errored)!==null&&k!==void 0?k:null:null}function S(f){if(!R(f))return null;if(typeof f.closed=="boolean")return f.closed;const k=f._writableState,z=f._readableState;return typeof(k==null?void 0:k.closed)=="boolean"||typeof(z==null?void 0:z.closed)=="boolean"?(k==null?void 0:k.closed)||(z==null?void 0:z.closed):typeof f._closed=="boolean"&&F(f)?f._closed:null}function F(f){return typeof f._closed=="boolean"&&typeof f._defaultKeepAlive=="boolean"&&typeof f._removedConnection=="boolean"&&typeof f._removedContLen=="boolean"}function Q(f){return typeof f._sent100=="boolean"&&F(f)}function Z(f){var k;return typeof f._consuming=="boolean"&&typeof f._dumped=="boolean"&&((k=f.req)===null||k===void 0?void 0:k.upgradeOrConnect)===void 0}function se(f){if(!R(f))return null;const k=f._writableState,z=f._readableState,L=k||z;return!L&&Q(f)||!!(L&&L.autoDestroy&&L.emitClose&&L.closed===!1)}function P(f){var k;return!!(f&&((k=f[e])!==null&&k!==void 0?k:f.readableDidRead||f.readableAborted))}function ee(f){var k,z,L,re,ne,de,ae,D,M,X;return!!(f&&((k=(z=(L=(re=(ne=(de=f[h])!==null&&de!==void 0?de:f.readableErrored)!==null&&ne!==void 0?ne:f.writableErrored)!==null&&re!==void 0?re:(ae=f._readableState)===null||ae===void 0?void 0:ae.errorEmitted)!==null&&L!==void 0?L:(D=f._writableState)===null||D===void 0?void 0:D.errorEmitted)!==null&&z!==void 0?z:(M=f._readableState)===null||M===void 0?void 0:M.errored)!==null&&k!==void 0?k:!((X=f._writableState)===null||X===void 0)&&X.errored))}return Tr={isDestroyed:c,kIsDestroyed:A,isDisturbed:P,kIsDisturbed:e,isErrored:ee,kIsErrored:h,isReadable:U,kIsReadable:y,kIsClosedPromise:t,kControllerErrorFunction:r,kIsWritable:i,isClosed:S,isDuplexNodeStream:E,isFinished:N,isIterable:I,isReadableNodeStream:s,isReadableStream:m,isReadableEnded:$,isReadableFinished:Y,isReadableErrored:V,isNodeStream:R,isWebStream:v,isWritable:le,isWritableNodeStream:u,isWritableStream:g,isWritableEnded:B,isWritableFinished:O,isWritableErrored:T,isServerRequest:Z,isServerResponse:Q,willEmitClose:se,isTransformStream:b},Tr}var Vn;function We(){if(Vn)return zt.exports;Vn=1;const l=De(),{AbortError:o,codes:d}=me(),{ERR_INVALID_ARG_TYPE:A,ERR_STREAM_PREMATURE_CLOSE:h}=d,{kEmptyObject:y,once:i}=Ce(),{validateAbortSignal:e,validateFunction:t,validateObject:r,validateBoolean:s}=Kt(),{Promise:u,PromisePrototypeThen:E,SymbolDispose:R}=Ee(),{isClosed:m,isReadable:g,isReadableNodeStream:b,isReadableStream:v,isReadableFinished:I,isReadableErrored:c,isWritable:B,isWritableNodeStream:O,isWritableStream:$,isWritableFinished:Y,isWritableErrored:U,isNodeStream:le,willEmitClose:N,kIsClosedPromise:T}=Ve();let V;function S(P){return P.setHeader&&typeof P.abort=="function"}const F=()=>{};function Q(P,ee,f){var k,z;if(arguments.length===2?(f=ee,ee=y):ee==null?ee=y:r(ee,"options"),t(f,"callback"),e(ee.signal,"options.signal"),f=i(f),v(P)||$(P))return Z(P,ee,f);if(!le(P))throw new A("stream",["ReadableStream","WritableStream","Stream"],P);const L=(k=ee.readable)!==null&&k!==void 0?k:b(P),re=(z=ee.writable)!==null&&z!==void 0?z:O(P),ne=P._writableState,de=P._readableState,ae=()=>{P.writable||X()};let D=N(P)&&b(P)===L&&O(P)===re,M=Y(P,!1);const X=()=>{M=!0,P.destroyed&&(D=!1),!(D&&(!P.readable||L))&&(!L||oe)&&f.call(P)};let oe=I(P,!1);const ie=()=>{oe=!0,P.destroyed&&(D=!1),!(D&&(!P.writable||re))&&(!re||M)&&f.call(P)},w=p=>{f.call(P,p)};let _=m(P);const C=()=>{_=!0;const p=U(P)||c(P);if(p&&typeof p!="boolean")return f.call(P,p);if(L&&!oe&&b(P,!0)&&!I(P,!1))return f.call(P,new h);if(re&&!M&&!Y(P,!1))return f.call(P,new h);f.call(P)},q=()=>{_=!0;const p=U(P)||c(P);if(p&&typeof p!="boolean")return f.call(P,p);f.call(P)},G=()=>{P.req.on("finish",X)};S(P)?(P.on("complete",X),D||P.on("abort",C),P.req?G():P.on("request",G)):re&&!ne&&(P.on("end",ae),P.on("close",ae)),!D&&typeof P.aborted=="boolean"&&P.on("aborted",C),P.on("end",ie),P.on("finish",X),ee.error!==!1&&P.on("error",w),P.on("close",C),_?l.nextTick(C):ne!=null&&ne.errorEmitted||de!=null&&de.errorEmitted?D||l.nextTick(q):(!L&&(!D||g(P))&&(M||B(P)===!1)||!re&&(!D||B(P))&&(oe||g(P)===!1)||de&&P.req&&P.aborted)&&l.nextTick(q);const W=()=>{f=F,P.removeListener("aborted",C),P.removeListener("complete",X),P.removeListener("abort",C),P.removeListener("request",G),P.req&&P.req.removeListener("finish",X),P.removeListener("end",ae),P.removeListener("close",ae),P.removeListener("finish",X),P.removeListener("end",ie),P.removeListener("error",w),P.removeListener("close",C)};if(ee.signal&&!_){const p=()=>{const j=f;W(),j.call(P,new o(void 0,{cause:ee.signal.reason}))};if(ee.signal.aborted)l.nextTick(p);else{V=V||Ce().addAbortListener;const j=V(ee.signal,p),H=f;f=i((...x)=>{j[R](),H.apply(P,x)})}}return W}function Z(P,ee,f){let k=!1,z=F;if(ee.signal)if(z=()=>{k=!0,f.call(P,new o(void 0,{cause:ee.signal.reason}))},ee.signal.aborted)l.nextTick(z);else{V=V||Ce().addAbortListener;const re=V(ee.signal,z),ne=f;f=i((...de)=>{re[R](),ne.apply(P,de)})}const L=(...re)=>{k||l.nextTick(()=>f.apply(P,re))};return E(P[T].promise,L,L),F}function se(P,ee){var f;let k=!1;return ee===null&&(ee=y),(f=ee)!==null&&f!==void 0&&f.cleanup&&(s(ee.cleanup,"cleanup"),k=ee.cleanup),new u((z,L)=>{const re=Q(P,ee,ne=>{k&&re(),ne?L(ne):z()})})}return zt.exports=Q,zt.exports.finished=se,zt.exports}var Cr,$n;function rt(){if($n)return Cr;$n=1;const l=De(),{aggregateTwoErrors:o,codes:{ERR_MULTIPLE_CALLBACK:d},AbortError:A}=me(),{Symbol:h}=Ee(),{kIsDestroyed:y,isDestroyed:i,isFinished:e,isServerRequest:t}=Ve(),r=h("kDestroy"),s=h("kConstruct");function u(N,T,V){N&&(N.stack,T&&!T.errored&&(T.errored=N),V&&!V.errored&&(V.errored=N))}function E(N,T){const V=this._readableState,S=this._writableState,F=S||V;return S!=null&&S.destroyed||V!=null&&V.destroyed?(typeof T=="function"&&T(),this):(u(N,S,V),S&&(S.destroyed=!0),V&&(V.destroyed=!0),F.constructed?R(this,N,T):this.once(r,function(Q){R(this,o(Q,N),T)}),this)}function R(N,T,V){let S=!1;function F(Q){if(S)return;S=!0;const Z=N._readableState,se=N._writableState;u(Q,se,Z),se&&(se.closed=!0),Z&&(Z.closed=!0),typeof V=="function"&&V(Q),Q?l.nextTick(m,N,Q):l.nextTick(g,N)}try{N._destroy(T||null,F)}catch(Q){F(Q)}}function m(N,T){b(N,T),g(N)}function g(N){const T=N._readableState,V=N._writableState;V&&(V.closeEmitted=!0),T&&(T.closeEmitted=!0),(V!=null&&V.emitClose||T!=null&&T.emitClose)&&N.emit("close")}function b(N,T){const V=N._readableState,S=N._writableState;S!=null&&S.errorEmitted||V!=null&&V.errorEmitted||(S&&(S.errorEmitted=!0),V&&(V.errorEmitted=!0),N.emit("error",T))}function v(){const N=this._readableState,T=this._writableState;N&&(N.constructed=!0,N.closed=!1,N.closeEmitted=!1,N.destroyed=!1,N.errored=null,N.errorEmitted=!1,N.reading=!1,N.ended=N.readable===!1,N.endEmitted=N.readable===!1),T&&(T.constructed=!0,T.destroyed=!1,T.closed=!1,T.closeEmitted=!1,T.errored=null,T.errorEmitted=!1,T.finalCalled=!1,T.prefinished=!1,T.ended=T.writable===!1,T.ending=T.writable===!1,T.finished=T.writable===!1)}function I(N,T,V){const S=N._readableState,F=N._writableState;if(F!=null&&F.destroyed||S!=null&&S.destroyed)return this;S!=null&&S.autoDestroy||F!=null&&F.autoDestroy?N.destroy(T):T&&(T.stack,F&&!F.errored&&(F.errored=T),S&&!S.errored&&(S.errored=T),V?l.nextTick(b,N,T):b(N,T))}function c(N,T){if(typeof N._construct!="function")return;const V=N._readableState,S=N._writableState;V&&(V.constructed=!1),S&&(S.constructed=!1),N.once(s,T),!(N.listenerCount(s)>1)&&l.nextTick(B,N)}function B(N){let T=!1;function V(S){if(T){I(N,S??new d);return}T=!0;const F=N._readableState,Q=N._writableState,Z=Q||F;F&&(F.constructed=!0),Q&&(Q.constructed=!0),Z.destroyed?N.emit(r,S):S?I(N,S,!0):l.nextTick(O,N)}try{N._construct(S=>{l.nextTick(V,S)})}catch(S){l.nextTick(V,S)}}function O(N){N.emit(s)}function $(N){return(N==null?void 0:N.setHeader)&&typeof N.abort=="function"}function Y(N){N.emit("close")}function U(N,T){N.emit("error",T),l.nextTick(Y,N)}function le(N,T){!N||i(N)||(!T&&!e(N)&&(T=new A),t(N)?(N.socket=null,N.destroy(T)):$(N)?N.abort():$(N.req)?N.req.abort():typeof N.destroy=="function"?N.destroy(T):typeof N.close=="function"?N.close():T?l.nextTick(U,N,T):l.nextTick(Y,N),N.destroyed||(N[y]=!0))}return Cr={construct:c,destroyer:le,destroy:E,undestroy:v,errorOrDestroy:I},Cr}var Nr,Fn;function pn(){if(Fn)return Nr;Fn=1;const{ArrayIsArray:l,ObjectSetPrototypeOf:o}=Ee(),{EventEmitter:d}=Ue();function A(y){d.call(this,y)}o(A.prototype,d.prototype),o(A,d),A.prototype.pipe=function(y,i){const e=this;function t(g){y.writable&&y.write(g)===!1&&e.pause&&e.pause()}e.on("data",t);function r(){e.readable&&e.resume&&e.resume()}y.on("drain",r),!y._isStdio&&(!i||i.end!==!1)&&(e.on("end",u),e.on("close",E));let s=!1;function u(){s||(s=!0,y.end())}function E(){s||(s=!0,typeof y.destroy=="function"&&y.destroy())}function R(g){m(),d.listenerCount(this,"error")===0&&this.emit("error",g)}h(e,"error",R),h(y,"error",R);function m(){e.removeListener("data",t),y.removeListener("drain",r),e.removeListener("end",u),e.removeListener("close",E),e.removeListener("error",R),y.removeListener("error",R),e.removeListener("end",m),e.removeListener("close",m),y.removeListener("close",m)}return e.on("end",m),e.on("close",m),y.on("close",m),y.emit("pipe",e),y};function h(y,i,e){if(typeof y.prependListener=="function")return y.prependListener(i,e);!y._events||!y._events[i]?y.on(i,e):l(y._events[i])?y._events[i].unshift(e):y._events[i]=[e,y._events[i]]}return Nr={Stream:A,prependListener:h},Nr}var Or={exports:{}},Un;function Zt(){return Un||(Un=1,function(l){const{SymbolDispose:o}=Ee(),{AbortError:d,codes:A}=me(),{isNodeStream:h,isWebStream:y,kControllerErrorFunction:i}=Ve(),e=We(),{ERR_INVALID_ARG_TYPE:t}=A;let r;const s=(u,E)=>{if(typeof u!="object"||!("aborted"in u))throw new t(E,"AbortSignal",u)};l.exports.addAbortSignal=function(E,R){if(s(E,"signal"),!h(R)&&!y(R))throw new t("stream",["ReadableStream","WritableStream","Stream"],R);return l.exports.addAbortSignalNoValidate(E,R)},l.exports.addAbortSignalNoValidate=function(u,E){if(typeof u!="object"||!("aborted"in u))return E;const R=h(E)?()=>{E.destroy(new d(void 0,{cause:u.reason}))}:()=>{E[i](new d(void 0,{cause:u.reason}))};if(u.aborted)R();else{r=r||Ce().addAbortListener;const m=r(u,R);e(E,m[o])}return E}}(Or)),Or.exports}var Dr,Wn;function Ho(){if(Wn)return Dr;Wn=1;const{StringPrototypeSlice:l,SymbolIterator:o,TypedArrayPrototypeSet:d,Uint8Array:A}=Ee(),{Buffer:h}=Oe(),{inspect:y}=Ce();return Dr=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length}shift(){if(this.length===0)return;const e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let t=this.head,r=""+t.data;for(;(t=t.next)!==null;)r+=e+t.data;return r}concat(e){if(this.length===0)return h.alloc(0);const t=h.allocUnsafe(e>>>0);let r=this.head,s=0;for(;r;)d(t,r.data,s),s+=r.data.length,r=r.next;return t}consume(e,t){const r=this.head.data;if(e<r.length){const s=r.slice(0,e);return this.head.data=r.slice(e),s}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[o](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",r=this.head,s=0;do{const u=r.data;if(e>u.length)t+=u,e-=u.length;else{e===u.length?(t+=u,++s,r.next?this.head=r.next:this.head=this.tail=null):(t+=l(u,0,e),this.head=r,r.data=l(u,e));break}++s}while((r=r.next)!==null);return this.length-=s,t}_getBuffer(e){const t=h.allocUnsafe(e),r=e;let s=this.head,u=0;do{const E=s.data;if(e>E.length)d(t,E,r-e),e-=E.length;else{e===E.length?(d(t,E,r-e),++u,s.next?this.head=s.next:this.head=this.tail=null):(d(t,new A(E.buffer,E.byteOffset,e),r-e),this.head=s,s.data=E.slice(e));break}++u}while((s=s.next)!==null);return this.length-=u,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return y(this,{...t,depth:0,customInspect:!1})}},Dr}var Lr,Hn;function er(){if(Hn)return Lr;Hn=1;const{MathFloor:l,NumberIsInteger:o}=Ee(),{validateInteger:d}=Kt(),{ERR_INVALID_ARG_VALUE:A}=me().codes;let h=16*1024,y=16;function i(s,u,E){return s.highWaterMark!=null?s.highWaterMark:u?s[E]:null}function e(s){return s?y:h}function t(s,u){d(u,"value",0),s?y=u:h=u}function r(s,u,E,R){const m=i(u,R,E);if(m!=null){if(!o(m)||m<0){const g=R?`options.${E}`:"options.highWaterMark";throw new A(g,m)}return l(m)}return e(s.objectMode)}return Lr={getHighWaterMark:r,getDefaultHighWaterMark:e,setDefaultHighWaterMark:t},Lr}var xr,Gn;function uo(){if(Gn)return xr;Gn=1;const l=De(),{PromisePrototypeThen:o,SymbolAsyncIterator:d,SymbolIterator:A}=Ee(),{Buffer:h}=Oe(),{ERR_INVALID_ARG_TYPE:y,ERR_STREAM_NULL_VALUES:i}=me().codes;function e(t,r,s){let u;if(typeof r=="string"||r instanceof h)return new t({objectMode:!0,...s,read(){this.push(r),this.push(null)}});let E;if(r&&r[d])E=!0,u=r[d]();else if(r&&r[A])E=!1,u=r[A]();else throw new y("iterable",["Iterable"],r);const R=new t({objectMode:!0,highWaterMark:1,...s});let m=!1;R._read=function(){m||(m=!0,b())},R._destroy=function(v,I){o(g(v),()=>l.nextTick(I,v),c=>l.nextTick(I,c||v))};async function g(v){const I=v!=null,c=typeof u.throw=="function";if(I&&c){const{value:B,done:O}=await u.throw(v);if(await B,O)return}if(typeof u.return=="function"){const{value:B}=await u.return();await B}}async function b(){for(;;){try{const{value:v,done:I}=E?await u.next():u.next();if(I)R.push(null);else{const c=v&&typeof v.then=="function"?await v:v;if(c===null)throw m=!1,new i;if(R.push(c))continue;m=!1}}catch(v){R.destroy(v)}break}}return R}return xr=e,xr}var Pr,Bn;function tr(){if(Bn)return Pr;Bn=1;const l=De(),{ArrayPrototypeIndexOf:o,NumberIsInteger:d,NumberIsNaN:A,NumberParseInt:h,ObjectDefineProperties:y,ObjectKeys:i,ObjectSetPrototypeOf:e,Promise:t,SafeSet:r,SymbolAsyncDispose:s,SymbolAsyncIterator:u,Symbol:E}=Ee();Pr=x,x.ReadableState=H;const{EventEmitter:R}=Ue(),{Stream:m,prependListener:g}=pn(),{Buffer:b}=Oe(),{addAbortSignal:v}=Zt(),I=We();let c=Ce().debuglog("stream",n=>{c=n});const B=Ho(),O=rt(),{getHighWaterMark:$,getDefaultHighWaterMark:Y}=er(),{aggregateTwoErrors:U,codes:{ERR_INVALID_ARG_TYPE:le,ERR_METHOD_NOT_IMPLEMENTED:N,ERR_OUT_OF_RANGE:T,ERR_STREAM_PUSH_AFTER_EOF:V,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:S},AbortError:F}=me(),{validateObject:Q}=Kt(),Z=E("kPaused"),{StringDecoder:se}=oo(),P=uo();e(x.prototype,m.prototype),e(x,m);const ee=()=>{},{errorOrDestroy:f}=O,k=1,z=2,L=4,re=8,ne=16,de=32,ae=64,D=128,M=256,X=512,oe=1024,ie=2048,w=4096,_=8192,C=16384,q=32768,G=65536,W=1<<17,p=1<<18;function j(n){return{enumerable:!1,get(){return(this.state&n)!==0},set(a){a?this.state|=n:this.state&=~n}}}y(H.prototype,{objectMode:j(k),ended:j(z),endEmitted:j(L),reading:j(re),constructed:j(ne),sync:j(de),needReadable:j(ae),emittedReadable:j(D),readableListening:j(M),resumeScheduled:j(X),errorEmitted:j(oe),emitClose:j(ie),autoDestroy:j(w),destroyed:j(_),closed:j(C),closeEmitted:j(q),multiAwaitDrain:j(G),readingMore:j(W),dataEmitted:j(p)});function H(n,a,K){typeof K!="boolean"&&(K=a instanceof Me()),this.state=ie|w|ne|de,n&&n.objectMode&&(this.state|=k),K&&n&&n.readableObjectMode&&(this.state|=k),this.highWaterMark=n?$(this,n,"readableHighWaterMark",K):Y(!1),this.buffer=new B,this.length=0,this.pipes=[],this.flowing=null,this[Z]=null,n&&n.emitClose===!1&&(this.state&=-2049),n&&n.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=n&&n.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,n&&n.encoding&&(this.decoder=new se(n.encoding),this.encoding=n.encoding)}function x(n){if(!(this instanceof x))return new x(n);const a=this instanceof Me();this._readableState=new H(n,this,a),n&&(typeof n.read=="function"&&(this._read=n.read),typeof n.destroy=="function"&&(this._destroy=n.destroy),typeof n.construct=="function"&&(this._construct=n.construct),n.signal&&!a&&v(n.signal,this)),m.call(this,n),O.construct(this,()=>{this._readableState.needReadable&&we(this,this._readableState)})}x.prototype.destroy=O.destroy,x.prototype._undestroy=O.undestroy,x.prototype._destroy=function(n,a){a(n)},x.prototype[R.captureRejectionSymbol]=function(n){this.destroy(n)},x.prototype[s]=function(){let n;return this.destroyed||(n=this.readableEnded?null:new F,this.destroy(n)),new t((a,K)=>I(this,J=>J&&J!==n?K(J):a(null)))},x.prototype.push=function(n,a){return fe(this,n,a,!1)},x.prototype.unshift=function(n,a){return fe(this,n,a,!0)};function fe(n,a,K,J){c("readableAddChunk",a);const te=n._readableState;let he;if((te.state&k)===0&&(typeof a=="string"?(K=K||te.defaultEncoding,te.encoding!==K&&(J&&te.encoding?a=b.from(a,K).toString(te.encoding):(a=b.from(a,K),K=""))):a instanceof b?K="":m._isUint8Array(a)?(a=m._uint8ArrayToBuffer(a),K=""):a!=null&&(he=new le("chunk",["string","Buffer","Uint8Array"],a))),he)f(n,he);else if(a===null)te.state&=-9,_e(n,te);else if((te.state&k)!==0||a&&a.length>0)if(J)if((te.state&L)!==0)f(n,new S);else{if(te.destroyed||te.errored)return!1;be(n,te,a,!0)}else if(te.ended)f(n,new V);else{if(te.destroyed||te.errored)return!1;te.state&=-9,te.decoder&&!K?(a=te.decoder.write(a),te.objectMode||a.length!==0?be(n,te,a,!1):we(n,te)):be(n,te,a,!1)}else J||(te.state&=-9,we(n,te));return!te.ended&&(te.length<te.highWaterMark||te.length===0)}function be(n,a,K,J){a.flowing&&a.length===0&&!a.sync&&n.listenerCount("data")>0?((a.state&G)!==0?a.awaitDrainWriters.clear():a.awaitDrainWriters=null,a.dataEmitted=!0,n.emit("data",K)):(a.length+=a.objectMode?1:K.length,J?a.buffer.unshift(K):a.buffer.push(K),(a.state&ae)!==0&&Ie(n)),we(n,a)}x.prototype.isPaused=function(){const n=this._readableState;return n[Z]===!0||n.flowing===!1},x.prototype.setEncoding=function(n){const a=new se(n);this._readableState.decoder=a,this._readableState.encoding=this._readableState.decoder.encoding;const K=this._readableState.buffer;let J="";for(const te of K)J+=a.write(te);return K.clear(),J!==""&&K.push(J),this._readableState.length=J.length,this};const ue=1073741824;function pe(n){if(n>ue)throw new T("size","<= 1GiB",n);return n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++,n}function ce(n,a){return n<=0||a.length===0&&a.ended?0:(a.state&k)!==0?1:A(n)?a.flowing&&a.length?a.buffer.first().length:a.length:n<=a.length?n:a.ended?a.length:0}x.prototype.read=function(n){c("read",n),n===void 0?n=NaN:d(n)||(n=h(n,10));const a=this._readableState,K=n;if(n>a.highWaterMark&&(a.highWaterMark=pe(n)),n!==0&&(a.state&=-129),n===0&&a.needReadable&&((a.highWaterMark!==0?a.length>=a.highWaterMark:a.length>0)||a.ended))return c("read: emitReadable",a.length,a.ended),a.length===0&&a.ended?Be(this):Ie(this),null;if(n=ce(n,a),n===0&&a.ended)return a.length===0&&Be(this),null;let J=(a.state&ae)!==0;if(c("need readable",J),(a.length===0||a.length-n<a.highWaterMark)&&(J=!0,c("length less than watermark",J)),a.ended||a.reading||a.destroyed||a.errored||!a.constructed)J=!1,c("reading, ended or constructing",J);else if(J){c("do read"),a.state|=re|de,a.length===0&&(a.state|=ae);try{this._read(a.highWaterMark)}catch(he){f(this,he)}a.state&=-33,a.reading||(n=ce(K,a))}let te;return n>0?te=lt(n,a):te=null,te===null?(a.needReadable=a.length<=a.highWaterMark,n=0):(a.length-=n,a.multiAwaitDrain?a.awaitDrainWriters.clear():a.awaitDrainWriters=null),a.length===0&&(a.ended||(a.needReadable=!0),K!==n&&a.ended&&Be(this)),te!==null&&!a.errorEmitted&&!a.closeEmitted&&(a.dataEmitted=!0,this.emit("data",te)),te};function _e(n,a){if(c("onEofChunk"),!a.ended){if(a.decoder){const K=a.decoder.end();K&&K.length&&(a.buffer.push(K),a.length+=a.objectMode?1:K.length)}a.ended=!0,a.sync?Ie(n):(a.needReadable=!1,a.emittedReadable=!0,ke(n))}}function Ie(n){const a=n._readableState;c("emitReadable",a.needReadable,a.emittedReadable),a.needReadable=!1,a.emittedReadable||(c("emitReadable",a.flowing),a.emittedReadable=!0,l.nextTick(ke,n))}function ke(n){const a=n._readableState;c("emitReadable_",a.destroyed,a.length,a.ended),!a.destroyed&&!a.errored&&(a.length||a.ended)&&(n.emit("readable"),a.emittedReadable=!1),a.needReadable=!a.flowing&&!a.ended&&a.length<=a.highWaterMark,ot(n)}function we(n,a){!a.readingMore&&a.constructed&&(a.readingMore=!0,l.nextTick(ar,n,a))}function ar(n,a){for(;!a.reading&&!a.ended&&(a.length<a.highWaterMark||a.flowing&&a.length===0);){const K=a.length;if(c("maybeReadMore read 0"),n.read(0),K===a.length)break}a.readingMore=!1}x.prototype._read=function(n){throw new N("_read()")},x.prototype.pipe=function(n,a){const K=this,J=this._readableState;J.pipes.length===1&&(J.multiAwaitDrain||(J.multiAwaitDrain=!0,J.awaitDrainWriters=new r(J.awaitDrainWriters?[J.awaitDrainWriters]:[]))),J.pipes.push(n),c("pipe count=%d opts=%j",J.pipes.length,a);const he=(!a||a.end!==!1)&&n!==l.stdout&&n!==l.stderr?dt:xe;J.endEmitted?l.nextTick(he):K.once("end",he),n.on("unpipe",ge);function ge(ve,Re){c("onunpipe"),ve===K&&Re&&Re.hasUnpiped===!1&&(Re.hasUnpiped=!0,br())}function dt(){c("onend"),n.end()}let Ae,ft=!1;function br(){c("cleanup"),n.removeListener("close",Je),n.removeListener("finish",Ye),Ae&&n.removeListener("drain",Ae),n.removeListener("error",Ke),n.removeListener("unpipe",ge),K.removeListener("end",dt),K.removeListener("end",xe),K.removeListener("data",ct),ft=!0,Ae&&J.awaitDrainWriters&&(!n._writableState||n._writableState.needDrain)&&Ae()}function ut(){ft||(J.pipes.length===1&&J.pipes[0]===n?(c("false write response, pause",0),J.awaitDrainWriters=n,J.multiAwaitDrain=!1):J.pipes.length>1&&J.pipes.includes(n)&&(c("false write response, pause",J.awaitDrainWriters.size),J.awaitDrainWriters.add(n)),K.pause()),Ae||(Ae=lr(K,n),n.on("drain",Ae))}K.on("data",ct);function ct(ve){c("ondata");const Re=n.write(ve);c("dest.write",Re),Re===!1&&ut()}function Ke(ve){if(c("onerror",ve),xe(),n.removeListener("error",Ke),n.listenerCount("error")===0){const Re=n._writableState||n._readableState;Re&&!Re.errorEmitted?f(n,ve):n.emit("error",ve)}}g(n,"error",Ke);function Je(){n.removeListener("finish",Ye),xe()}n.once("close",Je);function Ye(){c("onfinish"),n.removeListener("close",Je),xe()}n.once("finish",Ye);function xe(){c("unpipe"),K.unpipe(n)}return n.emit("pipe",K),n.writableNeedDrain===!0?ut():J.flowing||(c("pipe resume"),K.resume()),n};function lr(n,a){return function(){const J=n._readableState;J.awaitDrainWriters===a?(c("pipeOnDrain",1),J.awaitDrainWriters=null):J.multiAwaitDrain&&(c("pipeOnDrain",J.awaitDrainWriters.size),J.awaitDrainWriters.delete(a)),(!J.awaitDrainWriters||J.awaitDrainWriters.size===0)&&n.listenerCount("data")&&n.resume()}}x.prototype.unpipe=function(n){const a=this._readableState,K={hasUnpiped:!1};if(a.pipes.length===0)return this;if(!n){const te=a.pipes;a.pipes=[],this.pause();for(let he=0;he<te.length;he++)te[he].emit("unpipe",this,{hasUnpiped:!1});return this}const J=o(a.pipes,n);return J===-1?this:(a.pipes.splice(J,1),a.pipes.length===0&&this.pause(),n.emit("unpipe",this,K),this)},x.prototype.on=function(n,a){const K=m.prototype.on.call(this,n,a),J=this._readableState;return n==="data"?(J.readableListening=this.listenerCount("readable")>0,J.flowing!==!1&&this.resume()):n==="readable"&&!J.endEmitted&&!J.readableListening&&(J.readableListening=J.needReadable=!0,J.flowing=!1,J.emittedReadable=!1,c("on readable",J.length,J.reading),J.length?Ie(this):J.reading||l.nextTick(sr,this)),K},x.prototype.addListener=x.prototype.on,x.prototype.removeListener=function(n,a){const K=m.prototype.removeListener.call(this,n,a);return n==="readable"&&l.nextTick(it,this),K},x.prototype.off=x.prototype.removeListener,x.prototype.removeAllListeners=function(n){const a=m.prototype.removeAllListeners.apply(this,arguments);return(n==="readable"||n===void 0)&&l.nextTick(it,this),a};function it(n){const a=n._readableState;a.readableListening=n.listenerCount("readable")>0,a.resumeScheduled&&a[Z]===!1?a.flowing=!0:n.listenerCount("data")>0?n.resume():a.readableListening||(a.flowing=null)}function sr(n){c("readable nexttick read 0"),n.read(0)}x.prototype.resume=function(){const n=this._readableState;return n.flowing||(c("resume"),n.flowing=!n.readableListening,dr(this,n)),n[Z]=!1,this};function dr(n,a){a.resumeScheduled||(a.resumeScheduled=!0,l.nextTick(fr,n,a))}function fr(n,a){c("resume",a.reading),a.reading||n.read(0),a.resumeScheduled=!1,n.emit("resume"),ot(n),a.flowing&&!a.reading&&n.read(0)}x.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Z]=!0,this};function ot(n){const a=n._readableState;for(c("flow",a.flowing);a.flowing&&n.read()!==null;);}x.prototype.wrap=function(n){let a=!1;n.on("data",J=>{!this.push(J)&&n.pause&&(a=!0,n.pause())}),n.on("end",()=>{this.push(null)}),n.on("error",J=>{f(this,J)}),n.on("close",()=>{this.destroy()}),n.on("destroy",()=>{this.destroy()}),this._read=()=>{a&&n.resume&&(a=!1,n.resume())};const K=i(n);for(let J=1;J<K.length;J++){const te=K[J];this[te]===void 0&&typeof n[te]=="function"&&(this[te]=n[te].bind(n))}return this},x.prototype[u]=function(){return at(this)},x.prototype.iterator=function(n){return n!==void 0&&Q(n,"options"),at(this,n)};function at(n,a){typeof n.read!="function"&&(n=x.wrap(n,{objectMode:!0}));const K=ur(n,a);return K.stream=n,K}async function*ur(n,a){let K=ee;function J(ge){this===n?(K(),K=ee):K=ge}n.on("readable",J);let te;const he=I(n,{writable:!1},ge=>{te=ge?U(te,ge):null,K(),K=ee});try{for(;;){const ge=n.destroyed?null:n.read();if(ge!==null)yield ge;else{if(te)throw te;if(te===null)return;await new t(J)}}}catch(ge){throw te=U(te,ge),te}finally{(te||(a==null?void 0:a.destroyOnReturn)!==!1)&&(te===void 0||n._readableState.autoDestroy)?O.destroyer(n,null):(n.off("readable",J),he())}}y(x.prototype,{readable:{__proto__:null,get(){const n=this._readableState;return!!n&&n.readable!==!1&&!n.destroyed&&!n.errorEmitted&&!n.endEmitted},set(n){this._readableState&&(this._readableState.readable=!!n)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(n){this._readableState&&(this._readableState.flowing=n)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(n){this._readableState&&(this._readableState.destroyed=n)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),y(H.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Z]!==!1},set(n){this[Z]=!!n}}}),x._fromList=lt;function lt(n,a){if(a.length===0)return null;let K;return a.objectMode?K=a.buffer.shift():!n||n>=a.length?(a.decoder?K=a.buffer.join(""):a.buffer.length===1?K=a.buffer.first():K=a.buffer.concat(a.length),a.buffer.clear()):K=a.buffer.consume(n,a.decoder),K}function Be(n){const a=n._readableState;c("endReadable",a.endEmitted),a.endEmitted||(a.ended=!0,l.nextTick(cr,a,n))}function cr(n,a){if(c("endReadableNT",n.endEmitted,n.length),!n.errored&&!n.closeEmitted&&!n.endEmitted&&n.length===0){if(n.endEmitted=!0,a.emit("end"),a.writable&&a.allowHalfOpen===!1)l.nextTick(hr,a);else if(n.autoDestroy){const K=a._writableState;(!K||K.autoDestroy&&(K.finished||K.writable===!1))&&a.destroy()}}}function hr(n){n.writable&&!n.writableEnded&&!n.destroyed&&n.end()}x.from=function(n,a){return P(x,n,a)};let qe;function st(){return qe===void 0&&(qe={}),qe}return x.fromWeb=function(n,a){return st().newStreamReadableFromReadableStream(n,a)},x.toWeb=function(n,a){return st().newReadableStreamFromStreamReadable(n,a)},x.wrap=function(n,a){var K,J;return new x({objectMode:(K=(J=n.readableObjectMode)!==null&&J!==void 0?J:n.objectMode)!==null&&K!==void 0?K:!0,...a,destroy(te,he){O.destroyer(n,te),he(te)}}).wrap(n)},Pr}var kr,qn;function wn(){if(qn)return kr;qn=1;const l=De(),{ArrayPrototypeSlice:o,Error:d,FunctionPrototypeSymbolHasInstance:A,ObjectDefineProperty:h,ObjectDefineProperties:y,ObjectSetPrototypeOf:i,StringPrototypeToLowerCase:e,Symbol:t,SymbolHasInstance:r}=Ee();kr=Q,Q.WritableState=S;const{EventEmitter:s}=Ue(),u=pn().Stream,{Buffer:E}=Oe(),R=rt(),{addAbortSignal:m}=Zt(),{getHighWaterMark:g,getDefaultHighWaterMark:b}=er(),{ERR_INVALID_ARG_TYPE:v,ERR_METHOD_NOT_IMPLEMENTED:I,ERR_MULTIPLE_CALLBACK:c,ERR_STREAM_CANNOT_PIPE:B,ERR_STREAM_DESTROYED:O,ERR_STREAM_ALREADY_FINISHED:$,ERR_STREAM_NULL_VALUES:Y,ERR_STREAM_WRITE_AFTER_END:U,ERR_UNKNOWN_ENCODING:le}=me().codes,{errorOrDestroy:N}=R;i(Q.prototype,u.prototype),i(Q,u);function T(){}const V=t("kOnFinished");function S(w,_,C){typeof C!="boolean"&&(C=_ instanceof Me()),this.objectMode=!!(w&&w.objectMode),C&&(this.objectMode=this.objectMode||!!(w&&w.writableObjectMode)),this.highWaterMark=w?g(this,w,"writableHighWaterMark",C):b(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const q=!!(w&&w.decodeStrings===!1);this.decodeStrings=!q,this.defaultEncoding=w&&w.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=f.bind(void 0,_),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,F(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!w||w.emitClose!==!1,this.autoDestroy=!w||w.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[V]=[]}function F(w){w.buffered=[],w.bufferedIndex=0,w.allBuffers=!0,w.allNoop=!0}S.prototype.getBuffer=function(){return o(this.buffered,this.bufferedIndex)},h(S.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Q(w){const _=this instanceof Me();if(!_&&!A(Q,this))return new Q(w);this._writableState=new S(w,this,_),w&&(typeof w.write=="function"&&(this._write=w.write),typeof w.writev=="function"&&(this._writev=w.writev),typeof w.destroy=="function"&&(this._destroy=w.destroy),typeof w.final=="function"&&(this._final=w.final),typeof w.construct=="function"&&(this._construct=w.construct),w.signal&&m(w.signal,this)),u.call(this,w),R.construct(this,()=>{const C=this._writableState;C.writing||re(this,C),D(this,C)})}h(Q,r,{__proto__:null,value:function(w){return A(this,w)?!0:this!==Q?!1:w&&w._writableState instanceof S}}),Q.prototype.pipe=function(){N(this,new B)};function Z(w,_,C,q){const G=w._writableState;if(typeof C=="function")q=C,C=G.defaultEncoding;else{if(!C)C=G.defaultEncoding;else if(C!=="buffer"&&!E.isEncoding(C))throw new le(C);typeof q!="function"&&(q=T)}if(_===null)throw new Y;if(!G.objectMode)if(typeof _=="string")G.decodeStrings!==!1&&(_=E.from(_,C),C="buffer");else if(_ instanceof E)C="buffer";else if(u._isUint8Array(_))_=u._uint8ArrayToBuffer(_),C="buffer";else throw new v("chunk",["string","Buffer","Uint8Array"],_);let W;return G.ending?W=new U:G.destroyed&&(W=new O("write")),W?(l.nextTick(q,W),N(w,W,!0),W):(G.pendingcb++,se(w,G,_,C,q))}Q.prototype.write=function(w,_,C){return Z(this,w,_,C)===!0},Q.prototype.cork=function(){this._writableState.corked++},Q.prototype.uncork=function(){const w=this._writableState;w.corked&&(w.corked--,w.writing||re(this,w))},Q.prototype.setDefaultEncoding=function(_){if(typeof _=="string"&&(_=e(_)),!E.isEncoding(_))throw new le(_);return this._writableState.defaultEncoding=_,this};function se(w,_,C,q,G){const W=_.objectMode?1:C.length;_.length+=W;const p=_.length<_.highWaterMark;return p||(_.needDrain=!0),_.writing||_.corked||_.errored||!_.constructed?(_.buffered.push({chunk:C,encoding:q,callback:G}),_.allBuffers&&q!=="buffer"&&(_.allBuffers=!1),_.allNoop&&G!==T&&(_.allNoop=!1)):(_.writelen=W,_.writecb=G,_.writing=!0,_.sync=!0,w._write(C,q,_.onwrite),_.sync=!1),p&&!_.errored&&!_.destroyed}function P(w,_,C,q,G,W,p){_.writelen=q,_.writecb=p,_.writing=!0,_.sync=!0,_.destroyed?_.onwrite(new O("write")):C?w._writev(G,_.onwrite):w._write(G,W,_.onwrite),_.sync=!1}function ee(w,_,C,q){--_.pendingcb,q(C),L(_),N(w,C)}function f(w,_){const C=w._writableState,q=C.sync,G=C.writecb;if(typeof G!="function"){N(w,new c);return}C.writing=!1,C.writecb=null,C.length-=C.writelen,C.writelen=0,_?(_.stack,C.errored||(C.errored=_),w._readableState&&!w._readableState.errored&&(w._readableState.errored=_),q?l.nextTick(ee,w,C,_,G):ee(w,C,_,G)):(C.buffered.length>C.bufferedIndex&&re(w,C),q?C.afterWriteTickInfo!==null&&C.afterWriteTickInfo.cb===G?C.afterWriteTickInfo.count++:(C.afterWriteTickInfo={count:1,cb:G,stream:w,state:C},l.nextTick(k,C.afterWriteTickInfo)):z(w,C,1,G))}function k({stream:w,state:_,count:C,cb:q}){return _.afterWriteTickInfo=null,z(w,_,C,q)}function z(w,_,C,q){for(!_.ending&&!w.destroyed&&_.length===0&&_.needDrain&&(_.needDrain=!1,w.emit("drain"));C-- >0;)_.pendingcb--,q();_.destroyed&&L(_),D(w,_)}function L(w){if(w.writing)return;for(let G=w.bufferedIndex;G<w.buffered.length;++G){var _;const{chunk:W,callback:p}=w.buffered[G],j=w.objectMode?1:W.length;w.length-=j,p((_=w.errored)!==null&&_!==void 0?_:new O("write"))}const C=w[V].splice(0);for(let G=0;G<C.length;G++){var q;C[G]((q=w.errored)!==null&&q!==void 0?q:new O("end"))}F(w)}function re(w,_){if(_.corked||_.bufferProcessing||_.destroyed||!_.constructed)return;const{buffered:C,bufferedIndex:q,objectMode:G}=_,W=C.length-q;if(!W)return;let p=q;if(_.bufferProcessing=!0,W>1&&w._writev){_.pendingcb-=W-1;const j=_.allNoop?T:x=>{for(let fe=p;fe<C.length;++fe)C[fe].callback(x)},H=_.allNoop&&p===0?C:o(C,p);H.allBuffers=_.allBuffers,P(w,_,!0,_.length,H,"",j),F(_)}else{do{const{chunk:j,encoding:H,callback:x}=C[p];C[p++]=null;const fe=G?1:j.length;P(w,_,!1,fe,j,H,x)}while(p<C.length&&!_.writing);p===C.length?F(_):p>256?(C.splice(0,p),_.bufferedIndex=0):_.bufferedIndex=p}_.bufferProcessing=!1}Q.prototype._write=function(w,_,C){if(this._writev)this._writev([{chunk:w,encoding:_}],C);else throw new I("_write()")},Q.prototype._writev=null,Q.prototype.end=function(w,_,C){const q=this._writableState;typeof w=="function"?(C=w,w=null,_=null):typeof _=="function"&&(C=_,_=null);let G;if(w!=null){const W=Z(this,w,_);W instanceof d&&(G=W)}return q.corked&&(q.corked=1,this.uncork()),G||(!q.errored&&!q.ending?(q.ending=!0,D(this,q,!0),q.ended=!0):q.finished?G=new $("end"):q.destroyed&&(G=new O("end"))),typeof C=="function"&&(G||q.finished?l.nextTick(C,G):q[V].push(C)),this};function ne(w){return w.ending&&!w.destroyed&&w.constructed&&w.length===0&&!w.errored&&w.buffered.length===0&&!w.finished&&!w.writing&&!w.errorEmitted&&!w.closeEmitted}function de(w,_){let C=!1;function q(G){if(C){N(w,G??c());return}if(C=!0,_.pendingcb--,G){const W=_[V].splice(0);for(let p=0;p<W.length;p++)W[p](G);N(w,G,_.sync)}else ne(_)&&(_.prefinished=!0,w.emit("prefinish"),_.pendingcb++,l.nextTick(M,w,_))}_.sync=!0,_.pendingcb++;try{w._final(q)}catch(G){q(G)}_.sync=!1}function ae(w,_){!_.prefinished&&!_.finalCalled&&(typeof w._final=="function"&&!_.destroyed?(_.finalCalled=!0,de(w,_)):(_.prefinished=!0,w.emit("prefinish")))}function D(w,_,C){ne(_)&&(ae(w,_),_.pendingcb===0&&(C?(_.pendingcb++,l.nextTick((q,G)=>{ne(G)?M(q,G):G.pendingcb--},w,_)):ne(_)&&(_.pendingcb++,M(w,_))))}function M(w,_){_.pendingcb--,_.finished=!0;const C=_[V].splice(0);for(let q=0;q<C.length;q++)C[q]();if(w.emit("finish"),_.autoDestroy){const q=w._readableState;(!q||q.autoDestroy&&(q.endEmitted||q.readable===!1))&&w.destroy()}}y(Q.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(w){this._writableState&&(this._writableState.destroyed=w)}},writable:{__proto__:null,get(){const w=this._writableState;return!!w&&w.writable!==!1&&!w.destroyed&&!w.errored&&!w.ending&&!w.ended},set(w){this._writableState&&(this._writableState.writable=!!w)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const w=this._writableState;return w?!w.destroyed&&!w.ending&&w.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const X=R.destroy;Q.prototype.destroy=function(w,_){const C=this._writableState;return!C.destroyed&&(C.bufferedIndex<C.buffered.length||C[V].length)&&l.nextTick(L,C),X.call(this,w,_),this},Q.prototype._undestroy=R.undestroy,Q.prototype._destroy=function(w,_){_(w)},Q.prototype[s.captureRejectionSymbol]=function(w){this.destroy(w)};let oe;function ie(){return oe===void 0&&(oe={}),oe}return Q.fromWeb=function(w,_){return ie().newStreamWritableFromWritableStream(w,_)},Q.toWeb=function(w){return ie().newWritableStreamFromStreamWritable(w)},kr}var Mr,Kn;function Go(){if(Kn)return Mr;Kn=1;const l=De(),o=Oe(),{isReadable:d,isWritable:A,isIterable:h,isNodeStream:y,isReadableNodeStream:i,isWritableNodeStream:e,isDuplexNodeStream:t,isReadableStream:r,isWritableStream:s}=Ve(),u=We(),{AbortError:E,codes:{ERR_INVALID_ARG_TYPE:R,ERR_INVALID_RETURN_VALUE:m}}=me(),{destroyer:g}=rt(),b=Me(),v=tr(),I=wn(),{createDeferredPromise:c}=Ce(),B=uo(),O=globalThis.Blob||o.Blob,$=typeof O<"u"?function(S){return S instanceof O}:function(S){return!1},Y=globalThis.AbortController||Pe().AbortController,{FunctionPrototypeCall:U}=Ee();class le extends b{constructor(S){super(S),(S==null?void 0:S.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(S==null?void 0:S.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Mr=function V(S,F){if(t(S))return S;if(i(S))return T({readable:S});if(e(S))return T({writable:S});if(y(S))return T({writable:!1,readable:!1});if(r(S))return T({readable:v.fromWeb(S)});if(s(S))return T({writable:I.fromWeb(S)});if(typeof S=="function"){const{value:Z,write:se,final:P,destroy:ee}=N(S);if(h(Z))return B(le,Z,{objectMode:!0,write:se,final:P,destroy:ee});const f=Z==null?void 0:Z.then;if(typeof f=="function"){let k;const z=U(f,Z,L=>{if(L!=null)throw new m("nully","body",L)},L=>{g(k,L)});return k=new le({objectMode:!0,readable:!1,write:se,final(L){P(async()=>{try{await z,l.nextTick(L,null)}catch(re){l.nextTick(L,re)}})},destroy:ee})}throw new m("Iterable, AsyncIterable or AsyncFunction",F,Z)}if($(S))return V(S.arrayBuffer());if(h(S))return B(le,S,{objectMode:!0,writable:!1});if(r(S==null?void 0:S.readable)&&s(S==null?void 0:S.writable))return le.fromWeb(S);if(typeof(S==null?void 0:S.writable)=="object"||typeof(S==null?void 0:S.readable)=="object"){const Z=S!=null&&S.readable?i(S==null?void 0:S.readable)?S==null?void 0:S.readable:V(S.readable):void 0,se=S!=null&&S.writable?e(S==null?void 0:S.writable)?S==null?void 0:S.writable:V(S.writable):void 0;return T({readable:Z,writable:se})}const Q=S==null?void 0:S.then;if(typeof Q=="function"){let Z;return U(Q,S,se=>{se!=null&&Z.push(se),Z.push(null)},se=>{g(Z,se)}),Z=new le({objectMode:!0,writable:!1,read(){}})}throw new R(F,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],S)};function N(V){let{promise:S,resolve:F}=c();const Q=new Y,Z=Q.signal;return{value:V(async function*(){for(;;){const P=S;S=null;const{chunk:ee,done:f,cb:k}=await P;if(l.nextTick(k),f)return;if(Z.aborted)throw new E(void 0,{cause:Z.reason});({promise:S,resolve:F}=c()),yield ee}}(),{signal:Z}),write(P,ee,f){const k=F;F=null,k({chunk:P,done:!1,cb:f})},final(P){const ee=F;F=null,ee({done:!0,cb:P})},destroy(P,ee){Q.abort(),ee(P)}}}function T(V){const S=V.readable&&typeof V.readable.read!="function"?v.wrap(V.readable):V.readable,F=V.writable;let Q=!!d(S),Z=!!A(F),se,P,ee,f,k;function z(L){const re=f;f=null,re?re(L):L&&k.destroy(L)}return k=new le({readableObjectMode:!!(S!=null&&S.readableObjectMode),writableObjectMode:!!(F!=null&&F.writableObjectMode),readable:Q,writable:Z}),Z&&(u(F,L=>{Z=!1,L&&g(S,L),z(L)}),k._write=function(L,re,ne){F.write(L,re)?ne():se=ne},k._final=function(L){F.end(),P=L},F.on("drain",function(){if(se){const L=se;se=null,L()}}),F.on("finish",function(){if(P){const L=P;P=null,L()}})),Q&&(u(S,L=>{Q=!1,L&&g(S,L),z(L)}),S.on("readable",function(){if(ee){const L=ee;ee=null,L()}}),S.on("end",function(){k.push(null)}),k._read=function(){for(;;){const L=S.read();if(L===null){ee=k._read;return}if(!k.push(L))return}}),k._destroy=function(L,re){!L&&f!==null&&(L=new E),ee=null,se=null,P=null,f===null?re(L):(f=re,g(F,L),g(S,L))},k}return Mr}var jr,Jn;function Me(){if(Jn)return jr;Jn=1;const{ObjectDefineProperties:l,ObjectGetOwnPropertyDescriptor:o,ObjectKeys:d,ObjectSetPrototypeOf:A}=Ee();jr=i;const h=tr(),y=wn();A(i.prototype,h.prototype),A(i,h);{const s=d(y.prototype);for(let u=0;u<s.length;u++){const E=s[u];i.prototype[E]||(i.prototype[E]=y.prototype[E])}}function i(s){if(!(this instanceof i))return new i(s);h.call(this,s),y.call(this,s),s?(this.allowHalfOpen=s.allowHalfOpen!==!1,s.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),s.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}l(i.prototype,{writable:{__proto__:null,...o(y.prototype,"writable")},writableHighWaterMark:{__proto__:null,...o(y.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...o(y.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...o(y.prototype,"writableBuffer")},writableLength:{__proto__:null,...o(y.prototype,"writableLength")},writableFinished:{__proto__:null,...o(y.prototype,"writableFinished")},writableCorked:{__proto__:null,...o(y.prototype,"writableCorked")},writableEnded:{__proto__:null,...o(y.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...o(y.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(s){this._readableState&&this._writableState&&(this._readableState.destroyed=s,this._writableState.destroyed=s)}}});let e;function t(){return e===void 0&&(e={}),e}i.fromWeb=function(s,u){return t().newStreamDuplexFromReadableWritablePair(s,u)},i.toWeb=function(s){return t().newReadableWritablePairFromDuplex(s)};let r;return i.from=function(s){return r||(r=Go()),r(s,"body")},jr}var Vr,Yn;function co(){if(Yn)return Vr;Yn=1;const{ObjectSetPrototypeOf:l,Symbol:o}=Ee();Vr=i;const{ERR_METHOD_NOT_IMPLEMENTED:d}=me().codes,A=Me(),{getHighWaterMark:h}=er();l(i.prototype,A.prototype),l(i,A);const y=o("kCallback");function i(r){if(!(this instanceof i))return new i(r);const s=r?h(this,r,"readableHighWaterMark",!0):null;s===0&&(r={...r,highWaterMark:null,readableHighWaterMark:s,writableHighWaterMark:r.writableHighWaterMark||0}),A.call(this,r),this._readableState.sync=!1,this[y]=null,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",t)}function e(r){typeof this._flush=="function"&&!this.destroyed?this._flush((s,u)=>{if(s){r?r(s):this.destroy(s);return}u!=null&&this.push(u),this.push(null),r&&r()}):(this.push(null),r&&r())}function t(){this._final!==e&&e.call(this)}return i.prototype._final=e,i.prototype._transform=function(r,s,u){throw new d("_transform()")},i.prototype._write=function(r,s,u){const E=this._readableState,R=this._writableState,m=E.length;this._transform(r,s,(g,b)=>{if(g){u(g);return}b!=null&&this.push(b),R.ended||m===E.length||E.length<E.highWaterMark?u():this[y]=u})},i.prototype._read=function(){if(this[y]){const r=this[y];this[y]=null,r()}},Vr}var $r,zn;function ho(){if(zn)return $r;zn=1;const{ObjectSetPrototypeOf:l}=Ee();$r=d;const o=co();l(d.prototype,o.prototype),l(d,o);function d(A){if(!(this instanceof d))return new d(A);o.call(this,A)}return d.prototype._transform=function(A,h,y){y(null,A)},$r}var Fr,Xn;function gn(){if(Xn)return Fr;Xn=1;const l=De(),{ArrayIsArray:o,Promise:d,SymbolAsyncIterator:A,SymbolDispose:h}=Ee(),y=We(),{once:i}=Ce(),e=rt(),t=Me(),{aggregateTwoErrors:r,codes:{ERR_INVALID_ARG_TYPE:s,ERR_INVALID_RETURN_VALUE:u,ERR_MISSING_ARGS:E,ERR_STREAM_DESTROYED:R,ERR_STREAM_PREMATURE_CLOSE:m},AbortError:g}=me(),{validateFunction:b,validateAbortSignal:v}=Kt(),{isIterable:I,isReadable:c,isReadableNodeStream:B,isNodeStream:O,isTransformStream:$,isWebStream:Y,isReadableStream:U,isReadableFinished:le}=Ve(),N=globalThis.AbortController||Pe().AbortController;let T,V,S;function F(L,re,ne){let de=!1;L.on("close",()=>{de=!0});const ae=y(L,{readable:re,writable:ne},D=>{de=!D});return{destroy:D=>{de||(de=!0,e.destroyer(L,D||new R("pipe")))},cleanup:ae}}function Q(L){return b(L[L.length-1],"streams[stream.length - 1]"),L.pop()}function Z(L){if(I(L))return L;if(B(L))return se(L);throw new s("val",["Readable","Iterable","AsyncIterable"],L)}async function*se(L){V||(V=tr()),yield*V.prototype[A].call(L)}async function P(L,re,ne,{end:de}){let ae,D=null;const M=ie=>{if(ie&&(ae=ie),D){const w=D;D=null,w()}},X=()=>new d((ie,w)=>{ae?w(ae):D=()=>{ae?w(ae):ie()}});re.on("drain",M);const oe=y(re,{readable:!1},M);try{re.writableNeedDrain&&await X();for await(const ie of L)re.write(ie)||await X();de&&(re.end(),await X()),ne()}catch(ie){ne(ae!==ie?r(ae,ie):ie)}finally{oe(),re.off("drain",M)}}async function ee(L,re,ne,{end:de}){$(re)&&(re=re.writable);const ae=re.getWriter();try{for await(const D of L)await ae.ready,ae.write(D).catch(()=>{});await ae.ready,de&&await ae.close(),ne()}catch(D){try{await ae.abort(D),ne(D)}catch(M){ne(M)}}}function f(...L){return k(L,i(Q(L)))}function k(L,re,ne){if(L.length===1&&o(L[0])&&(L=L[0]),L.length<2)throw new E("streams");const de=new N,ae=de.signal,D=ne==null?void 0:ne.signal,M=[];v(D,"options.signal");function X(){G(new g)}S=S||Ce().addAbortListener;let oe;D&&(oe=S(D,X));let ie,w;const _=[];let C=0;function q(H){G(H,--C===0)}function G(H,x){var fe;if(H&&(!ie||ie.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ie=H),!(!ie&&!x)){for(;_.length;)_.shift()(ie);(fe=oe)===null||fe===void 0||fe[h](),de.abort(),x&&(ie||M.forEach(be=>be()),l.nextTick(re,ie,w))}}let W;for(let H=0;H<L.length;H++){const x=L[H],fe=H<L.length-1,be=H>0,ue=fe||(ne==null?void 0:ne.end)!==!1,pe=H===L.length-1;if(O(x)){let ce=function(_e){_e&&_e.name!=="AbortError"&&_e.code!=="ERR_STREAM_PREMATURE_CLOSE"&&q(_e)};if(ue){const{destroy:_e,cleanup:Ie}=F(x,fe,be);_.push(_e),c(x)&&pe&&M.push(Ie)}x.on("error",ce),c(x)&&pe&&M.push(()=>{x.removeListener("error",ce)})}if(H===0)if(typeof x=="function"){if(W=x({signal:ae}),!I(W))throw new u("Iterable, AsyncIterable or Stream","source",W)}else I(x)||B(x)||$(x)?W=x:W=t.from(x);else if(typeof x=="function"){if($(W)){var p;W=Z((p=W)===null||p===void 0?void 0:p.readable)}else W=Z(W);if(W=x(W,{signal:ae}),fe){if(!I(W,!0))throw new u("AsyncIterable",`transform[${H-1}]`,W)}else{var j;T||(T=ho());const ce=new T({objectMode:!0}),_e=(j=W)===null||j===void 0?void 0:j.then;if(typeof _e=="function")C++,_e.call(W,we=>{w=we,we!=null&&ce.write(we),ue&&ce.end(),l.nextTick(q)},we=>{ce.destroy(we),l.nextTick(q,we)});else if(I(W,!0))C++,P(W,ce,q,{end:ue});else if(U(W)||$(W)){const we=W.readable||W;C++,P(we,ce,q,{end:ue})}else throw new u("AsyncIterable or Promise","destination",W);W=ce;const{destroy:Ie,cleanup:ke}=F(W,!1,!0);_.push(Ie),pe&&M.push(ke)}}else if(O(x)){if(B(W)){C+=2;const ce=z(W,x,q,{end:ue});c(x)&&pe&&M.push(ce)}else if($(W)||U(W)){const ce=W.readable||W;C++,P(ce,x,q,{end:ue})}else if(I(W))C++,P(W,x,q,{end:ue});else throw new s("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],W);W=x}else if(Y(x)){if(B(W))C++,ee(Z(W),x,q,{end:ue});else if(U(W)||I(W))C++,ee(W,x,q,{end:ue});else if($(W))C++,ee(W.readable,x,q,{end:ue});else throw new s("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],W);W=x}else W=t.from(x)}return(ae!=null&&ae.aborted||D!=null&&D.aborted)&&l.nextTick(X),W}function z(L,re,ne,{end:de}){let ae=!1;if(re.on("close",()=>{ae||ne(new m)}),L.pipe(re,{end:!1}),de){let D=function(){ae=!0,re.end()};le(L)?l.nextTick(D):L.once("end",D)}else ne();return y(L,{readable:!0,writable:!1},D=>{const M=L._readableState;D&&D.code==="ERR_STREAM_PREMATURE_CLOSE"&&M&&M.ended&&!M.errored&&!M.errorEmitted?L.once("end",ne).once("error",ne):ne(D)}),y(re,{readable:!1,writable:!0},ne)}return Fr={pipelineImpl:k,pipeline:f},Fr}var Ur,Qn;function bo(){if(Qn)return Ur;Qn=1;const{pipeline:l}=gn(),o=Me(),{destroyer:d}=rt(),{isNodeStream:A,isReadable:h,isWritable:y,isWebStream:i,isTransformStream:e,isWritableStream:t,isReadableStream:r}=Ve(),{AbortError:s,codes:{ERR_INVALID_ARG_VALUE:u,ERR_MISSING_ARGS:E}}=me(),R=We();return Ur=function(...g){if(g.length===0)throw new E("streams");if(g.length===1)return o.from(g[0]);const b=[...g];if(typeof g[0]=="function"&&(g[0]=o.from(g[0])),typeof g[g.length-1]=="function"){const T=g.length-1;g[T]=o.from(g[T])}for(let T=0;T<g.length;++T)if(!(!A(g[T])&&!i(g[T]))){if(T<g.length-1&&!(h(g[T])||r(g[T])||e(g[T])))throw new u(`streams[${T}]`,b[T],"must be readable");if(T>0&&!(y(g[T])||t(g[T])||e(g[T])))throw new u(`streams[${T}]`,b[T],"must be writable")}let v,I,c,B,O;function $(T){const V=B;B=null,V?V(T):T?O.destroy(T):!N&&!le&&O.destroy()}const Y=g[0],U=l(g,$),le=!!(y(Y)||t(Y)||e(Y)),N=!!(h(U)||r(U)||e(U));if(O=new o({writableObjectMode:!!(Y!=null&&Y.writableObjectMode),readableObjectMode:!!(U!=null&&U.readableObjectMode),writable:le,readable:N}),le){if(A(Y))O._write=function(V,S,F){Y.write(V,S)?F():v=F},O._final=function(V){Y.end(),I=V},Y.on("drain",function(){if(v){const V=v;v=null,V()}});else if(i(Y)){const S=(e(Y)?Y.writable:Y).getWriter();O._write=async function(F,Q,Z){try{await S.ready,S.write(F).catch(()=>{}),Z()}catch(se){Z(se)}},O._final=async function(F){try{await S.ready,S.close().catch(()=>{}),I=F}catch(Q){F(Q)}}}const T=e(U)?U.readable:U;R(T,()=>{if(I){const V=I;I=null,V()}})}if(N){if(A(U))U.on("readable",function(){if(c){const T=c;c=null,T()}}),U.on("end",function(){O.push(null)}),O._read=function(){for(;;){const T=U.read();if(T===null){c=O._read;return}if(!O.push(T))return}};else if(i(U)){const V=(e(U)?U.readable:U).getReader();O._read=async function(){for(;;)try{const{value:S,done:F}=await V.read();if(!O.push(S))return;if(F){O.push(null);return}}catch{return}}}}return O._destroy=function(T,V){!T&&B!==null&&(T=new s),c=null,v=null,I=null,B===null?V(T):(B=V,A(U)&&d(U,T))},O},Ur}var Zn;function Bo(){if(Zn)return Yt;Zn=1;const l=globalThis.AbortController||Pe().AbortController,{codes:{ERR_INVALID_ARG_VALUE:o,ERR_INVALID_ARG_TYPE:d,ERR_MISSING_ARGS:A,ERR_OUT_OF_RANGE:h},AbortError:y}=me(),{validateAbortSignal:i,validateInteger:e,validateObject:t}=Kt(),r=Ee().Symbol("kWeak"),s=Ee().Symbol("kResistStopPropagation"),{finished:u}=We(),E=bo(),{addAbortSignalNoValidate:R}=Zt(),{isWritable:m,isNodeStream:g}=Ve(),{deprecate:b}=Ce(),{ArrayPrototypePush:v,Boolean:I,MathFloor:c,Number:B,NumberIsNaN:O,Promise:$,PromiseReject:Y,PromiseResolve:U,PromisePrototypeThen:le,Symbol:N}=Ee(),T=N("kEmpty"),V=N("kEof");function S(D,M){if(M!=null&&t(M,"options"),(M==null?void 0:M.signal)!=null&&i(M.signal,"options.signal"),g(D)&&!m(D))throw new o("stream",D,"must be writable");const X=E(this,D);return M!=null&&M.signal&&R(M.signal,X),X}function F(D,M){if(typeof D!="function")throw new d("fn",["Function","AsyncFunction"],D);M!=null&&t(M,"options"),(M==null?void 0:M.signal)!=null&&i(M.signal,"options.signal");let X=1;(M==null?void 0:M.concurrency)!=null&&(X=c(M.concurrency));let oe=X-1;return(M==null?void 0:M.highWaterMark)!=null&&(oe=c(M.highWaterMark)),e(X,"options.concurrency",1),e(oe,"options.highWaterMark",0),oe+=X,(async function*(){const w=Ce().AbortSignalAny([M==null?void 0:M.signal].filter(I)),_=this,C=[],q={signal:w};let G,W,p=!1,j=0;function H(){p=!0,x()}function x(){j-=1,fe()}function fe(){W&&!p&&j<X&&C.length<oe&&(W(),W=null)}async function be(){try{for await(let ue of _){if(p)return;if(w.aborted)throw new y;try{if(ue=D(ue,q),ue===T)continue;ue=U(ue)}catch(pe){ue=Y(pe)}j+=1,le(ue,x,H),C.push(ue),G&&(G(),G=null),!p&&(C.length>=oe||j>=X)&&await new $(pe=>{W=pe})}C.push(V)}catch(ue){const pe=Y(ue);le(pe,x,H),C.push(pe)}finally{p=!0,G&&(G(),G=null)}}be();try{for(;;){for(;C.length>0;){const ue=await C[0];if(ue===V)return;if(w.aborted)throw new y;ue!==T&&(yield ue),C.shift(),fe()}await new $(ue=>{G=ue})}}finally{p=!0,W&&(W(),W=null)}}).call(this)}function Q(D=void 0){return D!=null&&t(D,"options"),(D==null?void 0:D.signal)!=null&&i(D.signal,"options.signal"),(async function*(){let X=0;for await(const ie of this){var oe;if(D!=null&&(oe=D.signal)!==null&&oe!==void 0&&oe.aborted)throw new y({cause:D.signal.reason});yield[X++,ie]}}).call(this)}async function Z(D,M=void 0){for await(const X of f.call(this,D,M))return!0;return!1}async function se(D,M=void 0){if(typeof D!="function")throw new d("fn",["Function","AsyncFunction"],D);return!await Z.call(this,async(...X)=>!await D(...X),M)}async function P(D,M){for await(const X of f.call(this,D,M))return X}async function ee(D,M){if(typeof D!="function")throw new d("fn",["Function","AsyncFunction"],D);async function X(oe,ie){return await D(oe,ie),T}for await(const oe of F.call(this,X,M));}function f(D,M){if(typeof D!="function")throw new d("fn",["Function","AsyncFunction"],D);async function X(oe,ie){return await D(oe,ie)?oe:T}return F.call(this,X,M)}class k extends A{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function z(D,M,X){var oe;if(typeof D!="function")throw new d("reducer",["Function","AsyncFunction"],D);X!=null&&t(X,"options"),(X==null?void 0:X.signal)!=null&&i(X.signal,"options.signal");let ie=arguments.length>1;if(X!=null&&(oe=X.signal)!==null&&oe!==void 0&&oe.aborted){const G=new y(void 0,{cause:X.signal.reason});throw this.once("error",()=>{}),await u(this.destroy(G)),G}const w=new l,_=w.signal;if(X!=null&&X.signal){const G={once:!0,[r]:this,[s]:!0};X.signal.addEventListener("abort",()=>w.abort(),G)}let C=!1;try{for await(const G of this){var q;if(C=!0,X!=null&&(q=X.signal)!==null&&q!==void 0&&q.aborted)throw new y;ie?M=await D(M,G,{signal:_}):(M=G,ie=!0)}if(!C&&!ie)throw new k}finally{w.abort()}return M}async function L(D){D!=null&&t(D,"options"),(D==null?void 0:D.signal)!=null&&i(D.signal,"options.signal");const M=[];for await(const oe of this){var X;if(D!=null&&(X=D.signal)!==null&&X!==void 0&&X.aborted)throw new y(void 0,{cause:D.signal.reason});v(M,oe)}return M}function re(D,M){const X=F.call(this,D,M);return(async function*(){for await(const ie of X)yield*ie}).call(this)}function ne(D){if(D=B(D),O(D))return 0;if(D<0)throw new h("number",">= 0",D);return D}function de(D,M=void 0){return M!=null&&t(M,"options"),(M==null?void 0:M.signal)!=null&&i(M.signal,"options.signal"),D=ne(D),(async function*(){var oe;if(M!=null&&(oe=M.signal)!==null&&oe!==void 0&&oe.aborted)throw new y;for await(const w of this){var ie;if(M!=null&&(ie=M.signal)!==null&&ie!==void 0&&ie.aborted)throw new y;D--<=0&&(yield w)}}).call(this)}function ae(D,M=void 0){return M!=null&&t(M,"options"),(M==null?void 0:M.signal)!=null&&i(M.signal,"options.signal"),D=ne(D),(async function*(){var oe;if(M!=null&&(oe=M.signal)!==null&&oe!==void 0&&oe.aborted)throw new y;for await(const w of this){var ie;if(M!=null&&(ie=M.signal)!==null&&ie!==void 0&&ie.aborted)throw new y;if(D-- >0&&(yield w),D<=0)return}}).call(this)}return Yt.streamReturningOperators={asIndexedPairs:b(Q,"readable.asIndexedPairs will be removed in a future version."),drop:de,filter:f,flatMap:re,map:F,take:ae,compose:S},Yt.promiseReturningOperators={every:se,forEach:ee,reduce:z,toArray:L,some:Z,find:P},Yt}var Wr,ei;function yo(){if(ei)return Wr;ei=1;const{ArrayPrototypePop:l,Promise:o}=Ee(),{isIterable:d,isNodeStream:A,isWebStream:h}=Ve(),{pipelineImpl:y}=gn(),{finished:i}=We();po();function e(...t){return new o((r,s)=>{let u,E;const R=t[t.length-1];if(R&&typeof R=="object"&&!A(R)&&!d(R)&&!h(R)){const m=l(t);u=m.signal,E=m.end}y(t,(m,g)=>{m?s(m):r(g)},{signal:u,end:E})})}return Wr={finished:i,pipeline:e},Wr}var ti;function po(){if(ti)return Sr.exports;ti=1;const{Buffer:l}=Oe(),{ObjectDefineProperty:o,ObjectKeys:d,ReflectApply:A}=Ee(),{promisify:{custom:h}}=Ce(),{streamReturningOperators:y,promiseReturningOperators:i}=Bo(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:e}}=me(),t=bo(),{setDefaultHighWaterMark:r,getDefaultHighWaterMark:s}=er(),{pipeline:u}=gn(),{destroyer:E}=rt(),R=We(),m=yo(),g=Ve(),b=Sr.exports=pn().Stream;b.isDestroyed=g.isDestroyed,b.isDisturbed=g.isDisturbed,b.isErrored=g.isErrored,b.isReadable=g.isReadable,b.isWritable=g.isWritable,b.Readable=tr();for(const I of d(y)){let B=function(...O){if(new.target)throw e();return b.Readable.from(A(c,this,O))};const c=y[I];o(B,"name",{__proto__:null,value:c.name}),o(B,"length",{__proto__:null,value:c.length}),o(b.Readable.prototype,I,{__proto__:null,value:B,enumerable:!1,configurable:!0,writable:!0})}for(const I of d(i)){let B=function(...O){if(new.target)throw e();return A(c,this,O)};const c=i[I];o(B,"name",{__proto__:null,value:c.name}),o(B,"length",{__proto__:null,value:c.length}),o(b.Readable.prototype,I,{__proto__:null,value:B,enumerable:!1,configurable:!0,writable:!0})}b.Writable=wn(),b.Duplex=Me(),b.Transform=co(),b.PassThrough=ho(),b.pipeline=u;const{addAbortSignal:v}=Zt();return b.addAbortSignal=v,b.finished=R,b.destroy=E,b.compose=t,b.setDefaultHighWaterMark=r,b.getDefaultHighWaterMark=s,o(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return m}}),o(u,h,{__proto__:null,enumerable:!0,get(){return m.pipeline}}),o(R,h,{__proto__:null,enumerable:!0,get(){return m.finished}}),b.Stream=b,b._isUint8Array=function(c){return c instanceof Uint8Array},b._uint8ArrayToBuffer=function(c){return l.from(c.buffer,c.byteOffset,c.byteLength)},Sr.exports}var ri;function qo(){return ri||(ri=1,function(l){const o=po(),d=yo(),A=o.Readable.destroy;l.exports=o.Readable,l.exports._uint8ArrayToBuffer=o._uint8ArrayToBuffer,l.exports._isUint8Array=o._isUint8Array,l.exports.isDisturbed=o.isDisturbed,l.exports.isErrored=o.isErrored,l.exports.isReadable=o.isReadable,l.exports.Readable=o.Readable,l.exports.Writable=o.Writable,l.exports.Duplex=o.Duplex,l.exports.Transform=o.Transform,l.exports.PassThrough=o.PassThrough,l.exports.addAbortSignal=o.addAbortSignal,l.exports.finished=o.finished,l.exports.destroy=o.destroy,l.exports.destroy=A,l.exports.pipeline=o.pipeline,l.exports.compose=o.compose,Object.defineProperty(o,"promises",{configurable:!0,enumerable:!0,get(){return d}}),l.exports.Stream=o.Stream,l.exports.default=l.exports}(Er)),Er.exports}var wt={},gt={},Qe={},_t={},ni;function wo(){if(ni)return _t;ni=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.BlankNode=void 0;let l=class{constructor(d){this.termType="BlankNode",this.value=d}equals(d){return!!d&&d.termType==="BlankNode"&&d.value===this.value}};return _t.BlankNode=l,_t}var Et={},St={},ii;function go(){if(ii)return St;ii=1,Object.defineProperty(St,"__esModule",{value:!0}),St.DefaultGraph=void 0;let l=class{constructor(){this.termType="DefaultGraph",this.value=""}equals(d){return!!d&&d.termType==="DefaultGraph"}};return St.DefaultGraph=l,l.INSTANCE=new l,St}var Rt={},It={},oi;function _n(){if(oi)return It;oi=1,Object.defineProperty(It,"__esModule",{value:!0}),It.NamedNode=void 0;let l=class{constructor(d){this.termType="NamedNode",this.value=d}equals(d){return!!d&&d.termType==="NamedNode"&&d.value===this.value}};return It.NamedNode=l,It}var ai;function _o(){if(ai)return Rt;ai=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.Literal=void 0;const l=_n();let o=class Bt{constructor(A,h){this.termType="Literal",this.value=A,typeof h=="string"?(this.language=h,this.datatype=Bt.RDF_LANGUAGE_STRING,this.direction=""):h?"termType"in h?(this.language="",this.datatype=h,this.direction=""):(this.language=h.language,this.datatype=h.direction?Bt.RDF_DIRECTIONAL_LANGUAGE_STRING:Bt.RDF_LANGUAGE_STRING,this.direction=h.direction||""):(this.language="",this.datatype=Bt.XSD_STRING,this.direction="")}equals(A){return!!A&&A.termType==="Literal"&&A.value===this.value&&A.language===this.language&&(A.direction===this.direction||!A.direction&&this.direction==="")&&this.datatype.equals(A.datatype)}};return Rt.Literal=o,o.RDF_LANGUAGE_STRING=new l.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),o.RDF_DIRECTIONAL_LANGUAGE_STRING=new l.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),o.XSD_STRING=new l.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Rt}var At={},li;function Eo(){if(li)return At;li=1,Object.defineProperty(At,"__esModule",{value:!0}),At.Quad=void 0;let l=class{constructor(d,A,h,y){this.termType="Quad",this.value="",this.subject=d,this.predicate=A,this.object=h,this.graph=y}equals(d){return!!d&&(d.termType==="Quad"||!d.termType)&&this.subject.equals(d.subject)&&this.predicate.equals(d.predicate)&&this.object.equals(d.object)&&this.graph.equals(d.graph)}};return At.Quad=l,At}var vt={},si;function So(){if(si)return vt;si=1,Object.defineProperty(vt,"__esModule",{value:!0}),vt.Variable=void 0;let l=class{constructor(d){this.termType="Variable",this.value=d}equals(d){return!!d&&d.termType==="Variable"&&d.value===this.value}};return vt.Variable=l,vt}var di;function Ko(){if(di)return Et;di=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.DataFactory=void 0;const l=wo(),o=go(),d=_o(),A=_n(),h=Eo(),y=So();let i=0,e=class{constructor(r){this.blankNodeCounter=0,r=r||{},this.blankNodePrefix=r.blankNodePrefix||`df_${i++}_`}namedNode(r){return new A.NamedNode(r)}blankNode(r){return new l.BlankNode(r||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(r,s){return new d.Literal(r,s)}variable(r){return new y.Variable(r)}defaultGraph(){return o.DefaultGraph.INSTANCE}quad(r,s,u,E){return new h.Quad(r,s,u,E||this.defaultGraph())}fromTerm(r){switch(r.termType){case"NamedNode":return this.namedNode(r.value);case"BlankNode":return this.blankNode(r.value);case"Literal":return r.language?this.literal(r.value,r.language):r.datatype.equals(d.Literal.XSD_STRING)?this.literal(r.value):this.literal(r.value,this.fromTerm(r.datatype));case"Variable":return this.variable(r.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(r.subject),this.fromTerm(r.predicate),this.fromTerm(r.object),this.fromTerm(r.graph))}}fromQuad(r){return this.fromTerm(r)}resetBlankNodeCounter(){this.blankNodeCounter=0}};return Et.DataFactory=e,Et}var fi;function Jo(){return fi||(fi=1,function(l){var o=Qe&&Qe.__createBinding||(Object.create?function(A,h,y,i){i===void 0&&(i=y);var e=Object.getOwnPropertyDescriptor(h,y);(!e||("get"in e?!h.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return h[y]}}),Object.defineProperty(A,i,e)}:function(A,h,y,i){i===void 0&&(i=y),A[i]=h[y]}),d=Qe&&Qe.__exportStar||function(A,h){for(var y in A)y!=="default"&&!Object.prototype.hasOwnProperty.call(h,y)&&o(h,A,y)};Object.defineProperty(l,"__esModule",{value:!0}),d(wo(),l),d(Ko(),l),d(go(),l),d(_o(),l),d(_n(),l),d(Eo(),l),d(So(),l)}(Qe)),Qe}var mt={},Tt={},ui;function Yo(){if(ui)return Tt;ui=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.ContainerHandlerIdentifier=void 0;let l=class{canCombineWithGraph(){return!0}async handle(d,A,h,y,i,e){let t;if(A.emittedStack[e+1]&&A.idStack[e+1])t=A.idStack[e+1][0];else{const u=await h.getContainerKey(y[e],y,e)!==null?await h.resourceToTerm(await A.getContext(y),y[e]):h.dataFactory.blankNode();if(!u){A.emittedStack[e]=!1;return}t=u,A.idStack[e+1]=[t]}let r=A.idStack[e];r||(r=A.idStack[e]=[]),r.some(s=>s.equals(t))||r.push(t),await A.handlePendingContainerFlushBuffers()||(A.emittedStack[e]=!1)}};return Tt.ContainerHandlerIdentifier=l,Tt}var Ct={},Nt={},ci;function rr(){if(ci)return Nt;ci=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.EntryHandlerPredicate=void 0;const l=Le(),o=et();let d=class Ro{static async handlePredicateObject(h,y,i,e,t,r,s,u,E){const R=await y.getPropertiesDepth(i,e),m=await y.getDepthOffsetGraph(e,i),g=e-m,b=h.idStack[R];if(b&&!E)for(const v of b)if(m>=0){const c=h.idStack[g-1];if(c)for(const B of c)y.emitQuadChecked(e,v,t,r,B,s,u);else s?(y.validateReverseSubject(r),h.getUnidentifiedGraphBufferSafe(g-1).push({subject:r,predicate:t,object:v,isEmbedded:u})):h.getUnidentifiedGraphBufferSafe(g-1).push({subject:v,predicate:t,object:r,isEmbedded:u})}else{const c=await y.getGraphContainerValue(i,R);y.emitQuadChecked(e,v,t,r,c,s,u)}else if(s&&y.validateReverseSubject(r),E){if(h.rdfstar){h.idStack[e]&&h.emitError(new l.ErrorCoded(`Found an illegal @id inside an annotation: ${h.idStack[e][0].value}`,l.ERROR_CODES.INVALID_ANNOTATION));for(let c=0;c<e;c++)await y.unaliasKeyword(i[c],i,c)==="@id"&&h.emitError(new l.ErrorCoded("Found an illegal annotation inside an embedded node",l.ERROR_CODES.INVALID_ANNOTATION));const v=h.getAnnotationsBufferSafe(R),I={predicate:t,object:r,reverse:s,nestedAnnotations:[],depth:R};v.push(I);for(let c=v.length-2;c>=0;c--){const B=v[c];B.depth>R&&(I.nestedAnnotations.push(B),v.splice(c,1))}}}else h.getUnidentifiedValueBufferSafe(R).push({predicate:t,object:r,reverse:s,isEmbedded:u})}isPropertyHandler(){return!0}isStackProcessor(){return!0}async validate(h,y,i,e,t){const r=i[e];if(r){const s=await h.getContext(i);if(!h.jsonLiteralStack[e]&&await y.predicateToTerm(s,i[e]))return o.Util.getContextValueType(s,r)==="@json"&&(h.jsonLiteralStack[e+1]=!0),!0}return!1}async test(h,y,i,e,t){return e[t]}async handle(h,y,i,e,t,r,s){const u=e[r],E=await h.getContext(e),R=await y.predicateToTerm(E,i);if(R){const m=await y.valueToTerm(E,i,t,r,e);if(m.length)for(let g of m){let b=await y.unaliasKeywordParent(e,r);const v=o.Util.isPropertyReverse(E,u,b);let I=0;for(;b==="@reverse"||typeof b=="number";)typeof b=="number"?I++:r--,b=await y.unaliasKeywordParent(e,r-I);const c=o.Util.isPropertyInEmbeddedNode(b);y.validateReverseInEmbeddedNode(i,v,c);const B=o.Util.isPropertyInAnnotationObject(b);if(t){const O="@list"in o.Util.getContextValueContainer(E,i);if(O||t["@list"]){if((O&&!Array.isArray(t)&&!t["@list"]||t["@list"]&&!Array.isArray(t["@list"]))&&g!==y.rdfNil){const $=y.dataFactory.blankNode();h.emitQuad(r,y.dataFactory.quad($,y.rdfRest,y.rdfNil,y.getDefaultGraph())),h.emitQuad(r,y.dataFactory.quad($,y.rdfFirst,g,y.getDefaultGraph())),g=$}if(v&&!h.allowSubjectList)throw new l.ErrorCoded(`Found illegal list value in subject position at ${i}`,l.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}}await Ro.handlePredicateObject(h,y,e,r,R,g,v,c,B)}}}};return Nt.EntryHandlerPredicate=d,Nt}var hi;function zo(){if(hi)return Ct;hi=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.ContainerHandlerIndex=void 0;const l=Le(),o=rr(),d=et();let A=class{canCombineWithGraph(){return!0}async handle(y,i,e,t,r,s){if(!Array.isArray(r)){const u="@graph"in y,E=await i.getContext(t),R=t[s-1],m=d.Util.getContextValueIndex(E,R);if(m){if(l.Util.isPotentialKeyword(m))throw new l.ErrorCoded(`Keywords can not be used as @index value, got: ${m}`,l.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof m!="string")throw new l.ErrorCoded(`@index values must be strings, got: ${m}`,l.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof r!="object"){if(d.Util.getContextValueType(E,R)!=="@id")throw new l.ErrorCoded(`Property-based index containers require nodes as values or strings with @type: @id, but got: ${r}`,l.ERROR_CODES.INVALID_VALUE_OBJECT);const v=e.resourceToTerm(E,r);v&&(i.idStack[s+1]=[v])}const b=e.createVocabOrBaseTerm(E,m);if(b){const v=await e.valueToTerm(E,m,await e.getContainerKey(t[s],t,s),s,t);if(u){const I=await e.getGraphContainerValue(t,s+1);for(const c of v)i.emitQuad(s,e.dataFactory.quad(I,b,c,e.getDefaultGraph()))}else for(const I of v)await o.EntryHandlerPredicate.handlePredicateObject(i,e,t,s+1,b,I,!1,!1,!1)}}const g=u?2:1;await i.newOnValueJob(t.slice(0,t.length-g),r,s-g,!0),await i.handlePendingContainerFlushBuffers()}i.emittedStack[s]=!1}};return Ct.ContainerHandlerIndex=A,Ct}var Ot={},bi;function Xo(){if(bi)return Ot;bi=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.ContainerHandlerLanguage=void 0;const l=Le();let o=class{canCombineWithGraph(){return!1}async handle(A,h,y,i,e,t){const r=await y.getContainerKey(i[t],i,t);if(Array.isArray(e))e=e.map(s=>({"@value":s,"@language":r}));else{if(typeof e!="string")throw new l.ErrorCoded(`Got invalid language map value, got '${JSON.stringify(e)}', but expected string`,l.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);e={"@value":e,"@language":r}}await h.newOnValueJob(i.slice(0,i.length-1),e,t-1,!0),h.emittedStack[t]=!1}};return Ot.ContainerHandlerLanguage=o,Ot}var Dt={},yi;function Qo(){if(yi)return Dt;yi=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.ContainerHandlerType=void 0;const l=rr(),o=et();let d=class{canCombineWithGraph(){return!1}async handle(h,y,i,e,t,r){if(!Array.isArray(t)){if(typeof t=="string"){const E=await y.getContext(e),m=o.Util.getContextValueType(E,e[r-1])==="@vocab"?await i.createVocabOrBaseTerm(E,t):await i.resourceToTerm(E,t);if(m){const g={"@id":m.termType==="NamedNode"?m.value:t};await y.newOnValueJob(e.slice(0,e.length-1),g,r-1,!0),y.idStack[r+1]=[m]}}else{const E=!!y.idStack[r+1];E||delete y.idStack[r],await y.newOnValueJob(e.slice(0,e.length-1),t,r-1,!0),E||(y.idStack[r+1]=y.idStack[r])}const s=await i.getContainerKey(e[r],e,r),u=s!==null?i.createVocabOrBaseTerm(await y.getContext(e),s):null;u&&await l.EntryHandlerPredicate.handlePredicateObject(y,i,e,r+1,i.rdfType,u,!1,!1,!1),await y.handlePendingContainerFlushBuffers()}y.emittedStack[r]=!1}};return Dt.ContainerHandlerType=d,Dt}var pi;function Io(){if(pi)return mt;pi=1,Object.defineProperty(mt,"__esModule",{value:!0}),mt.EntryHandlerContainer=void 0;const l=Yo(),o=zo(),d=Xo(),A=Qo(),h=et();let y=class Fe{static isSimpleGraphContainer(e){return"@graph"in e&&("@set"in e&&Object.keys(e).length===2||Object.keys(e).length===1)}static isComplexGraphContainer(e){return"@graph"in e&&("@set"in e&&Object.keys(e).length>2||!("@set"in e)&&Object.keys(e).length>1)}static getContainerGraphIndex(e,t,r){let s=Fe.isSimpleGraphContainer(e),u="";for(let E=t;E<r.length;E++)(!s||typeof r[E]=="number")&&(u+=":"+r[E]),!s&&typeof r[E]!="number"&&(s=!0);return u}static async getContainerHandler(e,t,r){const s={containers:{"@set":!0},depth:r,fallback:!0};let u=!1;const E=await e.getContext(t,2);for(let R=r-1;R>=0;R--)if(typeof t[R]!="number"){const m=h.Util.getContextValue(E,"@container",t[R],!1);if(m&&Fe.isSimpleGraphContainer(m))return{containers:m,depth:R+1,fallback:!1};const g=h.Util.getContextValue(E,"@container",t[R-1],!1);if(g){const b="@graph"in g;for(const v in Fe.CONTAINER_HANDLERS)if(g[v])return b?Fe.CONTAINER_HANDLERS[v].canCombineWithGraph()?{containers:g,depth:R,fallback:!1}:s:u?s:{containers:g,depth:R,fallback:!1};return s}else{if(u)return s;u=!0}}return s}static async isBufferableContainerHandler(e,t,r){const s=await Fe.getContainerHandler(e,t,r);return!s.fallback&&!("@graph"in s.containers)}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(e,t,r,s,u){return!!await this.test(e,t,null,r,s)}async test(e,t,r,s,u){const E=h.Util.getContextValueContainer(await e.getContext(s,2),s[u-1]);for(const R in Fe.CONTAINER_HANDLERS)if(E[R])return{containers:E,handler:Fe.CONTAINER_HANDLERS[R]};return null}async handle(e,t,r,s,u,E,R){return R.handler.handle(R.containers,e,t,s,u,E)}};return mt.EntryHandlerContainer=y,y.CONTAINER_HANDLERS={"@id":new l.ContainerHandlerIdentifier,"@index":new o.ContainerHandlerIndex,"@language":new d.ContainerHandlerLanguage,"@type":new A.ContainerHandlerType},mt}var wi;function et(){if(wi)return gt;wi=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.Util=void 0;const l=Le(),o=Jo(),d=Io(),A=$o();let h=class ye{constructor(i){this.parsingContext=i.parsingContext,this.dataFactory=i.dataFactory||new o.DataFactory,this.rdfFirst=this.dataFactory.namedNode(ye.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(ye.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(ye.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(ye.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(ye.RDF+"JSON")}static getContextValue(i,e,t,r){const s=i.getContextRaw()[t];if(!s)return r;const u=s[e];return u===void 0?r:u}static getContextValueContainer(i,e){return ye.getContextValue(i,"@container",e,{"@set":!0})}static getContextValueType(i,e){const t=ye.getContextValue(i,"@type",e,null);return t==="@none"?null:t}static getContextValueLanguage(i,e){return ye.getContextValue(i,"@language",e,i.getContextRaw()["@language"]||null)}static getContextValueDirection(i,e){return ye.getContextValue(i,"@direction",e,i.getContextRaw()["@direction"]||null)}static isContextValueReverse(i,e){return!!ye.getContextValue(i,"@reverse",e,null)}static getContextValueIndex(i,e){return ye.getContextValue(i,"@index",e,i.getContextRaw()["@index"]||null)}static isPropertyReverse(i,e,t){return t==="@reverse"!==ye.isContextValueReverse(i,e)}static isPropertyInEmbeddedNode(i){return i==="@id"}static isPropertyInAnnotationObject(i){return i==="@annotation"}static isValidIri(i){return i!==null&&l.Util.isValidIri(i)}static isPrefixArray(i,e){if(i.length>e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}async validateValueIndexes(i){if(this.parsingContext.validateValueIndexes){const e={};for(const t of i)if(t&&typeof t=="object"){const r=t["@id"],s=t["@index"];if(r&&s){const u=e[r];if(u&&u!==s)throw new l.ErrorCoded(`Conflicting @index value for ${r}`,l.ERROR_CODES.CONFLICTING_INDEXES);e[r]=s}}}}async valueToTerm(i,e,t,r,s){if(ye.getContextValueType(i,e)==="@json")return[this.dataFactory.literal(this.valueToJsonString(t),this.rdfJson)];const u=typeof t;switch(u){case"object":if(t==null)return[];if(Array.isArray(t))return"@list"in ye.getContextValueContainer(i,e)?t.length===0?[this.rdfNil]:this.parsingContext.idStack[r+1]||[]:(await this.validateValueIndexes(t),[]);if(i=await this.getContextSelfOrPropertyScoped(i,e),"@context"in t&&(i=await this.parsingContext.parseContext(t["@context"],(await this.parsingContext.getContext(s,0)).getContextRaw())),t=await this.unaliasKeywords(t,s,r,i),"@value"in t){let E,R,m,g,b;for(e in t){const v=t[e];switch(e){case"@value":E=v;break;case"@language":R=v;break;case"@direction":m=v;break;case"@type":g=v;break;case"@index":b=v;break;case"@annotation":break;default:throw new l.ErrorCoded(`Unknown value entry '${e}' in @value: ${JSON.stringify(t)}`,l.ERROR_CODES.INVALID_VALUE_OBJECT)}}if(await this.unaliasKeyword(g,s,r,!0,i)==="@json")return[this.dataFactory.literal(this.valueToJsonString(E),this.rdfJson)];if(E===null)return[];if(typeof E=="object")throw new l.ErrorCoded(`The value of an '@value' can not be an object, got '${JSON.stringify(E)}'`,l.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);if(this.parsingContext.validateValueIndexes&&b&&typeof b!="string")throw new l.ErrorCoded(`The value of an '@index' must be a string, got '${JSON.stringify(b)}'`,l.ERROR_CODES.INVALID_INDEX_VALUE);if(R){if(typeof E!="string")throw new l.ErrorCoded(`When an '@language' is set, the value of '@value' must be a string, got '${JSON.stringify(E)}'`,l.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);if(!l.ContextParser.validateLanguage(R,this.parsingContext.strictValues,l.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING))return[];(this.parsingContext.normalizeLanguageTags||this.parsingContext.activeProcessingMode===1)&&(R=R.toLowerCase())}if(m){if(typeof E!="string")throw new Error(`When an '@direction' is set, the value of '@value' must be a string, got '${JSON.stringify(E)}'`);if(!l.ContextParser.validateDirection(m,this.parsingContext.strictValues))return[]}if(R&&m){if(g)throw new l.ErrorCoded(`Can not have '@language', '@direction' and '@type' in a value: '${JSON.stringify(t)}'`,l.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(r,E,R,m))}else if(R){if(g)throw new l.ErrorCoded(`Can not have both '@language' and '@type' in a value: '${JSON.stringify(t)}'`,l.ERROR_CODES.INVALID_VALUE_OBJECT);return[this.dataFactory.literal(E,R)]}else if(m){if(g)throw new l.ErrorCoded(`Can not have both '@direction' and '@type' in a value: '${JSON.stringify(t)}'`,l.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(r,E,R,m))}else if(g){if(typeof g!="string")throw new l.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(g)}'`,l.ERROR_CODES.INVALID_TYPED_VALUE);const v=this.createVocabOrBaseTerm(i,g);if(!v)throw new l.ErrorCoded(`Invalid '@type' value, got '${JSON.stringify(g)}'`,l.ERROR_CODES.INVALID_TYPED_VALUE);if(v.termType!=="NamedNode")throw new l.ErrorCoded(`Illegal value type (${v.termType}): ${g}`,l.ERROR_CODES.INVALID_TYPED_VALUE);return[this.dataFactory.literal(E,v)]}return await this.valueToTerm(new l.JsonLdContextNormalized({}),e,E,r,s)}else if("@set"in t){if(Object.keys(t).length>1)throw new l.ErrorCoded(`Found illegal neighbouring entries next to @set for key: '${e}'`,l.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);return[]}else if("@list"in t){if(Object.keys(t).length>1)throw new l.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${e}'`,l.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);const E=t["@list"];return Array.isArray(E)?E.length===0?[this.rdfNil]:this.parsingContext.idStack[r+1]||[]:await this.valueToTerm(await this.parsingContext.getContext(s),e,E,r-1,s.slice(0,-1))}else{if("@reverse"in t&&typeof t["@reverse"]=="boolean")return[];if("@graph"in ye.getContextValueContainer(await this.parsingContext.getContext(s),e)){const E=this.parsingContext.graphContainerTermStack[r+1];return E?Object.values(E):[this.dataFactory.blankNode()]}else if("@id"in t){if(Object.keys(t).length>1&&(i=await this.parsingContext.getContext(s,0)),"@context"in t&&(i=await this.parsingContext.parseContext(t["@context"],i.getContextRaw())),t["@type"]==="@vocab")return this.nullableTermToArray(this.createVocabOrBaseTerm(i,t["@id"]));{const E=t["@id"];let R;if(typeof E=="object")if(this.parsingContext.rdfstar)R=this.parsingContext.idStack[r+1][0];else throw new l.ErrorCoded(`Found illegal @id '${t}'`,l.ERROR_CODES.INVALID_ID_VALUE);else R=this.resourceToTerm(i,E);return this.nullableTermToArray(R)}}else return this.parsingContext.emittedStack[r+1]||t&&typeof t=="object"&&Object.keys(t).length===0?this.parsingContext.idStack[r+1]||(this.parsingContext.idStack[r+1]=[this.dataFactory.blankNode()]):[]}case"string":return this.nullableTermToArray(this.stringValueToTerm(r,await this.getContextSelfOrPropertyScoped(i,e),e,t,null));case"boolean":return this.nullableTermToArray(this.stringValueToTerm(r,await this.getContextSelfOrPropertyScoped(i,e),e,(!!t).toString(),this.dataFactory.namedNode(ye.XSD_BOOLEAN)));case"number":return this.nullableTermToArray(this.stringValueToTerm(r,await this.getContextSelfOrPropertyScoped(i,e),e,t,this.dataFactory.namedNode(t%1===0&&t<1e21?ye.XSD_INTEGER:ye.XSD_DOUBLE)));default:return this.parsingContext.emitError(new Error(`Could not determine the RDF type of a ${u}`)),[]}}async getContextSelfOrPropertyScoped(i,e){const t=i.getContextRaw()[e];return t&&typeof t=="object"&&"@context"in t&&(i=await this.parsingContext.parseContext(t,i.getContextRaw(),!0)),i}nullableTermToArray(i){return i?[i]:[]}predicateToTerm(i,e){const t=i.expandTerm(e,!0,this.parsingContext.getExpandOptions());if(!t)return null;if(t[0]==="_"&&t[1]===":")return this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(t.substr(2)):null;if(ye.isValidIri(t))return this.dataFactory.namedNode(t);if(t&&this.parsingContext.strictValues)this.parsingContext.emitError(new l.ErrorCoded(`Invalid predicate IRI: ${t}`,l.ERROR_CODES.INVALID_IRI_MAPPING));else return null;return null}resourceToTerm(i,e){if(e.startsWith("_:"))return this.dataFactory.blankNode(e.substr(2));const t=i.expandTerm(e,!1,this.parsingContext.getExpandOptions());if(!ye.isValidIri(t))if(t&&this.parsingContext.strictValues)this.parsingContext.emitError(new Error(`Invalid resource IRI: ${t}`));else return null;return this.dataFactory.namedNode(t)}createVocabOrBaseTerm(i,e){if(e.startsWith("_:"))return this.dataFactory.blankNode(e.substr(2));const t=this.parsingContext.getExpandOptions();let r=i.expandTerm(e,!0,t);if(r===e&&(r=i.expandTerm(e,!1,t)),!ye.isValidIri(r))if(r&&this.parsingContext.strictValues&&!r.startsWith("@"))this.parsingContext.emitError(new Error(`Invalid term IRI: ${r}`));else return null;return this.dataFactory.namedNode(r)}intToString(i,e){return typeof i=="number"?Number.isFinite(i)?i%1===0&&(!e||e.value!==ye.XSD_DOUBLE)?Number(i).toString():i.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):i>0?"INF":"-INF":i}stringValueToTerm(i,e,t,r,s){const u=ye.getContextValueType(e,t);if(u)if(u==="@id"){if(!s)return this.resourceToTerm(e,this.intToString(r,s))}else if(u==="@vocab"){if(!s)return this.createVocabOrBaseTerm(e,this.intToString(r,s))}else s=this.dataFactory.namedNode(u);if(!s){const E=ye.getContextValueLanguage(e,t),R=ye.getContextValueDirection(e,t);return R?this.createLanguageDirectionLiteral(i,this.intToString(r,s),E,R):this.dataFactory.literal(this.intToString(r,s),E)}return this.dataFactory.literal(this.intToString(r,s),s)}createLanguageDirectionLiteral(i,e,t,r){if(this.parsingContext.rdfDirection==="i18n-datatype")return t||(t=""),this.dataFactory.literal(e,this.dataFactory.namedNode(`https://www.w3.org/ns/i18n#${t}_${r}`));if(this.parsingContext.rdfDirection==="compound-literal"){const s=this.dataFactory.blankNode(),u=this.getDefaultGraph();return this.parsingContext.emitQuad(i,this.dataFactory.quad(s,this.dataFactory.namedNode(ye.RDF+"value"),this.dataFactory.literal(e),u)),t&&this.parsingContext.emitQuad(i,this.dataFactory.quad(s,this.dataFactory.namedNode(ye.RDF+"language"),this.dataFactory.literal(t),u)),this.parsingContext.emitQuad(i,this.dataFactory.quad(s,this.dataFactory.namedNode(ye.RDF+"direction"),this.dataFactory.literal(r),u)),s}else return this.dataFactory.literal(e,{language:t||"",direction:r})}valueToJsonString(i){return A(i)}async unaliasKeyword(i,e,t,r,s){if(Number.isInteger(i))return i;if(!r){const u=this.parsingContext.unaliasedKeywordCacheStack[t];if(u)return u}if(!l.Util.isPotentialKeyword(i)){s=s||await this.parsingContext.getContext(e);let u=s.getContextRaw()[i];u&&typeof u=="object"&&(u=u["@id"]),l.Util.isValidKeyword(u)&&(i=u)}return r?i:this.parsingContext.unaliasedKeywordCacheStack[t]=i}async unaliasKeywordParent(i,e){return await this.unaliasKeyword(e>0&&i[e-1],i,e-1)}async unaliasKeywords(i,e,t,r){const s={};for(const u in i)s[await this.unaliasKeyword(u,e,t+1,!0,r)]=i[u];return s}async isLiteral(i,e){for(let t=e;t>=0;t--){if(await this.unaliasKeyword(i[t],i,t)==="@annotation")return!1;if(this.parsingContext.literalStack[t]||this.parsingContext.jsonLiteralStack[t])return!0}return!1}async getDepthOffsetGraph(i,e){for(let t=i-1;t>0;t--)if(await this.unaliasKeyword(e[t],e,t)==="@graph"){const r=(await d.EntryHandlerContainer.getContainerHandler(this.parsingContext,e,t)).containers;return d.EntryHandlerContainer.isComplexGraphContainer(r)?-1:i-t-1}return-1}validateReverseSubject(i){if(i.termType==="Literal")throw new l.ErrorCoded(`Found illegal literal in subject position: ${i.value}`,l.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}getDefaultGraph(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph()}async getGraphContainerValue(i,e){let t=this.getDefaultGraph();const{containers:r,depth:s}=await d.EntryHandlerContainer.getContainerHandler(this.parsingContext,i,e);if("@graph"in r){const u=d.EntryHandlerContainer.getContainerGraphIndex(r,s,i),E=this.parsingContext.graphContainerTermStack[s];if(t=E?E[u]:null,!t){let R=null;if("@id"in r){const m=await this.getContainerKey(i[s],i,s);m!==null&&(R=await this.resourceToTerm(await this.parsingContext.getContext(i),m))}R||(R=this.dataFactory.blankNode()),this.parsingContext.graphContainerTermStack[s]||(this.parsingContext.graphContainerTermStack[s]={}),t=this.parsingContext.graphContainerTermStack[s][u]=R}}return t}async getPropertiesDepth(i,e){let t=e;for(let r=e-1;r>0;r--)if(typeof i[r]!="number"){const s=await this.unaliasKeyword(i[r],i,r);if(s==="@reverse")return r;if(s==="@nest")t=r;else return t}return t}async getContainerKey(i,e,t){const r=await this.unaliasKeyword(i,e,t);return r==="@none"?null:r}validateReverseInEmbeddedNode(i,e,t){if(t&&e&&!this.parsingContext.rdfstarReverseInEmbedded)throw new l.ErrorCoded(`Illegal reverse property in embedded node in ${i}`,l.ERROR_CODES.INVALID_EMBEDDED_NODE)}emitQuadChecked(i,e,t,r,s,u,E){let R;if(u?(this.validateReverseSubject(r),R=this.dataFactory.quad(r,t,e,s)):R=this.dataFactory.quad(e,t,r,s),E){if(R.graph.termType!=="DefaultGraph"&&(R=this.dataFactory.quad(R.subject,R.predicate,R.object)),this.parsingContext.idStack[i-1])throw new l.ErrorCoded("Illegal multiple properties in an embedded node",l.ERROR_CODES.INVALID_EMBEDDED_NODE);this.parsingContext.idStack[i-1]=[R]}else this.parsingContext.emitQuad(i,R);const m=this.parsingContext.annotationsBuffer[i];if(m){for(const g of m)this.emitAnnotation(i,R,g);delete this.parsingContext.annotationsBuffer[i]}}emitAnnotation(i,e,t){let r;t.reverse?(this.validateReverseSubject(t.object),r=this.dataFactory.quad(t.object,t.predicate,e)):r=this.dataFactory.quad(e,t.predicate,t.object),this.parsingContext.emitQuad(i,r);for(const s of t.nestedAnnotations)this.emitAnnotation(i,r,s)}};return gt.Util=h,h.XSD="http://www.w3.org/2001/XMLSchema#",h.XSD_BOOLEAN=h.XSD+"boolean",h.XSD_INTEGER=h.XSD+"integer",h.XSD_DOUBLE=h.XSD+"double",h.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",gt}var gi;function Zo(){if(gi)return wt;gi=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.EntryHandlerArrayValue=void 0;const l=et(),o=Le();let d=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(h,y,i,e,t){return this.test(h,y,null,i,e)}async test(h,y,i,e,t){return typeof e[t]=="number"}async handle(h,y,i,e,t,r){let s=await y.unaliasKeywordParent(e,r);if(s==="@list"){let u=null,E=0;for(let R=r-2;R>0;R--){const m=e[R];if(typeof m=="string"||typeof m=="number"){E=R,u=m;break}}if(u!==null){const R=await y.valueToTerm(await h.getContext(e),u,t,r,e);for(const m of R)await this.handleListElement(h,y,m,t,r,e.slice(0,E),E);R.length===0&&await this.handleListElement(h,y,null,t,r,e.slice(0,E),E)}}else if(s==="@set")await h.newOnValueJob(e.slice(0,-2),t,r-2,!1);else if(s!==void 0&&s!=="@type"){for(let E=r-1;E>0;E--)if(typeof e[E]!="number"){s=await y.unaliasKeyword(e[E],e,E);break}const u=await h.getContext(e.slice(0,-1));if("@list"in l.Util.getContextValueContainer(u,s)){h.emittedStack[r+1]=!0;const E=await y.valueToTerm(await h.getContext(e),s,t,r,e);for(const R of E)await this.handleListElement(h,y,R,t,r,e.slice(0,-1),r-1);E.length===0&&await this.handleListElement(h,y,null,t,r,e.slice(0,-1),r-1)}else h.shiftStack(r,1),await h.newOnValueJob(e.slice(0,-1),t,r-1,!1),h.contextTree.removeContext(e.slice(0,-1))}}async handleListElement(h,y,i,e,t,r,s){let u=h.listPointerStack[t];if(e!==null&&(await y.unaliasKeywords(e,r,t))["@value"]!==null){if(!u||!u.value){const E=y.dataFactory.blankNode();u={value:E,listRootDepth:s,listId:E}}else{const E=y.dataFactory.blankNode();h.emitQuad(t,y.dataFactory.quad(u.value,y.rdfRest,E,y.getDefaultGraph())),u.value=E}i&&h.emitQuad(t,y.dataFactory.quad(u.value,y.rdfFirst,i,y.getDefaultGraph()))}else u||(u={listRootDepth:s,listId:y.rdfNil});h.listPointerStack[t]=u,h.rdfstar&&h.annotationsBuffer[t]&&h.emitError(new o.ErrorCoded("Found an illegal annotation inside a list",o.ERROR_CODES.INVALID_ANNOTATION))}};return wt.EntryHandlerArrayValue=d,wt}var Lt={},_i;function ea(){if(_i)return Lt;_i=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.EntryHandlerInvalidFallback=void 0;let l=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(d,A,h,y,i){return!1}async test(d,A,h,y,i){return!0}async handle(d,A,h,y,i,e){d.emittedStack[e]=!1}};return Lt.EntryHandlerInvalidFallback=l,Lt}var xt={},Pt={},Ei;function He(){if(Ei)return Pt;Ei=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.EntryHandlerKeyword=void 0;let l=class{constructor(d){this.keyword=d}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(d,A,h,y,i){return!1}async test(d,A,h,y,i){return h===this.keyword}};return Pt.EntryHandlerKeyword=l,Pt}var Si;function ta(){if(Si)return xt;Si=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.EntryHandlerKeywordContext=void 0;const l=Le(),o=He();let d=class extends o.EntryHandlerKeyword{constructor(){super("@context")}isStackProcessor(){return!1}async handle(h,y,i,e,t,r){h.streamingProfile&&(h.processingStack[r]||h.processingType[r]||h.idStack[r]!==void 0)&&h.emitError(new l.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",l.ERROR_CODES.INVALID_STREAMING_KEY_ORDER));const s=h.getContext(e),u=h.parseContext(t,(await s).getContextRaw());h.contextTree.setContext(e.slice(0,-1),u),h.emitContext(t),await h.validateContext(await u)}};return xt.EntryHandlerKeywordContext=d,xt}var kt={},Ri;function ra(){if(Ri)return kt;Ri=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.EntryHandlerKeywordGraph=void 0;const l=He();let o=class extends l.EntryHandlerKeyword{constructor(){super("@graph")}async handle(A,h,y,i,e,t){A.graphStack[t+1]=!0}};return kt.EntryHandlerKeywordGraph=o,kt}var Mt={},Ii;function na(){if(Ii)return Mt;Ii=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.EntryHandlerKeywordId=void 0;const l=Le(),o=He();let d=class extends o.EntryHandlerKeyword{constructor(){super("@id")}isStackProcessor(){return!1}async handle(h,y,i,e,t,r){if(typeof t!="string"){if(h.rdfstar&&typeof t=="object"){const u=Object.keys(t);u.length===1&&u[0]==="@id"&&h.emitError(new l.ErrorCoded(`Invalid embedded node without property with @id ${t["@id"]}`,l.ERROR_CODES.INVALID_EMBEDDED_NODE))}else h.emitError(new l.ErrorCoded(`Found illegal @id '${t}'`,l.ERROR_CODES.INVALID_ID_VALUE));return}const s=await y.getPropertiesDepth(e,r);if(h.idStack[s]!==void 0&&(h.idStack[s][0].listHead?h.emitError(new l.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${e[r-1]}'`,l.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):h.emitError(new l.ErrorCoded(`Found duplicate @ids '${h.idStack[s][0].value}' and '${t}'`,l.ERROR_CODES.COLLIDING_KEYWORDS))),h.rdfstar&&h.annotationsBuffer[r])for(const u of h.annotationsBuffer[r])u.depth===r&&h.emitError(new l.ErrorCoded(`Found an illegal @id inside an annotation: ${t}`,l.ERROR_CODES.INVALID_ANNOTATION));h.idStack[s]=y.nullableTermToArray(await y.resourceToTerm(await h.getContext(e),t))}};return Mt.EntryHandlerKeywordId=d,Mt}var jt={},Ai;function ia(){if(Ai)return jt;Ai=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.EntryHandlerKeywordIncluded=void 0;const l=Le(),o=He();let d=class extends o.EntryHandlerKeyword{constructor(){super("@included")}async handle(h,y,i,e,t,r){typeof t!="object"&&h.emitError(new l.ErrorCoded(`Found illegal @included '${t}'`,l.ERROR_CODES.INVALID_INCLUDED_VALUE));const s=await y.unaliasKeywords(t,e,r,await h.getContext(e));"@value"in s&&h.emitError(new l.ErrorCoded(`Found an illegal @included @value node '${JSON.stringify(t)}'`,l.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in s&&h.emitError(new l.ErrorCoded(`Found an illegal @included @list node '${JSON.stringify(t)}'`,l.ERROR_CODES.INVALID_INCLUDED_VALUE)),h.emittedStack[r]=!1}};return jt.EntryHandlerKeywordIncluded=d,jt}var Vt={},vi;function oa(){if(vi)return Vt;vi=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.EntryHandlerKeywordNest=void 0;const l=Le(),o=He();let d=class extends o.EntryHandlerKeyword{constructor(){super("@nest")}async handle(h,y,i,e,t,r){typeof t!="object"&&h.emitError(new l.ErrorCoded(`Found invalid @nest entry for '${i}': '${t}'`,l.ERROR_CODES.INVALID_NEST_VALUE)),"@value"in await y.unaliasKeywords(t,e,r,await h.getContext(e))&&h.emitError(new l.ErrorCoded(`Found an invalid @value node for '${i}'`,l.ERROR_CODES.INVALID_NEST_VALUE)),h.emittedStack[r]=!1}};return Vt.EntryHandlerKeywordNest=d,Vt}var $t={},mi;function aa(){if(mi)return $t;mi=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.EntryHandlerKeywordType=void 0;const l=Le(),o=et(),d=rr(),A=He();let h=class extends A.EntryHandlerKeyword{constructor(){super("@type")}isStackProcessor(){return!1}async handle(i,e,t,r,s,u){const E=r[u],R=await i.getContext(r),m=e.rdfType,g=await e.unaliasKeywordParent(r,u),b=o.Util.isPropertyReverse(R,E,g),v=o.Util.isPropertyInEmbeddedNode(g);e.validateReverseInEmbeddedNode(t,b,v);const I=o.Util.isPropertyInAnnotationObject(g),c=Array.isArray(s)?s:[s];for(const $ of c){typeof $!="string"&&i.emitError(new l.ErrorCoded(`Found illegal @type '${$}'`,l.ERROR_CODES.INVALID_TYPE_VALUE));const Y=e.createVocabOrBaseTerm(R,$);Y&&await d.EntryHandlerPredicate.handlePredicateObject(i,e,r,u,m,Y,b,v,I)}let B=Promise.resolve(R),O=!1;for(const $ of c.sort()){const Y=o.Util.getContextValue(R,"@context",$,null);Y&&(O=!0,B=B.then(U=>i.parseContext(Y,U.getContextRaw())))}i.streamingProfile&&(O||!i.streamingProfileAllowOutOfOrderPlainType)&&(i.processingStack[u]||i.idStack[u])&&i.emitError(new l.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",l.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),O&&(B=B.then($=>$.getContextRaw()["@propagate"]!==!0?new l.JsonLdContextNormalized(Object.assign(Object.assign({},$.getContextRaw()),{"@propagate":!1,"@__propagateFallback":R.getContextRaw()})):$),i.contextTree.setContext(r.slice(0,r.length-1),B)),i.processingType[u]=!0}};return $t.EntryHandlerKeywordType=h,$t}var Ft={},Ti;function la(){if(Ti)return Ft;Ti=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.EntryHandlerKeywordUnknownFallback=void 0;const l=Le();let o=class Ao{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(A,h,y,i,e){const t=await h.unaliasKeyword(y[i],y,i);return l.Util.isPotentialKeyword(t)?!(!e&&t==="@list"):!1}async test(A,h,y,i,e){return l.Util.isPotentialKeyword(y)}async handle(A,h,y,i,e,t){const r=Ao.VALID_KEYWORDS_TYPES[y];r!==void 0?r&&typeof e!==r.type&&A.emitError(new l.ErrorCoded(`Invalid value type for '${y}' with value '${e}'`,r.errorCode)):A.strictValues&&A.emitError(new Error(`Unknown keyword '${y}' with value '${e}'`)),A.emittedStack[t]=!1}};return Ft.EntryHandlerKeywordUnknownFallback=o,o.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:l.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:l.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null},Ft}var Ut={},Ci;function sa(){if(Ci)return Ut;Ci=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.EntryHandlerKeywordValue=void 0;const l=He();let o=class extends l.EntryHandlerKeyword{constructor(){super("@value")}async validate(A,h,y,i,e){const t=y[i];return t&&!A.literalStack[i]&&await this.test(A,h,t,y,i)&&(A.literalStack[i]=!0),super.validate(A,h,y,i,e)}async test(A,h,y,i,e){return await h.unaliasKeyword(i[e],i.slice(0,i.length-1),e-1,!0)==="@value"}async handle(A,h,y,i,e,t){A.literalStack[t]=!0,delete A.unidentifiedValuesBuffer[t],delete A.unidentifiedGraphsBuffer[t],A.emittedStack[t]=!1}};return Ut.EntryHandlerKeywordValue=o,Ut}var Wt={},Ht={},Ni;function da(){if(Ni)return Ht;Ni=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.ContextTree=void 0;let l=class vo{constructor(){this.subTrees={}}getContext(d){if(d.length>0){const[A,...h]=d,y=this.subTrees[A];if(y){const i=y.getContext(h);if(i)return i.then(({context:e,depth:t})=>({context:e,depth:t+1}))}}return this.context?this.context.then(A=>({context:A,depth:0})):null}setContext(d,A){if(d.length===0)this.context=A;else{const[h,...y]=d;let i=this.subTrees[h];i||(i=this.subTrees[h]=new vo),i.setContext(y,A)}}removeContext(d){this.setContext(d,null)}};return Ht.ContextTree=l,Ht}var Oi;function fa(){if(Oi)return Wt;Oi=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.ParsingContext=void 0;const l=Le(),o=qt(),d=da(),A=To();let h=class mo{constructor(i){this.contextParser=new l.ContextParser({documentLoader:i.documentLoader,skipValidation:i.skipContextValidation}),this.streamingProfile=!!i.streamingProfile,this.baseIRI=i.baseIRI,this.produceGeneralizedRdf=!!i.produceGeneralizedRdf,this.allowSubjectList=!!i.allowSubjectList,this.processingMode=i.processingMode||A.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!i.strictValues,this.validateValueIndexes=!!i.validateValueIndexes,this.defaultGraph=i.defaultGraph,this.rdfDirection=i.rdfDirection,this.normalizeLanguageTags=i.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=i.streamingProfileAllowOutOfOrderPlainType,this.rdfstar=i.rdfstar!==!1,this.rdfstarReverseInEmbedded=i.rdfstarReverseInEmbedded,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new d.ContextTree,this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.annotationsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=i.parser,i.context?(this.rootContext=this.parseContext(i.context),this.rootContext.then(e=>this.validateContext(e))):this.rootContext=Promise.resolve(new l.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}))}async parseContext(i,e,t){return this.contextParser.parse(i,{baseIRI:this.baseIRI,ignoreProtection:t,normalizeLanguageTags:this.normalizeLanguageTags,parentContext:e,processingMode:this.activeProcessingMode})}validateContext(i){const e=i.getContextRaw()["@version"];if(e){if(this.activeProcessingMode&&e>this.activeProcessingMode)throw new o.ErrorCoded(`Unsupported JSON-LD version '${e}' under active processing mode ${this.activeProcessingMode}.`,o.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&e<this.activeProcessingMode)throw new o.ErrorCoded(`Invalid JSON-LD version ${e} under active processing mode ${this.activeProcessingMode}.`,o.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=e}}async getContext(i,e=1){const t=i;for(;typeof i[i.length-1]=="number";)i=i.slice(0,i.length-1);e&&(i=i.slice(0,-e));const r=await this.getContextPropagationAware(i);let u=r.context.getContextRaw();for(let E=r.depth;E<t.length-e;E++){const R=t[E],m=u[R];if(m&&typeof m=="object"&&"@context"in m){const g=(await this.parseContext(m,u,!0)).getContextRaw(),b=!(R in g)||g[R]["@context"]["@propagate"];(b!==!1||E===t.length-1-e)&&(u=Object.assign({},g),delete u["@propagate"],u[R]=Object.assign({},u[R]),"@id"in m&&(u[R]["@id"]=m["@id"]),delete u[R]["@context"],b!==!1&&this.contextTree.setContext(t.slice(0,E+e),Promise.resolve(new l.JsonLdContextNormalized(u))))}}return new l.JsonLdContextNormalized(u)}async getContextPropagationAware(i){const e=i.length;let t=null,r;do{r=!1,t&&"@__propagateFallback"in t.context.getContextRaw()?t.context=new l.JsonLdContextNormalized(t.context.getContextRaw()["@__propagateFallback"]):(t&&(i=i.slice(0,t.depth-1)),t=await this.contextTree.getContext(i)||{context:await this.rootContext,depth:0});const s=i[i.length-1];if(s in t.context.getContextRaw()){const u=t.context.getContextRaw()[s];u&&typeof u=="object"&&"@context"in u&&(r=!0)}}while(t.depth>0&&t.context.getContextRaw()["@propagate"]===!1&&t.depth!==e&&!r);return t.depth===0&&t.context.getContextRaw()["@propagate"]===!1&&t.depth!==e&&(t.context=new l.JsonLdContextNormalized({})),t}async newOnValueJob(i,e,t,r){await this.parser.newOnValueJob(i,e,t,r)}async handlePendingContainerFlushBuffers(){if(this.pendingContainerFlushBuffers.length>0){for(const i of this.pendingContainerFlushBuffers)await this.parser.flushBuffer(i.depth,i.keys),this.parser.flushStacks(i.depth);return this.pendingContainerFlushBuffers.splice(0,this.pendingContainerFlushBuffers.length),!0}else return!1}emitQuad(i,e){i===1&&(this.topLevelProperties=!0),this.parser.push(e)}emitError(i){this.parser.emit("error",i)}emitContext(i){this.parser.emit("context",i)}getUnidentifiedValueBufferSafe(i){let e=this.unidentifiedValuesBuffer[i];return e||(e=[],this.unidentifiedValuesBuffer[i]=e),e}getUnidentifiedGraphBufferSafe(i){let e=this.unidentifiedGraphsBuffer[i];return e||(e=[],this.unidentifiedGraphsBuffer[i]=e),e}getAnnotationsBufferSafe(i){let e=this.annotationsBuffer[i];return e||(e=[],this.annotationsBuffer[i]=e),e}getExpandOptions(){return mo.EXPAND_OPTIONS[this.activeProcessingMode]}shiftStack(i,e){const t=this.idStack[i+e];if(t&&(this.idStack[i]=t,this.emittedStack[i]=!0,delete this.idStack[i+e]),this.pendingContainerFlushBuffers.length)for(const r of this.pendingContainerFlushBuffers)r.depth>=i+e&&(r.depth-=e,r.keys.splice(i,e));this.unidentifiedValuesBuffer[i+e]&&(this.unidentifiedValuesBuffer[i]=this.unidentifiedValuesBuffer[i+e],delete this.unidentifiedValuesBuffer[i+e]),this.annotationsBuffer[i+e-1]&&(this.annotationsBuffer[i-1]||(this.annotationsBuffer[i-1]=[]),this.annotationsBuffer[i-1]=[...this.annotationsBuffer[i-1],...this.annotationsBuffer[i+e-1]],delete this.annotationsBuffer[i+e-1])}};return Wt.ParsingContext=h,h.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},Wt}var Gt={},Di;function ua(){if(Di)return Gt;Di=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.EntryHandlerKeywordAnnotation=void 0;const l=He(),o=Le();let d=class extends l.EntryHandlerKeyword{constructor(){super("@annotation")}async handle(h,y,i,e,t,r){(typeof t=="string"||typeof t=="object"&&t["@value"])&&h.emitError(new o.ErrorCoded(`Found illegal annotation value: ${JSON.stringify(t)}`,o.ERROR_CODES.INVALID_ANNOTATION))}};return Gt.EntryHandlerKeywordAnnotation=d,Gt}var Li;function To(){if(Li)return ht;Li=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.JsonLdParser=void 0;const l=ko(),o=Le(),d=qo(),A=Zo(),h=Io(),y=ea(),i=rr(),e=ta(),t=ra(),r=na(),s=ia(),u=oa(),E=aa(),R=la(),m=sa(),g=fa(),b=et(),v=ao(),I=ua();let c=class tt extends d.Transform{constructor(O){super({readableObjectMode:!0}),O=O||{},this.options=O,this.parsingContext=new g.ParsingContext(Object.assign({parser:this},O)),this.util=new b.Util({dataFactory:O.dataFactory,parsingContext:this.parsingContext}),this.jsonParser=new l,this.contextJobs=[],this.typeJobs=[],this.contextAwaitingJobs=[],this.lastDepth=0,this.lastKeys=[],this.lastOnValueJob=Promise.resolve(),this.attachJsonParserListeners(),this.on("end",()=>{typeof this.jsonParser.mode<"u"&&this.emit("error",new Error("Unclosed document"))})}static fromHttpResponse(O,$,Y,U){let le,N=["application/activity+json"];if(U&&U.wellKnownMediaTypes&&(N=U.wellKnownMediaTypes),$!=="application/ld+json"&&!N.includes($)){if($!=="application/json"&&!$.endsWith("+json"))throw new o.ErrorCoded(`Unsupported JSON-LD media type ${$}`,o.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(Y&&Y.has("Link")&&Y.forEach((V,S)=>{if(S==="link"){const F=(0,v.parse)(V);for(const Q of F.get("rel","http://www.w3.org/ns/json-ld#context")){if(le)throw new o.ErrorCoded("Multiple JSON-LD context link headers were found on "+O,o.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);le=Q.uri}}}),!le&&!(U!=null&&U.ignoreMissingContextLinkHeader))throw new o.ErrorCoded(`Missing context link header for media type ${$} on ${O}`,o.ERROR_CODES.LOADING_DOCUMENT_FAILED)}let T;if(Y&&Y.has("Content-Type")){const V=Y.get("Content-Type"),S=/; *profile=([^"]*)/.exec(V);S&&S[1]==="http://www.w3.org/ns/json-ld#streaming"&&(T=!0)}return new tt(Object.assign({baseIRI:O,context:le,streamingProfile:T},U||{}))}import(O){if("pipe"in O){O.on("error",Y=>$.emit("error",Y));const $=O.pipe(new tt(this.options));return $}else{const $=new d.PassThrough({readableObjectMode:!0});O.on("error",U=>Y.emit("error",U)),O.on("data",U=>$.push(U)),O.on("end",()=>$.push(null));const Y=$.pipe(new tt(this.options));return Y}}_transform(O,$,Y){this.jsonParser.write(O),this.lastOnValueJob.then(()=>Y(),U=>Y(U))}async newOnValueJob(O,$,Y,U){let le=!0;if(U&&Y<this.lastDepth){const F=this.parsingContext.listPointerStack[this.lastDepth];F&&(F.value&&this.push(this.util.dataFactory.quad(F.value,this.util.rdfRest,this.util.rdfNil,this.util.getDefaultGraph())),F.listId.listHead=!0,this.parsingContext.idStack[F.listRootDepth+1]=[F.listId],this.parsingContext.listPointerStack.splice(this.lastDepth,1)),await h.EntryHandlerContainer.isBufferableContainerHandler(this.parsingContext,this.lastKeys,this.lastDepth)?(this.parsingContext.pendingContainerFlushBuffers.push({depth:this.lastDepth,keys:this.lastKeys.slice(0,this.lastKeys.length)}),le=!1):await this.flushBuffer(this.lastDepth,this.lastKeys)}const N=await this.util.unaliasKeyword(O[Y],O,Y),T=await this.util.unaliasKeywordParent(O,Y);this.parsingContext.emittedStack[Y]=!0;let V=!0;o.Util.isValidKeyword(N)&&T==="@reverse"&&N!=="@context"&&this.emit("error",new o.ErrorCoded(`Found the @id '${$}' inside an @reverse property`,o.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP));let S=!1;this.parsingContext.validationStack.length>1&&(S=this.parsingContext.validationStack[this.parsingContext.validationStack.length-1].property);for(let F=Math.max(1,this.parsingContext.validationStack.length-1);F<O.length-1;F++){const Q=this.parsingContext.validationStack[F]||(this.parsingContext.validationStack[F]=await this.validateKey(O.slice(0,F+1),F,S));if(Q.valid)!S&&Q.property&&(S=!0);else{this.parsingContext.emittedStack[Y]=!1,V=!1;break}}if(await this.util.isLiteral(O,Y)&&(V=!1),V)for(const F of tt.ENTRY_HANDLERS){const Q=await F.test(this.parsingContext,this.util,N,O,Y);if(Q){await F.handle(this.parsingContext,this.util,N,O,$,Y,Q),F.isStackProcessor()&&(this.parsingContext.processingStack[Y]=!0);break}}Y===0&&Array.isArray($)&&await this.util.validateValueIndexes($),le&&Y<this.lastDepth&&this.flushStacks(this.lastDepth),this.lastDepth=Y,this.lastKeys=O,this.parsingContext.unaliasedKeywordCacheStack.splice(Y-1)}flushStacks(O){this.parsingContext.processingStack.splice(O,1),this.parsingContext.processingType.splice(O,1),this.parsingContext.emittedStack.splice(O,1),this.parsingContext.idStack.splice(O,1),this.parsingContext.graphStack.splice(O+1,1),this.parsingContext.graphContainerTermStack.splice(O,1),this.parsingContext.jsonLiteralStack.splice(O,1),this.parsingContext.validationStack.splice(O-1,2),this.parsingContext.literalStack.splice(O,this.parsingContext.literalStack.length-O),this.parsingContext.annotationsBuffer.splice(O,1)}async flushBuffer(O,$){let Y=this.parsingContext.idStack[O];!!Y||(Y=this.parsingContext.idStack[O]=[this.util.dataFactory.blankNode()]);const le=this.parsingContext.unidentifiedValuesBuffer[O];if(le){for(const V of Y){const S=await this.util.getDepthOffsetGraph(O,$),F=this.parsingContext.graphStack[O]||S>=0?this.parsingContext.idStack[O-S-1]:[await this.util.getGraphContainerValue($,O)];if(F)for(const Q of F){this.parsingContext.emittedStack[O]=!0;for(const Z of le)this.util.emitQuadChecked(O,V,Z.predicate,Z.object,Q,Z.reverse,Z.isEmbedded)}else{const Q=this.parsingContext.getUnidentifiedGraphBufferSafe(O-await this.util.getDepthOffsetGraph(O,$)-1);for(const Z of le)Z.reverse?Q.push({object:V,predicate:Z.predicate,subject:Z.object,isEmbedded:Z.isEmbedded}):Q.push({object:Z.object,predicate:Z.predicate,subject:V,isEmbedded:Z.isEmbedded})}}this.parsingContext.unidentifiedValuesBuffer.splice(O,1),this.parsingContext.literalStack.splice(O,1),this.parsingContext.jsonLiteralStack.splice(O,1)}const N=this.parsingContext.unidentifiedGraphsBuffer[O];if(N){for(const V of Y){const S=O===1&&V.termType==="BlankNode"&&!this.parsingContext.topLevelProperties?this.util.getDefaultGraph():V;this.parsingContext.emittedStack[O]=!0;for(const F of N)this.parsingContext.emitQuad(O,this.util.dataFactory.quad(F.subject,F.predicate,F.object,S))}this.parsingContext.unidentifiedGraphsBuffer.splice(O,1)}const T=this.parsingContext.annotationsBuffer[O];if(T){T.length>0&&O===1&&this.parsingContext.emitError(new o.ErrorCoded("Annotations can not be made on top-level nodes",o.ERROR_CODES.INVALID_ANNOTATION));const V=this.parsingContext.getAnnotationsBufferSafe(O-1);for(const S of T)V.push(S);delete this.parsingContext.annotationsBuffer[O]}}async validateKey(O,$,Y){for(const U of tt.ENTRY_HANDLERS)if(await U.validate(this.parsingContext,this.util,O,$,Y))return{valid:!0,property:Y||U.isPropertyHandler()};return{valid:!1,property:!1}}attachJsonParserListeners(){this.jsonParser.onValue=O=>{const $=this.jsonParser.stack.length,Y=new Array($+1).fill(0).map((U,le)=>le===$?this.jsonParser.key:this.jsonParser.stack[le].key);if(!this.isParsingContextInner($)){const U=()=>this.newOnValueJob(Y,O,$,!0);if(!this.parsingContext.streamingProfile&&!this.parsingContext.contextTree.getContext(Y.slice(0,-1)))if(Y[$]==="@context"){let le=this.contextJobs[$];le||(le=this.contextJobs[$]=[]),le.push(U)}else this.contextAwaitingJobs.push({job:U,keys:Y,depth:$});else this.lastOnValueJob=this.lastOnValueJob.then(U);!this.parsingContext.streamingProfile&&$===0&&(this.lastOnValueJob=this.lastOnValueJob.then(()=>this.executeBufferedJobs()))}},this.jsonParser.onError=O=>{this.emit("error",O)}}isParsingContextInner(O){for(let $=O;$>0;$--)if(this.jsonParser.stack[$-1].key==="@context")return!0;return!1}async executeBufferedJobs(){for(const $ of this.contextJobs)if($)for(const Y of $)await Y();this.parsingContext.unaliasedKeywordCacheStack.splice(0);const O=[];for(const $ of this.contextAwaitingJobs)await this.util.unaliasKeyword($.keys[$.depth],$.keys,$.depth,!0)==="@type"||typeof $.keys[$.depth]=="number"&&await this.util.unaliasKeyword($.keys[$.depth-1],$.keys,$.depth-1,!0)==="@type"?this.typeJobs.push({job:$.job,keys:$.keys.slice(0,$.keys.length-1)}):O.push($);for(const $ of O){if(this.typeJobs.length>0){const Y=[],U=[];for(let T=0;T<this.typeJobs.length;T++){const V=this.typeJobs[T];b.Util.isPrefixArray(V.keys,$.keys)&&(Y.push(V),U.push(T))}const le=Y.sort((T,V)=>T.keys.length-V.keys.length);for(const T of le)await T.job();const N=U.sort().reverse();for(const T of N)this.typeJobs.splice(T,1)}await $.job()}}};return ht.JsonLdParser=c,c.DEFAULT_PROCESSING_MODE="1.1",c.ENTRY_HANDLERS=[new A.EntryHandlerArrayValue,new e.EntryHandlerKeywordContext,new r.EntryHandlerKeywordId,new s.EntryHandlerKeywordIncluded,new t.EntryHandlerKeywordGraph,new u.EntryHandlerKeywordNest,new E.EntryHandlerKeywordType,new m.EntryHandlerKeywordValue,new I.EntryHandlerKeywordAnnotation,new h.EntryHandlerContainer,new R.EntryHandlerKeywordUnknownFallback,new i.EntryHandlerPredicate,new y.EntryHandlerInvalidFallback],ht}var xi;function ca(){return xi||(xi=1,function(l){var o=ze&&ze.__createBinding||(Object.create?function(A,h,y,i){i===void 0&&(i=y);var e=Object.getOwnPropertyDescriptor(h,y);(!e||("get"in e?!h.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return h[y]}}),Object.defineProperty(A,i,e)}:function(A,h,y,i){i===void 0&&(i=y),A[i]=h[y]}),d=ze&&ze.__exportStar||function(A,h){for(var y in A)y!=="default"&&!Object.prototype.hasOwnProperty.call(h,y)&&o(h,A,y)};Object.defineProperty(l,"__esModule",{value:!0}),d(To(),l)}(ze)),ze}var ha=ca(),Hr={exports:{}},Gr={exports:{}},Br,Pi;function Se(){if(Pi)return Br;Pi=1;class l extends Error{constructor(d){if(!Array.isArray(d))throw new TypeError(`Expected input to be an Array, got ${typeof d}`);let A="";for(let h=0;h<d.length;h++)A+=`    ${d[h].stack}
`;super(A),this.name="AggregateError",this.errors=d}}return Br={AggregateError:l,ArrayIsArray(o){return Array.isArray(o)},ArrayPrototypeIncludes(o,d){return o.includes(d)},ArrayPrototypeIndexOf(o,d){return o.indexOf(d)},ArrayPrototypeJoin(o,d){return o.join(d)},ArrayPrototypeMap(o,d){return o.map(d)},ArrayPrototypePop(o,d){return o.pop(d)},ArrayPrototypePush(o,d){return o.push(d)},ArrayPrototypeSlice(o,d,A){return o.slice(d,A)},Error,FunctionPrototypeCall(o,d,...A){return o.call(d,...A)},FunctionPrototypeSymbolHasInstance(o,d){return Function.prototype[Symbol.hasInstance].call(o,d)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(o,d){return Object.defineProperties(o,d)},ObjectDefineProperty(o,d,A){return Object.defineProperty(o,d,A)},ObjectGetOwnPropertyDescriptor(o,d){return Object.getOwnPropertyDescriptor(o,d)},ObjectKeys(o){return Object.keys(o)},ObjectSetPrototypeOf(o,d){return Object.setPrototypeOf(o,d)},Promise,PromisePrototypeCatch(o,d){return o.catch(d)},PromisePrototypeThen(o,d,A){return o.then(d,A)},PromiseReject(o){return Promise.reject(o)},PromiseResolve(o){return Promise.resolve(o)},ReflectApply:Reflect.apply,RegExpPrototypeTest(o,d){return o.test(d)},SafeSet:Set,String,StringPrototypeSlice(o,d,A){return o.slice(d,A)},StringPrototypeToLowerCase(o){return o.toLowerCase()},StringPrototypeToUpperCase(o){return o.toUpperCase()},StringPrototypeTrim(o){return o.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(o,d,A){return o.set(d,A)},Boolean,Uint8Array},Br}var qr={exports:{}},Kr,ki;function Co(){return ki||(ki=1,Kr={format(l,...o){return l.replace(/%([sdifj])/g,function(...[d,A]){const h=o.shift();return A==="f"?h.toFixed(6):A==="j"?JSON.stringify(h):A==="s"&&typeof h=="object"?`${h.constructor!==Object?h.constructor.name:""} {}`.trim():h.toString()})},inspect(l){switch(typeof l){case"string":if(l.includes("'"))if(l.includes('"')){if(!l.includes("`")&&!l.includes("${"))return`\`${l}\``}else return`"${l}"`;return`'${l}'`;case"number":return isNaN(l)?"NaN":Object.is(l,-0)?String(l):l;case"bigint":return`${String(l)}n`;case"boolean":case"undefined":return String(l);case"object":return"{}"}}}),Kr}var Jr,Mi;function Te(){if(Mi)return Jr;Mi=1;const{format:l,inspect:o}=Co(),{AggregateError:d}=Se(),A=globalThis.AggregateError||d,h=Symbol("kIsNodeError"),y=["string","function","number","object","Function","Object","boolean","bigint","symbol"],i=/^([A-Z][a-z0-9]*)+$/,e="__node_internal_",t={};function r(b,v){if(!b)throw new t.ERR_INTERNAL_ASSERTION(v)}function s(b){let v="",I=b.length;const c=b[0]==="-"?1:0;for(;I>=c+4;I-=3)v=`_${b.slice(I-3,I)}${v}`;return`${b.slice(0,I)}${v}`}function u(b,v,I){if(typeof v=="function")return r(v.length<=I.length,`Code: ${b}; The provided arguments length (${I.length}) does not match the required ones (${v.length}).`),v(...I);const c=(v.match(/%[dfijoOs]/g)||[]).length;return r(c===I.length,`Code: ${b}; The provided arguments length (${I.length}) does not match the required ones (${c}).`),I.length===0?v:l(v,...I)}function E(b,v,I){I||(I=Error);class c extends I{constructor(...O){super(u(b,v,O))}toString(){return`${this.name} [${b}]: ${this.message}`}}Object.defineProperties(c.prototype,{name:{value:I.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${b}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),c.prototype.code=b,c.prototype[h]=!0,t[b]=c}function R(b){const v=e+b.name;return Object.defineProperty(b,"name",{value:v}),b}function m(b,v){if(b&&v&&b!==v){if(Array.isArray(v.errors))return v.errors.push(b),v;const I=new A([v,b],v.message);return I.code=v.code,I}return b||v}class g extends Error{constructor(v="The operation was aborted",I=void 0){if(I!==void 0&&typeof I!="object")throw new t.ERR_INVALID_ARG_TYPE("options","Object",I);super(v,I),this.code="ABORT_ERR",this.name="AbortError"}}return E("ERR_ASSERTION","%s",Error),E("ERR_INVALID_ARG_TYPE",(b,v,I)=>{r(typeof b=="string","'name' must be a string"),Array.isArray(v)||(v=[v]);let c="The ";b.endsWith(" argument")?c+=`${b} `:c+=`"${b}" ${b.includes(".")?"property":"argument"} `,c+="must be ";const B=[],O=[],$=[];for(const U of v)r(typeof U=="string","All expected entries have to be of type string"),y.includes(U)?B.push(U.toLowerCase()):i.test(U)?O.push(U):(r(U!=="object",'The value "object" should be written as "Object"'),$.push(U));if(O.length>0){const U=B.indexOf("object");U!==-1&&(B.splice(B,U,1),O.push("Object"))}if(B.length>0){switch(B.length){case 1:c+=`of type ${B[0]}`;break;case 2:c+=`one of type ${B[0]} or ${B[1]}`;break;default:{const U=B.pop();c+=`one of type ${B.join(", ")}, or ${U}`}}(O.length>0||$.length>0)&&(c+=" or ")}if(O.length>0){switch(O.length){case 1:c+=`an instance of ${O[0]}`;break;case 2:c+=`an instance of ${O[0]} or ${O[1]}`;break;default:{const U=O.pop();c+=`an instance of ${O.join(", ")}, or ${U}`}}$.length>0&&(c+=" or ")}switch($.length){case 0:break;case 1:$[0].toLowerCase()!==$[0]&&(c+="an "),c+=`${$[0]}`;break;case 2:c+=`one of ${$[0]} or ${$[1]}`;break;default:{const U=$.pop();c+=`one of ${$.join(", ")}, or ${U}`}}if(I==null)c+=`. Received ${I}`;else if(typeof I=="function"&&I.name)c+=`. Received function ${I.name}`;else if(typeof I=="object"){var Y;if((Y=I.constructor)!==null&&Y!==void 0&&Y.name)c+=`. Received an instance of ${I.constructor.name}`;else{const U=o(I,{depth:-1});c+=`. Received ${U}`}}else{let U=o(I,{colors:!1});U.length>25&&(U=`${U.slice(0,25)}...`),c+=`. Received type ${typeof I} (${U})`}return c},TypeError),E("ERR_INVALID_ARG_VALUE",(b,v,I="is invalid")=>{let c=o(v);return c.length>128&&(c=c.slice(0,128)+"..."),`The ${b.includes(".")?"property":"argument"} '${b}' ${I}. Received ${c}`},TypeError),E("ERR_INVALID_RETURN_VALUE",(b,v,I)=>{var c;const B=I!=null&&(c=I.constructor)!==null&&c!==void 0&&c.name?`instance of ${I.constructor.name}`:`type ${typeof I}`;return`Expected ${b} to be returned from the "${v}" function but got ${B}.`},TypeError),E("ERR_MISSING_ARGS",(...b)=>{r(b.length>0,"At least one arg needs to be specified");let v;const I=b.length;switch(b=(Array.isArray(b)?b:[b]).map(c=>`"${c}"`).join(" or "),I){case 1:v+=`The ${b[0]} argument`;break;case 2:v+=`The ${b[0]} and ${b[1]} arguments`;break;default:{const c=b.pop();v+=`The ${b.join(", ")}, and ${c} arguments`}break}return`${v} must be specified`},TypeError),E("ERR_OUT_OF_RANGE",(b,v,I)=>{r(v,'Missing "range" argument');let c;if(Number.isInteger(I)&&Math.abs(I)>2**32)c=s(String(I));else if(typeof I=="bigint"){c=String(I);const B=BigInt(2)**BigInt(32);(I>B||I<-B)&&(c=s(c)),c+="n"}else c=o(I);return`The value of "${b}" is out of range. It must be ${v}. Received ${c}`},RangeError),E("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),E("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),E("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),E("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),E("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),E("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),E("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),E("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),E("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),E("ERR_STREAM_WRITE_AFTER_END","write after end",Error),E("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Jr={AbortError:g,aggregateTwoErrors:R(m),hideStackFrames:R,codes:t},Jr}var ji;function Ne(){return ji||(ji=1,function(l){const o=Oe(),{format:d,inspect:A}=Co(),{codes:{ERR_INVALID_ARG_TYPE:h}}=Te(),{kResistStopPropagation:y,AggregateError:i,SymbolDispose:e}=Se(),t=globalThis.AbortSignal||Pe().AbortSignal,r=globalThis.AbortController||Pe().AbortController,s=Object.getPrototypeOf(async function(){}).constructor,u=globalThis.Blob||o.Blob,E=typeof u<"u"?function(b){return b instanceof u}:function(b){return!1},R=(g,b)=>{if(g!==void 0&&(g===null||typeof g!="object"||!("aborted"in g)))throw new h(b,"AbortSignal",g)},m=(g,b)=>{if(typeof g!="function")throw new h(b,"Function",g)};l.exports={AggregateError:i,kEmptyObject:Object.freeze({}),once(g){let b=!1;return function(...v){b||(b=!0,g.apply(this,v))}},createDeferredPromise:function(){let g,b;return{promise:new Promise((I,c)=>{g=I,b=c}),resolve:g,reject:b}},promisify(g){return new Promise((b,v)=>{g((I,...c)=>I?v(I):b(...c))})},debuglog(){return function(){}},format:d,inspect:A,types:{isAsyncFunction(g){return g instanceof s},isArrayBufferView(g){return ArrayBuffer.isView(g)}},isBlob:E,deprecate(g,b){return g},addAbortListener:Ue().addAbortListener||function(b,v){if(b===void 0)throw new h("signal","AbortSignal",b);R(b,"signal"),m(v,"listener");let I;return b.aborted?queueMicrotask(()=>v()):(b.addEventListener("abort",v,{__proto__:null,once:!0,[y]:!0}),I=()=>{b.removeEventListener("abort",v)}),{__proto__:null,[e](){var c;(c=I)===null||c===void 0||c()}}},AbortSignalAny:t.any||function(b){if(b.length===1)return b[0];const v=new r,I=()=>v.abort();return b.forEach(c=>{R(c,"signals"),c.addEventListener("abort",I,{once:!0})}),v.signal.addEventListener("abort",()=>{b.forEach(c=>c.removeEventListener("abort",I))},{once:!0}),v.signal}},l.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(qr)),qr.exports}var Xt={},Yr,Vi;function Jt(){if(Vi)return Yr;Vi=1;const{ArrayIsArray:l,ArrayPrototypeIncludes:o,ArrayPrototypeJoin:d,ArrayPrototypeMap:A,NumberIsInteger:h,NumberIsNaN:y,NumberMAX_SAFE_INTEGER:i,NumberMIN_SAFE_INTEGER:e,NumberParseInt:t,ObjectPrototypeHasOwnProperty:r,RegExpPrototypeExec:s,String:u,StringPrototypeToUpperCase:E,StringPrototypeTrim:R}=Se(),{hideStackFrames:m,codes:{ERR_SOCKET_BAD_PORT:g,ERR_INVALID_ARG_TYPE:b,ERR_INVALID_ARG_VALUE:v,ERR_OUT_OF_RANGE:I,ERR_UNKNOWN_SIGNAL:c}}=Te(),{normalizeEncoding:B}=Ne(),{isAsyncFunction:O,isArrayBufferView:$}=Ne().types,Y={};function U(p){return p===(p|0)}function le(p){return p===p>>>0}const N=/^[0-7]+$/,T="must be a 32-bit unsigned integer or an octal string";function V(p,j,H){if(typeof p>"u"&&(p=H),typeof p=="string"){if(s(N,p)===null)throw new v(j,p,T);p=t(p,8)}return Q(p,j),p}const S=m((p,j,H=e,x=i)=>{if(typeof p!="number")throw new b(j,"number",p);if(!h(p))throw new I(j,"an integer",p);if(p<H||p>x)throw new I(j,`>= ${H} && <= ${x}`,p)}),F=m((p,j,H=-2147483648,x=2147483647)=>{if(typeof p!="number")throw new b(j,"number",p);if(!h(p))throw new I(j,"an integer",p);if(p<H||p>x)throw new I(j,`>= ${H} && <= ${x}`,p)}),Q=m((p,j,H=!1)=>{if(typeof p!="number")throw new b(j,"number",p);if(!h(p))throw new I(j,"an integer",p);const x=H?1:0,fe=4294967295;if(p<x||p>fe)throw new I(j,`>= ${x} && <= ${fe}`,p)});function Z(p,j){if(typeof p!="string")throw new b(j,"string",p)}function se(p,j,H=void 0,x){if(typeof p!="number")throw new b(j,"number",p);if(H!=null&&p<H||x!=null&&p>x||(H!=null||x!=null)&&y(p))throw new I(j,`${H!=null?`>= ${H}`:""}${H!=null&&x!=null?" && ":""}${x!=null?`<= ${x}`:""}`,p)}const P=m((p,j,H)=>{if(!o(H,p)){const fe="must be one of: "+d(A(H,be=>typeof be=="string"?`'${be}'`:u(be)),", ");throw new v(j,p,fe)}});function ee(p,j){if(typeof p!="boolean")throw new b(j,"boolean",p)}function f(p,j,H){return p==null||!r(p,j)?H:p[j]}const k=m((p,j,H=null)=>{const x=f(H,"allowArray",!1),fe=f(H,"allowFunction",!1);if(!f(H,"nullable",!1)&&p===null||!x&&l(p)||typeof p!="object"&&(!fe||typeof p!="function"))throw new b(j,"Object",p)}),z=m((p,j)=>{if(p!=null&&typeof p!="object"&&typeof p!="function")throw new b(j,"a dictionary",p)}),L=m((p,j,H=0)=>{if(!l(p))throw new b(j,"Array",p);if(p.length<H){const x=`must be longer than ${H}`;throw new v(j,p,x)}});function re(p,j){L(p,j);for(let H=0;H<p.length;H++)Z(p[H],`${j}[${H}]`)}function ne(p,j){L(p,j);for(let H=0;H<p.length;H++)ee(p[H],`${j}[${H}]`)}function de(p,j){L(p,j);for(let H=0;H<p.length;H++){const x=p[H],fe=`${j}[${H}]`;if(x==null)throw new b(fe,"AbortSignal",x);oe(x,fe)}}function ae(p,j="signal"){if(Z(p,j),Y[p]===void 0)throw Y[E(p)]!==void 0?new c(p+" (signals must use all capital letters)"):new c(p)}const D=m((p,j="buffer")=>{if(!$(p))throw new b(j,["Buffer","TypedArray","DataView"],p)});function M(p,j){const H=B(j),x=p.length;if(H==="hex"&&x%2!==0)throw new v("encoding",j,`is invalid for data of length ${x}`)}function X(p,j="Port",H=!0){if(typeof p!="number"&&typeof p!="string"||typeof p=="string"&&R(p).length===0||+p!==+p>>>0||p>65535||p===0&&!H)throw new g(j,p,H);return p|0}const oe=m((p,j)=>{if(p!==void 0&&(p===null||typeof p!="object"||!("aborted"in p)))throw new b(j,"AbortSignal",p)}),ie=m((p,j)=>{if(typeof p!="function")throw new b(j,"Function",p)}),w=m((p,j)=>{if(typeof p!="function"||O(p))throw new b(j,"Function",p)}),_=m((p,j)=>{if(p!==void 0)throw new b(j,"undefined",p)});function C(p,j,H){if(!o(H,p))throw new b(j,`('${d(H,"|")}')`,p)}const q=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function G(p,j){if(typeof p>"u"||!s(q,p))throw new v(j,p,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function W(p){if(typeof p=="string")return G(p,"hints"),p;if(l(p)){const j=p.length;let H="";if(j===0)return H;for(let x=0;x<j;x++){const fe=p[x];G(fe,"hints"),H+=fe,x!==j-1&&(H+=", ")}return H}throw new v("hints",p,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return Yr={isInt32:U,isUint32:le,parseFileMode:V,validateArray:L,validateStringArray:re,validateBooleanArray:ne,validateAbortSignalArray:de,validateBoolean:ee,validateBuffer:D,validateDictionary:z,validateEncoding:M,validateFunction:ie,validateInt32:F,validateInteger:S,validateNumber:se,validateObject:k,validateOneOf:P,validatePlainFunction:w,validatePort:X,validateSignalName:ae,validateString:Z,validateUint32:Q,validateUndefined:_,validateUnion:C,validateAbortSignal:oe,validateLinkHeaderValue:W},Yr}var Qt={exports:{}},zr,$i;function $e(){if($i)return zr;$i=1;const{SymbolAsyncIterator:l,SymbolIterator:o,SymbolFor:d}=Se(),A=d("nodejs.stream.destroyed"),h=d("nodejs.stream.errored"),y=d("nodejs.stream.readable"),i=d("nodejs.stream.writable"),e=d("nodejs.stream.disturbed"),t=d("nodejs.webstream.isClosedPromise"),r=d("nodejs.webstream.controllerErrorFunction");function s(f,k=!1){var z;return!!(f&&typeof f.pipe=="function"&&typeof f.on=="function"&&(!k||typeof f.pause=="function"&&typeof f.resume=="function")&&(!f._writableState||((z=f._readableState)===null||z===void 0?void 0:z.readable)!==!1)&&(!f._writableState||f._readableState))}function u(f){var k;return!!(f&&typeof f.write=="function"&&typeof f.on=="function"&&(!f._readableState||((k=f._writableState)===null||k===void 0?void 0:k.writable)!==!1))}function E(f){return!!(f&&typeof f.pipe=="function"&&f._readableState&&typeof f.on=="function"&&typeof f.write=="function")}function R(f){return f&&(f._readableState||f._writableState||typeof f.write=="function"&&typeof f.on=="function"||typeof f.pipe=="function"&&typeof f.on=="function")}function m(f){return!!(f&&!R(f)&&typeof f.pipeThrough=="function"&&typeof f.getReader=="function"&&typeof f.cancel=="function")}function g(f){return!!(f&&!R(f)&&typeof f.getWriter=="function"&&typeof f.abort=="function")}function b(f){return!!(f&&!R(f)&&typeof f.readable=="object"&&typeof f.writable=="object")}function v(f){return m(f)||g(f)||b(f)}function I(f,k){return f==null?!1:k===!0?typeof f[l]=="function":k===!1?typeof f[o]=="function":typeof f[l]=="function"||typeof f[o]=="function"}function c(f){if(!R(f))return null;const k=f._writableState,z=f._readableState,L=k||z;return!!(f.destroyed||f[A]||L!=null&&L.destroyed)}function B(f){if(!u(f))return null;if(f.writableEnded===!0)return!0;const k=f._writableState;return k!=null&&k.errored?!1:typeof(k==null?void 0:k.ended)!="boolean"?null:k.ended}function O(f,k){if(!u(f))return null;if(f.writableFinished===!0)return!0;const z=f._writableState;return z!=null&&z.errored?!1:typeof(z==null?void 0:z.finished)!="boolean"?null:!!(z.finished||k===!1&&z.ended===!0&&z.length===0)}function $(f){if(!s(f))return null;if(f.readableEnded===!0)return!0;const k=f._readableState;return!k||k.errored?!1:typeof(k==null?void 0:k.ended)!="boolean"?null:k.ended}function Y(f,k){if(!s(f))return null;const z=f._readableState;return z!=null&&z.errored?!1:typeof(z==null?void 0:z.endEmitted)!="boolean"?null:!!(z.endEmitted||k===!1&&z.ended===!0&&z.length===0)}function U(f){return f&&f[y]!=null?f[y]:typeof(f==null?void 0:f.readable)!="boolean"?null:c(f)?!1:s(f)&&f.readable&&!Y(f)}function le(f){return f&&f[i]!=null?f[i]:typeof(f==null?void 0:f.writable)!="boolean"?null:c(f)?!1:u(f)&&f.writable&&!B(f)}function N(f,k){return R(f)?c(f)?!0:!((k==null?void 0:k.readable)!==!1&&U(f)||(k==null?void 0:k.writable)!==!1&&le(f)):null}function T(f){var k,z;return R(f)?f.writableErrored?f.writableErrored:(k=(z=f._writableState)===null||z===void 0?void 0:z.errored)!==null&&k!==void 0?k:null:null}function V(f){var k,z;return R(f)?f.readableErrored?f.readableErrored:(k=(z=f._readableState)===null||z===void 0?void 0:z.errored)!==null&&k!==void 0?k:null:null}function S(f){if(!R(f))return null;if(typeof f.closed=="boolean")return f.closed;const k=f._writableState,z=f._readableState;return typeof(k==null?void 0:k.closed)=="boolean"||typeof(z==null?void 0:z.closed)=="boolean"?(k==null?void 0:k.closed)||(z==null?void 0:z.closed):typeof f._closed=="boolean"&&F(f)?f._closed:null}function F(f){return typeof f._closed=="boolean"&&typeof f._defaultKeepAlive=="boolean"&&typeof f._removedConnection=="boolean"&&typeof f._removedContLen=="boolean"}function Q(f){return typeof f._sent100=="boolean"&&F(f)}function Z(f){var k;return typeof f._consuming=="boolean"&&typeof f._dumped=="boolean"&&((k=f.req)===null||k===void 0?void 0:k.upgradeOrConnect)===void 0}function se(f){if(!R(f))return null;const k=f._writableState,z=f._readableState,L=k||z;return!L&&Q(f)||!!(L&&L.autoDestroy&&L.emitClose&&L.closed===!1)}function P(f){var k;return!!(f&&((k=f[e])!==null&&k!==void 0?k:f.readableDidRead||f.readableAborted))}function ee(f){var k,z,L,re,ne,de,ae,D,M,X;return!!(f&&((k=(z=(L=(re=(ne=(de=f[h])!==null&&de!==void 0?de:f.readableErrored)!==null&&ne!==void 0?ne:f.writableErrored)!==null&&re!==void 0?re:(ae=f._readableState)===null||ae===void 0?void 0:ae.errorEmitted)!==null&&L!==void 0?L:(D=f._writableState)===null||D===void 0?void 0:D.errorEmitted)!==null&&z!==void 0?z:(M=f._readableState)===null||M===void 0?void 0:M.errored)!==null&&k!==void 0?k:!((X=f._writableState)===null||X===void 0)&&X.errored))}return zr={isDestroyed:c,kIsDestroyed:A,isDisturbed:P,kIsDisturbed:e,isErrored:ee,kIsErrored:h,isReadable:U,kIsReadable:y,kIsClosedPromise:t,kControllerErrorFunction:r,kIsWritable:i,isClosed:S,isDuplexNodeStream:E,isFinished:N,isIterable:I,isReadableNodeStream:s,isReadableStream:m,isReadableEnded:$,isReadableFinished:Y,isReadableErrored:V,isNodeStream:R,isWebStream:v,isWritable:le,isWritableNodeStream:u,isWritableStream:g,isWritableEnded:B,isWritableFinished:O,isWritableErrored:T,isServerRequest:Z,isServerResponse:Q,willEmitClose:se,isTransformStream:b},zr}var Fi;function Ge(){if(Fi)return Qt.exports;Fi=1;const l=De(),{AbortError:o,codes:d}=Te(),{ERR_INVALID_ARG_TYPE:A,ERR_STREAM_PREMATURE_CLOSE:h}=d,{kEmptyObject:y,once:i}=Ne(),{validateAbortSignal:e,validateFunction:t,validateObject:r,validateBoolean:s}=Jt(),{Promise:u,PromisePrototypeThen:E,SymbolDispose:R}=Se(),{isClosed:m,isReadable:g,isReadableNodeStream:b,isReadableStream:v,isReadableFinished:I,isReadableErrored:c,isWritable:B,isWritableNodeStream:O,isWritableStream:$,isWritableFinished:Y,isWritableErrored:U,isNodeStream:le,willEmitClose:N,kIsClosedPromise:T}=$e();let V;function S(P){return P.setHeader&&typeof P.abort=="function"}const F=()=>{};function Q(P,ee,f){var k,z;if(arguments.length===2?(f=ee,ee=y):ee==null?ee=y:r(ee,"options"),t(f,"callback"),e(ee.signal,"options.signal"),f=i(f),v(P)||$(P))return Z(P,ee,f);if(!le(P))throw new A("stream",["ReadableStream","WritableStream","Stream"],P);const L=(k=ee.readable)!==null&&k!==void 0?k:b(P),re=(z=ee.writable)!==null&&z!==void 0?z:O(P),ne=P._writableState,de=P._readableState,ae=()=>{P.writable||X()};let D=N(P)&&b(P)===L&&O(P)===re,M=Y(P,!1);const X=()=>{M=!0,P.destroyed&&(D=!1),!(D&&(!P.readable||L))&&(!L||oe)&&f.call(P)};let oe=I(P,!1);const ie=()=>{oe=!0,P.destroyed&&(D=!1),!(D&&(!P.writable||re))&&(!re||M)&&f.call(P)},w=p=>{f.call(P,p)};let _=m(P);const C=()=>{_=!0;const p=U(P)||c(P);if(p&&typeof p!="boolean")return f.call(P,p);if(L&&!oe&&b(P,!0)&&!I(P,!1))return f.call(P,new h);if(re&&!M&&!Y(P,!1))return f.call(P,new h);f.call(P)},q=()=>{_=!0;const p=U(P)||c(P);if(p&&typeof p!="boolean")return f.call(P,p);f.call(P)},G=()=>{P.req.on("finish",X)};S(P)?(P.on("complete",X),D||P.on("abort",C),P.req?G():P.on("request",G)):re&&!ne&&(P.on("end",ae),P.on("close",ae)),!D&&typeof P.aborted=="boolean"&&P.on("aborted",C),P.on("end",ie),P.on("finish",X),ee.error!==!1&&P.on("error",w),P.on("close",C),_?l.nextTick(C):ne!=null&&ne.errorEmitted||de!=null&&de.errorEmitted?D||l.nextTick(q):(!L&&(!D||g(P))&&(M||B(P)===!1)||!re&&(!D||B(P))&&(oe||g(P)===!1)||de&&P.req&&P.aborted)&&l.nextTick(q);const W=()=>{f=F,P.removeListener("aborted",C),P.removeListener("complete",X),P.removeListener("abort",C),P.removeListener("request",G),P.req&&P.req.removeListener("finish",X),P.removeListener("end",ae),P.removeListener("close",ae),P.removeListener("finish",X),P.removeListener("end",ie),P.removeListener("error",w),P.removeListener("close",C)};if(ee.signal&&!_){const p=()=>{const j=f;W(),j.call(P,new o(void 0,{cause:ee.signal.reason}))};if(ee.signal.aborted)l.nextTick(p);else{V=V||Ne().addAbortListener;const j=V(ee.signal,p),H=f;f=i((...x)=>{j[R](),H.apply(P,x)})}}return W}function Z(P,ee,f){let k=!1,z=F;if(ee.signal)if(z=()=>{k=!0,f.call(P,new o(void 0,{cause:ee.signal.reason}))},ee.signal.aborted)l.nextTick(z);else{V=V||Ne().addAbortListener;const re=V(ee.signal,z),ne=f;f=i((...de)=>{re[R](),ne.apply(P,de)})}const L=(...re)=>{k||l.nextTick(()=>f.apply(P,re))};return E(P[T].promise,L,L),F}function se(P,ee){var f;let k=!1;return ee===null&&(ee=y),(f=ee)!==null&&f!==void 0&&f.cleanup&&(s(ee.cleanup,"cleanup"),k=ee.cleanup),new u((z,L)=>{const re=Q(P,ee,ne=>{k&&re(),ne?L(ne):z()})})}return Qt.exports=Q,Qt.exports.finished=se,Qt.exports}var Xr,Ui;function nt(){if(Ui)return Xr;Ui=1;const l=De(),{aggregateTwoErrors:o,codes:{ERR_MULTIPLE_CALLBACK:d},AbortError:A}=Te(),{Symbol:h}=Se(),{kIsDestroyed:y,isDestroyed:i,isFinished:e,isServerRequest:t}=$e(),r=h("kDestroy"),s=h("kConstruct");function u(N,T,V){N&&(N.stack,T&&!T.errored&&(T.errored=N),V&&!V.errored&&(V.errored=N))}function E(N,T){const V=this._readableState,S=this._writableState,F=S||V;return S!=null&&S.destroyed||V!=null&&V.destroyed?(typeof T=="function"&&T(),this):(u(N,S,V),S&&(S.destroyed=!0),V&&(V.destroyed=!0),F.constructed?R(this,N,T):this.once(r,function(Q){R(this,o(Q,N),T)}),this)}function R(N,T,V){let S=!1;function F(Q){if(S)return;S=!0;const Z=N._readableState,se=N._writableState;u(Q,se,Z),se&&(se.closed=!0),Z&&(Z.closed=!0),typeof V=="function"&&V(Q),Q?l.nextTick(m,N,Q):l.nextTick(g,N)}try{N._destroy(T||null,F)}catch(Q){F(Q)}}function m(N,T){b(N,T),g(N)}function g(N){const T=N._readableState,V=N._writableState;V&&(V.closeEmitted=!0),T&&(T.closeEmitted=!0),(V!=null&&V.emitClose||T!=null&&T.emitClose)&&N.emit("close")}function b(N,T){const V=N._readableState,S=N._writableState;S!=null&&S.errorEmitted||V!=null&&V.errorEmitted||(S&&(S.errorEmitted=!0),V&&(V.errorEmitted=!0),N.emit("error",T))}function v(){const N=this._readableState,T=this._writableState;N&&(N.constructed=!0,N.closed=!1,N.closeEmitted=!1,N.destroyed=!1,N.errored=null,N.errorEmitted=!1,N.reading=!1,N.ended=N.readable===!1,N.endEmitted=N.readable===!1),T&&(T.constructed=!0,T.destroyed=!1,T.closed=!1,T.closeEmitted=!1,T.errored=null,T.errorEmitted=!1,T.finalCalled=!1,T.prefinished=!1,T.ended=T.writable===!1,T.ending=T.writable===!1,T.finished=T.writable===!1)}function I(N,T,V){const S=N._readableState,F=N._writableState;if(F!=null&&F.destroyed||S!=null&&S.destroyed)return this;S!=null&&S.autoDestroy||F!=null&&F.autoDestroy?N.destroy(T):T&&(T.stack,F&&!F.errored&&(F.errored=T),S&&!S.errored&&(S.errored=T),V?l.nextTick(b,N,T):b(N,T))}function c(N,T){if(typeof N._construct!="function")return;const V=N._readableState,S=N._writableState;V&&(V.constructed=!1),S&&(S.constructed=!1),N.once(s,T),!(N.listenerCount(s)>1)&&l.nextTick(B,N)}function B(N){let T=!1;function V(S){if(T){I(N,S??new d);return}T=!0;const F=N._readableState,Q=N._writableState,Z=Q||F;F&&(F.constructed=!0),Q&&(Q.constructed=!0),Z.destroyed?N.emit(r,S):S?I(N,S,!0):l.nextTick(O,N)}try{N._construct(S=>{l.nextTick(V,S)})}catch(S){l.nextTick(V,S)}}function O(N){N.emit(s)}function $(N){return(N==null?void 0:N.setHeader)&&typeof N.abort=="function"}function Y(N){N.emit("close")}function U(N,T){N.emit("error",T),l.nextTick(Y,N)}function le(N,T){!N||i(N)||(!T&&!e(N)&&(T=new A),t(N)?(N.socket=null,N.destroy(T)):$(N)?N.abort():$(N.req)?N.req.abort():typeof N.destroy=="function"?N.destroy(T):typeof N.close=="function"?N.close():T?l.nextTick(U,N,T):l.nextTick(Y,N),N.destroyed||(N[y]=!0))}return Xr={construct:c,destroyer:le,destroy:E,undestroy:v,errorOrDestroy:I},Xr}var Qr,Wi;function En(){if(Wi)return Qr;Wi=1;const{ArrayIsArray:l,ObjectSetPrototypeOf:o}=Se(),{EventEmitter:d}=Ue();function A(y){d.call(this,y)}o(A.prototype,d.prototype),o(A,d),A.prototype.pipe=function(y,i){const e=this;function t(g){y.writable&&y.write(g)===!1&&e.pause&&e.pause()}e.on("data",t);function r(){e.readable&&e.resume&&e.resume()}y.on("drain",r),!y._isStdio&&(!i||i.end!==!1)&&(e.on("end",u),e.on("close",E));let s=!1;function u(){s||(s=!0,y.end())}function E(){s||(s=!0,typeof y.destroy=="function"&&y.destroy())}function R(g){m(),d.listenerCount(this,"error")===0&&this.emit("error",g)}h(e,"error",R),h(y,"error",R);function m(){e.removeListener("data",t),y.removeListener("drain",r),e.removeListener("end",u),e.removeListener("close",E),e.removeListener("error",R),y.removeListener("error",R),e.removeListener("end",m),e.removeListener("close",m),y.removeListener("close",m)}return e.on("end",m),e.on("close",m),y.on("close",m),y.emit("pipe",e),y};function h(y,i,e){if(typeof y.prependListener=="function")return y.prependListener(i,e);!y._events||!y._events[i]?y.on(i,e):l(y._events[i])?y._events[i].unshift(e):y._events[i]=[e,y._events[i]]}return Qr={Stream:A,prependListener:h},Qr}var Zr={exports:{}},Hi;function nr(){return Hi||(Hi=1,function(l){const{SymbolDispose:o}=Se(),{AbortError:d,codes:A}=Te(),{isNodeStream:h,isWebStream:y,kControllerErrorFunction:i}=$e(),e=Ge(),{ERR_INVALID_ARG_TYPE:t}=A;let r;const s=(u,E)=>{if(typeof u!="object"||!("aborted"in u))throw new t(E,"AbortSignal",u)};l.exports.addAbortSignal=function(E,R){if(s(E,"signal"),!h(R)&&!y(R))throw new t("stream",["ReadableStream","WritableStream","Stream"],R);return l.exports.addAbortSignalNoValidate(E,R)},l.exports.addAbortSignalNoValidate=function(u,E){if(typeof u!="object"||!("aborted"in u))return E;const R=h(E)?()=>{E.destroy(new d(void 0,{cause:u.reason}))}:()=>{E[i](new d(void 0,{cause:u.reason}))};if(u.aborted)R();else{r=r||Ne().addAbortListener;const m=r(u,R);e(E,m[o])}return E}}(Zr)),Zr.exports}var en,Gi;function ba(){if(Gi)return en;Gi=1;const{StringPrototypeSlice:l,SymbolIterator:o,TypedArrayPrototypeSet:d,Uint8Array:A}=Se(),{Buffer:h}=Oe(),{inspect:y}=Ne();return en=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length}shift(){if(this.length===0)return;const e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let t=this.head,r=""+t.data;for(;(t=t.next)!==null;)r+=e+t.data;return r}concat(e){if(this.length===0)return h.alloc(0);const t=h.allocUnsafe(e>>>0);let r=this.head,s=0;for(;r;)d(t,r.data,s),s+=r.data.length,r=r.next;return t}consume(e,t){const r=this.head.data;if(e<r.length){const s=r.slice(0,e);return this.head.data=r.slice(e),s}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[o](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",r=this.head,s=0;do{const u=r.data;if(e>u.length)t+=u,e-=u.length;else{e===u.length?(t+=u,++s,r.next?this.head=r.next:this.head=this.tail=null):(t+=l(u,0,e),this.head=r,r.data=l(u,e));break}++s}while((r=r.next)!==null);return this.length-=s,t}_getBuffer(e){const t=h.allocUnsafe(e),r=e;let s=this.head,u=0;do{const E=s.data;if(e>E.length)d(t,E,r-e),e-=E.length;else{e===E.length?(d(t,E,r-e),++u,s.next?this.head=s.next:this.head=this.tail=null):(d(t,new A(E.buffer,E.byteOffset,e),r-e),this.head=s,s.data=E.slice(e));break}++u}while((s=s.next)!==null);return this.length-=u,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return y(this,{...t,depth:0,customInspect:!1})}},en}var tn,Bi;function ir(){if(Bi)return tn;Bi=1;const{MathFloor:l,NumberIsInteger:o}=Se(),{validateInteger:d}=Jt(),{ERR_INVALID_ARG_VALUE:A}=Te().codes;let h=16*1024,y=16;function i(s,u,E){return s.highWaterMark!=null?s.highWaterMark:u?s[E]:null}function e(s){return s?y:h}function t(s,u){d(u,"value",0),s?y=u:h=u}function r(s,u,E,R){const m=i(u,R,E);if(m!=null){if(!o(m)||m<0){const g=R?`options.${E}`:"options.highWaterMark";throw new A(g,m)}return l(m)}return e(s.objectMode)}return tn={getHighWaterMark:r,getDefaultHighWaterMark:e,setDefaultHighWaterMark:t},tn}var rn,qi;function No(){if(qi)return rn;qi=1;const l=De(),{PromisePrototypeThen:o,SymbolAsyncIterator:d,SymbolIterator:A}=Se(),{Buffer:h}=Oe(),{ERR_INVALID_ARG_TYPE:y,ERR_STREAM_NULL_VALUES:i}=Te().codes;function e(t,r,s){let u;if(typeof r=="string"||r instanceof h)return new t({objectMode:!0,...s,read(){this.push(r),this.push(null)}});let E;if(r&&r[d])E=!0,u=r[d]();else if(r&&r[A])E=!1,u=r[A]();else throw new y("iterable",["Iterable"],r);const R=new t({objectMode:!0,highWaterMark:1,...s});let m=!1;R._read=function(){m||(m=!0,b())},R._destroy=function(v,I){o(g(v),()=>l.nextTick(I,v),c=>l.nextTick(I,c||v))};async function g(v){const I=v!=null,c=typeof u.throw=="function";if(I&&c){const{value:B,done:O}=await u.throw(v);if(await B,O)return}if(typeof u.return=="function"){const{value:B}=await u.return();await B}}async function b(){for(;;){try{const{value:v,done:I}=E?await u.next():u.next();if(I)R.push(null);else{const c=v&&typeof v.then=="function"?await v:v;if(c===null)throw m=!1,new i;if(R.push(c))continue;m=!1}}catch(v){R.destroy(v)}break}}return R}return rn=e,rn}var nn,Ki;function or(){if(Ki)return nn;Ki=1;const l=De(),{ArrayPrototypeIndexOf:o,NumberIsInteger:d,NumberIsNaN:A,NumberParseInt:h,ObjectDefineProperties:y,ObjectKeys:i,ObjectSetPrototypeOf:e,Promise:t,SafeSet:r,SymbolAsyncDispose:s,SymbolAsyncIterator:u,Symbol:E}=Se();nn=x,x.ReadableState=H;const{EventEmitter:R}=Ue(),{Stream:m,prependListener:g}=En(),{Buffer:b}=Oe(),{addAbortSignal:v}=nr(),I=Ge();let c=Ne().debuglog("stream",n=>{c=n});const B=ba(),O=nt(),{getHighWaterMark:$,getDefaultHighWaterMark:Y}=ir(),{aggregateTwoErrors:U,codes:{ERR_INVALID_ARG_TYPE:le,ERR_METHOD_NOT_IMPLEMENTED:N,ERR_OUT_OF_RANGE:T,ERR_STREAM_PUSH_AFTER_EOF:V,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:S},AbortError:F}=Te(),{validateObject:Q}=Jt(),Z=E("kPaused"),{StringDecoder:se}=oo(),P=No();e(x.prototype,m.prototype),e(x,m);const ee=()=>{},{errorOrDestroy:f}=O,k=1,z=2,L=4,re=8,ne=16,de=32,ae=64,D=128,M=256,X=512,oe=1024,ie=2048,w=4096,_=8192,C=16384,q=32768,G=65536,W=1<<17,p=1<<18;function j(n){return{enumerable:!1,get(){return(this.state&n)!==0},set(a){a?this.state|=n:this.state&=~n}}}y(H.prototype,{objectMode:j(k),ended:j(z),endEmitted:j(L),reading:j(re),constructed:j(ne),sync:j(de),needReadable:j(ae),emittedReadable:j(D),readableListening:j(M),resumeScheduled:j(X),errorEmitted:j(oe),emitClose:j(ie),autoDestroy:j(w),destroyed:j(_),closed:j(C),closeEmitted:j(q),multiAwaitDrain:j(G),readingMore:j(W),dataEmitted:j(p)});function H(n,a,K){typeof K!="boolean"&&(K=a instanceof je()),this.state=ie|w|ne|de,n&&n.objectMode&&(this.state|=k),K&&n&&n.readableObjectMode&&(this.state|=k),this.highWaterMark=n?$(this,n,"readableHighWaterMark",K):Y(!1),this.buffer=new B,this.length=0,this.pipes=[],this.flowing=null,this[Z]=null,n&&n.emitClose===!1&&(this.state&=-2049),n&&n.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=n&&n.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,n&&n.encoding&&(this.decoder=new se(n.encoding),this.encoding=n.encoding)}function x(n){if(!(this instanceof x))return new x(n);const a=this instanceof je();this._readableState=new H(n,this,a),n&&(typeof n.read=="function"&&(this._read=n.read),typeof n.destroy=="function"&&(this._destroy=n.destroy),typeof n.construct=="function"&&(this._construct=n.construct),n.signal&&!a&&v(n.signal,this)),m.call(this,n),O.construct(this,()=>{this._readableState.needReadable&&we(this,this._readableState)})}x.prototype.destroy=O.destroy,x.prototype._undestroy=O.undestroy,x.prototype._destroy=function(n,a){a(n)},x.prototype[R.captureRejectionSymbol]=function(n){this.destroy(n)},x.prototype[s]=function(){let n;return this.destroyed||(n=this.readableEnded?null:new F,this.destroy(n)),new t((a,K)=>I(this,J=>J&&J!==n?K(J):a(null)))},x.prototype.push=function(n,a){return fe(this,n,a,!1)},x.prototype.unshift=function(n,a){return fe(this,n,a,!0)};function fe(n,a,K,J){c("readableAddChunk",a);const te=n._readableState;let he;if((te.state&k)===0&&(typeof a=="string"?(K=K||te.defaultEncoding,te.encoding!==K&&(J&&te.encoding?a=b.from(a,K).toString(te.encoding):(a=b.from(a,K),K=""))):a instanceof b?K="":m._isUint8Array(a)?(a=m._uint8ArrayToBuffer(a),K=""):a!=null&&(he=new le("chunk",["string","Buffer","Uint8Array"],a))),he)f(n,he);else if(a===null)te.state&=-9,_e(n,te);else if((te.state&k)!==0||a&&a.length>0)if(J)if((te.state&L)!==0)f(n,new S);else{if(te.destroyed||te.errored)return!1;be(n,te,a,!0)}else if(te.ended)f(n,new V);else{if(te.destroyed||te.errored)return!1;te.state&=-9,te.decoder&&!K?(a=te.decoder.write(a),te.objectMode||a.length!==0?be(n,te,a,!1):we(n,te)):be(n,te,a,!1)}else J||(te.state&=-9,we(n,te));return!te.ended&&(te.length<te.highWaterMark||te.length===0)}function be(n,a,K,J){a.flowing&&a.length===0&&!a.sync&&n.listenerCount("data")>0?((a.state&G)!==0?a.awaitDrainWriters.clear():a.awaitDrainWriters=null,a.dataEmitted=!0,n.emit("data",K)):(a.length+=a.objectMode?1:K.length,J?a.buffer.unshift(K):a.buffer.push(K),(a.state&ae)!==0&&Ie(n)),we(n,a)}x.prototype.isPaused=function(){const n=this._readableState;return n[Z]===!0||n.flowing===!1},x.prototype.setEncoding=function(n){const a=new se(n);this._readableState.decoder=a,this._readableState.encoding=this._readableState.decoder.encoding;const K=this._readableState.buffer;let J="";for(const te of K)J+=a.write(te);return K.clear(),J!==""&&K.push(J),this._readableState.length=J.length,this};const ue=1073741824;function pe(n){if(n>ue)throw new T("size","<= 1GiB",n);return n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++,n}function ce(n,a){return n<=0||a.length===0&&a.ended?0:(a.state&k)!==0?1:A(n)?a.flowing&&a.length?a.buffer.first().length:a.length:n<=a.length?n:a.ended?a.length:0}x.prototype.read=function(n){c("read",n),n===void 0?n=NaN:d(n)||(n=h(n,10));const a=this._readableState,K=n;if(n>a.highWaterMark&&(a.highWaterMark=pe(n)),n!==0&&(a.state&=-129),n===0&&a.needReadable&&((a.highWaterMark!==0?a.length>=a.highWaterMark:a.length>0)||a.ended))return c("read: emitReadable",a.length,a.ended),a.length===0&&a.ended?Be(this):Ie(this),null;if(n=ce(n,a),n===0&&a.ended)return a.length===0&&Be(this),null;let J=(a.state&ae)!==0;if(c("need readable",J),(a.length===0||a.length-n<a.highWaterMark)&&(J=!0,c("length less than watermark",J)),a.ended||a.reading||a.destroyed||a.errored||!a.constructed)J=!1,c("reading, ended or constructing",J);else if(J){c("do read"),a.state|=re|de,a.length===0&&(a.state|=ae);try{this._read(a.highWaterMark)}catch(he){f(this,he)}a.state&=-33,a.reading||(n=ce(K,a))}let te;return n>0?te=lt(n,a):te=null,te===null?(a.needReadable=a.length<=a.highWaterMark,n=0):(a.length-=n,a.multiAwaitDrain?a.awaitDrainWriters.clear():a.awaitDrainWriters=null),a.length===0&&(a.ended||(a.needReadable=!0),K!==n&&a.ended&&Be(this)),te!==null&&!a.errorEmitted&&!a.closeEmitted&&(a.dataEmitted=!0,this.emit("data",te)),te};function _e(n,a){if(c("onEofChunk"),!a.ended){if(a.decoder){const K=a.decoder.end();K&&K.length&&(a.buffer.push(K),a.length+=a.objectMode?1:K.length)}a.ended=!0,a.sync?Ie(n):(a.needReadable=!1,a.emittedReadable=!0,ke(n))}}function Ie(n){const a=n._readableState;c("emitReadable",a.needReadable,a.emittedReadable),a.needReadable=!1,a.emittedReadable||(c("emitReadable",a.flowing),a.emittedReadable=!0,l.nextTick(ke,n))}function ke(n){const a=n._readableState;c("emitReadable_",a.destroyed,a.length,a.ended),!a.destroyed&&!a.errored&&(a.length||a.ended)&&(n.emit("readable"),a.emittedReadable=!1),a.needReadable=!a.flowing&&!a.ended&&a.length<=a.highWaterMark,ot(n)}function we(n,a){!a.readingMore&&a.constructed&&(a.readingMore=!0,l.nextTick(ar,n,a))}function ar(n,a){for(;!a.reading&&!a.ended&&(a.length<a.highWaterMark||a.flowing&&a.length===0);){const K=a.length;if(c("maybeReadMore read 0"),n.read(0),K===a.length)break}a.readingMore=!1}x.prototype._read=function(n){throw new N("_read()")},x.prototype.pipe=function(n,a){const K=this,J=this._readableState;J.pipes.length===1&&(J.multiAwaitDrain||(J.multiAwaitDrain=!0,J.awaitDrainWriters=new r(J.awaitDrainWriters?[J.awaitDrainWriters]:[]))),J.pipes.push(n),c("pipe count=%d opts=%j",J.pipes.length,a);const he=(!a||a.end!==!1)&&n!==l.stdout&&n!==l.stderr?dt:xe;J.endEmitted?l.nextTick(he):K.once("end",he),n.on("unpipe",ge);function ge(ve,Re){c("onunpipe"),ve===K&&Re&&Re.hasUnpiped===!1&&(Re.hasUnpiped=!0,br())}function dt(){c("onend"),n.end()}let Ae,ft=!1;function br(){c("cleanup"),n.removeListener("close",Je),n.removeListener("finish",Ye),Ae&&n.removeListener("drain",Ae),n.removeListener("error",Ke),n.removeListener("unpipe",ge),K.removeListener("end",dt),K.removeListener("end",xe),K.removeListener("data",ct),ft=!0,Ae&&J.awaitDrainWriters&&(!n._writableState||n._writableState.needDrain)&&Ae()}function ut(){ft||(J.pipes.length===1&&J.pipes[0]===n?(c("false write response, pause",0),J.awaitDrainWriters=n,J.multiAwaitDrain=!1):J.pipes.length>1&&J.pipes.includes(n)&&(c("false write response, pause",J.awaitDrainWriters.size),J.awaitDrainWriters.add(n)),K.pause()),Ae||(Ae=lr(K,n),n.on("drain",Ae))}K.on("data",ct);function ct(ve){c("ondata");const Re=n.write(ve);c("dest.write",Re),Re===!1&&ut()}function Ke(ve){if(c("onerror",ve),xe(),n.removeListener("error",Ke),n.listenerCount("error")===0){const Re=n._writableState||n._readableState;Re&&!Re.errorEmitted?f(n,ve):n.emit("error",ve)}}g(n,"error",Ke);function Je(){n.removeListener("finish",Ye),xe()}n.once("close",Je);function Ye(){c("onfinish"),n.removeListener("close",Je),xe()}n.once("finish",Ye);function xe(){c("unpipe"),K.unpipe(n)}return n.emit("pipe",K),n.writableNeedDrain===!0?ut():J.flowing||(c("pipe resume"),K.resume()),n};function lr(n,a){return function(){const J=n._readableState;J.awaitDrainWriters===a?(c("pipeOnDrain",1),J.awaitDrainWriters=null):J.multiAwaitDrain&&(c("pipeOnDrain",J.awaitDrainWriters.size),J.awaitDrainWriters.delete(a)),(!J.awaitDrainWriters||J.awaitDrainWriters.size===0)&&n.listenerCount("data")&&n.resume()}}x.prototype.unpipe=function(n){const a=this._readableState,K={hasUnpiped:!1};if(a.pipes.length===0)return this;if(!n){const te=a.pipes;a.pipes=[],this.pause();for(let he=0;he<te.length;he++)te[he].emit("unpipe",this,{hasUnpiped:!1});return this}const J=o(a.pipes,n);return J===-1?this:(a.pipes.splice(J,1),a.pipes.length===0&&this.pause(),n.emit("unpipe",this,K),this)},x.prototype.on=function(n,a){const K=m.prototype.on.call(this,n,a),J=this._readableState;return n==="data"?(J.readableListening=this.listenerCount("readable")>0,J.flowing!==!1&&this.resume()):n==="readable"&&!J.endEmitted&&!J.readableListening&&(J.readableListening=J.needReadable=!0,J.flowing=!1,J.emittedReadable=!1,c("on readable",J.length,J.reading),J.length?Ie(this):J.reading||l.nextTick(sr,this)),K},x.prototype.addListener=x.prototype.on,x.prototype.removeListener=function(n,a){const K=m.prototype.removeListener.call(this,n,a);return n==="readable"&&l.nextTick(it,this),K},x.prototype.off=x.prototype.removeListener,x.prototype.removeAllListeners=function(n){const a=m.prototype.removeAllListeners.apply(this,arguments);return(n==="readable"||n===void 0)&&l.nextTick(it,this),a};function it(n){const a=n._readableState;a.readableListening=n.listenerCount("readable")>0,a.resumeScheduled&&a[Z]===!1?a.flowing=!0:n.listenerCount("data")>0?n.resume():a.readableListening||(a.flowing=null)}function sr(n){c("readable nexttick read 0"),n.read(0)}x.prototype.resume=function(){const n=this._readableState;return n.flowing||(c("resume"),n.flowing=!n.readableListening,dr(this,n)),n[Z]=!1,this};function dr(n,a){a.resumeScheduled||(a.resumeScheduled=!0,l.nextTick(fr,n,a))}function fr(n,a){c("resume",a.reading),a.reading||n.read(0),a.resumeScheduled=!1,n.emit("resume"),ot(n),a.flowing&&!a.reading&&n.read(0)}x.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Z]=!0,this};function ot(n){const a=n._readableState;for(c("flow",a.flowing);a.flowing&&n.read()!==null;);}x.prototype.wrap=function(n){let a=!1;n.on("data",J=>{!this.push(J)&&n.pause&&(a=!0,n.pause())}),n.on("end",()=>{this.push(null)}),n.on("error",J=>{f(this,J)}),n.on("close",()=>{this.destroy()}),n.on("destroy",()=>{this.destroy()}),this._read=()=>{a&&n.resume&&(a=!1,n.resume())};const K=i(n);for(let J=1;J<K.length;J++){const te=K[J];this[te]===void 0&&typeof n[te]=="function"&&(this[te]=n[te].bind(n))}return this},x.prototype[u]=function(){return at(this)},x.prototype.iterator=function(n){return n!==void 0&&Q(n,"options"),at(this,n)};function at(n,a){typeof n.read!="function"&&(n=x.wrap(n,{objectMode:!0}));const K=ur(n,a);return K.stream=n,K}async function*ur(n,a){let K=ee;function J(ge){this===n?(K(),K=ee):K=ge}n.on("readable",J);let te;const he=I(n,{writable:!1},ge=>{te=ge?U(te,ge):null,K(),K=ee});try{for(;;){const ge=n.destroyed?null:n.read();if(ge!==null)yield ge;else{if(te)throw te;if(te===null)return;await new t(J)}}}catch(ge){throw te=U(te,ge),te}finally{(te||(a==null?void 0:a.destroyOnReturn)!==!1)&&(te===void 0||n._readableState.autoDestroy)?O.destroyer(n,null):(n.off("readable",J),he())}}y(x.prototype,{readable:{__proto__:null,get(){const n=this._readableState;return!!n&&n.readable!==!1&&!n.destroyed&&!n.errorEmitted&&!n.endEmitted},set(n){this._readableState&&(this._readableState.readable=!!n)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(n){this._readableState&&(this._readableState.flowing=n)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(n){this._readableState&&(this._readableState.destroyed=n)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),y(H.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Z]!==!1},set(n){this[Z]=!!n}}}),x._fromList=lt;function lt(n,a){if(a.length===0)return null;let K;return a.objectMode?K=a.buffer.shift():!n||n>=a.length?(a.decoder?K=a.buffer.join(""):a.buffer.length===1?K=a.buffer.first():K=a.buffer.concat(a.length),a.buffer.clear()):K=a.buffer.consume(n,a.decoder),K}function Be(n){const a=n._readableState;c("endReadable",a.endEmitted),a.endEmitted||(a.ended=!0,l.nextTick(cr,a,n))}function cr(n,a){if(c("endReadableNT",n.endEmitted,n.length),!n.errored&&!n.closeEmitted&&!n.endEmitted&&n.length===0){if(n.endEmitted=!0,a.emit("end"),a.writable&&a.allowHalfOpen===!1)l.nextTick(hr,a);else if(n.autoDestroy){const K=a._writableState;(!K||K.autoDestroy&&(K.finished||K.writable===!1))&&a.destroy()}}}function hr(n){n.writable&&!n.writableEnded&&!n.destroyed&&n.end()}x.from=function(n,a){return P(x,n,a)};let qe;function st(){return qe===void 0&&(qe={}),qe}return x.fromWeb=function(n,a){return st().newStreamReadableFromReadableStream(n,a)},x.toWeb=function(n,a){return st().newReadableStreamFromStreamReadable(n,a)},x.wrap=function(n,a){var K,J;return new x({objectMode:(K=(J=n.readableObjectMode)!==null&&J!==void 0?J:n.objectMode)!==null&&K!==void 0?K:!0,...a,destroy(te,he){O.destroyer(n,te),he(te)}}).wrap(n)},nn}var on,Ji;function Sn(){if(Ji)return on;Ji=1;const l=De(),{ArrayPrototypeSlice:o,Error:d,FunctionPrototypeSymbolHasInstance:A,ObjectDefineProperty:h,ObjectDefineProperties:y,ObjectSetPrototypeOf:i,StringPrototypeToLowerCase:e,Symbol:t,SymbolHasInstance:r}=Se();on=Q,Q.WritableState=S;const{EventEmitter:s}=Ue(),u=En().Stream,{Buffer:E}=Oe(),R=nt(),{addAbortSignal:m}=nr(),{getHighWaterMark:g,getDefaultHighWaterMark:b}=ir(),{ERR_INVALID_ARG_TYPE:v,ERR_METHOD_NOT_IMPLEMENTED:I,ERR_MULTIPLE_CALLBACK:c,ERR_STREAM_CANNOT_PIPE:B,ERR_STREAM_DESTROYED:O,ERR_STREAM_ALREADY_FINISHED:$,ERR_STREAM_NULL_VALUES:Y,ERR_STREAM_WRITE_AFTER_END:U,ERR_UNKNOWN_ENCODING:le}=Te().codes,{errorOrDestroy:N}=R;i(Q.prototype,u.prototype),i(Q,u);function T(){}const V=t("kOnFinished");function S(w,_,C){typeof C!="boolean"&&(C=_ instanceof je()),this.objectMode=!!(w&&w.objectMode),C&&(this.objectMode=this.objectMode||!!(w&&w.writableObjectMode)),this.highWaterMark=w?g(this,w,"writableHighWaterMark",C):b(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const q=!!(w&&w.decodeStrings===!1);this.decodeStrings=!q,this.defaultEncoding=w&&w.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=f.bind(void 0,_),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,F(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!w||w.emitClose!==!1,this.autoDestroy=!w||w.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[V]=[]}function F(w){w.buffered=[],w.bufferedIndex=0,w.allBuffers=!0,w.allNoop=!0}S.prototype.getBuffer=function(){return o(this.buffered,this.bufferedIndex)},h(S.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Q(w){const _=this instanceof je();if(!_&&!A(Q,this))return new Q(w);this._writableState=new S(w,this,_),w&&(typeof w.write=="function"&&(this._write=w.write),typeof w.writev=="function"&&(this._writev=w.writev),typeof w.destroy=="function"&&(this._destroy=w.destroy),typeof w.final=="function"&&(this._final=w.final),typeof w.construct=="function"&&(this._construct=w.construct),w.signal&&m(w.signal,this)),u.call(this,w),R.construct(this,()=>{const C=this._writableState;C.writing||re(this,C),D(this,C)})}h(Q,r,{__proto__:null,value:function(w){return A(this,w)?!0:this!==Q?!1:w&&w._writableState instanceof S}}),Q.prototype.pipe=function(){N(this,new B)};function Z(w,_,C,q){const G=w._writableState;if(typeof C=="function")q=C,C=G.defaultEncoding;else{if(!C)C=G.defaultEncoding;else if(C!=="buffer"&&!E.isEncoding(C))throw new le(C);typeof q!="function"&&(q=T)}if(_===null)throw new Y;if(!G.objectMode)if(typeof _=="string")G.decodeStrings!==!1&&(_=E.from(_,C),C="buffer");else if(_ instanceof E)C="buffer";else if(u._isUint8Array(_))_=u._uint8ArrayToBuffer(_),C="buffer";else throw new v("chunk",["string","Buffer","Uint8Array"],_);let W;return G.ending?W=new U:G.destroyed&&(W=new O("write")),W?(l.nextTick(q,W),N(w,W,!0),W):(G.pendingcb++,se(w,G,_,C,q))}Q.prototype.write=function(w,_,C){return Z(this,w,_,C)===!0},Q.prototype.cork=function(){this._writableState.corked++},Q.prototype.uncork=function(){const w=this._writableState;w.corked&&(w.corked--,w.writing||re(this,w))},Q.prototype.setDefaultEncoding=function(_){if(typeof _=="string"&&(_=e(_)),!E.isEncoding(_))throw new le(_);return this._writableState.defaultEncoding=_,this};function se(w,_,C,q,G){const W=_.objectMode?1:C.length;_.length+=W;const p=_.length<_.highWaterMark;return p||(_.needDrain=!0),_.writing||_.corked||_.errored||!_.constructed?(_.buffered.push({chunk:C,encoding:q,callback:G}),_.allBuffers&&q!=="buffer"&&(_.allBuffers=!1),_.allNoop&&G!==T&&(_.allNoop=!1)):(_.writelen=W,_.writecb=G,_.writing=!0,_.sync=!0,w._write(C,q,_.onwrite),_.sync=!1),p&&!_.errored&&!_.destroyed}function P(w,_,C,q,G,W,p){_.writelen=q,_.writecb=p,_.writing=!0,_.sync=!0,_.destroyed?_.onwrite(new O("write")):C?w._writev(G,_.onwrite):w._write(G,W,_.onwrite),_.sync=!1}function ee(w,_,C,q){--_.pendingcb,q(C),L(_),N(w,C)}function f(w,_){const C=w._writableState,q=C.sync,G=C.writecb;if(typeof G!="function"){N(w,new c);return}C.writing=!1,C.writecb=null,C.length-=C.writelen,C.writelen=0,_?(_.stack,C.errored||(C.errored=_),w._readableState&&!w._readableState.errored&&(w._readableState.errored=_),q?l.nextTick(ee,w,C,_,G):ee(w,C,_,G)):(C.buffered.length>C.bufferedIndex&&re(w,C),q?C.afterWriteTickInfo!==null&&C.afterWriteTickInfo.cb===G?C.afterWriteTickInfo.count++:(C.afterWriteTickInfo={count:1,cb:G,stream:w,state:C},l.nextTick(k,C.afterWriteTickInfo)):z(w,C,1,G))}function k({stream:w,state:_,count:C,cb:q}){return _.afterWriteTickInfo=null,z(w,_,C,q)}function z(w,_,C,q){for(!_.ending&&!w.destroyed&&_.length===0&&_.needDrain&&(_.needDrain=!1,w.emit("drain"));C-- >0;)_.pendingcb--,q();_.destroyed&&L(_),D(w,_)}function L(w){if(w.writing)return;for(let G=w.bufferedIndex;G<w.buffered.length;++G){var _;const{chunk:W,callback:p}=w.buffered[G],j=w.objectMode?1:W.length;w.length-=j,p((_=w.errored)!==null&&_!==void 0?_:new O("write"))}const C=w[V].splice(0);for(let G=0;G<C.length;G++){var q;C[G]((q=w.errored)!==null&&q!==void 0?q:new O("end"))}F(w)}function re(w,_){if(_.corked||_.bufferProcessing||_.destroyed||!_.constructed)return;const{buffered:C,bufferedIndex:q,objectMode:G}=_,W=C.length-q;if(!W)return;let p=q;if(_.bufferProcessing=!0,W>1&&w._writev){_.pendingcb-=W-1;const j=_.allNoop?T:x=>{for(let fe=p;fe<C.length;++fe)C[fe].callback(x)},H=_.allNoop&&p===0?C:o(C,p);H.allBuffers=_.allBuffers,P(w,_,!0,_.length,H,"",j),F(_)}else{do{const{chunk:j,encoding:H,callback:x}=C[p];C[p++]=null;const fe=G?1:j.length;P(w,_,!1,fe,j,H,x)}while(p<C.length&&!_.writing);p===C.length?F(_):p>256?(C.splice(0,p),_.bufferedIndex=0):_.bufferedIndex=p}_.bufferProcessing=!1}Q.prototype._write=function(w,_,C){if(this._writev)this._writev([{chunk:w,encoding:_}],C);else throw new I("_write()")},Q.prototype._writev=null,Q.prototype.end=function(w,_,C){const q=this._writableState;typeof w=="function"?(C=w,w=null,_=null):typeof _=="function"&&(C=_,_=null);let G;if(w!=null){const W=Z(this,w,_);W instanceof d&&(G=W)}return q.corked&&(q.corked=1,this.uncork()),G||(!q.errored&&!q.ending?(q.ending=!0,D(this,q,!0),q.ended=!0):q.finished?G=new $("end"):q.destroyed&&(G=new O("end"))),typeof C=="function"&&(G||q.finished?l.nextTick(C,G):q[V].push(C)),this};function ne(w){return w.ending&&!w.destroyed&&w.constructed&&w.length===0&&!w.errored&&w.buffered.length===0&&!w.finished&&!w.writing&&!w.errorEmitted&&!w.closeEmitted}function de(w,_){let C=!1;function q(G){if(C){N(w,G??c());return}if(C=!0,_.pendingcb--,G){const W=_[V].splice(0);for(let p=0;p<W.length;p++)W[p](G);N(w,G,_.sync)}else ne(_)&&(_.prefinished=!0,w.emit("prefinish"),_.pendingcb++,l.nextTick(M,w,_))}_.sync=!0,_.pendingcb++;try{w._final(q)}catch(G){q(G)}_.sync=!1}function ae(w,_){!_.prefinished&&!_.finalCalled&&(typeof w._final=="function"&&!_.destroyed?(_.finalCalled=!0,de(w,_)):(_.prefinished=!0,w.emit("prefinish")))}function D(w,_,C){ne(_)&&(ae(w,_),_.pendingcb===0&&(C?(_.pendingcb++,l.nextTick((q,G)=>{ne(G)?M(q,G):G.pendingcb--},w,_)):ne(_)&&(_.pendingcb++,M(w,_))))}function M(w,_){_.pendingcb--,_.finished=!0;const C=_[V].splice(0);for(let q=0;q<C.length;q++)C[q]();if(w.emit("finish"),_.autoDestroy){const q=w._readableState;(!q||q.autoDestroy&&(q.endEmitted||q.readable===!1))&&w.destroy()}}y(Q.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(w){this._writableState&&(this._writableState.destroyed=w)}},writable:{__proto__:null,get(){const w=this._writableState;return!!w&&w.writable!==!1&&!w.destroyed&&!w.errored&&!w.ending&&!w.ended},set(w){this._writableState&&(this._writableState.writable=!!w)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const w=this._writableState;return w?!w.destroyed&&!w.ending&&w.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const X=R.destroy;Q.prototype.destroy=function(w,_){const C=this._writableState;return!C.destroyed&&(C.bufferedIndex<C.buffered.length||C[V].length)&&l.nextTick(L,C),X.call(this,w,_),this},Q.prototype._undestroy=R.undestroy,Q.prototype._destroy=function(w,_){_(w)},Q.prototype[s.captureRejectionSymbol]=function(w){this.destroy(w)};let oe;function ie(){return oe===void 0&&(oe={}),oe}return Q.fromWeb=function(w,_){return ie().newStreamWritableFromWritableStream(w,_)},Q.toWeb=function(w){return ie().newWritableStreamFromStreamWritable(w)},on}var an,Yi;function ya(){if(Yi)return an;Yi=1;const l=De(),o=Oe(),{isReadable:d,isWritable:A,isIterable:h,isNodeStream:y,isReadableNodeStream:i,isWritableNodeStream:e,isDuplexNodeStream:t,isReadableStream:r,isWritableStream:s}=$e(),u=Ge(),{AbortError:E,codes:{ERR_INVALID_ARG_TYPE:R,ERR_INVALID_RETURN_VALUE:m}}=Te(),{destroyer:g}=nt(),b=je(),v=or(),I=Sn(),{createDeferredPromise:c}=Ne(),B=No(),O=globalThis.Blob||o.Blob,$=typeof O<"u"?function(S){return S instanceof O}:function(S){return!1},Y=globalThis.AbortController||Pe().AbortController,{FunctionPrototypeCall:U}=Se();class le extends b{constructor(S){super(S),(S==null?void 0:S.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(S==null?void 0:S.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}an=function V(S,F){if(t(S))return S;if(i(S))return T({readable:S});if(e(S))return T({writable:S});if(y(S))return T({writable:!1,readable:!1});if(r(S))return T({readable:v.fromWeb(S)});if(s(S))return T({writable:I.fromWeb(S)});if(typeof S=="function"){const{value:Z,write:se,final:P,destroy:ee}=N(S);if(h(Z))return B(le,Z,{objectMode:!0,write:se,final:P,destroy:ee});const f=Z==null?void 0:Z.then;if(typeof f=="function"){let k;const z=U(f,Z,L=>{if(L!=null)throw new m("nully","body",L)},L=>{g(k,L)});return k=new le({objectMode:!0,readable:!1,write:se,final(L){P(async()=>{try{await z,l.nextTick(L,null)}catch(re){l.nextTick(L,re)}})},destroy:ee})}throw new m("Iterable, AsyncIterable or AsyncFunction",F,Z)}if($(S))return V(S.arrayBuffer());if(h(S))return B(le,S,{objectMode:!0,writable:!1});if(r(S==null?void 0:S.readable)&&s(S==null?void 0:S.writable))return le.fromWeb(S);if(typeof(S==null?void 0:S.writable)=="object"||typeof(S==null?void 0:S.readable)=="object"){const Z=S!=null&&S.readable?i(S==null?void 0:S.readable)?S==null?void 0:S.readable:V(S.readable):void 0,se=S!=null&&S.writable?e(S==null?void 0:S.writable)?S==null?void 0:S.writable:V(S.writable):void 0;return T({readable:Z,writable:se})}const Q=S==null?void 0:S.then;if(typeof Q=="function"){let Z;return U(Q,S,se=>{se!=null&&Z.push(se),Z.push(null)},se=>{g(Z,se)}),Z=new le({objectMode:!0,writable:!1,read(){}})}throw new R(F,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],S)};function N(V){let{promise:S,resolve:F}=c();const Q=new Y,Z=Q.signal;return{value:V(async function*(){for(;;){const P=S;S=null;const{chunk:ee,done:f,cb:k}=await P;if(l.nextTick(k),f)return;if(Z.aborted)throw new E(void 0,{cause:Z.reason});({promise:S,resolve:F}=c()),yield ee}}(),{signal:Z}),write(P,ee,f){const k=F;F=null,k({chunk:P,done:!1,cb:f})},final(P){const ee=F;F=null,ee({done:!0,cb:P})},destroy(P,ee){Q.abort(),ee(P)}}}function T(V){const S=V.readable&&typeof V.readable.read!="function"?v.wrap(V.readable):V.readable,F=V.writable;let Q=!!d(S),Z=!!A(F),se,P,ee,f,k;function z(L){const re=f;f=null,re?re(L):L&&k.destroy(L)}return k=new le({readableObjectMode:!!(S!=null&&S.readableObjectMode),writableObjectMode:!!(F!=null&&F.writableObjectMode),readable:Q,writable:Z}),Z&&(u(F,L=>{Z=!1,L&&g(S,L),z(L)}),k._write=function(L,re,ne){F.write(L,re)?ne():se=ne},k._final=function(L){F.end(),P=L},F.on("drain",function(){if(se){const L=se;se=null,L()}}),F.on("finish",function(){if(P){const L=P;P=null,L()}})),Q&&(u(S,L=>{Q=!1,L&&g(S,L),z(L)}),S.on("readable",function(){if(ee){const L=ee;ee=null,L()}}),S.on("end",function(){k.push(null)}),k._read=function(){for(;;){const L=S.read();if(L===null){ee=k._read;return}if(!k.push(L))return}}),k._destroy=function(L,re){!L&&f!==null&&(L=new E),ee=null,se=null,P=null,f===null?re(L):(f=re,g(F,L),g(S,L))},k}return an}var ln,zi;function je(){if(zi)return ln;zi=1;const{ObjectDefineProperties:l,ObjectGetOwnPropertyDescriptor:o,ObjectKeys:d,ObjectSetPrototypeOf:A}=Se();ln=i;const h=or(),y=Sn();A(i.prototype,h.prototype),A(i,h);{const s=d(y.prototype);for(let u=0;u<s.length;u++){const E=s[u];i.prototype[E]||(i.prototype[E]=y.prototype[E])}}function i(s){if(!(this instanceof i))return new i(s);h.call(this,s),y.call(this,s),s?(this.allowHalfOpen=s.allowHalfOpen!==!1,s.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),s.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}l(i.prototype,{writable:{__proto__:null,...o(y.prototype,"writable")},writableHighWaterMark:{__proto__:null,...o(y.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...o(y.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...o(y.prototype,"writableBuffer")},writableLength:{__proto__:null,...o(y.prototype,"writableLength")},writableFinished:{__proto__:null,...o(y.prototype,"writableFinished")},writableCorked:{__proto__:null,...o(y.prototype,"writableCorked")},writableEnded:{__proto__:null,...o(y.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...o(y.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(s){this._readableState&&this._writableState&&(this._readableState.destroyed=s,this._writableState.destroyed=s)}}});let e;function t(){return e===void 0&&(e={}),e}i.fromWeb=function(s,u){return t().newStreamDuplexFromReadableWritablePair(s,u)},i.toWeb=function(s){return t().newReadableWritablePairFromDuplex(s)};let r;return i.from=function(s){return r||(r=ya()),r(s,"body")},ln}var sn,Xi;function Oo(){if(Xi)return sn;Xi=1;const{ObjectSetPrototypeOf:l,Symbol:o}=Se();sn=i;const{ERR_METHOD_NOT_IMPLEMENTED:d}=Te().codes,A=je(),{getHighWaterMark:h}=ir();l(i.prototype,A.prototype),l(i,A);const y=o("kCallback");function i(r){if(!(this instanceof i))return new i(r);const s=r?h(this,r,"readableHighWaterMark",!0):null;s===0&&(r={...r,highWaterMark:null,readableHighWaterMark:s,writableHighWaterMark:r.writableHighWaterMark||0}),A.call(this,r),this._readableState.sync=!1,this[y]=null,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",t)}function e(r){typeof this._flush=="function"&&!this.destroyed?this._flush((s,u)=>{if(s){r?r(s):this.destroy(s);return}u!=null&&this.push(u),this.push(null),r&&r()}):(this.push(null),r&&r())}function t(){this._final!==e&&e.call(this)}return i.prototype._final=e,i.prototype._transform=function(r,s,u){throw new d("_transform()")},i.prototype._write=function(r,s,u){const E=this._readableState,R=this._writableState,m=E.length;this._transform(r,s,(g,b)=>{if(g){u(g);return}b!=null&&this.push(b),R.ended||m===E.length||E.length<E.highWaterMark?u():this[y]=u})},i.prototype._read=function(){if(this[y]){const r=this[y];this[y]=null,r()}},sn}var dn,Qi;function Do(){if(Qi)return dn;Qi=1;const{ObjectSetPrototypeOf:l}=Se();dn=d;const o=Oo();l(d.prototype,o.prototype),l(d,o);function d(A){if(!(this instanceof d))return new d(A);o.call(this,A)}return d.prototype._transform=function(A,h,y){y(null,A)},dn}var fn,Zi;function Rn(){if(Zi)return fn;Zi=1;const l=De(),{ArrayIsArray:o,Promise:d,SymbolAsyncIterator:A,SymbolDispose:h}=Se(),y=Ge(),{once:i}=Ne(),e=nt(),t=je(),{aggregateTwoErrors:r,codes:{ERR_INVALID_ARG_TYPE:s,ERR_INVALID_RETURN_VALUE:u,ERR_MISSING_ARGS:E,ERR_STREAM_DESTROYED:R,ERR_STREAM_PREMATURE_CLOSE:m},AbortError:g}=Te(),{validateFunction:b,validateAbortSignal:v}=Jt(),{isIterable:I,isReadable:c,isReadableNodeStream:B,isNodeStream:O,isTransformStream:$,isWebStream:Y,isReadableStream:U,isReadableFinished:le}=$e(),N=globalThis.AbortController||Pe().AbortController;let T,V,S;function F(L,re,ne){let de=!1;L.on("close",()=>{de=!0});const ae=y(L,{readable:re,writable:ne},D=>{de=!D});return{destroy:D=>{de||(de=!0,e.destroyer(L,D||new R("pipe")))},cleanup:ae}}function Q(L){return b(L[L.length-1],"streams[stream.length - 1]"),L.pop()}function Z(L){if(I(L))return L;if(B(L))return se(L);throw new s("val",["Readable","Iterable","AsyncIterable"],L)}async function*se(L){V||(V=or()),yield*V.prototype[A].call(L)}async function P(L,re,ne,{end:de}){let ae,D=null;const M=ie=>{if(ie&&(ae=ie),D){const w=D;D=null,w()}},X=()=>new d((ie,w)=>{ae?w(ae):D=()=>{ae?w(ae):ie()}});re.on("drain",M);const oe=y(re,{readable:!1},M);try{re.writableNeedDrain&&await X();for await(const ie of L)re.write(ie)||await X();de&&(re.end(),await X()),ne()}catch(ie){ne(ae!==ie?r(ae,ie):ie)}finally{oe(),re.off("drain",M)}}async function ee(L,re,ne,{end:de}){$(re)&&(re=re.writable);const ae=re.getWriter();try{for await(const D of L)await ae.ready,ae.write(D).catch(()=>{});await ae.ready,de&&await ae.close(),ne()}catch(D){try{await ae.abort(D),ne(D)}catch(M){ne(M)}}}function f(...L){return k(L,i(Q(L)))}function k(L,re,ne){if(L.length===1&&o(L[0])&&(L=L[0]),L.length<2)throw new E("streams");const de=new N,ae=de.signal,D=ne==null?void 0:ne.signal,M=[];v(D,"options.signal");function X(){G(new g)}S=S||Ne().addAbortListener;let oe;D&&(oe=S(D,X));let ie,w;const _=[];let C=0;function q(H){G(H,--C===0)}function G(H,x){var fe;if(H&&(!ie||ie.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ie=H),!(!ie&&!x)){for(;_.length;)_.shift()(ie);(fe=oe)===null||fe===void 0||fe[h](),de.abort(),x&&(ie||M.forEach(be=>be()),l.nextTick(re,ie,w))}}let W;for(let H=0;H<L.length;H++){const x=L[H],fe=H<L.length-1,be=H>0,ue=fe||(ne==null?void 0:ne.end)!==!1,pe=H===L.length-1;if(O(x)){let ce=function(_e){_e&&_e.name!=="AbortError"&&_e.code!=="ERR_STREAM_PREMATURE_CLOSE"&&q(_e)};if(ue){const{destroy:_e,cleanup:Ie}=F(x,fe,be);_.push(_e),c(x)&&pe&&M.push(Ie)}x.on("error",ce),c(x)&&pe&&M.push(()=>{x.removeListener("error",ce)})}if(H===0)if(typeof x=="function"){if(W=x({signal:ae}),!I(W))throw new u("Iterable, AsyncIterable or Stream","source",W)}else I(x)||B(x)||$(x)?W=x:W=t.from(x);else if(typeof x=="function"){if($(W)){var p;W=Z((p=W)===null||p===void 0?void 0:p.readable)}else W=Z(W);if(W=x(W,{signal:ae}),fe){if(!I(W,!0))throw new u("AsyncIterable",`transform[${H-1}]`,W)}else{var j;T||(T=Do());const ce=new T({objectMode:!0}),_e=(j=W)===null||j===void 0?void 0:j.then;if(typeof _e=="function")C++,_e.call(W,we=>{w=we,we!=null&&ce.write(we),ue&&ce.end(),l.nextTick(q)},we=>{ce.destroy(we),l.nextTick(q,we)});else if(I(W,!0))C++,P(W,ce,q,{end:ue});else if(U(W)||$(W)){const we=W.readable||W;C++,P(we,ce,q,{end:ue})}else throw new u("AsyncIterable or Promise","destination",W);W=ce;const{destroy:Ie,cleanup:ke}=F(W,!1,!0);_.push(Ie),pe&&M.push(ke)}}else if(O(x)){if(B(W)){C+=2;const ce=z(W,x,q,{end:ue});c(x)&&pe&&M.push(ce)}else if($(W)||U(W)){const ce=W.readable||W;C++,P(ce,x,q,{end:ue})}else if(I(W))C++,P(W,x,q,{end:ue});else throw new s("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],W);W=x}else if(Y(x)){if(B(W))C++,ee(Z(W),x,q,{end:ue});else if(U(W)||I(W))C++,ee(W,x,q,{end:ue});else if($(W))C++,ee(W.readable,x,q,{end:ue});else throw new s("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],W);W=x}else W=t.from(x)}return(ae!=null&&ae.aborted||D!=null&&D.aborted)&&l.nextTick(X),W}function z(L,re,ne,{end:de}){let ae=!1;if(re.on("close",()=>{ae||ne(new m)}),L.pipe(re,{end:!1}),de){let D=function(){ae=!0,re.end()};le(L)?l.nextTick(D):L.once("end",D)}else ne();return y(L,{readable:!0,writable:!1},D=>{const M=L._readableState;D&&D.code==="ERR_STREAM_PREMATURE_CLOSE"&&M&&M.ended&&!M.errored&&!M.errorEmitted?L.once("end",ne).once("error",ne):ne(D)}),y(re,{readable:!1,writable:!0},ne)}return fn={pipelineImpl:k,pipeline:f},fn}var un,eo;function Lo(){if(eo)return un;eo=1;const{pipeline:l}=Rn(),o=je(),{destroyer:d}=nt(),{isNodeStream:A,isReadable:h,isWritable:y,isWebStream:i,isTransformStream:e,isWritableStream:t,isReadableStream:r}=$e(),{AbortError:s,codes:{ERR_INVALID_ARG_VALUE:u,ERR_MISSING_ARGS:E}}=Te(),R=Ge();return un=function(...g){if(g.length===0)throw new E("streams");if(g.length===1)return o.from(g[0]);const b=[...g];if(typeof g[0]=="function"&&(g[0]=o.from(g[0])),typeof g[g.length-1]=="function"){const T=g.length-1;g[T]=o.from(g[T])}for(let T=0;T<g.length;++T)if(!(!A(g[T])&&!i(g[T]))){if(T<g.length-1&&!(h(g[T])||r(g[T])||e(g[T])))throw new u(`streams[${T}]`,b[T],"must be readable");if(T>0&&!(y(g[T])||t(g[T])||e(g[T])))throw new u(`streams[${T}]`,b[T],"must be writable")}let v,I,c,B,O;function $(T){const V=B;B=null,V?V(T):T?O.destroy(T):!N&&!le&&O.destroy()}const Y=g[0],U=l(g,$),le=!!(y(Y)||t(Y)||e(Y)),N=!!(h(U)||r(U)||e(U));if(O=new o({writableObjectMode:!!(Y!=null&&Y.writableObjectMode),readableObjectMode:!!(U!=null&&U.readableObjectMode),writable:le,readable:N}),le){if(A(Y))O._write=function(V,S,F){Y.write(V,S)?F():v=F},O._final=function(V){Y.end(),I=V},Y.on("drain",function(){if(v){const V=v;v=null,V()}});else if(i(Y)){const S=(e(Y)?Y.writable:Y).getWriter();O._write=async function(F,Q,Z){try{await S.ready,S.write(F).catch(()=>{}),Z()}catch(se){Z(se)}},O._final=async function(F){try{await S.ready,S.close().catch(()=>{}),I=F}catch(Q){F(Q)}}}const T=e(U)?U.readable:U;R(T,()=>{if(I){const V=I;I=null,V()}})}if(N){if(A(U))U.on("readable",function(){if(c){const T=c;c=null,T()}}),U.on("end",function(){O.push(null)}),O._read=function(){for(;;){const T=U.read();if(T===null){c=O._read;return}if(!O.push(T))return}};else if(i(U)){const V=(e(U)?U.readable:U).getReader();O._read=async function(){for(;;)try{const{value:S,done:F}=await V.read();if(!O.push(S))return;if(F){O.push(null);return}}catch{return}}}}return O._destroy=function(T,V){!T&&B!==null&&(T=new s),c=null,v=null,I=null,B===null?V(T):(B=V,A(U)&&d(U,T))},O},un}var to;function pa(){if(to)return Xt;to=1;const l=globalThis.AbortController||Pe().AbortController,{codes:{ERR_INVALID_ARG_VALUE:o,ERR_INVALID_ARG_TYPE:d,ERR_MISSING_ARGS:A,ERR_OUT_OF_RANGE:h},AbortError:y}=Te(),{validateAbortSignal:i,validateInteger:e,validateObject:t}=Jt(),r=Se().Symbol("kWeak"),s=Se().Symbol("kResistStopPropagation"),{finished:u}=Ge(),E=Lo(),{addAbortSignalNoValidate:R}=nr(),{isWritable:m,isNodeStream:g}=$e(),{deprecate:b}=Ne(),{ArrayPrototypePush:v,Boolean:I,MathFloor:c,Number:B,NumberIsNaN:O,Promise:$,PromiseReject:Y,PromiseResolve:U,PromisePrototypeThen:le,Symbol:N}=Se(),T=N("kEmpty"),V=N("kEof");function S(D,M){if(M!=null&&t(M,"options"),(M==null?void 0:M.signal)!=null&&i(M.signal,"options.signal"),g(D)&&!m(D))throw new o("stream",D,"must be writable");const X=E(this,D);return M!=null&&M.signal&&R(M.signal,X),X}function F(D,M){if(typeof D!="function")throw new d("fn",["Function","AsyncFunction"],D);M!=null&&t(M,"options"),(M==null?void 0:M.signal)!=null&&i(M.signal,"options.signal");let X=1;(M==null?void 0:M.concurrency)!=null&&(X=c(M.concurrency));let oe=X-1;return(M==null?void 0:M.highWaterMark)!=null&&(oe=c(M.highWaterMark)),e(X,"options.concurrency",1),e(oe,"options.highWaterMark",0),oe+=X,(async function*(){const w=Ne().AbortSignalAny([M==null?void 0:M.signal].filter(I)),_=this,C=[],q={signal:w};let G,W,p=!1,j=0;function H(){p=!0,x()}function x(){j-=1,fe()}function fe(){W&&!p&&j<X&&C.length<oe&&(W(),W=null)}async function be(){try{for await(let ue of _){if(p)return;if(w.aborted)throw new y;try{if(ue=D(ue,q),ue===T)continue;ue=U(ue)}catch(pe){ue=Y(pe)}j+=1,le(ue,x,H),C.push(ue),G&&(G(),G=null),!p&&(C.length>=oe||j>=X)&&await new $(pe=>{W=pe})}C.push(V)}catch(ue){const pe=Y(ue);le(pe,x,H),C.push(pe)}finally{p=!0,G&&(G(),G=null)}}be();try{for(;;){for(;C.length>0;){const ue=await C[0];if(ue===V)return;if(w.aborted)throw new y;ue!==T&&(yield ue),C.shift(),fe()}await new $(ue=>{G=ue})}}finally{p=!0,W&&(W(),W=null)}}).call(this)}function Q(D=void 0){return D!=null&&t(D,"options"),(D==null?void 0:D.signal)!=null&&i(D.signal,"options.signal"),(async function*(){let X=0;for await(const ie of this){var oe;if(D!=null&&(oe=D.signal)!==null&&oe!==void 0&&oe.aborted)throw new y({cause:D.signal.reason});yield[X++,ie]}}).call(this)}async function Z(D,M=void 0){for await(const X of f.call(this,D,M))return!0;return!1}async function se(D,M=void 0){if(typeof D!="function")throw new d("fn",["Function","AsyncFunction"],D);return!await Z.call(this,async(...X)=>!await D(...X),M)}async function P(D,M){for await(const X of f.call(this,D,M))return X}async function ee(D,M){if(typeof D!="function")throw new d("fn",["Function","AsyncFunction"],D);async function X(oe,ie){return await D(oe,ie),T}for await(const oe of F.call(this,X,M));}function f(D,M){if(typeof D!="function")throw new d("fn",["Function","AsyncFunction"],D);async function X(oe,ie){return await D(oe,ie)?oe:T}return F.call(this,X,M)}class k extends A{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function z(D,M,X){var oe;if(typeof D!="function")throw new d("reducer",["Function","AsyncFunction"],D);X!=null&&t(X,"options"),(X==null?void 0:X.signal)!=null&&i(X.signal,"options.signal");let ie=arguments.length>1;if(X!=null&&(oe=X.signal)!==null&&oe!==void 0&&oe.aborted){const G=new y(void 0,{cause:X.signal.reason});throw this.once("error",()=>{}),await u(this.destroy(G)),G}const w=new l,_=w.signal;if(X!=null&&X.signal){const G={once:!0,[r]:this,[s]:!0};X.signal.addEventListener("abort",()=>w.abort(),G)}let C=!1;try{for await(const G of this){var q;if(C=!0,X!=null&&(q=X.signal)!==null&&q!==void 0&&q.aborted)throw new y;ie?M=await D(M,G,{signal:_}):(M=G,ie=!0)}if(!C&&!ie)throw new k}finally{w.abort()}return M}async function L(D){D!=null&&t(D,"options"),(D==null?void 0:D.signal)!=null&&i(D.signal,"options.signal");const M=[];for await(const oe of this){var X;if(D!=null&&(X=D.signal)!==null&&X!==void 0&&X.aborted)throw new y(void 0,{cause:D.signal.reason});v(M,oe)}return M}function re(D,M){const X=F.call(this,D,M);return(async function*(){for await(const ie of X)yield*ie}).call(this)}function ne(D){if(D=B(D),O(D))return 0;if(D<0)throw new h("number",">= 0",D);return D}function de(D,M=void 0){return M!=null&&t(M,"options"),(M==null?void 0:M.signal)!=null&&i(M.signal,"options.signal"),D=ne(D),(async function*(){var oe;if(M!=null&&(oe=M.signal)!==null&&oe!==void 0&&oe.aborted)throw new y;for await(const w of this){var ie;if(M!=null&&(ie=M.signal)!==null&&ie!==void 0&&ie.aborted)throw new y;D--<=0&&(yield w)}}).call(this)}function ae(D,M=void 0){return M!=null&&t(M,"options"),(M==null?void 0:M.signal)!=null&&i(M.signal,"options.signal"),D=ne(D),(async function*(){var oe;if(M!=null&&(oe=M.signal)!==null&&oe!==void 0&&oe.aborted)throw new y;for await(const w of this){var ie;if(M!=null&&(ie=M.signal)!==null&&ie!==void 0&&ie.aborted)throw new y;if(D-- >0&&(yield w),D<=0)return}}).call(this)}return Xt.streamReturningOperators={asIndexedPairs:b(Q,"readable.asIndexedPairs will be removed in a future version."),drop:de,filter:f,flatMap:re,map:F,take:ae,compose:S},Xt.promiseReturningOperators={every:se,forEach:ee,reduce:z,toArray:L,some:Z,find:P},Xt}var cn,ro;function xo(){if(ro)return cn;ro=1;const{ArrayPrototypePop:l,Promise:o}=Se(),{isIterable:d,isNodeStream:A,isWebStream:h}=$e(),{pipelineImpl:y}=Rn(),{finished:i}=Ge();Po();function e(...t){return new o((r,s)=>{let u,E;const R=t[t.length-1];if(R&&typeof R=="object"&&!A(R)&&!d(R)&&!h(R)){const m=l(t);u=m.signal,E=m.end}y(t,(m,g)=>{m?s(m):r(g)},{signal:u,end:E})})}return cn={finished:i,pipeline:e},cn}var no;function Po(){if(no)return Gr.exports;no=1;const{Buffer:l}=Oe(),{ObjectDefineProperty:o,ObjectKeys:d,ReflectApply:A}=Se(),{promisify:{custom:h}}=Ne(),{streamReturningOperators:y,promiseReturningOperators:i}=pa(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:e}}=Te(),t=Lo(),{setDefaultHighWaterMark:r,getDefaultHighWaterMark:s}=ir(),{pipeline:u}=Rn(),{destroyer:E}=nt(),R=Ge(),m=xo(),g=$e(),b=Gr.exports=En().Stream;b.isDestroyed=g.isDestroyed,b.isDisturbed=g.isDisturbed,b.isErrored=g.isErrored,b.isReadable=g.isReadable,b.isWritable=g.isWritable,b.Readable=or();for(const I of d(y)){let B=function(...O){if(new.target)throw e();return b.Readable.from(A(c,this,O))};const c=y[I];o(B,"name",{__proto__:null,value:c.name}),o(B,"length",{__proto__:null,value:c.length}),o(b.Readable.prototype,I,{__proto__:null,value:B,enumerable:!1,configurable:!0,writable:!0})}for(const I of d(i)){let B=function(...O){if(new.target)throw e();return A(c,this,O)};const c=i[I];o(B,"name",{__proto__:null,value:c.name}),o(B,"length",{__proto__:null,value:c.length}),o(b.Readable.prototype,I,{__proto__:null,value:B,enumerable:!1,configurable:!0,writable:!0})}b.Writable=Sn(),b.Duplex=je(),b.Transform=Oo(),b.PassThrough=Do(),b.pipeline=u;const{addAbortSignal:v}=nr();return b.addAbortSignal=v,b.finished=R,b.destroy=E,b.compose=t,b.setDefaultHighWaterMark=r,b.getDefaultHighWaterMark=s,o(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return m}}),o(u,h,{__proto__:null,enumerable:!0,get(){return m.pipeline}}),o(R,h,{__proto__:null,enumerable:!0,get(){return m.finished}}),b.Stream=b,b._isUint8Array=function(c){return c instanceof Uint8Array},b._uint8ArrayToBuffer=function(c){return l.from(c.buffer,c.byteOffset,c.byteLength)},Gr.exports}var io;function wa(){return io||(io=1,function(l){const o=Po(),d=xo(),A=o.Readable.destroy;l.exports=o.Readable,l.exports._uint8ArrayToBuffer=o._uint8ArrayToBuffer,l.exports._isUint8Array=o._isUint8Array,l.exports.isDisturbed=o.isDisturbed,l.exports.isErrored=o.isErrored,l.exports.isReadable=o.isReadable,l.exports.Readable=o.Readable,l.exports.Writable=o.Writable,l.exports.Duplex=o.Duplex,l.exports.Transform=o.Transform,l.exports.PassThrough=o.PassThrough,l.exports.addAbortSignal=o.addAbortSignal,l.exports.finished=o.finished,l.exports.destroy=o.destroy,l.exports.destroy=A,l.exports.pipeline=o.pipeline,l.exports.compose=o.compose,Object.defineProperty(o,"promises",{configurable:!0,enumerable:!0,get(){return d}}),l.exports.Stream=o.Stream,l.exports.default=l.exports}(Hr)),Hr.exports}var ga=wa();const hn="null:";function _a(l){return o=>o.termType!=="NamedNode"||!o.value.startsWith(hn)?null:l.namedNode(o.value.slice(hn.length))}function Ea(l){const o=_a(l);return d=>{const A=o(d.subject),h=o(d.predicate),y=o(d.object),i=o(d.graph);return A||h||y||i?l.quad(A||d.subject,h||d.predicate,y||d.object,i||d.graph):d}}class Sa{constructor(o,{baseIRI:d=hn,context:A=null,documentLoader:h,factory:y=Mo}={}){const i=new ha.JsonLdParser({baseIRI:d,context:A,dataFactory:y,documentLoader:h,streamingProfile:!1});o.pipe(i);const e=Ea(y),t=new ga.Transform({objectMode:!0,transform:(r,s,u)=>{u(null,e(r))}});return i.on("context",r=>{Object.entries(r).forEach(([s,u])=>{t.emit("prefix",s,y.namedNode(u))})}),i.on("error",r=>t.destroy(r)),i.pipe(t),jo(t)}}class Ya extends Vo{constructor(o){super(Sa,o)}}export{Ya as default};
