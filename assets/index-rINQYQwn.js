import{K as ii,p as oi,u as Pe,x as Be,y as ze,z as qe,A as ai,L as si,E as li}from"./index-CLau4BBQ.js";import{r as ci}from"./canonicalize-53SzByLi.js";var ot={},at,Nn;function fn(){return Nn||(Nn=1,at=class Pr{constructor(t,f=new Map,_=0){this.prefix=t,this._existing=f,this.counter=_}clone(){const{prefix:t,_existing:f,counter:_}=this;return new Pr(t,new Map(f),_)}getId(t){const f=t&&this._existing.get(t);if(f)return f;const _=this.prefix+this.counter;return this.counter++,t&&this._existing.set(t,_),_}hasId(t){return this._existing.has(t)}getOldIds(){return[...this._existing.keys()]}}),at}var st={},Dn;function ui(){return Dn||(Dn=1,function(d,t){if(d.setImmediate)return;var f=1,_={},B=!1,o=d.document,n;function r(A){typeof A!="function"&&(A=new Function(""+A));for(var a=new Array(arguments.length-1),e=0;e<a.length;e++)a[e]=arguments[e+1];var l={callback:A,args:a};return _[f]=l,n(f),f++}function s(A){delete _[A]}function y(A){var a=A.callback,e=A.args;switch(e.length){case 0:a();break;case 1:a(e[0]);break;case 2:a(e[0],e[1]);break;case 3:a(e[0],e[1],e[2]);break;default:a.apply(t,e);break}}function v(A){if(B)setTimeout(v,0,A);else{var a=_[A];if(a){B=!0;try{y(a)}finally{s(A),B=!1}}}}function x(){n=function(A){process.nextTick(function(){v(A)})}}function h(){if(d.postMessage&&!d.importScripts){var A=!0,a=d.onmessage;return d.onmessage=function(){A=!1},d.postMessage("","*"),d.onmessage=a,A}}function g(){var A="setImmediate$"+Math.random()+"$",a=function(e){e.source===d&&typeof e.data=="string"&&e.data.indexOf(A)===0&&v(+e.data.slice(A.length))};d.addEventListener?d.addEventListener("message",a,!1):d.attachEvent("onmessage",a),n=function(e){d.postMessage(A+e,"*")}}function N(){var A=new MessageChannel;A.port1.onmessage=function(a){var e=a.data;v(e)},n=function(a){A.port2.postMessage(a)}}function R(){var A=o.documentElement;n=function(a){var e=o.createElement("script");e.onreadystatechange=function(){v(a),e.onreadystatechange=null,A.removeChild(e),e=null},A.appendChild(e)}}function b(){n=function(A){setTimeout(v,0,A)}}var P=Object.getPrototypeOf&&Object.getPrototypeOf(d);P=P&&P.setTimeout?P:d,{}.toString.call(d.process)==="[object process]"?x():h()?g():d.MessageChannel?N():o&&"onreadystatechange"in o.createElement("script")?R():b(),P.setImmediate=r,P.clearImmediate=s}(typeof self>"u"?typeof window>"u"?st:window:self)),st}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var lt,Tn;function Xe(){if(Tn)return lt;Tn=1,ui();const d=self.crypto||self.msCrypto;return lt=class{constructor(f){if(!(d&&d.subtle))throw new Error("crypto.subtle not found.");if(f==="sha256")this.algorithm={name:"SHA-256"};else if(f==="sha1")this.algorithm={name:"SHA-1"};else throw new Error(`Unsupported algorithm "${f}".`);this._content=""}update(f){this._content+=f}async digest(){const f=new TextEncoder().encode(this._content),_=new Uint8Array(await d.subtle.digest(this.algorithm,f));let B="";for(let o=0;o<_.length;++o)B+=_[o].toString(16).padStart(2,"0");return B}},lt}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var ct,On;function qr(){return On||(On=1,ct=class{constructor(t){this.current=t.sort(),this.done=!1,this.dir=new Map;for(let f=0;f<t.length;++f)this.dir.set(t[f],!0)}hasNext(){return!this.done}next(){const{current:t,dir:f}=this,_=t.slice();let B=null,o=0;const n=t.length;for(let r=0;r<n;++r){const s=t[r],y=f.get(s);(B===null||s>B)&&(y&&r>0&&s>t[r-1]||!y&&r<n-1&&s>t[r+1])&&(B=s,o=r)}if(B===null)this.done=!0;else{const r=f.get(B)?o-1:o+1;t[o]=t[r],t[r]=B;for(const s of t)s>B&&f.set(s,!f.get(s))}return _}}),ct}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var ut,jn;function hn(){if(jn)return ut;jn=1;const t="http://www.w3.org/1999/02/22-rdf-syntax-ns#"+"langString",f="http://www.w3.org/2001/XMLSchema#string",_="NamedNode",B="BlankNode",o="Literal",n="DefaultGraph",r={};(()=>{const g="(?:<([^:]+:[^>]*)>)",R="A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�"+"_",b=R+"0-9-·̀-ͯ‿-⁀",A="(_:(?:["+R+"0-9])(?:(?:["+b+".])*(?:["+b+"]))?)",a='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',e="(?:\\^\\^"+g+")",E="(?:"+a+"(?:"+e+"|"+"(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))"+")?)",U="[ \\t]+",w="[ \\t]*",W="(?:"+g+"|"+A+")"+U,p=g+U,T="(?:"+g+"|"+A+"|"+E+")"+w,j="(?:\\.|(?:(?:"+g+"|"+A+")"+w+"\\.))";r.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,r.empty=new RegExp("^"+w+"$"),r.quad=new RegExp("^"+w+W+p+T+j+w+"$")})(),ut=class Ge{static parse(N){const R=[],b={},P=N.split(r.eoln);let A=0;for(const a of P){if(A++,r.empty.test(a))continue;const e=a.match(r.quad);if(e===null)throw new Error("N-Quads parse error on line "+A+".");const l={subject:null,predicate:null,object:null,graph:null};if(e[1]!==void 0?l.subject={termType:_,value:e[1]}:l.subject={termType:B,value:e[2]},l.predicate={termType:_,value:e[3]},e[4]!==void 0?l.object={termType:_,value:e[4]}:e[5]!==void 0?l.object={termType:B,value:e[5]}:(l.object={termType:o,value:void 0,datatype:{termType:_}},e[7]!==void 0?l.object.datatype.value=e[7]:e[8]!==void 0?(l.object.datatype.value=t,l.object.language=e[8]):l.object.datatype.value=f,l.object.value=h(e[6])),e[9]!==void 0?l.graph={termType:_,value:e[9]}:e[10]!==void 0?l.graph={termType:B,value:e[10]}:l.graph={termType:n,value:""},!(l.graph.value in b))b[l.graph.value]=[l],R.push(l);else{let E=!0;const U=b[l.graph.value];for(const w of U)if(s(w,l)){E=!1;break}E&&(U.push(l),R.push(l))}}return R}static serialize(N){Array.isArray(N)||(N=Ge.legacyDatasetToQuads(N));const R=[];for(const b of N)R.push(Ge.serializeQuad(b));return R.sort().join("")}static serializeQuadComponents(N,R,b,P){let A="";return N.termType===_?A+=`<${N.value}>`:A+=`${N.value}`,A+=` <${R.value}> `,b.termType===_?A+=`<${b.value}>`:b.termType===B?A+=b.value:(A+=`"${v(b.value)}"`,b.datatype.value===t?b.language&&(A+=`@${b.language}`):b.datatype.value!==f&&(A+=`^^<${b.datatype.value}>`)),P.termType===_?A+=` <${P.value}>`:P.termType===B&&(A+=` ${P.value}`),A+=` .
`,A}static serializeQuad(N){return Ge.serializeQuadComponents(N.subject,N.predicate,N.object,N.graph)}static legacyDatasetToQuads(N){const R=[],b={"blank node":B,IRI:_,literal:o};for(const P in N)N[P].forEach(a=>{const e={};for(const l in a){const E=a[l],U={termType:b[E.type],value:E.value};U.termType===o&&(U.datatype={termType:_},"datatype"in E&&(U.datatype.value=E.datatype),"language"in E?("datatype"in E||(U.datatype.value=t),U.language=E.language):"datatype"in E||(U.datatype.value=f)),e[l]=U}P==="@default"?e.graph={termType:n,value:""}:e.graph={termType:P.startsWith("_:")?B:_,value:P},R.push(e)});return R}};function s(g,N){return!(g.subject.termType===N.subject.termType&&g.object.termType===N.object.termType)||!(g.subject.value===N.subject.value&&g.predicate.value===N.predicate.value&&g.object.value===N.object.value)?!1:g.object.termType!==o?!0:g.object.datatype.termType===N.object.datatype.termType&&g.object.language===N.object.language&&g.object.datatype.value===N.object.datatype.value}const y=/["\\\n\r]/g;function v(g){return g.replace(y,function(N){switch(N){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r"}})}const x=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function h(g){return g.replace(x,function(N,R,b,P){if(R)switch(R){case"t":return"	";case"b":return"\b";case"n":return`
`;case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(b)return String.fromCharCode(parseInt(b,16));if(P)throw new Error("Unsupported U escape")})}return ut}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var dt,Ln;function Fr(){if(Ln)return dt;Ln=1;const d=fn(),t=Xe(),f=qr(),_=hn();dt=class{constructor({createMessageDigest:n=()=>new t("sha256"),canonicalIdMap:r=new Map,maxDeepIterations:s=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new d("_:c14n",r),this.createMessageDigest=n,this.maxDeepIterations=s,this.quads=null,this.deepIterations=null}async main(n){this.deepIterations=new Map,this.quads=n;for(const g of n)this._addBlankNodeQuadInfo({quad:g,component:g.subject}),this._addBlankNodeQuadInfo({quad:g,component:g.object}),this._addBlankNodeQuadInfo({quad:g,component:g.graph});const r=new Map,s=[...this.blankNodeInfo.keys()];let y=0;for(const g of s)++y%100===0&&await this._yield(),await this._hashAndTrackBlankNode({id:g,hashToBlankNodes:r});const v=[...r.keys()].sort(),x=[];for(const g of v){const N=r.get(g);if(N.length>1){x.push(N);continue}const R=N[0];this.canonicalIssuer.getId(R)}for(const g of x){const N=[];for(const R of g){if(this.canonicalIssuer.hasId(R))continue;const b=new d("_:b");b.getId(R);const P=await this.hashNDegreeQuads(R,b);N.push(P)}N.sort(B);for(const R of N){const b=R.issuer.getOldIds();for(const P of b)this.canonicalIssuer.getId(P)}}const h=[];for(const g of this.quads){const N=_.serializeQuadComponents(this._componentWithCanonicalId(g.subject),g.predicate,this._componentWithCanonicalId(g.object),this._componentWithCanonicalId(g.graph));h.push(N)}return h.sort(),h.join("")}async hashFirstDegreeQuads(n){const r=[],s=this.blankNodeInfo.get(n),y=s.quads;for(const x of y){const h={subject:null,predicate:x.predicate,object:null,graph:null};h.subject=this.modifyFirstDegreeComponent(n,x.subject,"subject"),h.object=this.modifyFirstDegreeComponent(n,x.object,"object"),h.graph=this.modifyFirstDegreeComponent(n,x.graph,"graph"),r.push(_.serializeQuad(h))}r.sort();const v=this.createMessageDigest();for(const x of r)v.update(x);return s.hash=await v.digest(),s.hash}async hashRelatedBlankNode(n,r,s,y){let v;this.canonicalIssuer.hasId(n)?v=this.canonicalIssuer.getId(n):s.hasId(n)?v=s.getId(n):v=this.blankNodeInfo.get(n).hash;const x=this.createMessageDigest();return x.update(y),y!=="g"&&x.update(this.getRelatedPredicate(r)),x.update(v),x.digest()}async hashNDegreeQuads(n,r){const s=this.deepIterations.get(n)||0;if(s>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(n,s+1);const y=this.createMessageDigest(),v=await this.createHashToRelated(n,r),x=[...v.keys()].sort();for(const h of x){y.update(h);let g="",N;const R=new f(v.get(h));let b=0;for(;R.hasNext();){const P=R.next();++b%3===0&&await this._yield();let A=r.clone(),a="";const e=[];let l=!1;for(const E of P)if(this.canonicalIssuer.hasId(E)?a+=this.canonicalIssuer.getId(E):(A.hasId(E)||e.push(E),a+=A.getId(E)),g.length!==0&&a>g){l=!0;break}if(!l){for(const E of e){const U=await this.hashNDegreeQuads(E,A);if(a+=A.getId(E),a+=`<${U.hash}>`,A=U.issuer,g.length!==0&&a>g){l=!0;break}}l||(g.length===0||a<g)&&(g=a,N=A)}}y.update(g),r=N}return{hash:await y.digest(),issuer:r}}modifyFirstDegreeComponent(n,r){return r.termType!=="BlankNode"?r:{termType:"BlankNode",value:r.value===n?"_:a":"_:z"}}getRelatedPredicate(n){return`<${n.predicate.value}>`}async createHashToRelated(n,r){const s=new Map,y=this.blankNodeInfo.get(n).quads;let v=0;for(const x of y)++v%100===0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:x,component:x.subject,position:"s",id:n,issuer:r,hashToRelated:s}),this._addRelatedBlankNodeHash({quad:x,component:x.object,position:"o",id:n,issuer:r,hashToRelated:s}),this._addRelatedBlankNodeHash({quad:x,component:x.graph,position:"g",id:n,issuer:r,hashToRelated:s})]);return s}async _hashAndTrackBlankNode({id:n,hashToBlankNodes:r}){const s=await this.hashFirstDegreeQuads(n),y=r.get(s);y?y.push(n):r.set(s,[n])}_addBlankNodeQuadInfo({quad:n,component:r}){if(r.termType!=="BlankNode")return;const s=r.value,y=this.blankNodeInfo.get(s);y?y.quads.add(n):this.blankNodeInfo.set(s,{quads:new Set([n]),hash:null})}async _addRelatedBlankNodeHash({quad:n,component:r,position:s,id:y,issuer:v,hashToRelated:x}){if(!(r.termType==="BlankNode"&&r.value!==y))return;const h=r.value,g=await this.hashRelatedBlankNode(h,n,v,s),N=x.get(g);N?N.push(h):x.set(g,[h])}_componentWithCanonicalId(n){return n.termType==="BlankNode"&&!n.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(n.value)}:n}async _yield(){return new Promise(n=>setImmediate(n))}};function B(o,n){return o.hash<n.hash?-1:o.hash>n.hash?1:0}return dt}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var ft,kn;function di(){if(kn)return ft;kn=1;const d=Xe(),t=Fr();return ft=class extends t{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new d("sha1")}modifyFirstDegreeComponent(_,B,o){return B.termType!=="BlankNode"?B:o==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:B.value===_?"_:a":"_:z"}}getRelatedPredicate(_){return _.predicate.value}async createHashToRelated(_,B){const o=new Map,n=this.blankNodeInfo.get(_).quads;let r=0;for(const s of n){let y,v;if(s.subject.termType==="BlankNode"&&s.subject.value!==_)v=s.subject.value,y="p";else if(s.object.termType==="BlankNode"&&s.object.value!==_)v=s.object.value,y="r";else continue;++r%100===0&&await this._yield();const x=await this.hashRelatedBlankNode(v,s,B,y),h=o.get(x);h?h.push(v):o.set(x,[v])}return o}},ft}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var ht,Mn;function Ur(){if(Mn)return ht;Mn=1;const d=fn(),t=Xe(),f=qr(),_=hn();ht=class{constructor({createMessageDigest:n=()=>new t("sha256"),canonicalIdMap:r=new Map,maxDeepIterations:s=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new d("_:c14n",r),this.createMessageDigest=n,this.maxDeepIterations=s,this.quads=null,this.deepIterations=null}main(n){this.deepIterations=new Map,this.quads=n;for(const h of n)this._addBlankNodeQuadInfo({quad:h,component:h.subject}),this._addBlankNodeQuadInfo({quad:h,component:h.object}),this._addBlankNodeQuadInfo({quad:h,component:h.graph});const r=new Map,s=[...this.blankNodeInfo.keys()];for(const h of s)this._hashAndTrackBlankNode({id:h,hashToBlankNodes:r});const y=[...r.keys()].sort(),v=[];for(const h of y){const g=r.get(h);if(g.length>1){v.push(g);continue}const N=g[0];this.canonicalIssuer.getId(N)}for(const h of v){const g=[];for(const N of h){if(this.canonicalIssuer.hasId(N))continue;const R=new d("_:b");R.getId(N);const b=this.hashNDegreeQuads(N,R);g.push(b)}g.sort(B);for(const N of g){const R=N.issuer.getOldIds();for(const b of R)this.canonicalIssuer.getId(b)}}const x=[];for(const h of this.quads){const g=_.serializeQuadComponents(this._componentWithCanonicalId({component:h.subject}),h.predicate,this._componentWithCanonicalId({component:h.object}),this._componentWithCanonicalId({component:h.graph}));x.push(g)}return x.sort(),x.join("")}hashFirstDegreeQuads(n){const r=[],s=this.blankNodeInfo.get(n),y=s.quads;for(const x of y){const h={subject:null,predicate:x.predicate,object:null,graph:null};h.subject=this.modifyFirstDegreeComponent(n,x.subject,"subject"),h.object=this.modifyFirstDegreeComponent(n,x.object,"object"),h.graph=this.modifyFirstDegreeComponent(n,x.graph,"graph"),r.push(_.serializeQuad(h))}r.sort();const v=this.createMessageDigest();for(const x of r)v.update(x);return s.hash=v.digest(),s.hash}hashRelatedBlankNode(n,r,s,y){let v;this.canonicalIssuer.hasId(n)?v=this.canonicalIssuer.getId(n):s.hasId(n)?v=s.getId(n):v=this.blankNodeInfo.get(n).hash;const x=this.createMessageDigest();return x.update(y),y!=="g"&&x.update(this.getRelatedPredicate(r)),x.update(v),x.digest()}hashNDegreeQuads(n,r){const s=this.deepIterations.get(n)||0;if(s>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(n,s+1);const y=this.createMessageDigest(),v=this.createHashToRelated(n,r),x=[...v.keys()].sort();for(const h of x){y.update(h);let g="",N;const R=new f(v.get(h));for(;R.hasNext();){const b=R.next();let P=r.clone(),A="";const a=[];let e=!1;for(const l of b)if(this.canonicalIssuer.hasId(l)?A+=this.canonicalIssuer.getId(l):(P.hasId(l)||a.push(l),A+=P.getId(l)),g.length!==0&&A>g){e=!0;break}if(!e){for(const l of a){const E=this.hashNDegreeQuads(l,P);if(A+=P.getId(l),A+=`<${E.hash}>`,P=E.issuer,g.length!==0&&A>g){e=!0;break}}e||(g.length===0||A<g)&&(g=A,N=P)}}y.update(g),r=N}return{hash:y.digest(),issuer:r}}modifyFirstDegreeComponent(n,r){return r.termType!=="BlankNode"?r:{termType:"BlankNode",value:r.value===n?"_:a":"_:z"}}getRelatedPredicate(n){return`<${n.predicate.value}>`}createHashToRelated(n,r){const s=new Map,y=this.blankNodeInfo.get(n).quads;for(const v of y)this._addRelatedBlankNodeHash({quad:v,component:v.subject,position:"s",id:n,issuer:r,hashToRelated:s}),this._addRelatedBlankNodeHash({quad:v,component:v.object,position:"o",id:n,issuer:r,hashToRelated:s}),this._addRelatedBlankNodeHash({quad:v,component:v.graph,position:"g",id:n,issuer:r,hashToRelated:s});return s}_hashAndTrackBlankNode({id:n,hashToBlankNodes:r}){const s=this.hashFirstDegreeQuads(n),y=r.get(s);y?y.push(n):r.set(s,[n])}_addBlankNodeQuadInfo({quad:n,component:r}){if(r.termType!=="BlankNode")return;const s=r.value,y=this.blankNodeInfo.get(s);y?y.quads.add(n):this.blankNodeInfo.set(s,{quads:new Set([n]),hash:null})}_addRelatedBlankNodeHash({quad:n,component:r,position:s,id:y,issuer:v,hashToRelated:x}){if(!(r.termType==="BlankNode"&&r.value!==y))return;const h=r.value,g=this.hashRelatedBlankNode(h,n,v,s),N=x.get(g);N?N.push(h):x.set(g,[h])}_componentWithCanonicalId({component:n}){return n.termType==="BlankNode"&&!n.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(n.value)}:n}};function B(o,n){return o.hash<n.hash?-1:o.hash>n.hash?1:0}return ht}/*!
 * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
 */var pt,Pn;function fi(){if(Pn)return pt;Pn=1;const d=Xe(),t=Ur();return pt=class extends t{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new d("sha1")}modifyFirstDegreeComponent(_,B,o){return B.termType!=="BlankNode"?B:o==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:B.value===_?"_:a":"_:z"}}getRelatedPredicate(_){return _.predicate.value}createHashToRelated(_,B){const o=new Map,n=this.blankNodeInfo.get(_).quads;for(const r of n){let s,y;if(r.subject.termType==="BlankNode"&&r.subject.value!==_)y=r.subject.value,s="p";else if(r.object.termType==="BlankNode"&&r.object.value!==_)y=r.object.value,s="r";else continue;const v=this.hashRelatedBlankNode(y,r,B,s),x=o.get(v);x?x.push(y):o.set(v,[y])}return o}},pt}var qn;function hi(){return qn||(qn=1,function(d){const t=Fr(),f=di(),_=Ur(),B=fi();let o;try{o=ii}catch{}function n(r){return Array.isArray(r)?r:d.NQuads.legacyDatasetToQuads(r)}d.NQuads=hn(),d.IdentifierIssuer=fn(),d._rdfCanonizeNative=function(r){return r&&(o=r),o},d.canonize=async function(r,s){const y=n(r);if(s.useNative){if(!o)throw new Error("rdf-canonize-native not available");if(s.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((v,x)=>o.canonize(y,s,(h,g)=>h?x(h):v(g)))}if(s.algorithm==="URDNA2015")return new t(s).main(y);if(s.algorithm==="URGNA2012"){if(s.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new f(s).main(y)}throw"algorithm"in s?new Error("Invalid RDF Dataset Canonicalization algorithm: "+s.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")},d._canonizeSync=function(r,s){const y=n(r);if(s.useNative){if(!o)throw new Error("rdf-canonize-native not available");if(s.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return o.canonizeSync(y,s)}if(s.algorithm==="URDNA2015")return new _(s).main(y);if(s.algorithm==="URGNA2012"){if(s.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new B(s).main(y)}throw"algorithm"in s?new Error("Invalid RDF Dataset Canonicalization algorithm: "+s.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}}(ot)),ot}var gt,Fn;function pn(){return Fn||(Fn=1,gt=hi()),gt}var yt,Un;function me(){if(Un)return yt;Un=1;const d={};return yt=d,d.isArray=Array.isArray,d.isBoolean=t=>typeof t=="boolean"||Object.prototype.toString.call(t)==="[object Boolean]",d.isDouble=t=>d.isNumber(t)&&(String(t).indexOf(".")!==-1||Math.abs(t)>=1e21),d.isEmptyObject=t=>d.isObject(t)&&Object.keys(t).length===0,d.isNumber=t=>typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]",d.isNumeric=t=>!isNaN(parseFloat(t))&&isFinite(t),d.isObject=t=>Object.prototype.toString.call(t)==="[object Object]",d.isString=t=>typeof t=="string"||Object.prototype.toString.call(t)==="[object String]",d.isUndefined=t=>typeof t>"u",yt}var bt,Bn;function Ae(){if(Bn)return bt;Bn=1;const d=me(),t={};return bt=t,t.isSubject=f=>d.isObject(f)&&!("@value"in f||"@set"in f||"@list"in f)?Object.keys(f).length>1||!("@id"in f):!1,t.isSubjectReference=f=>d.isObject(f)&&Object.keys(f).length===1&&"@id"in f,t.isValue=f=>d.isObject(f)&&"@value"in f,t.isList=f=>d.isObject(f)&&"@list"in f,t.isGraph=f=>d.isObject(f)&&"@graph"in f&&Object.keys(f).filter(_=>_!=="@id"&&_!=="@index").length===1,t.isSimpleGraph=f=>t.isGraph(f)&&!("@id"in f),t.isBlankNode=f=>{if(d.isObject(f)){if("@id"in f){const _=f["@id"];return!d.isString(_)||_.indexOf("_:")===0}return Object.keys(f).length===0||!("@value"in f||"@set"in f||"@list"in f)}return!1},bt}var wt,Wn;function Ee(){return Wn||(Wn=1,wt=class extends Error{constructor(t="An unspecified JSON-LD error occurred.",f="jsonld.Error",_={}){super(t),this.name=f,this.message=t,this.details=_}}),wt}var vt,Hn;function Se(){if(Hn)return vt;Hn=1;const d=Ae(),t=me(),f=pn().IdentifierIssuer,_=Ee(),B=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,o=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,n=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,r=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,s=/^@[a-zA-Z]+$/,y={headers:{accept:"application/ld+json, application/json"}},v={};vt=v,v.IdentifierIssuer=f,v.REGEX_BCP47=B,v.REGEX_KEYWORD=s,v.clone=function(h){if(h&&typeof h=="object"){let g;if(t.isArray(h)){g=[];for(let N=0;N<h.length;++N)g[N]=v.clone(h[N])}else if(h instanceof Map){g=new Map;for(const[N,R]of h)g.set(N,v.clone(R))}else if(h instanceof Set){g=new Set;for(const N of h)g.add(v.clone(N))}else if(t.isObject(h)){g={};for(const N in h)g[N]=v.clone(h[N])}else g=h.toString();return g}return h},v.asArray=function(h){return Array.isArray(h)?h:[h]},v.buildHeaders=(h={})=>{if(Object.keys(h).some(N=>N.toLowerCase()==="accept"))throw new RangeError('Accept header may not be specified; only "'+y.headers.accept+'" is supported.');return Object.assign({Accept:y.headers.accept},h)},v.parseLinkHeader=h=>{const g={},N=h.match(o);for(let R=0;R<N.length;++R){let b=N[R].match(n);if(!b)continue;const P={target:b[1]},A=b[2];for(;b=r.exec(A);)P[b[1]]=b[2]===void 0?b[3]:b[2];const a=P.rel||"";Array.isArray(g[a])?g[a].push(P):g.hasOwnProperty(a)?g[a]=[g[a],P]:g[a]=P}return g},v.validateTypeValue=(h,g)=>{if(!t.isString(h)&&!(t.isArray(h)&&h.every(N=>t.isString(N)))){if(g&&t.isObject(h))switch(Object.keys(h).length){case 0:return;case 1:if("@default"in h&&v.asArray(h["@default"]).every(N=>t.isString(N)))return}throw new _('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:h})}},v.hasProperty=(h,g)=>{if(h.hasOwnProperty(g)){const N=h[g];return!t.isArray(N)||N.length>0}return!1},v.hasValue=(h,g,N)=>{if(v.hasProperty(h,g)){let R=h[g];const b=d.isList(R);if(t.isArray(R)||b){b&&(R=R["@list"]);for(let P=0;P<R.length;++P)if(v.compareValues(N,R[P]))return!0}else if(!t.isArray(N))return v.compareValues(N,R)}return!1},v.addValue=(h,g,N,R)=>{if(R=R||{},"propertyIsArray"in R||(R.propertyIsArray=!1),"valueIsArray"in R||(R.valueIsArray=!1),"allowDuplicate"in R||(R.allowDuplicate=!0),"prependValue"in R||(R.prependValue=!1),R.valueIsArray)h[g]=N;else if(t.isArray(N)){N.length===0&&R.propertyIsArray&&!h.hasOwnProperty(g)&&(h[g]=[]),R.prependValue&&(N=N.concat(h[g]),h[g]=[]);for(let b=0;b<N.length;++b)v.addValue(h,g,N[b],R)}else if(h.hasOwnProperty(g)){const b=!R.allowDuplicate&&v.hasValue(h,g,N);!t.isArray(h[g])&&(!b||R.propertyIsArray)&&(h[g]=[h[g]]),b||(R.prependValue?h[g].unshift(N):h[g].push(N))}else h[g]=R.propertyIsArray?[N]:N},v.getValues=(h,g)=>[].concat(h[g]||[]),v.removeProperty=(h,g)=>{delete h[g]},v.removeValue=(h,g,N,R)=>{R=R||{},"propertyIsArray"in R||(R.propertyIsArray=!1);const b=v.getValues(h,g).filter(P=>!v.compareValues(P,N));b.length===0?v.removeProperty(h,g):b.length===1&&!R.propertyIsArray?h[g]=b[0]:h[g]=b},v.relabelBlankNodes=(h,g)=>{g=g||{};const N=g.issuer||new f("_:b");return x(N,h)},v.compareValues=(h,g)=>h===g||d.isValue(h)&&d.isValue(g)&&h["@value"]===g["@value"]&&h["@type"]===g["@type"]&&h["@language"]===g["@language"]&&h["@index"]===g["@index"]?!0:t.isObject(h)&&"@id"in h&&t.isObject(g)&&"@id"in g?h["@id"]===g["@id"]:!1,v.compareShortestLeast=(h,g)=>h.length<g.length?-1:g.length<h.length?1:h===g?0:h<g?-1:1;function x(h,g){if(t.isArray(g))for(let N=0;N<g.length;++N)g[N]=x(h,g[N]);else if(d.isList(g))g["@list"]=x(h,g["@list"]);else if(t.isObject(g)){d.isBlankNode(g)&&(g["@id"]=h.getId(g["@id"]));const N=Object.keys(g).sort();for(let R=0;R<N.length;++R){const b=N[R];b!=="@id"&&(g[b]=x(h,g[b]))}}return g}return vt}var mt,Jn;function gn(){if(Jn)return mt;Jn=1;const d="http://www.w3.org/1999/02/22-rdf-syntax-ns#",t="http://www.w3.org/2001/XMLSchema#";return mt={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:d,RDF_LIST:d+"List",RDF_FIRST:d+"first",RDF_REST:d+"rest",RDF_NIL:d+"nil",RDF_TYPE:d+"type",RDF_PLAIN_LITERAL:d+"PlainLiteral",RDF_XML_LITERAL:d+"XMLLiteral",RDF_JSON_LITERAL:d+"JSON",RDF_OBJECT:d+"object",RDF_LANGSTRING:d+"langString",XSD:t,XSD_BOOLEAN:t+"boolean",XSD_DOUBLE:t+"double",XSD_INTEGER:t+"integer",XSD_STRING:t+"string"},mt}var _t,$n;function Br(){return $n||($n=1,_t=class{constructor(){this._requests={}}wrapLoader(t){const f=this;return f._loader=t,function(){return f.add.apply(f,arguments)}}async add(t){let f=this._requests[t];if(f)return Promise.resolve(f);f=this._requests[t]=this._loader(t);try{return await f}finally{delete this._requests[t]}}}),_t}var St,Cn;function Te(){if(Cn)return St;Cn=1;const d=me(),t={};St=t,t.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},t.parse=(_,B)=>{const o={},n=t.parsers[B||"full"],r=n.regex.exec(_);let s=n.keys.length;for(;s--;)o[n.keys[s]]=r[s]===void 0?null:r[s];return(o.scheme==="https"&&o.port==="443"||o.scheme==="http"&&o.port==="80")&&(o.href=o.href.replace(":"+o.port,""),o.authority=o.authority.replace(":"+o.port,""),o.port=null),o.normalizedPath=t.removeDotSegments(o.path),o},t.prependBase=(_,B)=>{if(_===null||t.isAbsolute(B))return B;(!_||d.isString(_))&&(_=t.parse(_||""));const o=t.parse(B),n={protocol:_.protocol||""};if(o.authority!==null)n.authority=o.authority,n.path=o.path,n.query=o.query;else if(n.authority=_.authority,o.path==="")n.path=_.path,o.query!==null?n.query=o.query:n.query=_.query;else{if(o.path.indexOf("/")===0)n.path=o.path;else{let s=_.path;s=s.substr(0,s.lastIndexOf("/")+1),(s.length>0||_.authority)&&s.substr(-1)!=="/"&&(s+="/"),s+=o.path,n.path=s}n.query=o.query}o.path!==""&&(n.path=t.removeDotSegments(n.path));let r=n.protocol;return n.authority!==null&&(r+="//"+n.authority),r+=n.path,n.query!==null&&(r+="?"+n.query),o.fragment!==null&&(r+="#"+o.fragment),r===""&&(r="./"),r},t.removeBase=(_,B)=>{if(_===null)return B;(!_||d.isString(_))&&(_=t.parse(_||""));let o="";if(_.href!==""?o+=(_.protocol||"")+"//"+(_.authority||""):B.indexOf("//")&&(o+="//"),B.indexOf(o)!==0)return B;const n=t.parse(B.substr(o.length)),r=_.normalizedPath.split("/"),s=n.normalizedPath.split("/"),y=n.fragment||n.query?0:1;for(;r.length>0&&s.length>y&&r[0]===s[0];)r.shift(),s.shift();let v="";if(r.length>0){r.pop();for(let x=0;x<r.length;++x)v+="../"}return v+=s.join("/"),n.query!==null&&(v+="?"+n.query),n.fragment!==null&&(v+="#"+n.fragment),v===""&&(v="./"),v},t.removeDotSegments=_=>{if(_.length===0)return"";const B=_.split("/"),o=[];for(;B.length>0;){const n=B.shift(),r=B.length===0;if(n==="."){r&&o.push("");continue}if(n===".."){o.pop(),r&&o.push("");continue}o.push(n)}return _[0]==="/"&&o.length>0&&o[0]!==""&&o.unshift(""),o.length===1&&o[0]===""?"/":o.join("/")};const f=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;return t.isAbsolute=_=>d.isString(_)&&f.test(_),t.isRelative=_=>d.isString(_),St}var Et,Vn;function pi(){if(Vn)return Et;Vn=1;const{parseLinkHeader:d,buildHeaders:t}=Se(),{LINK_HEADER_CONTEXT:f}=gn(),_=Ee(),B=Br(),{prependBase:o}=Te(),n=/(^|(\r\n))link:/i;Et=({secure:s,headers:y={},xhr:v}={headers:{}})=>{return y=t(y),new B().wrapLoader(h);async function h(g){if(g.indexOf("http:")!==0&&g.indexOf("https:")!==0)throw new _('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:g});if(s&&g.indexOf("https")!==0)throw new _(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:g});let N;try{N=await r(v,g,y)}catch(a){throw new _("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:g,cause:a})}if(N.status>=400)throw new _("URL could not be dereferenced: "+N.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:g,httpStatusCode:N.status});let R={contextUrl:null,documentUrl:g,document:N.response},b=null;const P=N.getResponseHeader("Content-Type");let A;if(n.test(N.getAllResponseHeaders())&&(A=N.getResponseHeader("Link")),A&&P!=="application/ld+json"){const a=d(A),e=a[f];if(Array.isArray(e))throw new _("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:g});e&&(R.contextUrl=e.target),b=a.alternate,b&&b.type=="application/ld+json"&&!(P||"").match(/^application\/(\w*\+)?json$/)&&(R=await h(o(g,b.target)))}return R}};function r(s,y,v){s=s||XMLHttpRequest;const x=new s;return new Promise((h,g)=>{x.onload=()=>h(x),x.onerror=N=>g(N),x.open("GET",y,!0);for(const N in v)x.setRequestHeader(N,v[N]);x.send()})}return Et}var Rt,Gn;function gi(){if(Gn)return Rt;Gn=1;const d=pi(),t={};return Rt=t,t.setupDocumentLoaders=function(f){typeof XMLHttpRequest<"u"&&(f.documentLoaders.xhr=d,f.useDocumentLoader("xhr"))},t.setupGlobals=function(f){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:f.JsonLdProcessor})},Rt}var It,zn;function yi(){return zn||(zn=1,It=function(d){d.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),It}var xt,Xn;function bi(){if(Xn)return xt;Xn=1,xt=d,d.Node=B,d.create=d;function d(o){var n=this;if(n instanceof d||(n=new d),n.tail=null,n.head=null,n.length=0,o&&typeof o.forEach=="function")o.forEach(function(y){n.push(y)});else if(arguments.length>0)for(var r=0,s=arguments.length;r<s;r++)n.push(arguments[r]);return n}d.prototype.removeNode=function(o){if(o.list!==this)throw new Error("removing node which does not belong to this list");var n=o.next,r=o.prev;return n&&(n.prev=r),r&&(r.next=n),o===this.head&&(this.head=n),o===this.tail&&(this.tail=r),o.list.length--,o.next=null,o.prev=null,o.list=null,n},d.prototype.unshiftNode=function(o){if(o!==this.head){o.list&&o.list.removeNode(o);var n=this.head;o.list=this,o.next=n,n&&(n.prev=o),this.head=o,this.tail||(this.tail=o),this.length++}},d.prototype.pushNode=function(o){if(o!==this.tail){o.list&&o.list.removeNode(o);var n=this.tail;o.list=this,o.prev=n,n&&(n.next=o),this.tail=o,this.head||(this.head=o),this.length++}},d.prototype.push=function(){for(var o=0,n=arguments.length;o<n;o++)f(this,arguments[o]);return this.length},d.prototype.unshift=function(){for(var o=0,n=arguments.length;o<n;o++)_(this,arguments[o]);return this.length},d.prototype.pop=function(){if(this.tail){var o=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,o}},d.prototype.shift=function(){if(this.head){var o=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,o}},d.prototype.forEach=function(o,n){n=n||this;for(var r=this.head,s=0;r!==null;s++)o.call(n,r.value,s,this),r=r.next},d.prototype.forEachReverse=function(o,n){n=n||this;for(var r=this.tail,s=this.length-1;r!==null;s--)o.call(n,r.value,s,this),r=r.prev},d.prototype.get=function(o){for(var n=0,r=this.head;r!==null&&n<o;n++)r=r.next;if(n===o&&r!==null)return r.value},d.prototype.getReverse=function(o){for(var n=0,r=this.tail;r!==null&&n<o;n++)r=r.prev;if(n===o&&r!==null)return r.value},d.prototype.map=function(o,n){n=n||this;for(var r=new d,s=this.head;s!==null;)r.push(o.call(n,s.value,this)),s=s.next;return r},d.prototype.mapReverse=function(o,n){n=n||this;for(var r=new d,s=this.tail;s!==null;)r.push(o.call(n,s.value,this)),s=s.prev;return r},d.prototype.reduce=function(o,n){var r,s=this.head;if(arguments.length>1)r=n;else if(this.head)s=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var y=0;s!==null;y++)r=o(r,s.value,y),s=s.next;return r},d.prototype.reduceReverse=function(o,n){var r,s=this.tail;if(arguments.length>1)r=n;else if(this.tail)s=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var y=this.length-1;s!==null;y--)r=o(r,s.value,y),s=s.prev;return r},d.prototype.toArray=function(){for(var o=new Array(this.length),n=0,r=this.head;r!==null;n++)o[n]=r.value,r=r.next;return o},d.prototype.toArrayReverse=function(){for(var o=new Array(this.length),n=0,r=this.tail;r!==null;n++)o[n]=r.value,r=r.prev;return o},d.prototype.slice=function(o,n){n=n||this.length,n<0&&(n+=this.length),o=o||0,o<0&&(o+=this.length);var r=new d;if(n<o||n<0)return r;o<0&&(o=0),n>this.length&&(n=this.length);for(var s=0,y=this.head;y!==null&&s<o;s++)y=y.next;for(;y!==null&&s<n;s++,y=y.next)r.push(y.value);return r},d.prototype.sliceReverse=function(o,n){n=n||this.length,n<0&&(n+=this.length),o=o||0,o<0&&(o+=this.length);var r=new d;if(n<o||n<0)return r;o<0&&(o=0),n>this.length&&(n=this.length);for(var s=this.length,y=this.tail;y!==null&&s>n;s--)y=y.prev;for(;y!==null&&s>o;s--,y=y.prev)r.push(y.value);return r},d.prototype.splice=function(o,n,...r){o>this.length&&(o=this.length-1),o<0&&(o=this.length+o);for(var s=0,y=this.head;y!==null&&s<o;s++)y=y.next;for(var v=[],s=0;y&&s<n;s++)v.push(y.value),y=this.removeNode(y);y===null&&(y=this.tail),y!==this.head&&y!==this.tail&&(y=y.prev);for(var s=0;s<r.length;s++)y=t(this,y,r[s]);return v},d.prototype.reverse=function(){for(var o=this.head,n=this.tail,r=o;r!==null;r=r.prev){var s=r.prev;r.prev=r.next,r.next=s}return this.head=n,this.tail=o,this};function t(o,n,r){var s=n===o.head?new B(r,null,n,o):new B(r,n,n.next,o);return s.next===null&&(o.tail=s),s.prev===null&&(o.head=s),o.length++,s}function f(o,n){o.tail=new B(n,o.tail,null,o),o.head||(o.head=o.tail),o.length++}function _(o,n){o.head=new B(n,null,o.head,o),o.tail||(o.tail=o.head),o.length++}function B(o,n,r,s){if(!(this instanceof B))return new B(o,n,r,s);this.list=s,this.value=o,n?(n.next=this,this.prev=n):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{yi()(d)}catch{}return xt}var At,Qn;function Wr(){if(Qn)return At;Qn=1;const d=bi(),t=Symbol("max"),f=Symbol("length"),_=Symbol("lengthCalculator"),B=Symbol("allowStale"),o=Symbol("maxAge"),n=Symbol("dispose"),r=Symbol("noDisposeOnSet"),s=Symbol("lruList"),y=Symbol("cache"),v=Symbol("updateAgeOnGet"),x=()=>1;class h{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[t]=e.max||1/0;const l=e.length||x;if(this[_]=typeof l!="function"?x:l,this[B]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[o]=e.maxAge||0,this[n]=e.dispose,this[r]=e.noDisposeOnSet||!1,this[v]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[t]=e||1/0,R(this)}get max(){return this[t]}set allowStale(e){this[B]=!!e}get allowStale(){return this[B]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[o]=e,R(this)}get maxAge(){return this[o]}set lengthCalculator(e){typeof e!="function"&&(e=x),e!==this[_]&&(this[_]=e,this[f]=0,this[s].forEach(l=>{l.length=this[_](l.value,l.key),this[f]+=l.length})),R(this)}get lengthCalculator(){return this[_]}get length(){return this[f]}get itemCount(){return this[s].length}rforEach(e,l){l=l||this;for(let E=this[s].tail;E!==null;){const U=E.prev;A(this,e,E,l),E=U}}forEach(e,l){l=l||this;for(let E=this[s].head;E!==null;){const U=E.next;A(this,e,E,l),E=U}}keys(){return this[s].toArray().map(e=>e.key)}values(){return this[s].toArray().map(e=>e.value)}reset(){this[n]&&this[s]&&this[s].length&&this[s].forEach(e=>this[n](e.key,e.value)),this[y]=new Map,this[s]=new d,this[f]=0}dump(){return this[s].map(e=>N(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[s]}set(e,l,E){if(E=E||this[o],E&&typeof E!="number")throw new TypeError("maxAge must be a number");const U=E?Date.now():0,w=this[_](l,e);if(this[y].has(e)){if(w>this[t])return b(this,this[y].get(e)),!1;const T=this[y].get(e).value;return this[n]&&(this[r]||this[n](e,T.value)),T.now=U,T.maxAge=E,T.value=l,this[f]+=w-T.length,T.length=w,this.get(e),R(this),!0}const W=new P(e,l,w,U,E);return W.length>this[t]?(this[n]&&this[n](e,l),!1):(this[f]+=W.length,this[s].unshift(W),this[y].set(e,this[s].head),R(this),!0)}has(e){if(!this[y].has(e))return!1;const l=this[y].get(e).value;return!N(this,l)}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){const e=this[s].tail;return e?(b(this,e),e.value):null}del(e){b(this,this[y].get(e))}load(e){this.reset();const l=Date.now();for(let E=e.length-1;E>=0;E--){const U=e[E],w=U.e||0;if(w===0)this.set(U.k,U.v);else{const W=w-l;W>0&&this.set(U.k,U.v,W)}}}prune(){this[y].forEach((e,l)=>g(this,l,!1))}}const g=(a,e,l)=>{const E=a[y].get(e);if(E){const U=E.value;if(N(a,U)){if(b(a,E),!a[B])return}else l&&(a[v]&&(E.value.now=Date.now()),a[s].unshiftNode(E));return U.value}},N=(a,e)=>{if(!e||!e.maxAge&&!a[o])return!1;const l=Date.now()-e.now;return e.maxAge?l>e.maxAge:a[o]&&l>a[o]},R=a=>{if(a[f]>a[t])for(let e=a[s].tail;a[f]>a[t]&&e!==null;){const l=e.prev;b(a,e),e=l}},b=(a,e)=>{if(e){const l=e.value;a[n]&&a[n](l.key,l.value),a[f]-=l.length,a[y].delete(l.key),a[s].removeNode(e)}};class P{constructor(e,l,E,U,w){this.key=e,this.value=l,this.length=E,this.now=U,this.maxAge=w||0}}const A=(a,e,l,E)=>{let U=l.value;N(a,U)&&(b(a,l),a[B]||(U=void 0)),U&&e.call(E,U.value,U.key,a)};return At=h,At}var Nt,Kn;function wi(){if(Kn)return Nt;Kn=1;const d=Wr(),t=10;return Nt=class{constructor({document:_}){this.document=_,this.cache=new d({max:t})}getProcessed(_){return this.cache.get(_)}setProcessed(_,B){this.cache.set(_,B)}},Nt}var Dt,Yn;function vi(){if(Yn)return Dt;Yn=1;const{isArray:d,isObject:t,isString:f}=me(),{asArray:_}=Se(),{prependBase:B}=Te(),o=Ee(),n=wi(),r=10;Dt=class{constructor({sharedCache:x}){this.perOpCache=new Map,this.sharedCache=x}async resolve({activeCtx:x,context:h,documentLoader:g,base:N,cycles:R=new Set}){h&&t(h)&&h["@context"]&&(h=h["@context"]),h=_(h);const b=[];for(const P of h){if(f(P)){let e=this._get(P);e||(e=await this._resolveRemoteContext({activeCtx:x,url:P,documentLoader:g,base:N,cycles:R})),d(e)?b.push(...e):b.push(e);continue}if(P===null){b.push(new n({document:null}));continue}t(P)||s(h);const A=JSON.stringify(P);let a=this._get(A);a||(a=new n({document:P}),this._cacheResolvedContext({key:A,resolved:a,tag:"static"})),b.push(a)}return b}_get(x){let h=this.perOpCache.get(x);if(!h){const g=this.sharedCache.get(x);g&&(h=g.get("static"),h&&this.perOpCache.set(x,h))}return h}_cacheResolvedContext({key:x,resolved:h,tag:g}){if(this.perOpCache.set(x,h),g!==void 0){let N=this.sharedCache.get(x);N||(N=new Map,this.sharedCache.set(x,N)),N.set(g,h)}return h}async _resolveRemoteContext({activeCtx:x,url:h,documentLoader:g,base:N,cycles:R}){h=B(N,h);const{context:b,remoteDoc:P}=await this._fetchContext({activeCtx:x,url:h,documentLoader:g,cycles:R});N=P.documentUrl||h,y({context:b,base:N});const A=await this.resolve({activeCtx:x,context:b,documentLoader:g,base:N,cycles:R});return this._cacheResolvedContext({key:h,resolved:A,tag:P.tag}),A}async _fetchContext({activeCtx:x,url:h,documentLoader:g,cycles:N}){if(N.size>r)throw new o("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:x.processingMode==="json-ld-1.0"?"loading remote context failed":"context overflow",max:r});if(N.has(h))throw new o("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:x.processingMode==="json-ld-1.0"?"recursive context inclusion":"context overflow",url:h});N.add(h);let R,b;try{b=await g(h),R=b.document||null,f(R)&&(R=JSON.parse(R))}catch(P){throw new o(`Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context. URL: "${h}".`,"jsonld.InvalidUrl",{code:"loading remote context failed",url:h,cause:P})}if(!t(R))throw new o(`Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object. URL: "${h}".`,"jsonld.InvalidUrl",{code:"invalid remote context",url:h});return"@context"in R?R={"@context":R["@context"]}:R={"@context":{}},b.contextUrl&&(d(R["@context"])||(R["@context"]=[R["@context"]]),R["@context"].push(b.contextUrl)),{context:R,remoteDoc:b}}};function s(v){throw new o("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:v})}function y({context:v,base:x}){if(!v)return;const h=v["@context"];if(f(h)){v["@context"]=B(x,h);return}if(d(h)){for(let g=0;g<h.length;++g){const N=h[g];if(f(N)){h[g]=B(x,N);continue}t(N)&&y({context:{"@context":N},base:x})}return}if(t(h))for(const g in h)y({context:h[g],base:x})}return Dt}var Tt,Zn;function mi(){return Zn||(Zn=1,Tt=pn().NQuads),Tt}var Ot,er;function We(){if(er)return Ot;er=1;const d=Ee(),{isArray:t}=me(),{asArray:f}=Se(),_={};Ot=_,_.defaultEventHandler=null,_.setupEventHandler=({options:n={}})=>{const r=[].concat(n.safe?_.safeEventHandler:[],n.eventHandler?f(n.eventHandler):[],_.defaultEventHandler?_.defaultEventHandler:[]);return r.length===0?null:r},_.handleEvent=({event:n,options:r})=>{B({event:n,handlers:r.eventHandler})};function B({event:n,handlers:r}){let s=!0;for(let y=0;s&&y<r.length;++y){s=!1;const v=r[y];if(t(v))s=B({event:n,handlers:v});else if(typeof v=="function")v({event:n,next:()=>{s=!0}});else if(typeof v=="object")n.code in v?v[n.code]({event:n,next:()=>{s=!0}}):s=!0;else throw new d("Invalid event handler.","jsonld.InvalidEventHandler",{event:n})}return s}const o=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);return _.safeEventHandler=function({event:r,next:s}){if(r.level==="warning"&&o.has(r.code))throw new d("Safe mode validation error.","jsonld.ValidationError",{event:r});s()},_.logEventHandler=function({event:r,next:s}){console.log(`EVENT: ${r.message}`,{event:r}),s()},_.logWarningEventHandler=function({event:r,next:s}){r.level==="warning"&&console.warn(`WARNING: ${r.message}`,{event:r}),s()},_.unhandledEventHandler=function({event:r}){throw new d("No handler for event.","jsonld.UnhandledEvent",{event:r})},_.setDefaultEventHandler=function({eventHandler:n}={}){_.defaultEventHandler=n?f(n):null},Ot}var jt,tr;function Me(){if(tr)return jt;tr=1;const d=Se(),t=Ee(),{isArray:f,isObject:_,isString:B,isUndefined:o}=me(),{isAbsolute:n,isRelative:r,prependBase:s}=Te(),{handleEvent:y}=We(),{REGEX_BCP47:v,REGEX_KEYWORD:x,asArray:h,compareShortestLeast:g}=Se(),N=new Map,R=1e4,b={};jt=b,b.process=async({activeCtx:a,localCtx:e,options:l,propagate:E=!0,overrideProtected:U=!1,cycles:w=new Set})=>{if(_(e)&&"@context"in e&&f(e["@context"])&&(e=e["@context"]),h(e).length===0)return a;const p=[],T=[({event:V,next:u})=>{p.push(V),u()}];l.eventHandler&&T.push(l.eventHandler);const j=l;l={...l,eventHandler:T};const c=await l.contextResolver.resolve({activeCtx:a,context:e,documentLoader:l.documentLoader,base:l.base});_(c[0].document)&&typeof c[0].document["@propagate"]=="boolean"&&(E=c[0].document["@propagate"]);let m=a;!E&&!m.previousContext&&(m=m.clone(),m.previousContext=a);for(const V of c){let{document:u}=V;if(a=m,u===null){if(!U&&Object.keys(a.protected).length!==0)throw new t("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});m=a=b.getInitialContext(l).clone();continue}const G=V.getProcessed(a);if(G){if(j.eventHandler)for(const C of G.events)y({event:C,options:j});m=a=G.context;continue}if(_(u)&&"@context"in u&&(u=u["@context"]),!_(u))throw new t("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:u});m=m.clone();const D=new Map;if("@version"in u){if(u["@version"]!==1.1)throw new t("Unsupported JSON-LD version: "+u["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:u});if(a.processingMode&&a.processingMode==="json-ld-1.0")throw new t("@version: "+u["@version"]+" not compatible with "+a.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:u});m.processingMode="json-ld-1.1",m["@version"]=u["@version"],D.set("@version",!0)}if(m.processingMode=m.processingMode||a.processingMode,"@base"in u){let C=u["@base"];if(!(C===null||n(C)))if(r(C))C=s(m["@base"],C);else throw new t('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:u});m["@base"]=C,D.set("@base",!0)}if("@vocab"in u){const C=u["@vocab"];if(C===null)delete m["@vocab"];else if(B(C)){if(!n(C)&&b.processingMode(m,1))throw new t('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:u});{const i=P(m,C,{vocab:!0,base:!0},void 0,void 0,l);n(i)||l.eventHandler&&y({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:i}},options:l}),m["@vocab"]=i}}else throw new t('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:u});D.set("@vocab",!0)}if("@language"in u){const C=u["@language"];if(C===null)delete m["@language"];else if(B(C))C.match(v)||l.eventHandler&&y({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:C}},options:l}),m["@language"]=C.toLowerCase();else throw new t('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:u});D.set("@language",!0)}if("@direction"in u){const C=u["@direction"];if(a.processingMode==="json-ld-1.0")throw new t("Invalid JSON-LD syntax; @direction not compatible with "+a.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:u});if(C===null)delete m["@direction"];else{if(C!=="ltr"&&C!=="rtl")throw new t('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:u});m["@direction"]=C}D.set("@direction",!0)}if("@propagate"in u){const C=u["@propagate"];if(a.processingMode==="json-ld-1.0")throw new t("Invalid JSON-LD syntax; @propagate not compatible with "+a.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:u});if(typeof C!="boolean")throw new t("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:e});D.set("@propagate",!0)}if("@import"in u){const C=u["@import"];if(a.processingMode==="json-ld-1.0")throw new t("Invalid JSON-LD syntax; @import not compatible with "+a.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:u});if(!B(C))throw new t("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:e});const i=await l.contextResolver.resolve({activeCtx:a,context:C,documentLoader:l.documentLoader,base:l.base});if(i.length!==1)throw new t("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:e});const J=i[0].getProcessed(a);if(J)u=J;else{const X=i[0].document;if("@import"in X)throw new t("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:e});for(const H in X)u.hasOwnProperty(H)||(u[H]=X[H]);i[0].setProcessed(a,u)}D.set("@import",!0)}D.set("@protected",u["@protected"]||!1);for(const C in u)if(b.createTermDefinition({activeCtx:m,localCtx:u,term:C,defined:D,options:l,overrideProtected:U}),_(u[C])&&"@context"in u[C]){const i=u[C]["@context"];let J=!0;if(B(i)){const X=s(l.base,i);w.has(X)?J=!1:w.add(X)}if(J)try{await b.process({activeCtx:m.clone(),localCtx:u[C]["@context"],overrideProtected:!0,options:l,cycles:w})}catch{throw new t("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:u[C]["@context"],term:C})}}V.setProcessed(a,{context:m,events:p})}return m},b.createTermDefinition=({activeCtx:a,localCtx:e,term:l,defined:E,options:U,overrideProtected:w=!1})=>{if(E.has(l)){if(E.get(l))return;throw new t("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:e,term:l})}E.set(l,!1);let W;if(e.hasOwnProperty(l)&&(W=e[l]),l==="@type"&&_(W)&&(W["@container"]||"@set")==="@set"&&b.processingMode(a,1.1)){const u=["@container","@id","@protected"],G=Object.keys(W);if(G.length===0||G.some(D=>!u.includes(D)))throw new t("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:e,term:l})}else{if(b.isKeyword(l))throw new t("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:e,term:l});if(l.match(x)){U.eventHandler&&y({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:l}},options:U});return}else if(l==="")throw new t("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:e})}const p=a.mappings.get(l);a.mappings.has(l)&&a.mappings.delete(l);let T=!1;if((B(W)||W===null)&&(T=!0,W={"@id":W}),!_(W))throw new t("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:e});const j={};a.mappings.set(l,j),j.reverse=!1;const c=["@container","@id","@language","@reverse","@type"];b.processingMode(a,1.1)&&c.push("@context","@direction","@index","@nest","@prefix","@protected");for(const u in W)if(!c.includes(u))throw new t("Invalid JSON-LD syntax; a term definition must not contain "+u,"jsonld.SyntaxError",{code:"invalid term definition",context:e});const m=l.indexOf(":");if(j._termHasColon=m>0,"@reverse"in W){if("@id"in W)throw new t("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:e});if("@nest"in W)throw new t("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:e});const u=W["@reverse"];if(!B(u))throw new t("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e});if(u.match(x)){U.eventHandler&&y({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:u}},options:U}),p?a.mappings.set(l,p):a.mappings.delete(l);return}const G=P(a,u,{vocab:!0,base:!1},e,E,U);if(!n(G))throw new t("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e});j["@id"]=G,j.reverse=!0}else if("@id"in W){let u=W["@id"];if(u&&!B(u))throw new t("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e});if(u===null)j["@id"]=null;else if(!b.isKeyword(u)&&u.match(x)){U.eventHandler&&y({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:u}},options:U}),p?a.mappings.set(l,p):a.mappings.delete(l);return}else if(u!==l){if(u=P(a,u,{vocab:!0,base:!1},e,E,U),!n(u)&&!b.isKeyword(u))throw new t("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e});if(l.match(/(?::[^:])|\//)){const G=new Map(E).set(l,!0);if(P(a,l,{vocab:!0,base:!1},e,G,U)!==u)throw new t("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e})}j["@id"]=u,j._prefix=T&&!j._termHasColon&&u.match(/[:\/\?#\[\]@]$/)!==null}}if(!("@id"in j))if(j._termHasColon){const u=l.substr(0,m);if(e.hasOwnProperty(u)&&b.createTermDefinition({activeCtx:a,localCtx:e,term:u,defined:E,options:U}),a.mappings.has(u)){const G=l.substr(m+1);j["@id"]=a.mappings.get(u)["@id"]+G}else j["@id"]=l}else if(l==="@type")j["@id"]=l;else{if(!("@vocab"in a))throw new t("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e,term:l});j["@id"]=a["@vocab"]+l}if((W["@protected"]===!0||E.get("@protected")===!0&&W["@protected"]!==!1)&&(a.protected[l]=!0,j.protected=!0),E.set(l,!0),"@type"in W){let u=W["@type"];if(!B(u))throw new t("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:e});if(u==="@json"||u==="@none"){if(b.processingMode(a,1))throw new t(`Invalid JSON-LD syntax; an @context @type value must not be "${u}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:e})}else if(u!=="@id"&&u!=="@vocab"){if(u=P(a,u,{vocab:!0,base:!1},e,E,U),!n(u))throw new t("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:e});if(u.indexOf("_:")===0)throw new t("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:e})}j["@type"]=u}if("@container"in W){const u=B(W["@container"])?[W["@container"]]:W["@container"]||[],G=["@list","@set","@index","@language"];let D=!0;const C=u.includes("@set");if(b.processingMode(a,1.1)){if(G.push("@graph","@id","@type"),u.includes("@list")){if(u.length!==1)throw new t("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:e})}else if(u.includes("@graph")){if(u.some(i=>i!=="@graph"&&i!=="@id"&&i!=="@index"&&i!=="@set"))throw new t("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:e})}else D&=u.length<=(C?2:1);if(u.includes("@type")&&(j["@type"]=j["@type"]||"@id",!["@id","@vocab"].includes(j["@type"])))throw new t("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:e})}else D&=!f(W["@container"]),D&=u.length<=1;if(D&=u.every(i=>G.includes(i)),D&=!(C&&u.includes("@list")),!D)throw new t("Invalid JSON-LD syntax; @context @container value must be one of the following: "+G.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:e});if(j.reverse&&!u.every(i=>["@index","@set"].includes(i)))throw new t("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:e});j["@container"]=u}if("@index"in W){if(!("@container"in W)||!j["@container"].includes("@index"))throw new t(`Invalid JSON-LD syntax; @index without @index in @container: "${W["@index"]}" on term "${l}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:e});if(!B(W["@index"])||W["@index"].indexOf("@")===0)throw new t(`Invalid JSON-LD syntax; @index must expand to an IRI: "${W["@index"]}" on term "${l}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:e});j["@index"]=W["@index"]}if("@context"in W&&(j["@context"]=W["@context"]),"@language"in W&&!("@type"in W)){let u=W["@language"];if(u!==null&&!B(u))throw new t("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:e});u!==null&&(u=u.toLowerCase()),j["@language"]=u}if("@prefix"in W){if(l.match(/:|\//))throw new t("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:e});if(b.isKeyword(j["@id"]))throw new t("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:e});if(typeof W["@prefix"]=="boolean")j._prefix=W["@prefix"]===!0;else throw new t("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:e})}if("@direction"in W){const u=W["@direction"];if(u!==null&&u!=="ltr"&&u!=="rtl")throw new t('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:e});j["@direction"]=u}if("@nest"in W){const u=W["@nest"];if(!B(u)||u!=="@nest"&&u.indexOf("@")===0)throw new t("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:e});j["@nest"]=u}// disallow aliasing @context and @preserve
const V=j["@id"];if(V==="@context"||V==="@preserve")throw new t("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:e});if(p&&p.protected&&!w&&(a.protected[l]=!0,j.protected=!0,!A(p,j)))throw new t("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:e,term:l})},b.expandIri=(a,e,l,E)=>P(a,e,l,void 0,void 0,E);function P(a,e,l,E,U,w){if(e===null||!B(e)||b.isKeyword(e))return e;if(e.match(x))return null;if(E&&E.hasOwnProperty(e)&&U.get(e)!==!0&&b.createTermDefinition({activeCtx:a,localCtx:E,term:e,defined:U,options:w}),l=l||{},l.vocab){const p=a.mappings.get(e);if(p===null)return null;if(_(p)&&"@id"in p)return p["@id"]}const W=e.indexOf(":");if(W>0){const p=e.substr(0,W),T=e.substr(W+1);if(p==="_"||T.indexOf("//")===0)return e;E&&E.hasOwnProperty(p)&&b.createTermDefinition({activeCtx:a,localCtx:E,term:p,defined:U,options:w});const j=a.mappings.get(p);if(j&&j._prefix)return j["@id"]+T;if(n(e))return e}if(l.vocab&&"@vocab"in a)e=a["@vocab"]+e;else if(l.base){let p,T;"@base"in a?a["@base"]?(T=s(w.base,a["@base"]),p=s(T,e)):(T=a["@base"],p=e):(T=w.base,p=s(w.base,e)),e=p}return e}b.getInitialContext=a=>{const e=JSON.stringify({processingMode:a.processingMode}),l=N.get(e);if(l)return l;const E={processingMode:a.processingMode,mappings:new Map,inverse:null,getInverse:U,clone:p,revertToPreviousContext:T,protected:{}};return N.size===R&&N.clear(),N.set(e,E),E;function U(){const j=this;if(j.inverse)return j.inverse;const c=j.inverse={},m=j.fastCurieMap={},V={},u=(j["@language"]||"@none").toLowerCase(),G=j["@direction"],D=j.mappings,C=[...D.keys()].sort(g);for(const i of C){const J=D.get(i);if(J===null)continue;let X=J["@container"]||"@none";if(X=[].concat(X).sort().join(""),J["@id"]===null)continue;const H=h(J["@id"]);for(const Y of H){let L=c[Y];const k=b.isKeyword(Y);if(L)!k&&!J._termHasColon&&V[Y].push(i);else if(c[Y]=L={},!k&&!J._termHasColon){V[Y]=[i];const F={iri:Y,terms:V[Y]};Y[0]in m?m[Y[0]].push(F):m[Y[0]]=[F]}if(L[X]||(L[X]={"@language":{},"@type":{},"@any":{}}),L=L[X],W(i,L["@any"],"@none"),J.reverse)W(i,L["@type"],"@reverse");else if(J["@type"]==="@none")W(i,L["@any"],"@none"),W(i,L["@language"],"@none"),W(i,L["@type"],"@none");else if("@type"in J)W(i,L["@type"],J["@type"]);else if("@language"in J&&"@direction"in J){const F=J["@language"],M=J["@direction"];F&&M?W(i,L["@language"],`${F}_${M}`.toLowerCase()):F?W(i,L["@language"],F.toLowerCase()):M?W(i,L["@language"],`_${M}`):W(i,L["@language"],"@null")}else"@language"in J?W(i,L["@language"],(J["@language"]||"@null").toLowerCase()):"@direction"in J?J["@direction"]?W(i,L["@language"],`_${J["@direction"]}`):W(i,L["@language"],"@none"):G?(W(i,L["@language"],`_${G}`),W(i,L["@language"],"@none"),W(i,L["@type"],"@none")):(W(i,L["@language"],u),W(i,L["@language"],"@none"),W(i,L["@type"],"@none"))}}for(const i in m)w(m,i,1);return c}function w(j,c,m){const V=j[c],u=j[c]={};let G,D;for(const C of V)G=C.iri,m>=G.length?D="":D=G[m],D in u?u[D].push(C):u[D]=[C];for(const C in u)C!==""&&w(u,C,m+1)}function W(j,c,m){c.hasOwnProperty(m)||(c[m]=j)}function p(){const j={};return j.mappings=d.clone(this.mappings),j.clone=this.clone,j.inverse=null,j.getInverse=this.getInverse,j.protected=d.clone(this.protected),this.previousContext&&(j.previousContext=this.previousContext.clone()),j.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(j["@base"]=this["@base"]),"@language"in this&&(j["@language"]=this["@language"]),"@vocab"in this&&(j["@vocab"]=this["@vocab"]),j}function T(){return this.previousContext?this.previousContext.clone():this}},b.getContextValue=(a,e,l)=>{if(e===null)return l==="@context"?void 0:null;if(a.mappings.has(e)){const E=a.mappings.get(e);if(o(l))return E;if(E.hasOwnProperty(l))return E[l]}if(l==="@language"&&l in a||l==="@direction"&&l in a)return a[l];if(l!=="@context")return null},b.processingMode=(a,e)=>e.toString()>="1.1"?!a.processingMode||a.processingMode>="json-ld-"+e.toString():a.processingMode==="json-ld-1.0",b.isKeyword=a=>{if(!B(a)||a[0]!=="@")return!1;switch(a){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};function A(a,e){if(!(a&&typeof a=="object")||!(e&&typeof e=="object"))return a===e;const l=Array.isArray(a);if(l!==Array.isArray(e))return!1;if(l){if(a.length!==e.length)return!1;for(let w=0;w<a.length;++w)if(!A(a[w],e[w]))return!1;return!0}const E=Object.keys(a),U=Object.keys(e);if(E.length!==U.length)return!1;for(const w in a){let W=a[w],p=e[w];if(w==="@container"&&Array.isArray(W)&&Array.isArray(p)&&(W=W.slice().sort(),p=p.slice().sort()),!A(W,p))return!1}return!0}return jt}var Lt,nr;function _i(){if(nr)return Lt;nr=1;const d=Ee(),{isArray:t,isObject:f,isEmptyObject:_,isString:B,isUndefined:o}=me(),{isList:n,isValue:r,isGraph:s,isSubject:y}=Ae(),{expandIri:v,getContextValue:x,isKeyword:h,process:g,processingMode:N}=Me(),{isAbsolute:R}=Te(),{REGEX_BCP47:b,REGEX_KEYWORD:P,addValue:A,asArray:a,getValues:e,validateTypeValue:l}=Se(),{handleEvent:E}=We(),U={};Lt=U,U.expand=async({activeCtx:c,activeProperty:m=null,element:V,options:u={},insideList:G=!1,insideIndex:D=!1,typeScopedContext:C=null})=>{if(V==null)return null;if(m==="@default"&&(u=Object.assign({},u,{isFrame:!1})),!t(V)&&!f(V))return!G&&(m===null||v(c,m,{vocab:!0},u)==="@graph")?(u.eventHandler&&E({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:V}},options:u}),null):p({activeCtx:c,activeProperty:m,value:V,options:u});if(t(V)){let F=[];const M=x(c,m,"@container")||[];G=G||M.includes("@list");for(let z=0;z<V.length;++z){let Q=await U.expand({activeCtx:c,activeProperty:m,element:V[z],options:u,insideIndex:D,typeScopedContext:C});G&&t(Q)&&(Q={"@list":Q}),Q!==null&&(t(Q)?F=F.concat(Q):F.push(Q))}return F}const i=v(c,m,{vocab:!0},u),J=x(c,m,"@context");C=C||(c.previousContext?c:null);let X=Object.keys(V).sort(),H=!D;if(H&&C&&X.length<=2&&!X.includes("@context"))for(const F of X){const M=v(C,F,{vocab:!0},u);if(M==="@value"){H=!1,c=C;break}if(M==="@id"&&X.length===1){H=!1;break}}H&&(c=c.revertToPreviousContext()),o(J)||(c=await g({activeCtx:c,localCtx:J,propagate:!0,overrideProtected:!0,options:u})),"@context"in V&&(c=await g({activeCtx:c,localCtx:V["@context"],options:u})),C=c;let Y=null;for(const F of X)if(v(c,F,{vocab:!0},u)==="@type"){Y=Y||F;const z=V[F],Q=Array.isArray(z)?z.length>1?z.slice().sort():z:[z];for(const ne of Q){const ie=x(C,ne,"@context");o(ie)||(c=await g({activeCtx:c,localCtx:ie,options:u,propagate:!1}))}}let L={};await W({activeCtx:c,activeProperty:m,expandedActiveProperty:i,element:V,expandedParent:L,options:u,insideList:G,typeKey:Y,typeScopedContext:C}),X=Object.keys(L);let k=X.length;if("@value"in L){if("@type"in L&&("@language"in L||"@direction"in L))throw new d('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:L});let F=k-1;if("@type"in L&&(F-=1),"@index"in L&&(F-=1),"@language"in L&&(F-=1),"@direction"in L&&(F-=1),F!==0)throw new d('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:L});const M=L["@value"]===null?[]:a(L["@value"]),z=e(L,"@type");if(!(N(c,1.1)&&z.includes("@json")&&z.length===1))if(M.length===0)u.eventHandler&&E({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:L}},options:u}),L=null;else{if(!M.every(Q=>B(Q)||_(Q))&&"@language"in L)throw new d("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:L});if(!z.every(Q=>R(Q)&&!(B(Q)&&Q.indexOf("_:")===0)||_(Q)))throw new d('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:L})}}else if("@type"in L&&!t(L["@type"]))L["@type"]=[L["@type"]];else if("@set"in L||"@list"in L){if(k>1&&!(k===2&&"@index"in L))throw new d('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:L});"@set"in L&&(L=L["@set"],X=Object.keys(L),k=X.length)}else k===1&&"@language"in L&&(u.eventHandler&&E({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:L}},options:u}),L=null);return f(L)&&!u.keepFreeFloatingNodes&&!G&&(m===null||i==="@graph"||(x(c,m,"@container")||[]).includes("@graph"))&&(L=w({value:L,count:k,options:u})),L};function w({value:c,count:m,options:V}){if(m===0||"@value"in c||"@list"in c||m===1&&"@id"in c){if(V.eventHandler){let u,G;m===0?(u="empty object",G="Dropping empty object."):"@value"in c?(u="object with only @value",G="Dropping object with only @value."):"@list"in c?(u="object with only @list",G="Dropping object with only @list."):m===1&&"@id"in c&&(u="object with only @id",G="Dropping object with only @id."),E({event:{type:["JsonLdEvent"],code:u,level:"warning",message:G,details:{value:c}},options:V})}return null}return c}async function W({activeCtx:c,activeProperty:m,expandedActiveProperty:V,element:u,expandedParent:G,options:D={},insideList:C,typeKey:i,typeScopedContext:J}){const X=Object.keys(u).sort(),H=[];let Y;const L=u[i]&&v(c,t(u[i])?u[i][0]:u[i],{vocab:!0},{...D,typeExpansion:!0})==="@json";for(const k of X){let F=u[k],M;if(k==="@context")continue;const z=v(c,k,{vocab:!0},D);if(z===null||!(R(z)||h(z))){D.eventHandler&&E({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:k,expandedProperty:z}},options:D});continue}if(h(z)){if(V==="@reverse")throw new d("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:F});if(z in G&&z!=="@included"&&z!=="@type")throw new d("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:z})}if(z==="@id"){if(!B(F)){if(!D.isFrame)throw new d('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:F});if(f(F)){if(!_(F))throw new d('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:F})}else if(t(F)){if(!F.every(I=>B(I)))throw new d('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:F})}else throw new d('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:F})}A(G,"@id",a(F).map(I=>{if(B(I)){const q=v(c,I,{base:!0},D);return D.eventHandler&&(q===null?E(I===null?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:I}},options:D}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:I}},options:D}):R(q)||E({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:I,expandedId:q}},options:D})),q}return I}),{propertyIsArray:D.isFrame});continue}if(z==="@type"){f(F)&&(F=Object.fromEntries(Object.entries(F).map(([I,q])=>[v(J,I,{vocab:!0}),a(q).map(K=>v(J,K,{base:!0,vocab:!0},{...D,typeExpansion:!0}))]))),l(F,D.isFrame),A(G,"@type",a(F).map(I=>{if(B(I)){const q=v(J,I,{base:!0,vocab:!0},{...D,typeExpansion:!0});return q!=="@json"&&!R(q)&&D.eventHandler&&E({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:I}},options:D}),q}return I}),{propertyIsArray:!!D.isFrame});continue}if(z==="@included"&&N(c,1.1)){const I=a(await U.expand({activeCtx:c,activeProperty:m,element:F,options:D}));if(!I.every(q=>y(q)))throw new d("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:F});A(G,"@included",I,{propertyIsArray:!0});continue}if(z==="@graph"&&!(f(F)||t(F)))throw new d('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:F});if(z==="@value"){Y=F,L&&N(c,1.1)?G["@value"]=F:A(G,"@value",F,{propertyIsArray:D.isFrame});continue}if(z==="@language"){if(F===null)continue;if(!B(F)&&!D.isFrame)throw new d('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:F});F=a(F).map(I=>B(I)?I.toLowerCase():I);for(const I of F)B(I)&&!I.match(b)&&D.eventHandler&&E({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:I}},options:D});A(G,"@language",F,{propertyIsArray:D.isFrame});continue}if(z==="@direction"){if(!B(F)&&!D.isFrame)throw new d('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:F});F=a(F);for(const I of F)if(B(I)&&I!=="ltr"&&I!=="rtl")throw new d('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:F});A(G,"@direction",F,{propertyIsArray:D.isFrame});continue}if(z==="@index"){if(!B(F))throw new d('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:F});A(G,"@index",F);continue}if(z==="@reverse"){if(!f(F))throw new d('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:F});if(M=await U.expand({activeCtx:c,activeProperty:"@reverse",element:F,options:D}),"@reverse"in M)for(const q in M["@reverse"])A(G,q,M["@reverse"][q],{propertyIsArray:!0});let I=G["@reverse"]||null;for(const q in M){if(q==="@reverse")continue;I===null&&(I=G["@reverse"]={}),A(I,q,[],{propertyIsArray:!0});const K=M[q];for(let te=0;te<K.length;++te){const re=K[te];if(r(re)||n(re))throw new d('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:M});A(I,q,re,{propertyIsArray:!0})}}continue}if(z==="@nest"){H.push(k);continue}let Q=c;const ne=x(c,k,"@context");o(ne)||(Q=await g({activeCtx:c,localCtx:ne,propagate:!0,overrideProtected:!0,options:D}));const ie=x(c,k,"@container")||[];if(ie.includes("@language")&&f(F)){const I=x(Q,k,"@direction");M=T(Q,F,I,D)}else if(ie.includes("@index")&&f(F)){const I=ie.includes("@graph"),q=x(Q,k,"@index")||"@index",K=q!=="@index"&&v(c,q,{vocab:!0},D);M=await j({activeCtx:Q,options:D,activeProperty:k,value:F,asGraph:I,indexKey:q,propertyIndex:K})}else if(ie.includes("@id")&&f(F)){const I=ie.includes("@graph");M=await j({activeCtx:Q,options:D,activeProperty:k,value:F,asGraph:I,indexKey:"@id"})}else if(ie.includes("@type")&&f(F))M=await j({activeCtx:Q.revertToPreviousContext(),options:D,activeProperty:k,value:F,asGraph:!1,indexKey:"@type"});else{const I=z==="@list";if(I||z==="@set"){let q=m;I&&V==="@graph"&&(q=null),M=await U.expand({activeCtx:Q,activeProperty:q,element:F,options:D,insideList:I})}else x(c,k,"@type")==="@json"?M={"@type":"@json","@value":F}:M=await U.expand({activeCtx:Q,activeProperty:k,element:F,options:D,insideList:!1})}if(!(M===null&&z!=="@value")){if(z!=="@list"&&!n(M)&&ie.includes("@list")&&(M={"@list":a(M)}),ie.includes("@graph")&&!ie.some(I=>I==="@id"||I==="@index")){if(M=a(M),D.isFrame||(M=M.filter(I=>{const q=Object.keys(I).length;return w({value:I,count:q,options:D})!==null})),M.length===0)continue;M=M.map(I=>({"@graph":a(I)}))}if(Q.mappings.has(k)&&Q.mappings.get(k).reverse){const I=G["@reverse"]=G["@reverse"]||{};M=a(M);for(let q=0;q<M.length;++q){const K=M[q];if(r(K)||n(K))throw new d('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:M});A(I,z,K,{propertyIsArray:!0})}continue}A(G,z,M,{propertyIsArray:!0})}}if("@value"in G&&!(G["@type"]==="@json"&&N(c,1.1))){if((f(Y)||t(Y))&&!D.isFrame)throw new d('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:Y})}for(const k of H){const F=t(u[k])?u[k]:[u[k]];for(const M of F){if(!f(M)||Object.keys(M).some(z=>v(c,z,{vocab:!0},D)==="@value"))throw new d("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:M});await W({activeCtx:c,activeProperty:m,expandedActiveProperty:V,element:M,expandedParent:G,options:D,insideList:C,typeScopedContext:J,typeKey:i})}}}function p({activeCtx:c,activeProperty:m,value:V,options:u}){if(V==null)return null;const G=v(c,m,{vocab:!0},u);if(G==="@id")return v(c,V,{base:!0},u);if(G==="@type")return v(c,V,{vocab:!0,base:!0},{...u,typeExpansion:!0});const D=x(c,m,"@type");if((D==="@id"||G==="@graph")&&B(V)){const i=v(c,V,{base:!0},u);return i===null&&V.match(P)&&u.eventHandler&&E({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:m}},options:u}),{"@id":i}}if(D==="@vocab"&&B(V))return{"@id":v(c,V,{vocab:!0,base:!0},u)};if(h(G))return V;const C={};if(D&&!["@id","@vocab","@none"].includes(D))C["@type"]=D;else if(B(V)){const i=x(c,m,"@language");i!==null&&(C["@language"]=i);const J=x(c,m,"@direction");J!==null&&(C["@direction"]=J)}return["boolean","number","string"].includes(typeof V)||(V=V.toString()),C["@value"]=V,C}function T(c,m,V,u){const G=[],D=Object.keys(m).sort();for(const C of D){const i=v(c,C,{vocab:!0},u);let J=m[C];t(J)||(J=[J]);for(const X of J){if(X===null)continue;if(!B(X))throw new d("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:m});const H={"@value":X};i!=="@none"&&(C.match(b)||u.eventHandler&&E({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:C}},options:u}),H["@language"]=C.toLowerCase()),V&&(H["@direction"]=V),G.push(H)}}return G}async function j({activeCtx:c,options:m,activeProperty:V,value:u,asGraph:G,indexKey:D,propertyIndex:C}){const i=[],J=Object.keys(u).sort(),X=D==="@type";for(let H of J){if(X){const k=x(c,H,"@context");o(k)||(c=await g({activeCtx:c,localCtx:k,propagate:!1,options:m}))}let Y=u[H];t(Y)||(Y=[Y]),Y=await U.expand({activeCtx:c,activeProperty:V,element:Y,options:m,insideList:!1,insideIndex:!0});let L;C?H==="@none"?L="@none":L=p({activeCtx:c,activeProperty:D,value:H,options:m}):L=v(c,H,{vocab:!0},m),D==="@id"?H=v(c,H,{base:!0},m):X&&(H=L);for(let k of Y){if(G&&!s(k)&&(k={"@graph":[k]}),D==="@type")L==="@none"||(k["@type"]?k["@type"]=[H].concat(k["@type"]):k["@type"]=[H]);else{if(r(k)&&!["@language","@type","@index"].includes(D))throw new d(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${D}".`,"jsonld.SyntaxError",{code:"invalid value object",value:k});C?L!=="@none"&&A(k,C,L,{propertyIsArray:!0,prependValue:!0}):L!=="@none"&&!(D in k)&&(k[D]=H)}i.push(k)}}return i}return Lt}var kt,rr;function Qe(){if(rr)return kt;rr=1;const{isKeyword:d}=Me(),t=Ae(),f=me(),_=Se(),B=Ee(),o={};return kt=o,o.createMergedNodeMap=(n,r)=>{r=r||{};const s=r.issuer||new _.IdentifierIssuer("_:b"),y={"@default":{}};return o.createNodeMap(n,y,"@default",s),o.mergeNodeMaps(y)},o.createNodeMap=(n,r,s,y,v,x)=>{if(f.isArray(n)){for(const R of n)o.createNodeMap(R,r,s,y,void 0,x);return}if(!f.isObject(n)){x&&x.push(n);return}if(t.isValue(n)){if("@type"in n){let R=n["@type"];R.indexOf("_:")===0&&(n["@type"]=R=y.getId(R))}x&&x.push(n);return}else if(x&&t.isList(n)){const R=[];o.createNodeMap(n["@list"],r,s,y,v,R),x.push({"@list":R});return}if("@type"in n){const R=n["@type"];for(const b of R)b.indexOf("_:")===0&&y.getId(b)}f.isUndefined(v)&&(v=t.isBlankNode(n)?y.getId(n["@id"]):n["@id"]),x&&x.push({"@id":v});const h=r[s],g=h[v]=h[v]||{};g["@id"]=v;const N=Object.keys(n).sort();for(let R of N){if(R==="@id")continue;if(R==="@reverse"){const P={"@id":v},A=n["@reverse"];for(const a in A){const e=A[a];for(const l of e){let E=l["@id"];t.isBlankNode(l)&&(E=y.getId(E)),o.createNodeMap(l,r,s,y,E),_.addValue(h[E],a,P,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if(R==="@graph"){v in r||(r[v]={}),o.createNodeMap(n[R],r,v,y);continue}if(R==="@included"){o.createNodeMap(n[R],r,s,y);continue}if(R!=="@type"&&d(R)){if(R==="@index"&&R in g&&(n[R]!==g[R]||n[R]["@id"]!==g[R]["@id"]))throw new B("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:g});g[R]=n[R];continue}const b=n[R];if(R.indexOf("_:")===0&&(R=y.getId(R)),b.length===0){_.addValue(g,R,[],{propertyIsArray:!0});continue}for(let P of b)if(R==="@type"&&(P=P.indexOf("_:")===0?y.getId(P):P),t.isSubject(P)||t.isSubjectReference(P)){if("@id"in P&&!P["@id"])continue;const A=t.isBlankNode(P)?y.getId(P["@id"]):P["@id"];_.addValue(g,R,{"@id":A},{propertyIsArray:!0,allowDuplicate:!1}),o.createNodeMap(P,r,s,y,A)}else if(t.isValue(P))_.addValue(g,R,P,{propertyIsArray:!0,allowDuplicate:!1});else if(t.isList(P)){const A=[];o.createNodeMap(P["@list"],r,s,y,v,A),P={"@list":A},_.addValue(g,R,P,{propertyIsArray:!0,allowDuplicate:!1})}else o.createNodeMap(P,r,s,y,v),_.addValue(g,R,P,{propertyIsArray:!0,allowDuplicate:!1})}},o.mergeNodeMapGraphs=n=>{const r={};for(const s of Object.keys(n).sort())for(const y of Object.keys(n[s]).sort()){const v=n[s][y];y in r||(r[y]={"@id":y});const x=r[y];for(const h of Object.keys(v).sort())if(d(h)&&h!=="@type")x[h]=_.clone(v[h]);else for(const g of v[h])_.addValue(x,h,_.clone(g),{propertyIsArray:!0,allowDuplicate:!1})}return r},o.mergeNodeMaps=n=>{const r=n["@default"],s=Object.keys(n).sort();for(const y of s){if(y==="@default")continue;const v=n[y];let x=r[y];x?"@graph"in x||(x["@graph"]=[]):r[y]=x={"@id":y,"@graph":[]};const h=x["@graph"];for(const g of Object.keys(v).sort()){const N=v[g];t.isSubjectReference(N)||h.push(N)}}return r},kt}var Mt,ir;function Si(){if(ir)return Mt;ir=1;const{isSubjectReference:d}=Ae(),{createMergedNodeMap:t}=Qe(),f={};return Mt=f,f.flatten=_=>{const B=t(_),o=[],n=Object.keys(B).sort();for(let r=0;r<n.length;++r){const s=B[n[r]];d(s)||o.push(s)}return o},Mt}var Pt,or;function Ei(){if(or)return Pt;or=1;const d=Ee(),t=Ae(),f=me(),{REGEX_BCP47:_,addValue:B}=Se(),{handleEvent:o}=We(),{RDF_LIST:n,RDF_FIRST:r,RDF_REST:s,RDF_NIL:y,RDF_TYPE:v,RDF_JSON_LITERAL:x,XSD_BOOLEAN:h,XSD_DOUBLE:g,XSD_INTEGER:N,XSD_STRING:R}=gn(),b={};Pt=b,b.fromRDF=async(A,a)=>{const{useRdfType:e=!1,useNativeTypes:l=!1,rdfDirection:E=null}=a,U={},w={"@default":U},W={};if(E){if(E==="compound-literal")throw new d("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:E});if(E!=="i18n-datatype")throw new d("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:E})}for(const j of A){const c=j.graph.termType==="DefaultGraph"?"@default":j.graph.value;c in w||(w[c]={}),c!=="@default"&&!(c in U)&&(U[c]={"@id":c});const m=w[c],V=j.subject.value,u=j.predicate.value,G=j.object;V in m||(m[V]={"@id":V});const D=m[V],C=G.termType.endsWith("Node");if(C&&!(G.value in m)&&(m[G.value]={"@id":G.value}),u===v&&!e&&C){B(D,"@type",G.value,{propertyIsArray:!0});continue}const i=P(G,l,E,a);if(B(D,u,i,{propertyIsArray:!0}),C)if(G.value===y){const J=m[G.value];"usages"in J||(J.usages=[]),J.usages.push({node:D,property:u,value:i})}else G.value in W?W[G.value]=!1:W[G.value]={node:D,property:u,value:i}}for(const j in w){const c=w[j];if(!(y in c))continue;const m=c[y];if(m.usages){for(let V of m.usages){let u=V.node,G=V.property,D=V.value;const C=[],i=[];let J=Object.keys(u).length;for(;G===s&&f.isObject(W[u["@id"]])&&f.isArray(u[r])&&u[r].length===1&&f.isArray(u[s])&&u[s].length===1&&(J===3||J===4&&f.isArray(u["@type"])&&u["@type"].length===1&&u["@type"][0]===n)&&(C.push(u[r][0]),i.push(u["@id"]),V=W[u["@id"]],u=V.node,G=V.property,D=V.value,J=Object.keys(u).length,!!t.isBlankNode(u)););delete D["@id"],D["@list"]=C.reverse();for(const X of i)delete c[X]}delete m.usages}}const p=[],T=Object.keys(U).sort();for(const j of T){const c=U[j];if(j in w){const m=c["@graph"]=[],V=w[j],u=Object.keys(V).sort();for(const G of u){const D=V[G];t.isSubjectReference(D)||m.push(D)}}t.isSubjectReference(c)||p.push(c)}return p};function P(A,a,e,l){if(A.termType.endsWith("Node"))return{"@id":A.value};const E={"@value":A.value};if(A.language)A.language.match(_)||l.eventHandler&&o({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:A.language}},options:l}),E["@language"]=A.language;else{let U=A.datatype.value;if(U||(U=R),U===x){U="@json";try{E["@value"]=JSON.parse(E["@value"])}catch(w){throw new d("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:E["@value"],cause:w})}}if(a){if(U===h)E["@value"]==="true"?E["@value"]=!0:E["@value"]==="false"&&(E["@value"]=!1);else if(f.isNumeric(E["@value"]))if(U===N){const w=parseInt(E["@value"],10);w.toFixed(0)===E["@value"]&&(E["@value"]=w)}else U===g&&(E["@value"]=parseFloat(E["@value"]));[h,N,g,R].includes(U)||(E["@type"]=U)}else if(e==="i18n-datatype"&&U.startsWith("https://www.w3.org/ns/i18n#")){const[,w,W]=U.split(/[#_]/);w.length>0&&(E["@language"]=w,w.match(_)||l.eventHandler&&o({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:w}},options:l})),E["@direction"]=W}else U!==R&&(E["@type"]=U)}return E}return Pt}var qt,ar;function Ri(){if(ar)return qt;ar=1;const{createNodeMap:d}=Qe(),{isKeyword:t}=Me(),f=Ae(),_=ci(),B=Ee(),o=me(),n=Se(),{handleEvent:r}=We(),{RDF_FIRST:s,RDF_REST:y,RDF_NIL:v,RDF_TYPE:x,RDF_JSON_LITERAL:h,RDF_LANGSTRING:g,XSD_BOOLEAN:N,XSD_DOUBLE:R,XSD_INTEGER:b,XSD_STRING:P}=gn(),{isAbsolute:A}=Te(),a={};qt=a,a.toRDF=(U,w)=>{const W=new n.IdentifierIssuer("_:b"),p={"@default":{}};d(U,p,"@default",W);const T=[],j=Object.keys(p).sort();for(const c of j){let m;if(c==="@default")m={termType:"DefaultGraph",value:""};else if(A(c))c.startsWith("_:")?m={termType:"BlankNode"}:m={termType:"NamedNode"},m.value=c;else{w.eventHandler&&r({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:c}},options:w});continue}e(T,p[c],m,W,w)}return T};function e(U,w,W,p,T){const j=Object.keys(w).sort();for(const c of j){const m=w[c],V=Object.keys(m).sort();for(let u of V){const G=m[u];if(u==="@type")u=x;else if(t(u))continue;for(const D of G){const C={termType:c.startsWith("_:")?"BlankNode":"NamedNode",value:c};if(!A(c)){T.eventHandler&&r({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:c}},options:T});continue}const i={termType:u.startsWith("_:")?"BlankNode":"NamedNode",value:u};if(!A(u)){T.eventHandler&&r({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:u}},options:T});continue}if(i.termType==="BlankNode"&&!T.produceGeneralizedRdf){T.eventHandler&&r({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:p.getOldIds().find(X=>p.getId(X)===u)}},options:T});continue}const J=E(D,p,U,W,T.rdfDirection,T);J&&U.push({subject:C,predicate:i,object:J,graph:W})}}}}function l(U,w,W,p,T,j){const c={termType:"NamedNode",value:s},m={termType:"NamedNode",value:y},V={termType:"NamedNode",value:v},u=U.pop(),G=u?{termType:"BlankNode",value:w.getId()}:V;let D=G;for(const C of U){const i=E(C,w,W,p,T,j),J={termType:"BlankNode",value:w.getId()};W.push({subject:D,predicate:c,object:i,graph:p}),W.push({subject:D,predicate:m,object:J,graph:p}),D=J}if(u){const C=E(u,w,W,p,T,j);W.push({subject:D,predicate:c,object:C,graph:p}),W.push({subject:D,predicate:m,object:V,graph:p})}return G}function E(U,w,W,p,T,j){const c={};if(f.isValue(U)){c.termType="Literal",c.value=void 0,c.datatype={termType:"NamedNode"};let m=U["@value"];const V=U["@type"]||null;if(V==="@json")c.value=_(m),c.datatype.value=h;else if(o.isBoolean(m))c.value=m.toString(),c.datatype.value=V||N;else if(o.isDouble(m)||V===R)o.isDouble(m)||(m=parseFloat(m)),c.value=m.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),c.datatype.value=V||R;else if(o.isNumber(m))c.value=m.toFixed(0),c.datatype.value=V||b;else if("@direction"in U&&T==="i18n-datatype"){const u=(U["@language"]||"").toLowerCase(),G=U["@direction"],D=`https://www.w3.org/ns/i18n#${u}_${G}`;c.datatype.value=D,c.value=m}else{if("@direction"in U&&T==="compound-literal")throw new B("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:T});if("@direction"in U&&T)throw new B("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:T});"@language"in U?("@direction"in U&&!T&&j.eventHandler&&r({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:c.value}},options:j}),c.value=m,c.datatype.value=V||g,c.language=U["@language"]):("@direction"in U&&!T&&j.eventHandler&&r({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:c.value}},options:j}),c.value=m,c.datatype.value=V||P)}}else if(f.isList(U)){const m=l(U["@list"],w,W,p,T,j);c.termType=m.termType,c.value=m.value}else{const m=o.isObject(U)?U["@id"]:U;c.termType=m.startsWith("_:")?"BlankNode":"NamedNode",c.value=m}return c.termType==="NamedNode"&&!A(c.value)?(j.eventHandler&&r({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:c.value}},options:j}),null):c}return qt}var Ft,sr;function Ii(){if(sr)return Ft;sr=1;const{isKeyword:d}=Me(),t=Ae(),f=me(),_=Se(),B=Te(),o=Ee(),{createNodeMap:n,mergeNodeMapGraphs:r}=Qe(),s={};Ft=s,s.frameMergedOrDefault=(e,l,E)=>{const U={options:E,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},w=new _.IdentifierIssuer("_:b");n(e,U.graphMap,"@default",w),E.merged&&(U.graphMap["@merged"]=r(U.graphMap),U.graph="@merged"),U.subjects=U.graphMap[U.graph];const W=[];s.frame(U,Object.keys(U.subjects).sort(),l,W),E.pruneBlankNodeIdentifiers&&(E.bnodesToClear=Object.keys(U.bnodeMap).filter(p=>U.bnodeMap[p].length===1));// remove @preserve from results
return E.link={},b(W,E)},s.frame=(e,l,E,U,w=null)=>{h(E),E=E[0];const W=e.options,p={embed:x(E,W,"embed"),explicit:x(E,W,"explicit"),requireAll:x(E,W,"requireAll")};e.link.hasOwnProperty(e.graph)||(e.link[e.graph]={});const T=e.link[e.graph],j=g(e,l,E,p),c=Object.keys(j).sort();for(const m of c){const V=j[m];if(w===null?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{},p.embed==="@link"&&m in T){P(U,w,T[m]);continue}const u={"@id":m};if(m.indexOf("_:")===0&&_.addValue(e.bnodeMap,m,u,{propertyIsArray:!0}),T[m]=u,(p.embed==="@first"||p.embed==="@last")&&e.is11)throw new o("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:E});if(!(!e.embedded&&e.uniqueEmbeds[e.graph].hasOwnProperty(m))){if(e.embedded&&(p.embed==="@never"||v(V,e.graph,e.subjectStack))){P(U,w,u);continue}if(e.embedded&&(p.embed=="@first"||p.embed=="@once")&&e.uniqueEmbeds[e.graph].hasOwnProperty(m)){P(U,w,u);continue}if(p.embed==="@last"&&m in e.uniqueEmbeds[e.graph]&&R(e,m),e.uniqueEmbeds[e.graph][m]={parent:U,property:w},e.subjectStack.push({subject:V,graph:e.graph}),m in e.graphMap){let G=!1,D=null;"@graph"in E?(D=E["@graph"][0],G=!(m==="@merged"||m==="@default"),f.isObject(D)||(D={})):(G=e.graph!=="@merged",D={}),G&&s.frame({...e,graph:m,embedded:!1},Object.keys(e.graphMap[m]).sort(),[D],u,"@graph")}"@included"in E&&s.frame({...e,embedded:!1},l,E["@included"],u,"@included");for(const G of Object.keys(V).sort()){if(d(G)){if(u[G]=_.clone(V[G]),G==="@type")for(const D of V["@type"])D.indexOf("_:")===0&&_.addValue(e.bnodeMap,D,u,{propertyIsArray:!0});continue}if(!(p.explicit&&!(G in E)))for(const D of V[G]){const C=G in E?E[G]:y(p);if(t.isList(D)){const i=E[G]&&E[G][0]&&E[G][0]["@list"]?E[G][0]["@list"]:y(p),J={"@list":[]};P(u,G,J);const X=D["@list"];for(const H of X)t.isSubjectReference(H)?s.frame({...e,embedded:!0},[H["@id"]],i,J,"@list"):P(J,"@list",_.clone(H))}else t.isSubjectReference(D)?s.frame({...e,embedded:!0},[D["@id"]],C,u,G):a(C[0],D)&&P(u,G,_.clone(D))}}for(const G of Object.keys(E).sort()){if(G==="@type"){if(!f.isObject(E[G][0])||!("@default"in E[G][0]))continue}else if(d(G))continue;const D=E[G][0]||{};if(!x(D,W,"omitDefault")&&!(G in u)){let i="@null";"@default"in D&&(i=_.clone(D["@default"])),f.isArray(i)||(i=[i]),u[G]=[{"@preserve":i}]}}for(const G of Object.keys(E["@reverse"]||{}).sort()){const D=E["@reverse"][G];for(const C of Object.keys(e.subjects))_.getValues(e.subjects[C],G).some(J=>J["@id"]===m)&&(u["@reverse"]=u["@reverse"]||{},_.addValue(u["@reverse"],G,[],{propertyIsArray:!0}),s.frame({...e,embedded:!0},[C],D,u["@reverse"][G],w))}P(U,w,u),e.subjectStack.pop()}}},s.cleanupNull=(e,l)=>{if(f.isArray(e))return e.map(U=>s.cleanupNull(U,l)).filter(U=>U);if(e==="@null")return null;if(f.isObject(e)){if("@id"in e){const E=e["@id"];if(l.link.hasOwnProperty(E)){const U=l.link[E].indexOf(e);if(U!==-1)return l.link[E][U];l.link[E].push(e)}else l.link[E]=[e]}for(const E in e)e[E]=s.cleanupNull(e[E],l)}return e};function y(e){const l={};for(const E in e)e[E]!==void 0&&(l["@"+E]=[e[E]]);return[l]}function v(e,l,E){for(let U=E.length-1;U>=0;--U){const w=E[U];if(w.graph===l&&w.subject["@id"]===e["@id"])return!0}return!1}function x(e,l,E){const U="@"+E;let w=U in e?e[U][0]:l[E];if(E==="embed"){if(w===!0)w="@once";else if(w===!1)w="@never";else if(w!=="@always"&&w!=="@never"&&w!=="@link"&&w!=="@first"&&w!=="@last"&&w!=="@once")throw new o("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:e})}return w}function h(e){if(!f.isArray(e)||e.length!==1||!f.isObject(e[0]))throw new o("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e});if("@id"in e[0]){for(const l of _.asArray(e[0]["@id"]))if(!(f.isObject(l)||B.isAbsolute(l))||f.isString(l)&&l.indexOf("_:")===0)throw new o("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}if("@type"in e[0]){for(const l of _.asArray(e[0]["@type"]))if(!(f.isObject(l)||B.isAbsolute(l)||l==="@json")||f.isString(l)&&l.indexOf("_:")===0)throw new o("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}}function g(e,l,E,U){const w={};for(const W of l){const p=e.graphMap[e.graph][W];N(e,p,E,U)&&(w[W]=p)}return w}function N(e,l,E,U){let w=!0,W=!1;for(const p in E){let T=!1;const j=_.getValues(l,p),c=_.getValues(E,p).length===0;if(p==="@id"){if(f.isEmptyObject(E["@id"][0]||{})?T=!0:E["@id"].length>=0&&(T=E["@id"].includes(j[0])),!U.requireAll)return T}else if(p==="@type"){if(w=!1,c){if(j.length>0)return!1;T=!0}else if(E["@type"].length===1&&f.isEmptyObject(E["@type"][0]))T=j.length>0;else for(const m of E["@type"])f.isObject(m)&&"@default"in m?T=!0:T=T||j.some(V=>V===m);if(!U.requireAll)return T}else{if(d(p))continue;{const m=_.getValues(E,p)[0];let V=!1;if(m&&(h([m]),V="@default"in m),w=!1,j.length===0&&V)continue;if(j.length>0&&c)return!1;if(m===void 0){if(j.length>0)return!1;T=!0}else if(t.isList(m)){const u=m["@list"][0];if(t.isList(j[0])){const G=j[0]["@list"];t.isValue(u)?T=G.some(D=>a(u,D)):(t.isSubject(u)||t.isSubjectReference(u))&&(T=G.some(D=>A(e,u,D,U)))}}else t.isValue(m)?T=j.some(u=>a(m,u)):t.isSubjectReference(m)?T=j.some(u=>A(e,m,u,U)):f.isObject(m)?T=j.length>0:T=!1}}if(!T&&U.requireAll)return!1;W=W||T}return w||W}function R(e,l){const E=e.uniqueEmbeds[e.graph],U=E[l],w=U.parent,W=U.property,p={"@id":l};if(f.isArray(w)){for(let j=0;j<w.length;++j)if(_.compareValues(w[j],p)){w[j]=p;break}}else{const j=f.isArray(w[W]);_.removeValue(w,W,p,{propertyIsArray:j}),_.addValue(w,W,p,{propertyIsArray:j})}const T=j=>{const c=Object.keys(E);for(const m of c)m in E&&f.isObject(E[m].parent)&&E[m].parent["@id"]===j&&(delete E[m],T(m))};T(l)}/**
 * Removes the @preserve keywords from expanded result of framing.
 *
 * @param input the framed, framed output.
 * @param options the framing options used.
 *
 * @return the resulting output.
 */function b(e,l){if(f.isArray(e))return e.map(E=>b(E,l));if(f.isObject(e)){// remove @preserve
if("@preserve"in e)return e["@preserve"][0];if(t.isValue(e))return e;if(t.isList(e))return e["@list"]=b(e["@list"],l),e;if("@id"in e){const E=e["@id"];if(l.link.hasOwnProperty(E)){const U=l.link[E].indexOf(e);if(U!==-1)return l.link[E][U];l.link[E].push(e)}else l.link[E]=[e]}for(const E in e){if(E==="@id"&&l.bnodesToClear.includes(e[E])){delete e["@id"];continue}e[E]=b(e[E],l)}}return e}function P(e,l,E){f.isObject(e)?_.addValue(e,l,E,{propertyIsArray:!0}):e.push(E)}function A(e,l,E,U){if(!("@id"in E))return!1;const w=e.subjects[E["@id"]];return w&&N(e,w,l,U)}function a(e,l){const E=l["@value"],U=l["@type"],w=l["@language"],W=e["@value"]?f.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],p=e["@type"]?f.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],T=e["@language"]?f.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return W.length===0&&p.length===0&&T.length===0?!0:!(!(W.includes(E)||f.isEmptyObject(W[0]))||!(!U&&p.length===0||p.includes(U)||U&&f.isEmptyObject(p[0]))||!(!w&&T.length===0||T.includes(w)||w&&f.isEmptyObject(T[0])))}return Ft}var Ut,lr;function xi(){if(lr)return Ut;lr=1;const d=Ee(),{isArray:t,isObject:f,isString:_,isUndefined:B}=me(),{isList:o,isValue:n,isGraph:r,isSimpleGraph:s,isSubjectReference:y}=Ae(),{expandIri:v,getContextValue:x,isKeyword:h,process:g,processingMode:N}=Me(),{removeBase:R,prependBase:b}=Te(),{REGEX_KEYWORD:P,addValue:A,asArray:a,compareShortestLeast:e}=Se(),l={};Ut=l,l.compact=async({activeCtx:w,activeProperty:W=null,element:p,options:T={}})=>{if(t(p)){let c=[];for(let m=0;m<p.length;++m){const V=await l.compact({activeCtx:w,activeProperty:W,element:p[m],options:T});V!==null&&c.push(V)}return T.compactArrays&&c.length===1&&(x(w,W,"@container")||[]).length===0&&(c=c[0]),c}const j=x(w,W,"@context");if(B(j)||(w=await g({activeCtx:w,localCtx:j,propagate:!0,overrideProtected:!0,options:T})),f(p)){if(T.link&&"@id"in p&&T.link.hasOwnProperty(p["@id"])){const i=T.link[p["@id"]];for(let J=0;J<i.length;++J)if(i[J].expanded===p)return i[J].compacted}if(n(p)||y(p)){const i=l.compactValue({activeCtx:w,activeProperty:W,value:p,options:T});return T.link&&y(p)&&(T.link.hasOwnProperty(p["@id"])||(T.link[p["@id"]]=[]),T.link[p["@id"]].push({expanded:p,compacted:i})),i}if(o(p)&&(x(w,W,"@container")||[]).includes("@list"))return l.compact({activeCtx:w,activeProperty:W,element:p["@list"],options:T});const c=W==="@reverse",m={},V=w;!n(p)&&!y(p)&&(w=w.revertToPreviousContext());const u=x(V,W,"@context");B(u)||(w=await g({activeCtx:w,localCtx:u,propagate:!0,overrideProtected:!0,options:T})),T.link&&"@id"in p&&(T.link.hasOwnProperty(p["@id"])||(T.link[p["@id"]]=[]),T.link[p["@id"]].push({expanded:p,compacted:m}));let G=p["@type"]||[];G.length>1&&(G=Array.from(G).sort());const D=w;for(const i of G){const J=l.compactIri({activeCtx:D,iri:i,relativeTo:{vocab:!0}}),X=x(V,J,"@context");B(X)||(w=await g({activeCtx:w,localCtx:X,options:T,propagate:!1}))}const C=Object.keys(p).sort();for(const i of C){const J=p[i];if(i==="@id"){let X=a(J).map(Y=>l.compactIri({activeCtx:w,iri:Y,relativeTo:{vocab:!1},base:T.base}));X.length===1&&(X=X[0]);const H=l.compactIri({activeCtx:w,iri:"@id",relativeTo:{vocab:!0}});m[H]=X;continue}if(i==="@type"){let X=a(J).map(F=>l.compactIri({activeCtx:V,iri:F,relativeTo:{vocab:!0}}));X.length===1&&(X=X[0]);const H=l.compactIri({activeCtx:w,iri:"@type",relativeTo:{vocab:!0}}),k=(x(w,H,"@container")||[]).includes("@set")&&N(w,1.1)||t(X)&&J.length===0;A(m,H,X,{propertyIsArray:k});continue}if(i==="@reverse"){const X=await l.compact({activeCtx:w,activeProperty:"@reverse",element:J,options:T});for(const H in X)if(w.mappings.has(H)&&w.mappings.get(H).reverse){const Y=X[H],k=(x(w,H,"@container")||[]).includes("@set")||!T.compactArrays;A(m,H,Y,{propertyIsArray:k}),delete X[H]}if(Object.keys(X).length>0){const H=l.compactIri({activeCtx:w,iri:i,relativeTo:{vocab:!0}});A(m,H,X)}continue}if(i==="@preserve"){const X=await l.compact({activeCtx:w,activeProperty:W,element:J,options:T});t(X)&&X.length===0||A(m,i,X);continue}if(i==="@index"){if((x(w,W,"@container")||[]).includes("@index"))continue;const H=l.compactIri({activeCtx:w,iri:i,relativeTo:{vocab:!0}});A(m,H,J);continue}if(i!=="@graph"&&i!=="@list"&&i!=="@included"&&h(i)){const X=l.compactIri({activeCtx:w,iri:i,relativeTo:{vocab:!0}});A(m,X,J);continue}if(!t(J))throw new d("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(J.length===0){const X=l.compactIri({activeCtx:w,iri:i,value:J,relativeTo:{vocab:!0},reverse:c}),H=w.mappings.has(X)?w.mappings.get(X)["@nest"]:null;let Y=m;H&&(U(w,H,T),f(m[H])||(m[H]={}),Y=m[H]),A(Y,X,J,{propertyIsArray:!0})}for(const X of J){const H=l.compactIri({activeCtx:w,iri:i,value:X,relativeTo:{vocab:!0},reverse:c}),Y=w.mappings.has(H)?w.mappings.get(H)["@nest"]:null;let L=m;Y&&(U(w,Y,T),f(m[Y])||(m[Y]={}),L=m[Y]);const k=x(w,H,"@container")||[],F=r(X),M=o(X);let z;M?z=X["@list"]:F&&(z=X["@graph"]);let Q=await l.compact({activeCtx:w,activeProperty:H,element:M||F?z:X,options:T});if(M)if(t(Q)||(Q=[Q]),!k.includes("@list"))Q={[l.compactIri({activeCtx:w,iri:"@list",relativeTo:{vocab:!0}})]:Q},"@index"in X&&(Q[l.compactIri({activeCtx:w,iri:"@index",relativeTo:{vocab:!0}})]=X["@index"]);else{A(L,H,Q,{valueIsArray:!0,allowDuplicate:!0});continue}if(F)if(k.includes("@graph")&&(k.includes("@id")||k.includes("@index")&&s(X))){let ne;L.hasOwnProperty(H)?ne=L[H]:L[H]=ne={};const ie=(k.includes("@id")?X["@id"]:X["@index"])||l.compactIri({activeCtx:w,iri:"@none",relativeTo:{vocab:!0}});A(ne,ie,Q,{propertyIsArray:!T.compactArrays||k.includes("@set")})}else k.includes("@graph")&&s(X)?(t(Q)&&Q.length>1&&(Q={"@included":Q}),A(L,H,Q,{propertyIsArray:!T.compactArrays||k.includes("@set")})):(t(Q)&&Q.length===1&&T.compactArrays&&(Q=Q[0]),Q={[l.compactIri({activeCtx:w,iri:"@graph",relativeTo:{vocab:!0}})]:Q},"@id"in X&&(Q[l.compactIri({activeCtx:w,iri:"@id",relativeTo:{vocab:!0}})]=X["@id"]),"@index"in X&&(Q[l.compactIri({activeCtx:w,iri:"@index",relativeTo:{vocab:!0}})]=X["@index"]),A(L,H,Q,{propertyIsArray:!T.compactArrays||k.includes("@set")}));else if(k.includes("@language")||k.includes("@index")||k.includes("@id")||k.includes("@type")){let ne;L.hasOwnProperty(H)?ne=L[H]:L[H]=ne={};let ie;if(k.includes("@language"))n(Q)&&(Q=Q["@value"]),ie=X["@language"];else if(k.includes("@index")){const I=x(w,H,"@index")||"@index",q=l.compactIri({activeCtx:w,iri:I,relativeTo:{vocab:!0}});if(I==="@index")ie=X["@index"],delete Q[q];else{let K;if([ie,...K]=a(Q[I]||[]),!_(ie))ie=null;else switch(K.length){case 0:delete Q[I];break;case 1:Q[I]=K[0];break;default:Q[I]=K;break}}}else if(k.includes("@id")){const I=l.compactIri({activeCtx:w,iri:"@id",relativeTo:{vocab:!0}});ie=Q[I],delete Q[I]}else if(k.includes("@type")){const I=l.compactIri({activeCtx:w,iri:"@type",relativeTo:{vocab:!0}});let q;switch([ie,...q]=a(Q[I]||[]),q.length){case 0:delete Q[I];break;case 1:Q[I]=q[0];break;default:Q[I]=q;break}Object.keys(Q).length===1&&"@id"in X&&(Q=await l.compact({activeCtx:w,activeProperty:H,element:{"@id":X["@id"]},options:T}))}ie||(ie=l.compactIri({activeCtx:w,iri:"@none",relativeTo:{vocab:!0}})),A(ne,ie,Q,{propertyIsArray:k.includes("@set")})}else{const ne=!T.compactArrays||k.includes("@set")||k.includes("@list")||t(Q)&&Q.length===0||i==="@list"||i==="@graph";A(L,H,Q,{propertyIsArray:ne})}}}return m}return p},l.compactIri=({activeCtx:w,iri:W,value:p=null,relativeTo:T={vocab:!1},reverse:j=!1,base:c=null})=>{if(W===null)return W;w.isPropertyTermScoped&&w.previousContext&&(w=w.previousContext);const m=w.getInverse();if(h(W)&&W in m&&"@none"in m[W]&&"@type"in m[W]["@none"]&&"@none"in m[W]["@none"]["@type"])return m[W]["@none"]["@type"]["@none"];if(T.vocab&&W in m){const C=w["@language"]||"@none",i=[];f(p)&&"@index"in p&&!("@graph"in p)&&i.push("@index","@index@set"),f(p)&&"@preserve"in p&&(p=p["@preserve"][0]),r(p)?("@index"in p&&i.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in p&&i.push("@graph@id","@graph@id@set"),i.push("@graph","@graph@set","@set"),"@index"in p||i.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in p||i.push("@graph@id","@graph@id@set")):f(p)&&!n(p)&&i.push("@id","@id@set","@type","@set@type");let J="@language",X="@null";if(j)J="@type",X="@reverse",i.push("@set");else if(o(p)){"@index"in p||i.push("@list");const Y=p["@list"];if(Y.length===0)J="@any",X="@none";else{let L=Y.length===0?C:null,k=null;for(let F=0;F<Y.length;++F){const M=Y[F];let z="@none",Q="@none";if(n(M))if("@direction"in M){const ne=(M["@language"]||"").toLowerCase(),ie=M["@direction"];z=`${ne}_${ie}`}else"@language"in M?z=M["@language"].toLowerCase():"@type"in M?Q=M["@type"]:z="@null";else Q="@id";if(L===null?L=z:z!==L&&n(M)&&(L="@none"),k===null?k=Q:Q!==k&&(k="@none"),L==="@none"&&k==="@none")break}L=L||"@none",k=k||"@none",k!=="@none"?(J="@type",X=k):X=L}}else{if(n(p))if("@language"in p&&!("@index"in p)){i.push("@language","@language@set"),X=p["@language"];const Y=p["@direction"];Y&&(X=`${X}_${Y}`)}else"@direction"in p&&!("@index"in p)?X=`_${p["@direction"]}`:"@type"in p&&(J="@type",X=p["@type"]);else J="@type",X="@id";i.push("@set")}i.push("@none"),f(p)&&!("@index"in p)&&i.push("@index","@index@set"),n(p)&&Object.keys(p).length===1&&i.push("@language","@language@set");const H=E(w,W,p,i,J,X);if(H!==null)return H}if(T.vocab&&"@vocab"in w){const C=w["@vocab"];if(W.indexOf(C)===0&&W!==C){const i=W.substr(C.length);if(!w.mappings.has(i))return i}}let V=null;const u=[];let G=w.fastCurieMap;const D=W.length-1;for(let C=0;C<D&&W[C]in G;++C)G=G[W[C]],""in G&&u.push(G[""][0]);for(let C=u.length-1;C>=0;--C){const i=u[C],J=i.terms;for(const X of J){const H=X+":"+W.substr(i.iri.length);w.mappings.get(X)._prefix&&(!w.mappings.has(H)||p===null&&w.mappings.get(H)["@id"]===W)&&(V===null||e(H,V)<0)&&(V=H)}}if(V!==null)return V;for(const[C,i]of w.mappings)if(i&&i._prefix&&W.startsWith(C+":"))throw new d(`Absolute IRI "${W}" confused with prefix "${C}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:w});if(!T.vocab)if("@base"in w)if(w["@base"]){const C=R(b(c,w["@base"]),W);return P.test(C)?`./${C}`:C}else return W;else return R(c,W);return W},l.compactValue=({activeCtx:w,activeProperty:W,value:p,options:T})=>{if(n(p)){const V=x(w,W,"@type"),u=x(w,W,"@language"),G=x(w,W,"@direction"),D=x(w,W,"@container")||[],C="@index"in p&&!D.includes("@index");if(!C&&V!=="@none"&&(p["@type"]===V||"@language"in p&&p["@language"]===u&&"@direction"in p&&p["@direction"]===G||"@language"in p&&p["@language"]===u||"@direction"in p&&p["@direction"]===G))return p["@value"];const i=Object.keys(p).length,J=i===1||i===2&&"@index"in p&&!C,X="@language"in w,H=_(p["@value"]),Y=w.mappings.has(W)&&w.mappings.get(W)["@language"]===null;if(J&&V!=="@none"&&(!X||!H||Y))return p["@value"];const L={};return C&&(L[l.compactIri({activeCtx:w,iri:"@index",relativeTo:{vocab:!0}})]=p["@index"]),"@type"in p?L[l.compactIri({activeCtx:w,iri:"@type",relativeTo:{vocab:!0}})]=l.compactIri({activeCtx:w,iri:p["@type"],relativeTo:{vocab:!0}}):"@language"in p&&(L[l.compactIri({activeCtx:w,iri:"@language",relativeTo:{vocab:!0}})]=p["@language"]),"@direction"in p&&(L[l.compactIri({activeCtx:w,iri:"@direction",relativeTo:{vocab:!0}})]=p["@direction"]),L[l.compactIri({activeCtx:w,iri:"@value",relativeTo:{vocab:!0}})]=p["@value"],L}const j=v(w,W,{vocab:!0},T),c=x(w,W,"@type"),m=l.compactIri({activeCtx:w,iri:p["@id"],relativeTo:{vocab:c==="@vocab"},base:T.base});return c==="@id"||c==="@vocab"||j==="@graph"?m:{[l.compactIri({activeCtx:w,iri:"@id",relativeTo:{vocab:!0}})]:m}};function E(w,W,p,T,j,c){c===null&&(c="@null");const m=[];if((c==="@id"||c==="@reverse")&&f(p)&&"@id"in p){c==="@reverse"&&m.push("@reverse");const u=l.compactIri({activeCtx:w,iri:p["@id"],relativeTo:{vocab:!0}});w.mappings.has(u)&&w.mappings.get(u)&&w.mappings.get(u)["@id"]===p["@id"]?m.push.apply(m,["@vocab","@id"]):m.push.apply(m,["@id","@vocab"])}else{m.push(c);const u=m.find(G=>G.includes("_"));u&&m.push(u.replace(/^[^_]+_/,"_"))}m.push("@none");const V=w.inverse[W];for(const u of T){if(!(u in V))continue;const G=V[u][j];for(const D of m)if(D in G)return G[D]}return null}function U(w,W,p){if(v(w,W,{vocab:!0},p)!=="@nest")throw new d("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}return Ut}var Bt,cr;function Ai(){return cr||(cr=1,Bt=d=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(f,_){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):d.compact(f,_)},t.expand=function(f){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):d.expand(f)},t.flatten=function(f){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):d.flatten(f)},t}),Bt}/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2022 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */var Wt,ur;function Ni(){if(ur)return Wt;ur=1;const d=pn(),t=gi(),f=Se(),_=vi(),B=f.IdentifierIssuer,o=Ee(),n=Wr(),r=mi(),{expand:s}=_i(),{flatten:y}=Si(),{fromRDF:v}=Ei(),{toRDF:x}=Ri(),{frameMergedOrDefault:h,cleanupNull:g}=Ii(),{isArray:N,isObject:R,isString:b}=me(),{isSubjectReference:P}=Ae(),{expandIri:A,getInitialContext:a,process:e,processingMode:l}=Me(),{compact:E,compactIri:U}=xi(),{createNodeMap:w,createMergedNodeMap:W,mergeNodeMaps:p}=Qe(),{logEventHandler:T,logWarningEventHandler:j,safeEventHandler:c,setDefaultEventHandler:m,setupEventHandler:V,strictEventHandler:u,unhandledEventHandler:G}=We(),D=function(i){const J={},H=new n({max:100});i.compact=async function(L,k,F){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(k===null)throw new o("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(L===null)return null;F=Y(F,{base:b(L)?L:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new B("_:b"),contextResolver:new _({sharedCache:H})}),F.link&&(F.skipExpansion=!0),F.compactToRelative||delete F.base;let M;F.skipExpansion?M=L:M=await i.expand(L,F);const z=await i.processContext(a(F),k,F);let Q=await E({activeCtx:z,element:M,options:F});F.compactArrays&&!F.graph&&N(Q)?Q.length===1?Q=Q[0]:Q.length===0&&(Q={}):F.graph&&R(Q)&&(Q=[Q]),R(k)&&"@context"in k&&(k=k["@context"]),k=f.clone(k),N(k)||(k=[k]);const ne=k;k=[];for(let I=0;I<ne.length;++I)(!R(ne[I])||Object.keys(ne[I]).length>0)&&k.push(ne[I]);const ie=k.length>0;if(k.length===1&&(k=k[0]),N(Q)){const I=U({activeCtx:z,iri:"@graph",relativeTo:{vocab:!0}}),q=Q;Q={},ie&&(Q["@context"]=k),Q[I]=q}else if(R(Q)&&ie){const I=Q;Q={"@context":k};for(const q in I)Q[q]=I[q]}return Q},i.expand=async function(L,k){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");k=Y(k,{keepFreeFloatingNodes:!1,contextResolver:new _({sharedCache:H})});const F={},M=[];if("expandContext"in k){const ie=f.clone(k.expandContext);R(ie)&&"@context"in ie?F.expandContext=ie:F.expandContext={"@context":ie},M.push(F.expandContext)}let z;if(!b(L))F.input=f.clone(L);else{const ie=await i.get(L,k);z=ie.documentUrl,F.input=ie.document,ie.contextUrl&&(F.remoteContext={"@context":ie.contextUrl},M.push(F.remoteContext))}"base"in k||(k.base=z||"");let Q=a(k);for(const ie of M)Q=await e({activeCtx:Q,localCtx:ie,options:k});let ne=await s({activeCtx:Q,element:F.input,options:k});return R(ne)&&"@graph"in ne&&Object.keys(ne).length===1?ne=ne["@graph"]:ne===null&&(ne=[]),N(ne)||(ne=[ne]),ne},i.flatten=async function(L,k,F){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");typeof k=="function"?k=null:k=k||null,F=Y(F,{base:b(L)?L:"",contextResolver:new _({sharedCache:H})});const M=await i.expand(L,F),z=y(M);return k===null?z:(F.graph=!0,F.skipExpansion=!0,await i.compact(z,k,F))},i.frame=async function(L,k,F){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(F=Y(F,{base:b(L)?L:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new _({sharedCache:H})}),b(k)){const te=await i.get(k,F);if(k=te.document,te.contextUrl){let re=k["@context"];re?N(re)?re.push(te.contextUrl):re=[re,te.contextUrl]:re=te.contextUrl,k["@context"]=re}}const M=k?k["@context"]||{}:{},z=await i.processContext(a(F),M,F);F.hasOwnProperty("omitGraph")||(F.omitGraph=l(z,1.1)),F.hasOwnProperty("pruneBlankNodeIdentifiers")||(F.pruneBlankNodeIdentifiers=l(z,1.1));const Q=await i.expand(L,F),ne={...F};ne.isFrame=!0,ne.keepFreeFloatingNodes=!0;const ie=await i.expand(k,ne),I=Object.keys(k).map(te=>A(z,te,{vocab:!0}));ne.merged=!I.includes("@graph"),ne.is11=l(z,1.1);const q=h(Q,ie,ne);ne.graph=!F.omitGraph,ne.skipExpansion=!0,ne.link={},ne.framing=!0;let K=await i.compact(q,M,ne);return ne.link={},K=g(K,ne),K},i.link=async function(L,k,F){const M={};return k&&(M["@context"]=k),M["@embed"]="@link",i.frame(L,M,F)},i.normalize=i.canonize=async function(L,k){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if(k=Y(k,{base:b(L)?L:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new _({sharedCache:H})}),"inputFormat"in k){if(k.inputFormat!=="application/n-quads"&&k.inputFormat!=="application/nquads")throw new o("Unknown canonicalization input format.","jsonld.CanonizeError");const z=r.parse(L);return d.canonize(z,k)}const F={...k};delete F.format,F.produceGeneralizedRdf=!1;const M=await i.toRDF(L,F);return d.canonize(M,k)},i.fromRDF=async function(L,k){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");k=Y(k,{format:b(L)?"application/n-quads":void 0});const{format:F}=k;let{rdfParser:M}=k;if(F){if(M=M||J[F],!M)throw new o("Unknown input format.","jsonld.UnknownFormat",{format:F})}else M=()=>L;const z=await M(L);return v(z,k)},i.toRDF=async function(L,k){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");k=Y(k,{base:b(L)?L:"",skipExpansion:!1,contextResolver:new _({sharedCache:H})});let F;k.skipExpansion?F=L:F=await i.expand(L,k);const M=x(F,k);if(k.format){if(k.format==="application/n-quads"||k.format==="application/nquads")return r.serialize(M);throw new o("Unknown output format.","jsonld.UnknownFormat",{format:k.format})}return M},i.createNodeMap=async function(L,k){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");k=Y(k,{base:b(L)?L:"",contextResolver:new _({sharedCache:H})});const F=await i.expand(L,k);return W(F,k)},i.merge=async function(L,k,F){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!N(L))throw new TypeError('Could not merge, "docs" must be an array.');typeof k=="function"?k=null:k=k||null,F=Y(F,{contextResolver:new _({sharedCache:H})});const M=await Promise.all(L.map(te=>{const re={...F};return i.expand(te,re)}));let z=!0;"mergeNodes"in F&&(z=F.mergeNodes);const Q=F.issuer||new B("_:b"),ne={"@default":{}};for(let te=0;te<M.length;++te){const re=f.relabelBlankNodes(M[te],{issuer:new B("_:b"+te+"-")}),oe=z||te===0?ne:{"@default":{}};if(w(re,oe,"@default",Q),oe!==ne)for(const $ in oe){const ee=oe[$];if(!($ in ne)){ne[$]=ee;continue}const ae=ne[$];for(const Z in ee)Z in ae||(ae[Z]=ee[Z])}}const ie=p(ne),I=[],q=Object.keys(ie).sort();for(let te=0;te<q.length;++te){const re=ie[q[te]];P(re)||I.push(re)}return k===null?I:(F.graph=!0,F.skipExpansion=!0,await i.compact(I,k,F))},Object.defineProperty(i,"documentLoader",{get:()=>i._documentLoader,set:L=>i._documentLoader=L}),i.documentLoader=async L=>{throw new o("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:L})},i.get=async function(L,k){let F;typeof k.documentLoader=="function"?F=k.documentLoader:F=i.documentLoader;const M=await F(L);try{if(!M.document)throw new o("No remote document found at the given URL.","jsonld.NullRemoteDocument");b(M.document)&&(M.document=JSON.parse(M.document))}catch(z){throw new o("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:z,remoteDoc:M})}return M},i.processContext=async function(L,k,F){return F=Y(F,{base:"",contextResolver:new _({sharedCache:H})}),k===null?a(F):(k=f.clone(k),R(k)&&"@context"in k||(k={"@context":k}),e({activeCtx:L,localCtx:k,options:F}))},i.getContextValue=Me().getContextValue,i.documentLoaders={},i.useDocumentLoader=function(L){if(!(L in i.documentLoaders))throw new o('Unknown document loader type: "'+L+'"',"jsonld.UnknownDocumentLoader",{type:L});i.documentLoader=i.documentLoaders[L].apply(i,Array.prototype.slice.call(arguments,1))},i.registerRDFParser=function(L,k){J[L]=k},i.unregisterRDFParser=function(L){delete J[L]},i.registerRDFParser("application/n-quads",r.parse),i.registerRDFParser("application/nquads",r.parse),i.url=Te(),i.logEventHandler=T,i.logWarningEventHandler=j,i.safeEventHandler=c,i.setDefaultEventHandler=m,i.strictEventHandler=u,i.unhandledEventHandler=G,i.util=f,Object.assign(i,f),i.promises=i,i.RequestQueue=Br(),i.JsonLdProcessor=Ai()(i),t.setupGlobals(i),t.setupDocumentLoaders(i);function Y(L,{documentLoader:k=i.documentLoader,...F}){if(L&&"compactionMap"in L)throw new o('"compactionMap" not supported.',"jsonld.OptionsError");if(L&&"expansionMap"in L)throw new o('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:k},F,L,{eventHandler:V({options:L})})}return i},C=function(){return D(function(){return C()})};return D(C),Wt=C,Wt}var Di=Ni();const $e=oi(Di);var Ht={exports:{}},Jt={exports:{}},$t,dr;function fe(){if(dr)return $t;dr=1;class d extends Error{constructor(f){if(!Array.isArray(f))throw new TypeError(`Expected input to be an Array, got ${typeof f}`);let _="";for(let B=0;B<f.length;B++)_+=`    ${f[B].stack}
`;super(_),this.name="AggregateError",this.errors=f}}return $t={AggregateError:d,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,f){return t.includes(f)},ArrayPrototypeIndexOf(t,f){return t.indexOf(f)},ArrayPrototypeJoin(t,f){return t.join(f)},ArrayPrototypeMap(t,f){return t.map(f)},ArrayPrototypePop(t,f){return t.pop(f)},ArrayPrototypePush(t,f){return t.push(f)},ArrayPrototypeSlice(t,f,_){return t.slice(f,_)},Error,FunctionPrototypeCall(t,f,..._){return t.call(f,..._)},FunctionPrototypeSymbolHasInstance(t,f){return Function.prototype[Symbol.hasInstance].call(t,f)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,f){return Object.defineProperties(t,f)},ObjectDefineProperty(t,f,_){return Object.defineProperty(t,f,_)},ObjectGetOwnPropertyDescriptor(t,f){return Object.getOwnPropertyDescriptor(t,f)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,f){return Object.setPrototypeOf(t,f)},Promise,PromisePrototypeCatch(t,f){return t.catch(f)},PromisePrototypeThen(t,f,_){return t.then(f,_)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,f){return t.test(f)},SafeSet:Set,String,StringPrototypeSlice(t,f,_){return t.slice(f,_)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,f,_){return t.set(f,_)},Boolean,Uint8Array},$t}var Ct={exports:{}},Vt,fr;function Hr(){return fr||(fr=1,Vt={format(d,...t){return d.replace(/%([sdifj])/g,function(...[f,_]){const B=t.shift();return _==="f"?B.toFixed(6):_==="j"?JSON.stringify(B):_==="s"&&typeof B=="object"?`${B.constructor!==Object?B.constructor.name:""} {}`.trim():B.toString()})},inspect(d){switch(typeof d){case"string":if(d.includes("'"))if(d.includes('"')){if(!d.includes("`")&&!d.includes("${"))return`\`${d}\``}else return`"${d}"`;return`'${d}'`;case"number":return isNaN(d)?"NaN":Object.is(d,-0)?String(d):d;case"bigint":return`${String(d)}n`;case"boolean":case"undefined":return String(d);case"object":return"{}"}}}),Vt}var Gt,hr;function ge(){if(hr)return Gt;hr=1;const{format:d,inspect:t}=Hr(),{AggregateError:f}=fe(),_=globalThis.AggregateError||f,B=Symbol("kIsNodeError"),o=["string","function","number","object","Function","Object","boolean","bigint","symbol"],n=/^([A-Z][a-z0-9]*)+$/,r="__node_internal_",s={};function y(b,P){if(!b)throw new s.ERR_INTERNAL_ASSERTION(P)}function v(b){let P="",A=b.length;const a=b[0]==="-"?1:0;for(;A>=a+4;A-=3)P=`_${b.slice(A-3,A)}${P}`;return`${b.slice(0,A)}${P}`}function x(b,P,A){if(typeof P=="function")return y(P.length<=A.length,`Code: ${b}; The provided arguments length (${A.length}) does not match the required ones (${P.length}).`),P(...A);const a=(P.match(/%[dfijoOs]/g)||[]).length;return y(a===A.length,`Code: ${b}; The provided arguments length (${A.length}) does not match the required ones (${a}).`),A.length===0?P:d(P,...A)}function h(b,P,A){A||(A=Error);class a extends A{constructor(...l){super(x(b,P,l))}toString(){return`${this.name} [${b}]: ${this.message}`}}Object.defineProperties(a.prototype,{name:{value:A.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${b}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),a.prototype.code=b,a.prototype[B]=!0,s[b]=a}function g(b){const P=r+b.name;return Object.defineProperty(b,"name",{value:P}),b}function N(b,P){if(b&&P&&b!==P){if(Array.isArray(P.errors))return P.errors.push(b),P;const A=new _([P,b],P.message);return A.code=P.code,A}return b||P}class R extends Error{constructor(P="The operation was aborted",A=void 0){if(A!==void 0&&typeof A!="object")throw new s.ERR_INVALID_ARG_TYPE("options","Object",A);super(P,A),this.code="ABORT_ERR",this.name="AbortError"}}return h("ERR_ASSERTION","%s",Error),h("ERR_INVALID_ARG_TYPE",(b,P,A)=>{y(typeof b=="string","'name' must be a string"),Array.isArray(P)||(P=[P]);let a="The ";b.endsWith(" argument")?a+=`${b} `:a+=`"${b}" ${b.includes(".")?"property":"argument"} `,a+="must be ";const e=[],l=[],E=[];for(const w of P)y(typeof w=="string","All expected entries have to be of type string"),o.includes(w)?e.push(w.toLowerCase()):n.test(w)?l.push(w):(y(w!=="object",'The value "object" should be written as "Object"'),E.push(w));if(l.length>0){const w=e.indexOf("object");w!==-1&&(e.splice(e,w,1),l.push("Object"))}if(e.length>0){switch(e.length){case 1:a+=`of type ${e[0]}`;break;case 2:a+=`one of type ${e[0]} or ${e[1]}`;break;default:{const w=e.pop();a+=`one of type ${e.join(", ")}, or ${w}`}}(l.length>0||E.length>0)&&(a+=" or ")}if(l.length>0){switch(l.length){case 1:a+=`an instance of ${l[0]}`;break;case 2:a+=`an instance of ${l[0]} or ${l[1]}`;break;default:{const w=l.pop();a+=`an instance of ${l.join(", ")}, or ${w}`}}E.length>0&&(a+=" or ")}switch(E.length){case 0:break;case 1:E[0].toLowerCase()!==E[0]&&(a+="an "),a+=`${E[0]}`;break;case 2:a+=`one of ${E[0]} or ${E[1]}`;break;default:{const w=E.pop();a+=`one of ${E.join(", ")}, or ${w}`}}if(A==null)a+=`. Received ${A}`;else if(typeof A=="function"&&A.name)a+=`. Received function ${A.name}`;else if(typeof A=="object"){var U;if((U=A.constructor)!==null&&U!==void 0&&U.name)a+=`. Received an instance of ${A.constructor.name}`;else{const w=t(A,{depth:-1});a+=`. Received ${w}`}}else{let w=t(A,{colors:!1});w.length>25&&(w=`${w.slice(0,25)}...`),a+=`. Received type ${typeof A} (${w})`}return a},TypeError),h("ERR_INVALID_ARG_VALUE",(b,P,A="is invalid")=>{let a=t(P);return a.length>128&&(a=a.slice(0,128)+"..."),`The ${b.includes(".")?"property":"argument"} '${b}' ${A}. Received ${a}`},TypeError),h("ERR_INVALID_RETURN_VALUE",(b,P,A)=>{var a;const e=A!=null&&(a=A.constructor)!==null&&a!==void 0&&a.name?`instance of ${A.constructor.name}`:`type ${typeof A}`;return`Expected ${b} to be returned from the "${P}" function but got ${e}.`},TypeError),h("ERR_MISSING_ARGS",(...b)=>{y(b.length>0,"At least one arg needs to be specified");let P;const A=b.length;switch(b=(Array.isArray(b)?b:[b]).map(a=>`"${a}"`).join(" or "),A){case 1:P+=`The ${b[0]} argument`;break;case 2:P+=`The ${b[0]} and ${b[1]} arguments`;break;default:{const a=b.pop();P+=`The ${b.join(", ")}, and ${a} arguments`}break}return`${P} must be specified`},TypeError),h("ERR_OUT_OF_RANGE",(b,P,A)=>{y(P,'Missing "range" argument');let a;if(Number.isInteger(A)&&Math.abs(A)>2**32)a=v(String(A));else if(typeof A=="bigint"){a=String(A);const e=BigInt(2)**BigInt(32);(A>e||A<-e)&&(a=v(a)),a+="n"}else a=t(A);return`The value of "${b}" is out of range. It must be ${P}. Received ${a}`},RangeError),h("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),h("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),h("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),h("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),h("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),h("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),h("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),h("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),h("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),h("ERR_STREAM_WRITE_AFTER_END","write after end",Error),h("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Gt={AbortError:R,aggregateTwoErrors:g(N),hideStackFrames:g,codes:s},Gt}var pr;function be(){return pr||(pr=1,function(d){const t=Pe(),{format:f,inspect:_}=Hr(),{codes:{ERR_INVALID_ARG_TYPE:B}}=ge(),{kResistStopPropagation:o,AggregateError:n,SymbolDispose:r}=fe(),s=globalThis.AbortSignal||Be().AbortSignal,y=globalThis.AbortController||Be().AbortController,v=Object.getPrototypeOf(async function(){}).constructor,x=globalThis.Blob||t.Blob,h=typeof x<"u"?function(b){return b instanceof x}:function(b){return!1},g=(R,b)=>{if(R!==void 0&&(R===null||typeof R!="object"||!("aborted"in R)))throw new B(b,"AbortSignal",R)},N=(R,b)=>{if(typeof R!="function")throw new B(b,"Function",R)};d.exports={AggregateError:n,kEmptyObject:Object.freeze({}),once(R){let b=!1;return function(...P){b||(b=!0,R.apply(this,P))}},createDeferredPromise:function(){let R,b;return{promise:new Promise((A,a)=>{R=A,b=a}),resolve:R,reject:b}},promisify(R){return new Promise((b,P)=>{R((A,...a)=>A?P(A):b(...a))})},debuglog(){return function(){}},format:f,inspect:_,types:{isAsyncFunction(R){return R instanceof v},isArrayBufferView(R){return ArrayBuffer.isView(R)}},isBlob:h,deprecate(R,b){return R},addAbortListener:ze().addAbortListener||function(b,P){if(b===void 0)throw new B("signal","AbortSignal",b);g(b,"signal"),N(P,"listener");let A;return b.aborted?queueMicrotask(()=>P()):(b.addEventListener("abort",P,{__proto__:null,once:!0,[o]:!0}),A=()=>{b.removeEventListener("abort",P)}),{__proto__:null,[r](){var a;(a=A)===null||a===void 0||a()}}},AbortSignalAny:s.any||function(b){if(b.length===1)return b[0];const P=new y,A=()=>P.abort();return b.forEach(a=>{g(a,"signals"),a.addEventListener("abort",A,{once:!0})}),P.signal.addEventListener("abort",()=>{b.forEach(a=>a.removeEventListener("abort",A))},{once:!0}),P.signal}},d.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(Ct)),Ct.exports}var Ce={},zt,gr;function He(){if(gr)return zt;gr=1;const{ArrayIsArray:d,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:f,ArrayPrototypeMap:_,NumberIsInteger:B,NumberIsNaN:o,NumberMAX_SAFE_INTEGER:n,NumberMIN_SAFE_INTEGER:r,NumberParseInt:s,ObjectPrototypeHasOwnProperty:y,RegExpPrototypeExec:v,String:x,StringPrototypeToUpperCase:h,StringPrototypeTrim:g}=fe(),{hideStackFrames:N,codes:{ERR_SOCKET_BAD_PORT:R,ERR_INVALID_ARG_TYPE:b,ERR_INVALID_ARG_VALUE:P,ERR_OUT_OF_RANGE:A,ERR_UNKNOWN_SIGNAL:a}}=ge(),{normalizeEncoding:e}=be(),{isAsyncFunction:l,isArrayBufferView:E}=be().types,U={};function w($){return $===($|0)}function W($){return $===$>>>0}const p=/^[0-7]+$/,T="must be a 32-bit unsigned integer or an octal string";function j($,ee,ae){if(typeof $>"u"&&($=ae),typeof $=="string"){if(v(p,$)===null)throw new P(ee,$,T);$=s($,8)}return V($,ee),$}const c=N(($,ee,ae=r,Z=n)=>{if(typeof $!="number")throw new b(ee,"number",$);if(!B($))throw new A(ee,"an integer",$);if($<ae||$>Z)throw new A(ee,`>= ${ae} && <= ${Z}`,$)}),m=N(($,ee,ae=-2147483648,Z=2147483647)=>{if(typeof $!="number")throw new b(ee,"number",$);if(!B($))throw new A(ee,"an integer",$);if($<ae||$>Z)throw new A(ee,`>= ${ae} && <= ${Z}`,$)}),V=N(($,ee,ae=!1)=>{if(typeof $!="number")throw new b(ee,"number",$);if(!B($))throw new A(ee,"an integer",$);const Z=ae?1:0,ue=4294967295;if($<Z||$>ue)throw new A(ee,`>= ${Z} && <= ${ue}`,$)});function u($,ee){if(typeof $!="string")throw new b(ee,"string",$)}function G($,ee,ae=void 0,Z){if(typeof $!="number")throw new b(ee,"number",$);if(ae!=null&&$<ae||Z!=null&&$>Z||(ae!=null||Z!=null)&&o($))throw new A(ee,`${ae!=null?`>= ${ae}`:""}${ae!=null&&Z!=null?" && ":""}${Z!=null?`<= ${Z}`:""}`,$)}const D=N(($,ee,ae)=>{if(!t(ae,$)){const ue="must be one of: "+f(_(ae,ye=>typeof ye=="string"?`'${ye}'`:x(ye)),", ");throw new P(ee,$,ue)}});function C($,ee){if(typeof $!="boolean")throw new b(ee,"boolean",$)}function i($,ee,ae){return $==null||!y($,ee)?ae:$[ee]}const J=N(($,ee,ae=null)=>{const Z=i(ae,"allowArray",!1),ue=i(ae,"allowFunction",!1);if(!i(ae,"nullable",!1)&&$===null||!Z&&d($)||typeof $!="object"&&(!ue||typeof $!="function"))throw new b(ee,"Object",$)}),X=N(($,ee)=>{if($!=null&&typeof $!="object"&&typeof $!="function")throw new b(ee,"a dictionary",$)}),H=N(($,ee,ae=0)=>{if(!d($))throw new b(ee,"Array",$);if($.length<ae){const Z=`must be longer than ${ae}`;throw new P(ee,$,Z)}});function Y($,ee){H($,ee);for(let ae=0;ae<$.length;ae++)u($[ae],`${ee}[${ae}]`)}function L($,ee){H($,ee);for(let ae=0;ae<$.length;ae++)C($[ae],`${ee}[${ae}]`)}function k($,ee){H($,ee);for(let ae=0;ae<$.length;ae++){const Z=$[ae],ue=`${ee}[${ae}]`;if(Z==null)throw new b(ue,"AbortSignal",Z);ne(Z,ue)}}function F($,ee="signal"){if(u($,ee),U[$]===void 0)throw U[h($)]!==void 0?new a($+" (signals must use all capital letters)"):new a($)}const M=N(($,ee="buffer")=>{if(!E($))throw new b(ee,["Buffer","TypedArray","DataView"],$)});function z($,ee){const ae=e(ee),Z=$.length;if(ae==="hex"&&Z%2!==0)throw new P("encoding",ee,`is invalid for data of length ${Z}`)}function Q($,ee="Port",ae=!0){if(typeof $!="number"&&typeof $!="string"||typeof $=="string"&&g($).length===0||+$!==+$>>>0||$>65535||$===0&&!ae)throw new R(ee,$,ae);return $|0}const ne=N(($,ee)=>{if($!==void 0&&($===null||typeof $!="object"||!("aborted"in $)))throw new b(ee,"AbortSignal",$)}),ie=N(($,ee)=>{if(typeof $!="function")throw new b(ee,"Function",$)}),I=N(($,ee)=>{if(typeof $!="function"||l($))throw new b(ee,"Function",$)}),q=N(($,ee)=>{if($!==void 0)throw new b(ee,"undefined",$)});function K($,ee,ae){if(!t(ae,$))throw new b(ee,`('${f(ae,"|")}')`,$)}const te=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function re($,ee){if(typeof $>"u"||!v(te,$))throw new P(ee,$,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function oe($){if(typeof $=="string")return re($,"hints"),$;if(d($)){const ee=$.length;let ae="";if(ee===0)return ae;for(let Z=0;Z<ee;Z++){const ue=$[Z];re(ue,"hints"),ae+=ue,Z!==ee-1&&(ae+=", ")}return ae}throw new P("hints",$,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return zt={isInt32:w,isUint32:W,parseFileMode:j,validateArray:H,validateStringArray:Y,validateBooleanArray:L,validateAbortSignalArray:k,validateBoolean:C,validateBuffer:M,validateDictionary:X,validateEncoding:z,validateFunction:ie,validateInt32:m,validateInteger:c,validateNumber:G,validateObject:J,validateOneOf:D,validatePlainFunction:I,validatePort:Q,validateSignalName:F,validateString:u,validateUint32:V,validateUndefined:q,validateUnion:K,validateAbortSignal:ne,validateLinkHeaderValue:oe},zt}var Ve={exports:{}},Xt,yr;function Ne(){if(yr)return Xt;yr=1;const{SymbolAsyncIterator:d,SymbolIterator:t,SymbolFor:f}=fe(),_=f("nodejs.stream.destroyed"),B=f("nodejs.stream.errored"),o=f("nodejs.stream.readable"),n=f("nodejs.stream.writable"),r=f("nodejs.stream.disturbed"),s=f("nodejs.webstream.isClosedPromise"),y=f("nodejs.webstream.controllerErrorFunction");function v(i,J=!1){var X;return!!(i&&typeof i.pipe=="function"&&typeof i.on=="function"&&(!J||typeof i.pause=="function"&&typeof i.resume=="function")&&(!i._writableState||((X=i._readableState)===null||X===void 0?void 0:X.readable)!==!1)&&(!i._writableState||i._readableState))}function x(i){var J;return!!(i&&typeof i.write=="function"&&typeof i.on=="function"&&(!i._readableState||((J=i._writableState)===null||J===void 0?void 0:J.writable)!==!1))}function h(i){return!!(i&&typeof i.pipe=="function"&&i._readableState&&typeof i.on=="function"&&typeof i.write=="function")}function g(i){return i&&(i._readableState||i._writableState||typeof i.write=="function"&&typeof i.on=="function"||typeof i.pipe=="function"&&typeof i.on=="function")}function N(i){return!!(i&&!g(i)&&typeof i.pipeThrough=="function"&&typeof i.getReader=="function"&&typeof i.cancel=="function")}function R(i){return!!(i&&!g(i)&&typeof i.getWriter=="function"&&typeof i.abort=="function")}function b(i){return!!(i&&!g(i)&&typeof i.readable=="object"&&typeof i.writable=="object")}function P(i){return N(i)||R(i)||b(i)}function A(i,J){return i==null?!1:J===!0?typeof i[d]=="function":J===!1?typeof i[t]=="function":typeof i[d]=="function"||typeof i[t]=="function"}function a(i){if(!g(i))return null;const J=i._writableState,X=i._readableState,H=J||X;return!!(i.destroyed||i[_]||H!=null&&H.destroyed)}function e(i){if(!x(i))return null;if(i.writableEnded===!0)return!0;const J=i._writableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function l(i,J){if(!x(i))return null;if(i.writableFinished===!0)return!0;const X=i._writableState;return X!=null&&X.errored?!1:typeof(X==null?void 0:X.finished)!="boolean"?null:!!(X.finished||J===!1&&X.ended===!0&&X.length===0)}function E(i){if(!v(i))return null;if(i.readableEnded===!0)return!0;const J=i._readableState;return!J||J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function U(i,J){if(!v(i))return null;const X=i._readableState;return X!=null&&X.errored?!1:typeof(X==null?void 0:X.endEmitted)!="boolean"?null:!!(X.endEmitted||J===!1&&X.ended===!0&&X.length===0)}function w(i){return i&&i[o]!=null?i[o]:typeof(i==null?void 0:i.readable)!="boolean"?null:a(i)?!1:v(i)&&i.readable&&!U(i)}function W(i){return i&&i[n]!=null?i[n]:typeof(i==null?void 0:i.writable)!="boolean"?null:a(i)?!1:x(i)&&i.writable&&!e(i)}function p(i,J){return g(i)?a(i)?!0:!((J==null?void 0:J.readable)!==!1&&w(i)||(J==null?void 0:J.writable)!==!1&&W(i)):null}function T(i){var J,X;return g(i)?i.writableErrored?i.writableErrored:(J=(X=i._writableState)===null||X===void 0?void 0:X.errored)!==null&&J!==void 0?J:null:null}function j(i){var J,X;return g(i)?i.readableErrored?i.readableErrored:(J=(X=i._readableState)===null||X===void 0?void 0:X.errored)!==null&&J!==void 0?J:null:null}function c(i){if(!g(i))return null;if(typeof i.closed=="boolean")return i.closed;const J=i._writableState,X=i._readableState;return typeof(J==null?void 0:J.closed)=="boolean"||typeof(X==null?void 0:X.closed)=="boolean"?(J==null?void 0:J.closed)||(X==null?void 0:X.closed):typeof i._closed=="boolean"&&m(i)?i._closed:null}function m(i){return typeof i._closed=="boolean"&&typeof i._defaultKeepAlive=="boolean"&&typeof i._removedConnection=="boolean"&&typeof i._removedContLen=="boolean"}function V(i){return typeof i._sent100=="boolean"&&m(i)}function u(i){var J;return typeof i._consuming=="boolean"&&typeof i._dumped=="boolean"&&((J=i.req)===null||J===void 0?void 0:J.upgradeOrConnect)===void 0}function G(i){if(!g(i))return null;const J=i._writableState,X=i._readableState,H=J||X;return!H&&V(i)||!!(H&&H.autoDestroy&&H.emitClose&&H.closed===!1)}function D(i){var J;return!!(i&&((J=i[r])!==null&&J!==void 0?J:i.readableDidRead||i.readableAborted))}function C(i){var J,X,H,Y,L,k,F,M,z,Q;return!!(i&&((J=(X=(H=(Y=(L=(k=i[B])!==null&&k!==void 0?k:i.readableErrored)!==null&&L!==void 0?L:i.writableErrored)!==null&&Y!==void 0?Y:(F=i._readableState)===null||F===void 0?void 0:F.errorEmitted)!==null&&H!==void 0?H:(M=i._writableState)===null||M===void 0?void 0:M.errorEmitted)!==null&&X!==void 0?X:(z=i._readableState)===null||z===void 0?void 0:z.errored)!==null&&J!==void 0?J:!((Q=i._writableState)===null||Q===void 0)&&Q.errored))}return Xt={isDestroyed:a,kIsDestroyed:_,isDisturbed:D,kIsDisturbed:r,isErrored:C,kIsErrored:B,isReadable:w,kIsReadable:o,kIsClosedPromise:s,kControllerErrorFunction:y,kIsWritable:n,isClosed:c,isDuplexNodeStream:h,isFinished:p,isIterable:A,isReadableNodeStream:v,isReadableStream:N,isReadableEnded:E,isReadableFinished:U,isReadableErrored:j,isNodeStream:g,isWebStream:P,isWritable:W,isWritableNodeStream:x,isWritableStream:R,isWritableEnded:e,isWritableFinished:l,isWritableErrored:T,isServerRequest:u,isServerResponse:V,willEmitClose:G,isTransformStream:b},Xt}var br;function Oe(){if(br)return Ve.exports;br=1;const d=qe(),{AbortError:t,codes:f}=ge(),{ERR_INVALID_ARG_TYPE:_,ERR_STREAM_PREMATURE_CLOSE:B}=f,{kEmptyObject:o,once:n}=be(),{validateAbortSignal:r,validateFunction:s,validateObject:y,validateBoolean:v}=He(),{Promise:x,PromisePrototypeThen:h,SymbolDispose:g}=fe(),{isClosed:N,isReadable:R,isReadableNodeStream:b,isReadableStream:P,isReadableFinished:A,isReadableErrored:a,isWritable:e,isWritableNodeStream:l,isWritableStream:E,isWritableFinished:U,isWritableErrored:w,isNodeStream:W,willEmitClose:p,kIsClosedPromise:T}=Ne();let j;function c(D){return D.setHeader&&typeof D.abort=="function"}const m=()=>{};function V(D,C,i){var J,X;if(arguments.length===2?(i=C,C=o):C==null?C=o:y(C,"options"),s(i,"callback"),r(C.signal,"options.signal"),i=n(i),P(D)||E(D))return u(D,C,i);if(!W(D))throw new _("stream",["ReadableStream","WritableStream","Stream"],D);const H=(J=C.readable)!==null&&J!==void 0?J:b(D),Y=(X=C.writable)!==null&&X!==void 0?X:l(D),L=D._writableState,k=D._readableState,F=()=>{D.writable||Q()};let M=p(D)&&b(D)===H&&l(D)===Y,z=U(D,!1);const Q=()=>{z=!0,D.destroyed&&(M=!1),!(M&&(!D.readable||H))&&(!H||ne)&&i.call(D)};let ne=A(D,!1);const ie=()=>{ne=!0,D.destroyed&&(M=!1),!(M&&(!D.writable||Y))&&(!Y||z)&&i.call(D)},I=$=>{i.call(D,$)};let q=N(D);const K=()=>{q=!0;const $=w(D)||a(D);if($&&typeof $!="boolean")return i.call(D,$);if(H&&!ne&&b(D,!0)&&!A(D,!1))return i.call(D,new B);if(Y&&!z&&!U(D,!1))return i.call(D,new B);i.call(D)},te=()=>{q=!0;const $=w(D)||a(D);if($&&typeof $!="boolean")return i.call(D,$);i.call(D)},re=()=>{D.req.on("finish",Q)};c(D)?(D.on("complete",Q),M||D.on("abort",K),D.req?re():D.on("request",re)):Y&&!L&&(D.on("end",F),D.on("close",F)),!M&&typeof D.aborted=="boolean"&&D.on("aborted",K),D.on("end",ie),D.on("finish",Q),C.error!==!1&&D.on("error",I),D.on("close",K),q?d.nextTick(K):L!=null&&L.errorEmitted||k!=null&&k.errorEmitted?M||d.nextTick(te):(!H&&(!M||R(D))&&(z||e(D)===!1)||!Y&&(!M||e(D))&&(ne||R(D)===!1)||k&&D.req&&D.aborted)&&d.nextTick(te);const oe=()=>{i=m,D.removeListener("aborted",K),D.removeListener("complete",Q),D.removeListener("abort",K),D.removeListener("request",re),D.req&&D.req.removeListener("finish",Q),D.removeListener("end",F),D.removeListener("close",F),D.removeListener("finish",Q),D.removeListener("end",ie),D.removeListener("error",I),D.removeListener("close",K)};if(C.signal&&!q){const $=()=>{const ee=i;oe(),ee.call(D,new t(void 0,{cause:C.signal.reason}))};if(C.signal.aborted)d.nextTick($);else{j=j||be().addAbortListener;const ee=j(C.signal,$),ae=i;i=n((...Z)=>{ee[g](),ae.apply(D,Z)})}}return oe}function u(D,C,i){let J=!1,X=m;if(C.signal)if(X=()=>{J=!0,i.call(D,new t(void 0,{cause:C.signal.reason}))},C.signal.aborted)d.nextTick(X);else{j=j||be().addAbortListener;const Y=j(C.signal,X),L=i;i=n((...k)=>{Y[g](),L.apply(D,k)})}const H=(...Y)=>{J||d.nextTick(()=>i.apply(D,Y))};return h(D[T].promise,H,H),m}function G(D,C){var i;let J=!1;return C===null&&(C=o),(i=C)!==null&&i!==void 0&&i.cleanup&&(v(C.cleanup,"cleanup"),J=C.cleanup),new x((X,H)=>{const Y=V(D,C,L=>{J&&Y(),L?H(L):X()})})}return Ve.exports=V,Ve.exports.finished=G,Ve.exports}var Qt,wr;function Fe(){if(wr)return Qt;wr=1;const d=qe(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:f},AbortError:_}=ge(),{Symbol:B}=fe(),{kIsDestroyed:o,isDestroyed:n,isFinished:r,isServerRequest:s}=Ne(),y=B("kDestroy"),v=B("kConstruct");function x(p,T,j){p&&(p.stack,T&&!T.errored&&(T.errored=p),j&&!j.errored&&(j.errored=p))}function h(p,T){const j=this._readableState,c=this._writableState,m=c||j;return c!=null&&c.destroyed||j!=null&&j.destroyed?(typeof T=="function"&&T(),this):(x(p,c,j),c&&(c.destroyed=!0),j&&(j.destroyed=!0),m.constructed?g(this,p,T):this.once(y,function(V){g(this,t(V,p),T)}),this)}function g(p,T,j){let c=!1;function m(V){if(c)return;c=!0;const u=p._readableState,G=p._writableState;x(V,G,u),G&&(G.closed=!0),u&&(u.closed=!0),typeof j=="function"&&j(V),V?d.nextTick(N,p,V):d.nextTick(R,p)}try{p._destroy(T||null,m)}catch(V){m(V)}}function N(p,T){b(p,T),R(p)}function R(p){const T=p._readableState,j=p._writableState;j&&(j.closeEmitted=!0),T&&(T.closeEmitted=!0),(j!=null&&j.emitClose||T!=null&&T.emitClose)&&p.emit("close")}function b(p,T){const j=p._readableState,c=p._writableState;c!=null&&c.errorEmitted||j!=null&&j.errorEmitted||(c&&(c.errorEmitted=!0),j&&(j.errorEmitted=!0),p.emit("error",T))}function P(){const p=this._readableState,T=this._writableState;p&&(p.constructed=!0,p.closed=!1,p.closeEmitted=!1,p.destroyed=!1,p.errored=null,p.errorEmitted=!1,p.reading=!1,p.ended=p.readable===!1,p.endEmitted=p.readable===!1),T&&(T.constructed=!0,T.destroyed=!1,T.closed=!1,T.closeEmitted=!1,T.errored=null,T.errorEmitted=!1,T.finalCalled=!1,T.prefinished=!1,T.ended=T.writable===!1,T.ending=T.writable===!1,T.finished=T.writable===!1)}function A(p,T,j){const c=p._readableState,m=p._writableState;if(m!=null&&m.destroyed||c!=null&&c.destroyed)return this;c!=null&&c.autoDestroy||m!=null&&m.autoDestroy?p.destroy(T):T&&(T.stack,m&&!m.errored&&(m.errored=T),c&&!c.errored&&(c.errored=T),j?d.nextTick(b,p,T):b(p,T))}function a(p,T){if(typeof p._construct!="function")return;const j=p._readableState,c=p._writableState;j&&(j.constructed=!1),c&&(c.constructed=!1),p.once(v,T),!(p.listenerCount(v)>1)&&d.nextTick(e,p)}function e(p){let T=!1;function j(c){if(T){A(p,c??new f);return}T=!0;const m=p._readableState,V=p._writableState,u=V||m;m&&(m.constructed=!0),V&&(V.constructed=!0),u.destroyed?p.emit(y,c):c?A(p,c,!0):d.nextTick(l,p)}try{p._construct(c=>{d.nextTick(j,c)})}catch(c){d.nextTick(j,c)}}function l(p){p.emit(v)}function E(p){return(p==null?void 0:p.setHeader)&&typeof p.abort=="function"}function U(p){p.emit("close")}function w(p,T){p.emit("error",T),d.nextTick(U,p)}function W(p,T){!p||n(p)||(!T&&!r(p)&&(T=new _),s(p)?(p.socket=null,p.destroy(T)):E(p)?p.abort():E(p.req)?p.req.abort():typeof p.destroy=="function"?p.destroy(T):typeof p.close=="function"?p.close():T?d.nextTick(w,p,T):d.nextTick(U,p),p.destroyed||(p[o]=!0))}return Qt={construct:a,destroyer:W,destroy:h,undestroy:P,errorOrDestroy:A},Qt}var Kt,vr;function yn(){if(vr)return Kt;vr=1;const{ArrayIsArray:d,ObjectSetPrototypeOf:t}=fe(),{EventEmitter:f}=ze();function _(o){f.call(this,o)}t(_.prototype,f.prototype),t(_,f),_.prototype.pipe=function(o,n){const r=this;function s(R){o.writable&&o.write(R)===!1&&r.pause&&r.pause()}r.on("data",s);function y(){r.readable&&r.resume&&r.resume()}o.on("drain",y),!o._isStdio&&(!n||n.end!==!1)&&(r.on("end",x),r.on("close",h));let v=!1;function x(){v||(v=!0,o.end())}function h(){v||(v=!0,typeof o.destroy=="function"&&o.destroy())}function g(R){N(),f.listenerCount(this,"error")===0&&this.emit("error",R)}B(r,"error",g),B(o,"error",g);function N(){r.removeListener("data",s),o.removeListener("drain",y),r.removeListener("end",x),r.removeListener("close",h),r.removeListener("error",g),o.removeListener("error",g),r.removeListener("end",N),r.removeListener("close",N),o.removeListener("close",N)}return r.on("end",N),r.on("close",N),o.on("close",N),o.emit("pipe",r),o};function B(o,n,r){if(typeof o.prependListener=="function")return o.prependListener(n,r);!o._events||!o._events[n]?o.on(n,r):d(o._events[n])?o._events[n].unshift(r):o._events[n]=[r,o._events[n]]}return Kt={Stream:_,prependListener:B},Kt}var Yt={exports:{}},mr;function Ke(){return mr||(mr=1,function(d){const{SymbolDispose:t}=fe(),{AbortError:f,codes:_}=ge(),{isNodeStream:B,isWebStream:o,kControllerErrorFunction:n}=Ne(),r=Oe(),{ERR_INVALID_ARG_TYPE:s}=_;let y;const v=(x,h)=>{if(typeof x!="object"||!("aborted"in x))throw new s(h,"AbortSignal",x)};d.exports.addAbortSignal=function(h,g){if(v(h,"signal"),!B(g)&&!o(g))throw new s("stream",["ReadableStream","WritableStream","Stream"],g);return d.exports.addAbortSignalNoValidate(h,g)},d.exports.addAbortSignalNoValidate=function(x,h){if(typeof x!="object"||!("aborted"in x))return h;const g=B(h)?()=>{h.destroy(new f(void 0,{cause:x.reason}))}:()=>{h[n](new f(void 0,{cause:x.reason}))};if(x.aborted)g();else{y=y||be().addAbortListener;const N=y(x,g);r(h,N[t])}return h}}(Yt)),Yt.exports}var Zt,_r;function Ti(){if(_r)return Zt;_r=1;const{StringPrototypeSlice:d,SymbolIterator:t,TypedArrayPrototypeSet:f,Uint8Array:_}=fe(),{Buffer:B}=Pe(),{inspect:o}=be();return Zt=class{constructor(){this.head=null,this.tail=null,this.length=0}push(r){const s={data:r,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length}unshift(r){const s={data:r,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length}shift(){if(this.length===0)return;const r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}clear(){this.head=this.tail=null,this.length=0}join(r){if(this.length===0)return"";let s=this.head,y=""+s.data;for(;(s=s.next)!==null;)y+=r+s.data;return y}concat(r){if(this.length===0)return B.alloc(0);const s=B.allocUnsafe(r>>>0);let y=this.head,v=0;for(;y;)f(s,y.data,v),v+=y.data.length,y=y.next;return s}consume(r,s){const y=this.head.data;if(r<y.length){const v=y.slice(0,r);return this.head.data=y.slice(r),v}return r===y.length?this.shift():s?this._getString(r):this._getBuffer(r)}first(){return this.head.data}*[t](){for(let r=this.head;r;r=r.next)yield r.data}_getString(r){let s="",y=this.head,v=0;do{const x=y.data;if(r>x.length)s+=x,r-=x.length;else{r===x.length?(s+=x,++v,y.next?this.head=y.next:this.head=this.tail=null):(s+=d(x,0,r),this.head=y,y.data=d(x,r));break}++v}while((y=y.next)!==null);return this.length-=v,s}_getBuffer(r){const s=B.allocUnsafe(r),y=r;let v=this.head,x=0;do{const h=v.data;if(r>h.length)f(s,h,y-r),r-=h.length;else{r===h.length?(f(s,h,y-r),++x,v.next?this.head=v.next:this.head=this.tail=null):(f(s,new _(h.buffer,h.byteOffset,r),y-r),this.head=v,v.data=h.slice(r));break}++x}while((v=v.next)!==null);return this.length-=x,s}[Symbol.for("nodejs.util.inspect.custom")](r,s){return o(this,{...s,depth:0,customInspect:!1})}},Zt}var en,Sr;function Ye(){if(Sr)return en;Sr=1;const{MathFloor:d,NumberIsInteger:t}=fe(),{validateInteger:f}=He(),{ERR_INVALID_ARG_VALUE:_}=ge().codes;let B=16*1024,o=16;function n(v,x,h){return v.highWaterMark!=null?v.highWaterMark:x?v[h]:null}function r(v){return v?o:B}function s(v,x){f(x,"value",0),v?o=x:B=x}function y(v,x,h,g){const N=n(x,g,h);if(N!=null){if(!t(N)||N<0){const R=g?`options.${h}`:"options.highWaterMark";throw new _(R,N)}return d(N)}return r(v.objectMode)}return en={getHighWaterMark:y,getDefaultHighWaterMark:r,setDefaultHighWaterMark:s},en}var tn,Er;function Jr(){if(Er)return tn;Er=1;const d=qe(),{PromisePrototypeThen:t,SymbolAsyncIterator:f,SymbolIterator:_}=fe(),{Buffer:B}=Pe(),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_NULL_VALUES:n}=ge().codes;function r(s,y,v){let x;if(typeof y=="string"||y instanceof B)return new s({objectMode:!0,...v,read(){this.push(y),this.push(null)}});let h;if(y&&y[f])h=!0,x=y[f]();else if(y&&y[_])h=!1,x=y[_]();else throw new o("iterable",["Iterable"],y);const g=new s({objectMode:!0,highWaterMark:1,...v});let N=!1;g._read=function(){N||(N=!0,b())},g._destroy=function(P,A){t(R(P),()=>d.nextTick(A,P),a=>d.nextTick(A,a||P))};async function R(P){const A=P!=null,a=typeof x.throw=="function";if(A&&a){const{value:e,done:l}=await x.throw(P);if(await e,l)return}if(typeof x.return=="function"){const{value:e}=await x.return();await e}}async function b(){for(;;){try{const{value:P,done:A}=h?await x.next():x.next();if(A)g.push(null);else{const a=P&&typeof P.then=="function"?await P:P;if(a===null)throw N=!1,new n;if(g.push(a))continue;N=!1}}catch(P){g.destroy(P)}break}}return g}return tn=r,tn}var nn,Rr;function Ze(){if(Rr)return nn;Rr=1;const d=qe(),{ArrayPrototypeIndexOf:t,NumberIsInteger:f,NumberIsNaN:_,NumberParseInt:B,ObjectDefineProperties:o,ObjectKeys:n,ObjectSetPrototypeOf:r,Promise:s,SafeSet:y,SymbolAsyncDispose:v,SymbolAsyncIterator:x,Symbol:h}=fe();nn=Z,Z.ReadableState=ae;const{EventEmitter:g}=ze(),{Stream:N,prependListener:R}=yn(),{Buffer:b}=Pe(),{addAbortSignal:P}=Ke(),A=Oe();let a=be().debuglog("stream",S=>{a=S});const e=Ti(),l=Fe(),{getHighWaterMark:E,getDefaultHighWaterMark:U}=Ye(),{aggregateTwoErrors:w,codes:{ERR_INVALID_ARG_TYPE:W,ERR_METHOD_NOT_IMPLEMENTED:p,ERR_OUT_OF_RANGE:T,ERR_STREAM_PUSH_AFTER_EOF:j,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:c},AbortError:m}=ge(),{validateObject:V}=He(),u=h("kPaused"),{StringDecoder:G}=ai(),D=Jr();r(Z.prototype,N.prototype),r(Z,N);const C=()=>{},{errorOrDestroy:i}=l,J=1,X=2,H=4,Y=8,L=16,k=32,F=64,M=128,z=256,Q=512,ne=1024,ie=2048,I=4096,q=8192,K=16384,te=32768,re=65536,oe=1<<17,$=1<<18;function ee(S){return{enumerable:!1,get(){return(this.state&S)!==0},set(O){O?this.state|=S:this.state&=~S}}}o(ae.prototype,{objectMode:ee(J),ended:ee(X),endEmitted:ee(H),reading:ee(Y),constructed:ee(L),sync:ee(k),needReadable:ee(F),emittedReadable:ee(M),readableListening:ee(z),resumeScheduled:ee(Q),errorEmitted:ee(ne),emitClose:ee(ie),autoDestroy:ee(I),destroyed:ee(q),closed:ee(K),closeEmitted:ee(te),multiAwaitDrain:ee(re),readingMore:ee(oe),dataEmitted:ee($)});function ae(S,O,se){typeof se!="boolean"&&(se=O instanceof xe()),this.state=ie|I|L|k,S&&S.objectMode&&(this.state|=J),se&&S&&S.readableObjectMode&&(this.state|=J),this.highWaterMark=S?E(this,S,"readableHighWaterMark",se):U(!1),this.buffer=new e,this.length=0,this.pipes=[],this.flowing=null,this[u]=null,S&&S.emitClose===!1&&(this.state&=-2049),S&&S.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=S&&S.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,S&&S.encoding&&(this.decoder=new G(S.encoding),this.encoding=S.encoding)}function Z(S){if(!(this instanceof Z))return new Z(S);const O=this instanceof xe();this._readableState=new ae(S,this,O),S&&(typeof S.read=="function"&&(this._read=S.read),typeof S.destroy=="function"&&(this._destroy=S.destroy),typeof S.construct=="function"&&(this._construct=S.construct),S.signal&&!O&&P(S.signal,this)),N.call(this,S),l.construct(this,()=>{this._readableState.needReadable&&ve(this,this._readableState)})}Z.prototype.destroy=l.destroy,Z.prototype._undestroy=l.undestroy,Z.prototype._destroy=function(S,O){O(S)},Z.prototype[g.captureRejectionSymbol]=function(S){this.destroy(S)},Z.prototype[v]=function(){let S;return this.destroyed||(S=this.readableEnded?null:new m,this.destroy(S)),new s((O,se)=>A(this,le=>le&&le!==S?se(le):O(null)))},Z.prototype.push=function(S,O){return ue(this,S,O,!1)},Z.prototype.unshift=function(S,O){return ue(this,S,O,!0)};function ue(S,O,se,le){a("readableAddChunk",O);const ce=S._readableState;let pe;if((ce.state&J)===0&&(typeof O=="string"?(se=se||ce.defaultEncoding,ce.encoding!==se&&(le&&ce.encoding?O=b.from(O,se).toString(ce.encoding):(O=b.from(O,se),se=""))):O instanceof b?se="":N._isUint8Array(O)?(O=N._uint8ArrayToBuffer(O),se=""):O!=null&&(pe=new W("chunk",["string","Buffer","Uint8Array"],O))),pe)i(S,pe);else if(O===null)ce.state&=-9,Re(S,ce);else if((ce.state&J)!==0||O&&O.length>0)if(le)if((ce.state&H)!==0)i(S,new c);else{if(ce.destroyed||ce.errored)return!1;ye(S,ce,O,!0)}else if(ce.ended)i(S,new j);else{if(ce.destroyed||ce.errored)return!1;ce.state&=-9,ce.decoder&&!se?(O=ce.decoder.write(O),ce.objectMode||O.length!==0?ye(S,ce,O,!1):ve(S,ce)):ye(S,ce,O,!1)}else le||(ce.state&=-9,ve(S,ce));return!ce.ended&&(ce.length<ce.highWaterMark||ce.length===0)}function ye(S,O,se,le){O.flowing&&O.length===0&&!O.sync&&S.listenerCount("data")>0?((O.state&re)!==0?O.awaitDrainWriters.clear():O.awaitDrainWriters=null,O.dataEmitted=!0,S.emit("data",se)):(O.length+=O.objectMode?1:se.length,le?O.buffer.unshift(se):O.buffer.push(se),(O.state&F)!==0&&De(S)),ve(S,O)}Z.prototype.isPaused=function(){const S=this._readableState;return S[u]===!0||S.flowing===!1},Z.prototype.setEncoding=function(S){const O=new G(S);this._readableState.decoder=O,this._readableState.encoding=this._readableState.decoder.encoding;const se=this._readableState.buffer;let le="";for(const ce of se)le+=O.write(ce);return se.clear(),le!==""&&se.push(le),this._readableState.length=le.length,this};const de=1073741824;function we(S){if(S>de)throw new T("size","<= 1GiB",S);return S--,S|=S>>>1,S|=S>>>2,S|=S>>>4,S|=S>>>8,S|=S>>>16,S++,S}function he(S,O){return S<=0||O.length===0&&O.ended?0:(O.state&J)!==0?1:_(S)?O.flowing&&O.length?O.buffer.first().length:O.length:S<=O.length?S:O.ended?O.length:0}Z.prototype.read=function(S){a("read",S),S===void 0?S=NaN:f(S)||(S=B(S,10));const O=this._readableState,se=S;if(S>O.highWaterMark&&(O.highWaterMark=we(S)),S!==0&&(O.state&=-129),S===0&&O.needReadable&&((O.highWaterMark!==0?O.length>=O.highWaterMark:O.length>0)||O.ended))return a("read: emitReadable",O.length,O.ended),O.length===0&&O.ended?et(this):De(this),null;if(S=he(S,O),S===0&&O.ended)return O.length===0&&et(this),null;let le=(O.state&F)!==0;if(a("need readable",le),(O.length===0||O.length-S<O.highWaterMark)&&(le=!0,a("length less than watermark",le)),O.ended||O.reading||O.destroyed||O.errored||!O.constructed)le=!1,a("reading, ended or constructing",le);else if(le){a("do read"),O.state|=Y|k,O.length===0&&(O.state|=F);try{this._read(O.highWaterMark)}catch(pe){i(this,pe)}O.state&=-33,O.reading||(S=he(se,O))}let ce;return S>0?ce=Sn(S,O):ce=null,ce===null?(O.needReadable=O.length<=O.highWaterMark,S=0):(O.length-=S,O.multiAwaitDrain?O.awaitDrainWriters.clear():O.awaitDrainWriters=null),O.length===0&&(O.ended||(O.needReadable=!0),se!==S&&O.ended&&et(this)),ce!==null&&!O.errorEmitted&&!O.closeEmitted&&(O.dataEmitted=!0,this.emit("data",ce)),ce};function Re(S,O){if(a("onEofChunk"),!O.ended){if(O.decoder){const se=O.decoder.end();se&&se.length&&(O.buffer.push(se),O.length+=O.objectMode?1:se.length)}O.ended=!0,O.sync?De(S):(O.needReadable=!1,O.emittedReadable=!0,Je(S))}}function De(S){const O=S._readableState;a("emitReadable",O.needReadable,O.emittedReadable),O.needReadable=!1,O.emittedReadable||(a("emitReadable",O.flowing),O.emittedReadable=!0,d.nextTick(Je,S))}function Je(S){const O=S._readableState;a("emitReadable_",O.destroyed,O.length,O.ended),!O.destroyed&&!O.errored&&(O.length||O.ended)&&(S.emit("readable"),O.emittedReadable=!1),O.needReadable=!O.flowing&&!O.ended&&O.length<=O.highWaterMark,mn(S)}function ve(S,O){!O.readingMore&&O.constructed&&(O.readingMore=!0,d.nextTick(Xr,S,O))}function Xr(S,O){for(;!O.reading&&!O.ended&&(O.length<O.highWaterMark||O.flowing&&O.length===0);){const se=O.length;if(a("maybeReadMore read 0"),S.read(0),se===O.length)break}O.readingMore=!1}Z.prototype._read=function(S){throw new p("_read()")},Z.prototype.pipe=function(S,O){const se=this,le=this._readableState;le.pipes.length===1&&(le.multiAwaitDrain||(le.multiAwaitDrain=!0,le.awaitDrainWriters=new y(le.awaitDrainWriters?[le.awaitDrainWriters]:[]))),le.pipes.push(S),a("pipe count=%d opts=%j",le.pipes.length,O);const pe=(!O||O.end!==!1)&&S!==d.stdout&&S!==d.stderr?Rn:Ue;le.endEmitted?d.nextTick(pe):se.once("end",pe),S.on("unpipe",_e);function _e(Le,Ie){a("onunpipe"),Le===se&&Ie&&Ie.hasUnpiped===!1&&(Ie.hasUnpiped=!0,ri())}function Rn(){a("onend"),S.end()}let je,In=!1;function ri(){a("cleanup"),S.removeListener("close",rt),S.removeListener("finish",it),je&&S.removeListener("drain",je),S.removeListener("error",nt),S.removeListener("unpipe",_e),se.removeListener("end",Rn),se.removeListener("end",Ue),se.removeListener("data",An),In=!0,je&&le.awaitDrainWriters&&(!S._writableState||S._writableState.needDrain)&&je()}function xn(){In||(le.pipes.length===1&&le.pipes[0]===S?(a("false write response, pause",0),le.awaitDrainWriters=S,le.multiAwaitDrain=!1):le.pipes.length>1&&le.pipes.includes(S)&&(a("false write response, pause",le.awaitDrainWriters.size),le.awaitDrainWriters.add(S)),se.pause()),je||(je=Qr(se,S),S.on("drain",je))}se.on("data",An);function An(Le){a("ondata");const Ie=S.write(Le);a("dest.write",Ie),Ie===!1&&xn()}function nt(Le){if(a("onerror",Le),Ue(),S.removeListener("error",nt),S.listenerCount("error")===0){const Ie=S._writableState||S._readableState;Ie&&!Ie.errorEmitted?i(S,Le):S.emit("error",Le)}}R(S,"error",nt);function rt(){S.removeListener("finish",it),Ue()}S.once("close",rt);function it(){a("onfinish"),S.removeListener("close",rt),Ue()}S.once("finish",it);function Ue(){a("unpipe"),se.unpipe(S)}return S.emit("pipe",se),S.writableNeedDrain===!0?xn():le.flowing||(a("pipe resume"),se.resume()),S};function Qr(S,O){return function(){const le=S._readableState;le.awaitDrainWriters===O?(a("pipeOnDrain",1),le.awaitDrainWriters=null):le.multiAwaitDrain&&(a("pipeOnDrain",le.awaitDrainWriters.size),le.awaitDrainWriters.delete(O)),(!le.awaitDrainWriters||le.awaitDrainWriters.size===0)&&S.listenerCount("data")&&S.resume()}}Z.prototype.unpipe=function(S){const O=this._readableState,se={hasUnpiped:!1};if(O.pipes.length===0)return this;if(!S){const ce=O.pipes;O.pipes=[],this.pause();for(let pe=0;pe<ce.length;pe++)ce[pe].emit("unpipe",this,{hasUnpiped:!1});return this}const le=t(O.pipes,S);return le===-1?this:(O.pipes.splice(le,1),O.pipes.length===0&&this.pause(),S.emit("unpipe",this,se),this)},Z.prototype.on=function(S,O){const se=N.prototype.on.call(this,S,O),le=this._readableState;return S==="data"?(le.readableListening=this.listenerCount("readable")>0,le.flowing!==!1&&this.resume()):S==="readable"&&!le.endEmitted&&!le.readableListening&&(le.readableListening=le.needReadable=!0,le.flowing=!1,le.emittedReadable=!1,a("on readable",le.length,le.reading),le.length?De(this):le.reading||d.nextTick(Kr,this)),se},Z.prototype.addListener=Z.prototype.on,Z.prototype.removeListener=function(S,O){const se=N.prototype.removeListener.call(this,S,O);return S==="readable"&&d.nextTick(vn,this),se},Z.prototype.off=Z.prototype.removeListener,Z.prototype.removeAllListeners=function(S){const O=N.prototype.removeAllListeners.apply(this,arguments);return(S==="readable"||S===void 0)&&d.nextTick(vn,this),O};function vn(S){const O=S._readableState;O.readableListening=S.listenerCount("readable")>0,O.resumeScheduled&&O[u]===!1?O.flowing=!0:S.listenerCount("data")>0?S.resume():O.readableListening||(O.flowing=null)}function Kr(S){a("readable nexttick read 0"),S.read(0)}Z.prototype.resume=function(){const S=this._readableState;return S.flowing||(a("resume"),S.flowing=!S.readableListening,Yr(this,S)),S[u]=!1,this};function Yr(S,O){O.resumeScheduled||(O.resumeScheduled=!0,d.nextTick(Zr,S,O))}function Zr(S,O){a("resume",O.reading),O.reading||S.read(0),O.resumeScheduled=!1,S.emit("resume"),mn(S),O.flowing&&!O.reading&&S.read(0)}Z.prototype.pause=function(){return a("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(a("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[u]=!0,this};function mn(S){const O=S._readableState;for(a("flow",O.flowing);O.flowing&&S.read()!==null;);}Z.prototype.wrap=function(S){let O=!1;S.on("data",le=>{!this.push(le)&&S.pause&&(O=!0,S.pause())}),S.on("end",()=>{this.push(null)}),S.on("error",le=>{i(this,le)}),S.on("close",()=>{this.destroy()}),S.on("destroy",()=>{this.destroy()}),this._read=()=>{O&&S.resume&&(O=!1,S.resume())};const se=n(S);for(let le=1;le<se.length;le++){const ce=se[le];this[ce]===void 0&&typeof S[ce]=="function"&&(this[ce]=S[ce].bind(S))}return this},Z.prototype[x]=function(){return _n(this)},Z.prototype.iterator=function(S){return S!==void 0&&V(S,"options"),_n(this,S)};function _n(S,O){typeof S.read!="function"&&(S=Z.wrap(S,{objectMode:!0}));const se=ei(S,O);return se.stream=S,se}async function*ei(S,O){let se=C;function le(_e){this===S?(se(),se=C):se=_e}S.on("readable",le);let ce;const pe=A(S,{writable:!1},_e=>{ce=_e?w(ce,_e):null,se(),se=C});try{for(;;){const _e=S.destroyed?null:S.read();if(_e!==null)yield _e;else{if(ce)throw ce;if(ce===null)return;await new s(le)}}}catch(_e){throw ce=w(ce,_e),ce}finally{(ce||(O==null?void 0:O.destroyOnReturn)!==!1)&&(ce===void 0||S._readableState.autoDestroy)?l.destroyer(S,null):(S.off("readable",le),pe())}}o(Z.prototype,{readable:{__proto__:null,get(){const S=this._readableState;return!!S&&S.readable!==!1&&!S.destroyed&&!S.errorEmitted&&!S.endEmitted},set(S){this._readableState&&(this._readableState.readable=!!S)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(S){this._readableState&&(this._readableState.flowing=S)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(S){this._readableState&&(this._readableState.destroyed=S)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),o(ae.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[u]!==!1},set(S){this[u]=!!S}}}),Z._fromList=Sn;function Sn(S,O){if(O.length===0)return null;let se;return O.objectMode?se=O.buffer.shift():!S||S>=O.length?(O.decoder?se=O.buffer.join(""):O.buffer.length===1?se=O.buffer.first():se=O.buffer.concat(O.length),O.buffer.clear()):se=O.buffer.consume(S,O.decoder),se}function et(S){const O=S._readableState;a("endReadable",O.endEmitted),O.endEmitted||(O.ended=!0,d.nextTick(ti,O,S))}function ti(S,O){if(a("endReadableNT",S.endEmitted,S.length),!S.errored&&!S.closeEmitted&&!S.endEmitted&&S.length===0){if(S.endEmitted=!0,O.emit("end"),O.writable&&O.allowHalfOpen===!1)d.nextTick(ni,O);else if(S.autoDestroy){const se=O._writableState;(!se||se.autoDestroy&&(se.finished||se.writable===!1))&&O.destroy()}}}function ni(S){S.writable&&!S.writableEnded&&!S.destroyed&&S.end()}Z.from=function(S,O){return D(Z,S,O)};let tt;function En(){return tt===void 0&&(tt={}),tt}return Z.fromWeb=function(S,O){return En().newStreamReadableFromReadableStream(S,O)},Z.toWeb=function(S,O){return En().newReadableStreamFromStreamReadable(S,O)},Z.wrap=function(S,O){var se,le;return new Z({objectMode:(se=(le=S.readableObjectMode)!==null&&le!==void 0?le:S.objectMode)!==null&&se!==void 0?se:!0,...O,destroy(ce,pe){l.destroyer(S,ce),pe(ce)}}).wrap(S)},nn}var rn,Ir;function bn(){if(Ir)return rn;Ir=1;const d=qe(),{ArrayPrototypeSlice:t,Error:f,FunctionPrototypeSymbolHasInstance:_,ObjectDefineProperty:B,ObjectDefineProperties:o,ObjectSetPrototypeOf:n,StringPrototypeToLowerCase:r,Symbol:s,SymbolHasInstance:y}=fe();rn=V,V.WritableState=c;const{EventEmitter:v}=ze(),x=yn().Stream,{Buffer:h}=Pe(),g=Fe(),{addAbortSignal:N}=Ke(),{getHighWaterMark:R,getDefaultHighWaterMark:b}=Ye(),{ERR_INVALID_ARG_TYPE:P,ERR_METHOD_NOT_IMPLEMENTED:A,ERR_MULTIPLE_CALLBACK:a,ERR_STREAM_CANNOT_PIPE:e,ERR_STREAM_DESTROYED:l,ERR_STREAM_ALREADY_FINISHED:E,ERR_STREAM_NULL_VALUES:U,ERR_STREAM_WRITE_AFTER_END:w,ERR_UNKNOWN_ENCODING:W}=ge().codes,{errorOrDestroy:p}=g;n(V.prototype,x.prototype),n(V,x);function T(){}const j=s("kOnFinished");function c(I,q,K){typeof K!="boolean"&&(K=q instanceof xe()),this.objectMode=!!(I&&I.objectMode),K&&(this.objectMode=this.objectMode||!!(I&&I.writableObjectMode)),this.highWaterMark=I?R(this,I,"writableHighWaterMark",K):b(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const te=!!(I&&I.decodeStrings===!1);this.decodeStrings=!te,this.defaultEncoding=I&&I.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=i.bind(void 0,q),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,m(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!I||I.emitClose!==!1,this.autoDestroy=!I||I.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[j]=[]}function m(I){I.buffered=[],I.bufferedIndex=0,I.allBuffers=!0,I.allNoop=!0}c.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},B(c.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function V(I){const q=this instanceof xe();if(!q&&!_(V,this))return new V(I);this._writableState=new c(I,this,q),I&&(typeof I.write=="function"&&(this._write=I.write),typeof I.writev=="function"&&(this._writev=I.writev),typeof I.destroy=="function"&&(this._destroy=I.destroy),typeof I.final=="function"&&(this._final=I.final),typeof I.construct=="function"&&(this._construct=I.construct),I.signal&&N(I.signal,this)),x.call(this,I),g.construct(this,()=>{const K=this._writableState;K.writing||Y(this,K),M(this,K)})}B(V,y,{__proto__:null,value:function(I){return _(this,I)?!0:this!==V?!1:I&&I._writableState instanceof c}}),V.prototype.pipe=function(){p(this,new e)};function u(I,q,K,te){const re=I._writableState;if(typeof K=="function")te=K,K=re.defaultEncoding;else{if(!K)K=re.defaultEncoding;else if(K!=="buffer"&&!h.isEncoding(K))throw new W(K);typeof te!="function"&&(te=T)}if(q===null)throw new U;if(!re.objectMode)if(typeof q=="string")re.decodeStrings!==!1&&(q=h.from(q,K),K="buffer");else if(q instanceof h)K="buffer";else if(x._isUint8Array(q))q=x._uint8ArrayToBuffer(q),K="buffer";else throw new P("chunk",["string","Buffer","Uint8Array"],q);let oe;return re.ending?oe=new w:re.destroyed&&(oe=new l("write")),oe?(d.nextTick(te,oe),p(I,oe,!0),oe):(re.pendingcb++,G(I,re,q,K,te))}V.prototype.write=function(I,q,K){return u(this,I,q,K)===!0},V.prototype.cork=function(){this._writableState.corked++},V.prototype.uncork=function(){const I=this._writableState;I.corked&&(I.corked--,I.writing||Y(this,I))},V.prototype.setDefaultEncoding=function(q){if(typeof q=="string"&&(q=r(q)),!h.isEncoding(q))throw new W(q);return this._writableState.defaultEncoding=q,this};function G(I,q,K,te,re){const oe=q.objectMode?1:K.length;q.length+=oe;const $=q.length<q.highWaterMark;return $||(q.needDrain=!0),q.writing||q.corked||q.errored||!q.constructed?(q.buffered.push({chunk:K,encoding:te,callback:re}),q.allBuffers&&te!=="buffer"&&(q.allBuffers=!1),q.allNoop&&re!==T&&(q.allNoop=!1)):(q.writelen=oe,q.writecb=re,q.writing=!0,q.sync=!0,I._write(K,te,q.onwrite),q.sync=!1),$&&!q.errored&&!q.destroyed}function D(I,q,K,te,re,oe,$){q.writelen=te,q.writecb=$,q.writing=!0,q.sync=!0,q.destroyed?q.onwrite(new l("write")):K?I._writev(re,q.onwrite):I._write(re,oe,q.onwrite),q.sync=!1}function C(I,q,K,te){--q.pendingcb,te(K),H(q),p(I,K)}function i(I,q){const K=I._writableState,te=K.sync,re=K.writecb;if(typeof re!="function"){p(I,new a);return}K.writing=!1,K.writecb=null,K.length-=K.writelen,K.writelen=0,q?(q.stack,K.errored||(K.errored=q),I._readableState&&!I._readableState.errored&&(I._readableState.errored=q),te?d.nextTick(C,I,K,q,re):C(I,K,q,re)):(K.buffered.length>K.bufferedIndex&&Y(I,K),te?K.afterWriteTickInfo!==null&&K.afterWriteTickInfo.cb===re?K.afterWriteTickInfo.count++:(K.afterWriteTickInfo={count:1,cb:re,stream:I,state:K},d.nextTick(J,K.afterWriteTickInfo)):X(I,K,1,re))}function J({stream:I,state:q,count:K,cb:te}){return q.afterWriteTickInfo=null,X(I,q,K,te)}function X(I,q,K,te){for(!q.ending&&!I.destroyed&&q.length===0&&q.needDrain&&(q.needDrain=!1,I.emit("drain"));K-- >0;)q.pendingcb--,te();q.destroyed&&H(q),M(I,q)}function H(I){if(I.writing)return;for(let re=I.bufferedIndex;re<I.buffered.length;++re){var q;const{chunk:oe,callback:$}=I.buffered[re],ee=I.objectMode?1:oe.length;I.length-=ee,$((q=I.errored)!==null&&q!==void 0?q:new l("write"))}const K=I[j].splice(0);for(let re=0;re<K.length;re++){var te;K[re]((te=I.errored)!==null&&te!==void 0?te:new l("end"))}m(I)}function Y(I,q){if(q.corked||q.bufferProcessing||q.destroyed||!q.constructed)return;const{buffered:K,bufferedIndex:te,objectMode:re}=q,oe=K.length-te;if(!oe)return;let $=te;if(q.bufferProcessing=!0,oe>1&&I._writev){q.pendingcb-=oe-1;const ee=q.allNoop?T:Z=>{for(let ue=$;ue<K.length;++ue)K[ue].callback(Z)},ae=q.allNoop&&$===0?K:t(K,$);ae.allBuffers=q.allBuffers,D(I,q,!0,q.length,ae,"",ee),m(q)}else{do{const{chunk:ee,encoding:ae,callback:Z}=K[$];K[$++]=null;const ue=re?1:ee.length;D(I,q,!1,ue,ee,ae,Z)}while($<K.length&&!q.writing);$===K.length?m(q):$>256?(K.splice(0,$),q.bufferedIndex=0):q.bufferedIndex=$}q.bufferProcessing=!1}V.prototype._write=function(I,q,K){if(this._writev)this._writev([{chunk:I,encoding:q}],K);else throw new A("_write()")},V.prototype._writev=null,V.prototype.end=function(I,q,K){const te=this._writableState;typeof I=="function"?(K=I,I=null,q=null):typeof q=="function"&&(K=q,q=null);let re;if(I!=null){const oe=u(this,I,q);oe instanceof f&&(re=oe)}return te.corked&&(te.corked=1,this.uncork()),re||(!te.errored&&!te.ending?(te.ending=!0,M(this,te,!0),te.ended=!0):te.finished?re=new E("end"):te.destroyed&&(re=new l("end"))),typeof K=="function"&&(re||te.finished?d.nextTick(K,re):te[j].push(K)),this};function L(I){return I.ending&&!I.destroyed&&I.constructed&&I.length===0&&!I.errored&&I.buffered.length===0&&!I.finished&&!I.writing&&!I.errorEmitted&&!I.closeEmitted}function k(I,q){let K=!1;function te(re){if(K){p(I,re??a());return}if(K=!0,q.pendingcb--,re){const oe=q[j].splice(0);for(let $=0;$<oe.length;$++)oe[$](re);p(I,re,q.sync)}else L(q)&&(q.prefinished=!0,I.emit("prefinish"),q.pendingcb++,d.nextTick(z,I,q))}q.sync=!0,q.pendingcb++;try{I._final(te)}catch(re){te(re)}q.sync=!1}function F(I,q){!q.prefinished&&!q.finalCalled&&(typeof I._final=="function"&&!q.destroyed?(q.finalCalled=!0,k(I,q)):(q.prefinished=!0,I.emit("prefinish")))}function M(I,q,K){L(q)&&(F(I,q),q.pendingcb===0&&(K?(q.pendingcb++,d.nextTick((te,re)=>{L(re)?z(te,re):re.pendingcb--},I,q)):L(q)&&(q.pendingcb++,z(I,q))))}function z(I,q){q.pendingcb--,q.finished=!0;const K=q[j].splice(0);for(let te=0;te<K.length;te++)K[te]();if(I.emit("finish"),q.autoDestroy){const te=I._readableState;(!te||te.autoDestroy&&(te.endEmitted||te.readable===!1))&&I.destroy()}}o(V.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(I){this._writableState&&(this._writableState.destroyed=I)}},writable:{__proto__:null,get(){const I=this._writableState;return!!I&&I.writable!==!1&&!I.destroyed&&!I.errored&&!I.ending&&!I.ended},set(I){this._writableState&&(this._writableState.writable=!!I)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const I=this._writableState;return I?!I.destroyed&&!I.ending&&I.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Q=g.destroy;V.prototype.destroy=function(I,q){const K=this._writableState;return!K.destroyed&&(K.bufferedIndex<K.buffered.length||K[j].length)&&d.nextTick(H,K),Q.call(this,I,q),this},V.prototype._undestroy=g.undestroy,V.prototype._destroy=function(I,q){q(I)},V.prototype[v.captureRejectionSymbol]=function(I){this.destroy(I)};let ne;function ie(){return ne===void 0&&(ne={}),ne}return V.fromWeb=function(I,q){return ie().newStreamWritableFromWritableStream(I,q)},V.toWeb=function(I){return ie().newWritableStreamFromStreamWritable(I)},rn}var on,xr;function Oi(){if(xr)return on;xr=1;const d=qe(),t=Pe(),{isReadable:f,isWritable:_,isIterable:B,isNodeStream:o,isReadableNodeStream:n,isWritableNodeStream:r,isDuplexNodeStream:s,isReadableStream:y,isWritableStream:v}=Ne(),x=Oe(),{AbortError:h,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:N}}=ge(),{destroyer:R}=Fe(),b=xe(),P=Ze(),A=bn(),{createDeferredPromise:a}=be(),e=Jr(),l=globalThis.Blob||t.Blob,E=typeof l<"u"?function(c){return c instanceof l}:function(c){return!1},U=globalThis.AbortController||Be().AbortController,{FunctionPrototypeCall:w}=fe();class W extends b{constructor(c){super(c),(c==null?void 0:c.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(c==null?void 0:c.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}on=function j(c,m){if(s(c))return c;if(n(c))return T({readable:c});if(r(c))return T({writable:c});if(o(c))return T({writable:!1,readable:!1});if(y(c))return T({readable:P.fromWeb(c)});if(v(c))return T({writable:A.fromWeb(c)});if(typeof c=="function"){const{value:u,write:G,final:D,destroy:C}=p(c);if(B(u))return e(W,u,{objectMode:!0,write:G,final:D,destroy:C});const i=u==null?void 0:u.then;if(typeof i=="function"){let J;const X=w(i,u,H=>{if(H!=null)throw new N("nully","body",H)},H=>{R(J,H)});return J=new W({objectMode:!0,readable:!1,write:G,final(H){D(async()=>{try{await X,d.nextTick(H,null)}catch(Y){d.nextTick(H,Y)}})},destroy:C})}throw new N("Iterable, AsyncIterable or AsyncFunction",m,u)}if(E(c))return j(c.arrayBuffer());if(B(c))return e(W,c,{objectMode:!0,writable:!1});if(y(c==null?void 0:c.readable)&&v(c==null?void 0:c.writable))return W.fromWeb(c);if(typeof(c==null?void 0:c.writable)=="object"||typeof(c==null?void 0:c.readable)=="object"){const u=c!=null&&c.readable?n(c==null?void 0:c.readable)?c==null?void 0:c.readable:j(c.readable):void 0,G=c!=null&&c.writable?r(c==null?void 0:c.writable)?c==null?void 0:c.writable:j(c.writable):void 0;return T({readable:u,writable:G})}const V=c==null?void 0:c.then;if(typeof V=="function"){let u;return w(V,c,G=>{G!=null&&u.push(G),u.push(null)},G=>{R(u,G)}),u=new W({objectMode:!0,writable:!1,read(){}})}throw new g(m,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],c)};function p(j){let{promise:c,resolve:m}=a();const V=new U,u=V.signal;return{value:j(async function*(){for(;;){const D=c;c=null;const{chunk:C,done:i,cb:J}=await D;if(d.nextTick(J),i)return;if(u.aborted)throw new h(void 0,{cause:u.reason});({promise:c,resolve:m}=a()),yield C}}(),{signal:u}),write(D,C,i){const J=m;m=null,J({chunk:D,done:!1,cb:i})},final(D){const C=m;m=null,C({done:!0,cb:D})},destroy(D,C){V.abort(),C(D)}}}function T(j){const c=j.readable&&typeof j.readable.read!="function"?P.wrap(j.readable):j.readable,m=j.writable;let V=!!f(c),u=!!_(m),G,D,C,i,J;function X(H){const Y=i;i=null,Y?Y(H):H&&J.destroy(H)}return J=new W({readableObjectMode:!!(c!=null&&c.readableObjectMode),writableObjectMode:!!(m!=null&&m.writableObjectMode),readable:V,writable:u}),u&&(x(m,H=>{u=!1,H&&R(c,H),X(H)}),J._write=function(H,Y,L){m.write(H,Y)?L():G=L},J._final=function(H){m.end(),D=H},m.on("drain",function(){if(G){const H=G;G=null,H()}}),m.on("finish",function(){if(D){const H=D;D=null,H()}})),V&&(x(c,H=>{V=!1,H&&R(c,H),X(H)}),c.on("readable",function(){if(C){const H=C;C=null,H()}}),c.on("end",function(){J.push(null)}),J._read=function(){for(;;){const H=c.read();if(H===null){C=J._read;return}if(!J.push(H))return}}),J._destroy=function(H,Y){!H&&i!==null&&(H=new h),C=null,G=null,D=null,i===null?Y(H):(i=Y,R(m,H),R(c,H))},J}return on}var an,Ar;function xe(){if(Ar)return an;Ar=1;const{ObjectDefineProperties:d,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:f,ObjectSetPrototypeOf:_}=fe();an=n;const B=Ze(),o=bn();_(n.prototype,B.prototype),_(n,B);{const v=f(o.prototype);for(let x=0;x<v.length;x++){const h=v[x];n.prototype[h]||(n.prototype[h]=o.prototype[h])}}function n(v){if(!(this instanceof n))return new n(v);B.call(this,v),o.call(this,v),v?(this.allowHalfOpen=v.allowHalfOpen!==!1,v.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),v.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}d(n.prototype,{writable:{__proto__:null,...t(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(o.prototype,"writableLength")},writableFinished:{__proto__:null,...t(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(v){this._readableState&&this._writableState&&(this._readableState.destroyed=v,this._writableState.destroyed=v)}}});let r;function s(){return r===void 0&&(r={}),r}n.fromWeb=function(v,x){return s().newStreamDuplexFromReadableWritablePair(v,x)},n.toWeb=function(v){return s().newReadableWritablePairFromDuplex(v)};let y;return n.from=function(v){return y||(y=Oi()),y(v,"body")},an}var sn,Nr;function $r(){if(Nr)return sn;Nr=1;const{ObjectSetPrototypeOf:d,Symbol:t}=fe();sn=n;const{ERR_METHOD_NOT_IMPLEMENTED:f}=ge().codes,_=xe(),{getHighWaterMark:B}=Ye();d(n.prototype,_.prototype),d(n,_);const o=t("kCallback");function n(y){if(!(this instanceof n))return new n(y);const v=y?B(this,y,"readableHighWaterMark",!0):null;v===0&&(y={...y,highWaterMark:null,readableHighWaterMark:v,writableHighWaterMark:y.writableHighWaterMark||0}),_.call(this,y),this._readableState.sync=!1,this[o]=null,y&&(typeof y.transform=="function"&&(this._transform=y.transform),typeof y.flush=="function"&&(this._flush=y.flush)),this.on("prefinish",s)}function r(y){typeof this._flush=="function"&&!this.destroyed?this._flush((v,x)=>{if(v){y?y(v):this.destroy(v);return}x!=null&&this.push(x),this.push(null),y&&y()}):(this.push(null),y&&y())}function s(){this._final!==r&&r.call(this)}return n.prototype._final=r,n.prototype._transform=function(y,v,x){throw new f("_transform()")},n.prototype._write=function(y,v,x){const h=this._readableState,g=this._writableState,N=h.length;this._transform(y,v,(R,b)=>{if(R){x(R);return}b!=null&&this.push(b),g.ended||N===h.length||h.length<h.highWaterMark?x():this[o]=x})},n.prototype._read=function(){if(this[o]){const y=this[o];this[o]=null,y()}},sn}var ln,Dr;function Cr(){if(Dr)return ln;Dr=1;const{ObjectSetPrototypeOf:d}=fe();ln=f;const t=$r();d(f.prototype,t.prototype),d(f,t);function f(_){if(!(this instanceof f))return new f(_);t.call(this,_)}return f.prototype._transform=function(_,B,o){o(null,_)},ln}var cn,Tr;function wn(){if(Tr)return cn;Tr=1;const d=qe(),{ArrayIsArray:t,Promise:f,SymbolAsyncIterator:_,SymbolDispose:B}=fe(),o=Oe(),{once:n}=be(),r=Fe(),s=xe(),{aggregateTwoErrors:y,codes:{ERR_INVALID_ARG_TYPE:v,ERR_INVALID_RETURN_VALUE:x,ERR_MISSING_ARGS:h,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:N},AbortError:R}=ge(),{validateFunction:b,validateAbortSignal:P}=He(),{isIterable:A,isReadable:a,isReadableNodeStream:e,isNodeStream:l,isTransformStream:E,isWebStream:U,isReadableStream:w,isReadableFinished:W}=Ne(),p=globalThis.AbortController||Be().AbortController;let T,j,c;function m(H,Y,L){let k=!1;H.on("close",()=>{k=!0});const F=o(H,{readable:Y,writable:L},M=>{k=!M});return{destroy:M=>{k||(k=!0,r.destroyer(H,M||new g("pipe")))},cleanup:F}}function V(H){return b(H[H.length-1],"streams[stream.length - 1]"),H.pop()}function u(H){if(A(H))return H;if(e(H))return G(H);throw new v("val",["Readable","Iterable","AsyncIterable"],H)}async function*G(H){j||(j=Ze()),yield*j.prototype[_].call(H)}async function D(H,Y,L,{end:k}){let F,M=null;const z=ie=>{if(ie&&(F=ie),M){const I=M;M=null,I()}},Q=()=>new f((ie,I)=>{F?I(F):M=()=>{F?I(F):ie()}});Y.on("drain",z);const ne=o(Y,{readable:!1},z);try{Y.writableNeedDrain&&await Q();for await(const ie of H)Y.write(ie)||await Q();k&&(Y.end(),await Q()),L()}catch(ie){L(F!==ie?y(F,ie):ie)}finally{ne(),Y.off("drain",z)}}async function C(H,Y,L,{end:k}){E(Y)&&(Y=Y.writable);const F=Y.getWriter();try{for await(const M of H)await F.ready,F.write(M).catch(()=>{});await F.ready,k&&await F.close(),L()}catch(M){try{await F.abort(M),L(M)}catch(z){L(z)}}}function i(...H){return J(H,n(V(H)))}function J(H,Y,L){if(H.length===1&&t(H[0])&&(H=H[0]),H.length<2)throw new h("streams");const k=new p,F=k.signal,M=L==null?void 0:L.signal,z=[];P(M,"options.signal");function Q(){re(new R)}c=c||be().addAbortListener;let ne;M&&(ne=c(M,Q));let ie,I;const q=[];let K=0;function te(ae){re(ae,--K===0)}function re(ae,Z){var ue;if(ae&&(!ie||ie.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ie=ae),!(!ie&&!Z)){for(;q.length;)q.shift()(ie);(ue=ne)===null||ue===void 0||ue[B](),k.abort(),Z&&(ie||z.forEach(ye=>ye()),d.nextTick(Y,ie,I))}}let oe;for(let ae=0;ae<H.length;ae++){const Z=H[ae],ue=ae<H.length-1,ye=ae>0,de=ue||(L==null?void 0:L.end)!==!1,we=ae===H.length-1;if(l(Z)){let he=function(Re){Re&&Re.name!=="AbortError"&&Re.code!=="ERR_STREAM_PREMATURE_CLOSE"&&te(Re)};if(de){const{destroy:Re,cleanup:De}=m(Z,ue,ye);q.push(Re),a(Z)&&we&&z.push(De)}Z.on("error",he),a(Z)&&we&&z.push(()=>{Z.removeListener("error",he)})}if(ae===0)if(typeof Z=="function"){if(oe=Z({signal:F}),!A(oe))throw new x("Iterable, AsyncIterable or Stream","source",oe)}else A(Z)||e(Z)||E(Z)?oe=Z:oe=s.from(Z);else if(typeof Z=="function"){if(E(oe)){var $;oe=u(($=oe)===null||$===void 0?void 0:$.readable)}else oe=u(oe);if(oe=Z(oe,{signal:F}),ue){if(!A(oe,!0))throw new x("AsyncIterable",`transform[${ae-1}]`,oe)}else{var ee;T||(T=Cr());const he=new T({objectMode:!0}),Re=(ee=oe)===null||ee===void 0?void 0:ee.then;if(typeof Re=="function")K++,Re.call(oe,ve=>{I=ve,ve!=null&&he.write(ve),de&&he.end(),d.nextTick(te)},ve=>{he.destroy(ve),d.nextTick(te,ve)});else if(A(oe,!0))K++,D(oe,he,te,{end:de});else if(w(oe)||E(oe)){const ve=oe.readable||oe;K++,D(ve,he,te,{end:de})}else throw new x("AsyncIterable or Promise","destination",oe);oe=he;const{destroy:De,cleanup:Je}=m(oe,!1,!0);q.push(De),we&&z.push(Je)}}else if(l(Z)){if(e(oe)){K+=2;const he=X(oe,Z,te,{end:de});a(Z)&&we&&z.push(he)}else if(E(oe)||w(oe)){const he=oe.readable||oe;K++,D(he,Z,te,{end:de})}else if(A(oe))K++,D(oe,Z,te,{end:de});else throw new v("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],oe);oe=Z}else if(U(Z)){if(e(oe))K++,C(u(oe),Z,te,{end:de});else if(w(oe)||A(oe))K++,C(oe,Z,te,{end:de});else if(E(oe))K++,C(oe.readable,Z,te,{end:de});else throw new v("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],oe);oe=Z}else oe=s.from(Z)}return(F!=null&&F.aborted||M!=null&&M.aborted)&&d.nextTick(Q),oe}function X(H,Y,L,{end:k}){let F=!1;if(Y.on("close",()=>{F||L(new N)}),H.pipe(Y,{end:!1}),k){let M=function(){F=!0,Y.end()};W(H)?d.nextTick(M):H.once("end",M)}else L();return o(H,{readable:!0,writable:!1},M=>{const z=H._readableState;M&&M.code==="ERR_STREAM_PREMATURE_CLOSE"&&z&&z.ended&&!z.errored&&!z.errorEmitted?H.once("end",L).once("error",L):L(M)}),o(Y,{readable:!1,writable:!0},L)}return cn={pipelineImpl:J,pipeline:i},cn}var un,Or;function Vr(){if(Or)return un;Or=1;const{pipeline:d}=wn(),t=xe(),{destroyer:f}=Fe(),{isNodeStream:_,isReadable:B,isWritable:o,isWebStream:n,isTransformStream:r,isWritableStream:s,isReadableStream:y}=Ne(),{AbortError:v,codes:{ERR_INVALID_ARG_VALUE:x,ERR_MISSING_ARGS:h}}=ge(),g=Oe();return un=function(...R){if(R.length===0)throw new h("streams");if(R.length===1)return t.from(R[0]);const b=[...R];if(typeof R[0]=="function"&&(R[0]=t.from(R[0])),typeof R[R.length-1]=="function"){const T=R.length-1;R[T]=t.from(R[T])}for(let T=0;T<R.length;++T)if(!(!_(R[T])&&!n(R[T]))){if(T<R.length-1&&!(B(R[T])||y(R[T])||r(R[T])))throw new x(`streams[${T}]`,b[T],"must be readable");if(T>0&&!(o(R[T])||s(R[T])||r(R[T])))throw new x(`streams[${T}]`,b[T],"must be writable")}let P,A,a,e,l;function E(T){const j=e;e=null,j?j(T):T?l.destroy(T):!p&&!W&&l.destroy()}const U=R[0],w=d(R,E),W=!!(o(U)||s(U)||r(U)),p=!!(B(w)||y(w)||r(w));if(l=new t({writableObjectMode:!!(U!=null&&U.writableObjectMode),readableObjectMode:!!(w!=null&&w.readableObjectMode),writable:W,readable:p}),W){if(_(U))l._write=function(j,c,m){U.write(j,c)?m():P=m},l._final=function(j){U.end(),A=j},U.on("drain",function(){if(P){const j=P;P=null,j()}});else if(n(U)){const c=(r(U)?U.writable:U).getWriter();l._write=async function(m,V,u){try{await c.ready,c.write(m).catch(()=>{}),u()}catch(G){u(G)}},l._final=async function(m){try{await c.ready,c.close().catch(()=>{}),A=m}catch(V){m(V)}}}const T=r(w)?w.readable:w;g(T,()=>{if(A){const j=A;A=null,j()}})}if(p){if(_(w))w.on("readable",function(){if(a){const T=a;a=null,T()}}),w.on("end",function(){l.push(null)}),l._read=function(){for(;;){const T=w.read();if(T===null){a=l._read;return}if(!l.push(T))return}};else if(n(w)){const j=(r(w)?w.readable:w).getReader();l._read=async function(){for(;;)try{const{value:c,done:m}=await j.read();if(!l.push(c))return;if(m){l.push(null);return}}catch{return}}}}return l._destroy=function(T,j){!T&&e!==null&&(T=new v),a=null,P=null,A=null,e===null?j(T):(e=j,_(w)&&f(w,T))},l},un}var jr;function ji(){if(jr)return Ce;jr=1;const d=globalThis.AbortController||Be().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:f,ERR_MISSING_ARGS:_,ERR_OUT_OF_RANGE:B},AbortError:o}=ge(),{validateAbortSignal:n,validateInteger:r,validateObject:s}=He(),y=fe().Symbol("kWeak"),v=fe().Symbol("kResistStopPropagation"),{finished:x}=Oe(),h=Vr(),{addAbortSignalNoValidate:g}=Ke(),{isWritable:N,isNodeStream:R}=Ne(),{deprecate:b}=be(),{ArrayPrototypePush:P,Boolean:A,MathFloor:a,Number:e,NumberIsNaN:l,Promise:E,PromiseReject:U,PromiseResolve:w,PromisePrototypeThen:W,Symbol:p}=fe(),T=p("kEmpty"),j=p("kEof");function c(M,z){if(z!=null&&s(z,"options"),(z==null?void 0:z.signal)!=null&&n(z.signal,"options.signal"),R(M)&&!N(M))throw new t("stream",M,"must be writable");const Q=h(this,M);return z!=null&&z.signal&&g(z.signal,Q),Q}function m(M,z){if(typeof M!="function")throw new f("fn",["Function","AsyncFunction"],M);z!=null&&s(z,"options"),(z==null?void 0:z.signal)!=null&&n(z.signal,"options.signal");let Q=1;(z==null?void 0:z.concurrency)!=null&&(Q=a(z.concurrency));let ne=Q-1;return(z==null?void 0:z.highWaterMark)!=null&&(ne=a(z.highWaterMark)),r(Q,"options.concurrency",1),r(ne,"options.highWaterMark",0),ne+=Q,(async function*(){const I=be().AbortSignalAny([z==null?void 0:z.signal].filter(A)),q=this,K=[],te={signal:I};let re,oe,$=!1,ee=0;function ae(){$=!0,Z()}function Z(){ee-=1,ue()}function ue(){oe&&!$&&ee<Q&&K.length<ne&&(oe(),oe=null)}async function ye(){try{for await(let de of q){if($)return;if(I.aborted)throw new o;try{if(de=M(de,te),de===T)continue;de=w(de)}catch(we){de=U(we)}ee+=1,W(de,Z,ae),K.push(de),re&&(re(),re=null),!$&&(K.length>=ne||ee>=Q)&&await new E(we=>{oe=we})}K.push(j)}catch(de){const we=U(de);W(we,Z,ae),K.push(we)}finally{$=!0,re&&(re(),re=null)}}ye();try{for(;;){for(;K.length>0;){const de=await K[0];if(de===j)return;if(I.aborted)throw new o;de!==T&&(yield de),K.shift(),ue()}await new E(de=>{re=de})}}finally{$=!0,oe&&(oe(),oe=null)}}).call(this)}function V(M=void 0){return M!=null&&s(M,"options"),(M==null?void 0:M.signal)!=null&&n(M.signal,"options.signal"),(async function*(){let Q=0;for await(const ie of this){var ne;if(M!=null&&(ne=M.signal)!==null&&ne!==void 0&&ne.aborted)throw new o({cause:M.signal.reason});yield[Q++,ie]}}).call(this)}async function u(M,z=void 0){for await(const Q of i.call(this,M,z))return!0;return!1}async function G(M,z=void 0){if(typeof M!="function")throw new f("fn",["Function","AsyncFunction"],M);return!await u.call(this,async(...Q)=>!await M(...Q),z)}async function D(M,z){for await(const Q of i.call(this,M,z))return Q}async function C(M,z){if(typeof M!="function")throw new f("fn",["Function","AsyncFunction"],M);async function Q(ne,ie){return await M(ne,ie),T}for await(const ne of m.call(this,Q,z));}function i(M,z){if(typeof M!="function")throw new f("fn",["Function","AsyncFunction"],M);async function Q(ne,ie){return await M(ne,ie)?ne:T}return m.call(this,Q,z)}class J extends _{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function X(M,z,Q){var ne;if(typeof M!="function")throw new f("reducer",["Function","AsyncFunction"],M);Q!=null&&s(Q,"options"),(Q==null?void 0:Q.signal)!=null&&n(Q.signal,"options.signal");let ie=arguments.length>1;if(Q!=null&&(ne=Q.signal)!==null&&ne!==void 0&&ne.aborted){const re=new o(void 0,{cause:Q.signal.reason});throw this.once("error",()=>{}),await x(this.destroy(re)),re}const I=new d,q=I.signal;if(Q!=null&&Q.signal){const re={once:!0,[y]:this,[v]:!0};Q.signal.addEventListener("abort",()=>I.abort(),re)}let K=!1;try{for await(const re of this){var te;if(K=!0,Q!=null&&(te=Q.signal)!==null&&te!==void 0&&te.aborted)throw new o;ie?z=await M(z,re,{signal:q}):(z=re,ie=!0)}if(!K&&!ie)throw new J}finally{I.abort()}return z}async function H(M){M!=null&&s(M,"options"),(M==null?void 0:M.signal)!=null&&n(M.signal,"options.signal");const z=[];for await(const ne of this){var Q;if(M!=null&&(Q=M.signal)!==null&&Q!==void 0&&Q.aborted)throw new o(void 0,{cause:M.signal.reason});P(z,ne)}return z}function Y(M,z){const Q=m.call(this,M,z);return(async function*(){for await(const ie of Q)yield*ie}).call(this)}function L(M){if(M=e(M),l(M))return 0;if(M<0)throw new B("number",">= 0",M);return M}function k(M,z=void 0){return z!=null&&s(z,"options"),(z==null?void 0:z.signal)!=null&&n(z.signal,"options.signal"),M=L(M),(async function*(){var ne;if(z!=null&&(ne=z.signal)!==null&&ne!==void 0&&ne.aborted)throw new o;for await(const I of this){var ie;if(z!=null&&(ie=z.signal)!==null&&ie!==void 0&&ie.aborted)throw new o;M--<=0&&(yield I)}}).call(this)}function F(M,z=void 0){return z!=null&&s(z,"options"),(z==null?void 0:z.signal)!=null&&n(z.signal,"options.signal"),M=L(M),(async function*(){var ne;if(z!=null&&(ne=z.signal)!==null&&ne!==void 0&&ne.aborted)throw new o;for await(const I of this){var ie;if(z!=null&&(ie=z.signal)!==null&&ie!==void 0&&ie.aborted)throw new o;if(M-- >0&&(yield I),M<=0)return}}).call(this)}return Ce.streamReturningOperators={asIndexedPairs:b(V,"readable.asIndexedPairs will be removed in a future version."),drop:k,filter:i,flatMap:Y,map:m,take:F,compose:c},Ce.promiseReturningOperators={every:G,forEach:C,reduce:X,toArray:H,some:u,find:D},Ce}var dn,Lr;function Gr(){if(Lr)return dn;Lr=1;const{ArrayPrototypePop:d,Promise:t}=fe(),{isIterable:f,isNodeStream:_,isWebStream:B}=Ne(),{pipelineImpl:o}=wn(),{finished:n}=Oe();zr();function r(...s){return new t((y,v)=>{let x,h;const g=s[s.length-1];if(g&&typeof g=="object"&&!_(g)&&!f(g)&&!B(g)){const N=d(s);x=N.signal,h=N.end}o(s,(N,R)=>{N?v(N):y(R)},{signal:x,end:h})})}return dn={finished:n,pipeline:r},dn}var kr;function zr(){if(kr)return Jt.exports;kr=1;const{Buffer:d}=Pe(),{ObjectDefineProperty:t,ObjectKeys:f,ReflectApply:_}=fe(),{promisify:{custom:B}}=be(),{streamReturningOperators:o,promiseReturningOperators:n}=ji(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:r}}=ge(),s=Vr(),{setDefaultHighWaterMark:y,getDefaultHighWaterMark:v}=Ye(),{pipeline:x}=wn(),{destroyer:h}=Fe(),g=Oe(),N=Gr(),R=Ne(),b=Jt.exports=yn().Stream;b.isDestroyed=R.isDestroyed,b.isDisturbed=R.isDisturbed,b.isErrored=R.isErrored,b.isReadable=R.isReadable,b.isWritable=R.isWritable,b.Readable=Ze();for(const A of f(o)){let e=function(...l){if(new.target)throw r();return b.Readable.from(_(a,this,l))};const a=o[A];t(e,"name",{__proto__:null,value:a.name}),t(e,"length",{__proto__:null,value:a.length}),t(b.Readable.prototype,A,{__proto__:null,value:e,enumerable:!1,configurable:!0,writable:!0})}for(const A of f(n)){let e=function(...l){if(new.target)throw r();return _(a,this,l)};const a=n[A];t(e,"name",{__proto__:null,value:a.name}),t(e,"length",{__proto__:null,value:a.length}),t(b.Readable.prototype,A,{__proto__:null,value:e,enumerable:!1,configurable:!0,writable:!0})}b.Writable=bn(),b.Duplex=xe(),b.Transform=$r(),b.PassThrough=Cr(),b.pipeline=x;const{addAbortSignal:P}=Ke();return b.addAbortSignal=P,b.finished=g,b.destroy=h,b.compose=s,b.setDefaultHighWaterMark=y,b.getDefaultHighWaterMark=v,t(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return N}}),t(x,B,{__proto__:null,enumerable:!0,get(){return N.pipeline}}),t(g,B,{__proto__:null,enumerable:!0,get(){return N.finished}}),b.Stream=b,b._isUint8Array=function(a){return a instanceof Uint8Array},b._uint8ArrayToBuffer=function(a){return d.from(a.buffer,a.byteOffset,a.byteLength)},Jt.exports}var Mr;function Li(){return Mr||(Mr=1,function(d){const t=zr(),f=Gr(),_=t.Readable.destroy;d.exports=t.Readable,d.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,d.exports._isUint8Array=t._isUint8Array,d.exports.isDisturbed=t.isDisturbed,d.exports.isErrored=t.isErrored,d.exports.isReadable=t.isReadable,d.exports.Readable=t.Readable,d.exports.Writable=t.Writable,d.exports.Duplex=t.Duplex,d.exports.Transform=t.Transform,d.exports.PassThrough=t.PassThrough,d.exports.addAbortSignal=t.addAbortSignal,d.exports.finished=t.finished,d.exports.destroy=t.destroy,d.exports.destroy=_,d.exports.pipeline=t.pipeline,d.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return f}}),d.exports.Stream=t.Stream,d.exports.default=d.exports}(Ht)),Ht.exports}var ki=Li();class ke extends ki.Readable{constructor(t,{baseIRI:f,compact:_,context:B={},encoding:o="object",flatten:n,frame:r,prettyPrint:s,skipContext:y}={}){super({objectMode:!0,read:()=>{}}),this.compact=_,this.context=B,this.encoding=o,this.flatten=n,this.frame=r,this.prettyPrint=s,this.skipContext=y,f&&(this.context["@base"]=f.value||f.toString()),t.on("prefix",(v,x)=>{this.context[v]||(this.context[v]=x.value)}),this.handleData(t)}async handleData(t){try{const f=(await si(t)).map(ke.toJsonldQuad),_=await $e.fromRDF(f),B=await this.transform(_,this.options);this.push(B),this.push(null)}catch(f){this.emit("error",f)}}async transform(t){return this.compact&&(t=await $e.compact(t,this.context)),this.flatten&&(t=await $e.flatten(t,this.context)),this.frame&&(t=await $e.frame(t,this.context)),this.skipContext&&t["@context"]&&delete t["@context"],this.encoding==="string"?this.prettyPrint?JSON.stringify(t,null,2):JSON.stringify(t):t}static toJsonldQuad(t){return{subject:ke.toJsonldTerm(t.subject),predicate:ke.toJsonldTerm(t.predicate),object:ke.toJsonldTerm(t.object),graph:ke.toJsonldTerm(t.graph)}}static toJsonldTerm(t){return t.termType==="BlankNode"?{termType:"BlankNode",value:`_:${t.value}`}:t}}class zi extends li{constructor(t){super(ke,t)}}export{zi as default};
