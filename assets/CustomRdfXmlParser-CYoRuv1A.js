import{r as Ve}from"./index-Bk9Nd8TQ.js";import{H as Ge}from"./index-CLau4BBQ.js";var j={},q={},H={},vt={},Jt;function Ue(){return Jt||(Jt=1,function(r){/**
 * Character classes and associated utilities for the 5th edition of XML 1.0.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(r,"__esModule",{value:!0}),r.CHAR=`	
\r -ÌüøÓÄÄ-ÔøΩêÄÄ-Ùèøø`,r.S=` 	\r
`,r.NAME_START_CHAR=":A-Z_a-z√Ä-√ñ√ò-√∂√∏-ÀøÕ∞-ÕΩÕø-·øø‚Äå‚Äç‚Å∞-‚Üè‚∞Ä-‚øØ„ÄÅ-ÌüøÔ§Ä-Ô∑èÔ∑∞-ÔøΩêÄÄ-ÛØøø",r.NAME_CHAR="-"+r.NAME_START_CHAR+".0-9¬∑ÃÄ-ÕØ‚Äø-‚ÅÄ",r.CHAR_RE=new RegExp("^["+r.CHAR+"]$","u"),r.S_RE=new RegExp("^["+r.S+"]+$","u"),r.NAME_START_CHAR_RE=new RegExp("^["+r.NAME_START_CHAR+"]$","u"),r.NAME_CHAR_RE=new RegExp("^["+r.NAME_CHAR+"]$","u"),r.NAME_RE=new RegExp("^["+r.NAME_START_CHAR+"]["+r.NAME_CHAR+"]*$","u"),r.NMTOKEN_RE=new RegExp("^["+r.NAME_CHAR+"]+$","u");var E=9,h=10,o=13,u=32;r.S_LIST=[u,h,o,E];function d(e){return e>=u&&e<=55295||e===h||e===o||e===E||e>=57344&&e<=65533||e>=65536&&e<=1114111}r.isChar=d;function c(e){return e===u||e===h||e===o||e===E}r.isS=c;function f(e){return e>=65&&e<=90||e>=97&&e<=122||e===58||e===95||e===8204||e===8205||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}r.isNameStartChar=f;function P(e){return f(e)||e>=48&&e<=57||e===45||e===46||e===183||e>=768&&e<=879||e>=8255&&e<=8256}r.isNameChar=P}(vt)),vt}var Pt={},te;function We(){return te||(te=1,function(r){/**
 * Character classes and associated utilities for the 2nd edition of XML 1.1.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(r,"__esModule",{value:!0}),r.CHAR="-ÌüøÓÄÄ-ÔøΩêÄÄ-Ùèøø",r.RESTRICTED_CHAR="-\b\v\f--¬Ñ¬Ü-¬ü",r.S=` 	\r
`,r.NAME_START_CHAR=":A-Z_a-z√Ä-√ñ√ò-√∂√∏-ÀøÕ∞-ÕΩÕø-·øø‚Äå‚Äç‚Å∞-‚Üè‚∞Ä-‚øØ„ÄÅ-ÌüøÔ§Ä-Ô∑èÔ∑∞-ÔøΩêÄÄ-ÛØøø",r.NAME_CHAR="-"+r.NAME_START_CHAR+".0-9¬∑ÃÄ-ÕØ‚Äø-‚ÅÄ",r.CHAR_RE=new RegExp("^["+r.CHAR+"]$","u"),r.RESTRICTED_CHAR_RE=new RegExp("^["+r.RESTRICTED_CHAR+"]$","u"),r.S_RE=new RegExp("^["+r.S+"]+$","u"),r.NAME_START_CHAR_RE=new RegExp("^["+r.NAME_START_CHAR+"]$","u"),r.NAME_CHAR_RE=new RegExp("^["+r.NAME_CHAR+"]$","u"),r.NAME_RE=new RegExp("^["+r.NAME_START_CHAR+"]["+r.NAME_CHAR+"]*$","u"),r.NMTOKEN_RE=new RegExp("^["+r.NAME_CHAR+"]+$","u");var E=9,h=10,o=13,u=32;r.S_LIST=[u,h,o,E];function d(s){return s>=1&&s<=55295||s>=57344&&s<=65533||s>=65536&&s<=1114111}r.isChar=d;function c(s){return s>=1&&s<=8||s===11||s===12||s>=14&&s<=31||s>=127&&s<=132||s>=134&&s<=159}r.isRestrictedChar=c;function f(s){return s===9||s===10||s===13||s>31&&s<127||s===133||s>159&&s<=55295||s>=57344&&s<=65533||s>=65536&&s<=1114111}r.isCharAndNotRestricted=f;function P(s){return s===u||s===h||s===o||s===E}r.isS=P;function e(s){return s>=65&&s<=90||s>=97&&s<=122||s===58||s===95||s===8204||s===8205||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}r.isNameStartChar=e;function n(s){return e(s)||s>=48&&s<=57||s===45||s===46||s===183||s>=768&&s<=879||s>=8255&&s<=8256}r.isNameChar=n}(Pt)),Pt}var yt={},ee;function Qe(){return ee||(ee=1,function(r){/**
 * Character class utilities for XML NS 1.0 edition 3.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(r,"__esModule",{value:!0}),r.NC_NAME_START_CHAR="A-Z_a-z√Ä-√ñ√ò-√∂√∏-ÀøÕ∞-ÕΩÕø-·øø‚Äå-‚Äç‚Å∞-‚Üè‚∞Ä-‚øØ„ÄÅ-ÌüøÔ§Ä-Ô∑èÔ∑∞-ÔøΩêÄÄ-ÛØøø",r.NC_NAME_CHAR="-"+r.NC_NAME_START_CHAR+".0-9¬∑ÃÄ-ÕØ‚Äø-‚ÅÄ",r.NC_NAME_START_CHAR_RE=new RegExp("^["+r.NC_NAME_START_CHAR+"]$","u"),r.NC_NAME_CHAR_RE=new RegExp("^["+r.NC_NAME_CHAR+"]$","u"),r.NC_NAME_RE=new RegExp("^["+r.NC_NAME_START_CHAR+"]["+r.NC_NAME_CHAR+"]*$","u");function E(o){return o>=65&&o<=90||o===95||o>=97&&o<=122||o>=192&&o<=214||o>=216&&o<=246||o>=248&&o<=767||o>=880&&o<=893||o>=895&&o<=8191||o>=8204&&o<=8205||o>=8304&&o<=8591||o>=11264&&o<=12271||o>=12289&&o<=55295||o>=63744&&o<=64975||o>=65008&&o<=65533||o>=65536&&o<=983039}r.isNCNameStartChar=E;function h(o){return E(o)||o===45||o===46||o>=48&&o<=57||o===183||o>=768&&o<=879||o>=8255&&o<=8256}r.isNCNameChar=h}(yt)),yt}var ie;function ze(){if(ie)return H;ie=1,Object.defineProperty(H,"__esModule",{value:!0}),H.SaxesParser=H.EVENTS=void 0;const r=Ue(),E=We(),h=Qe();var o=r.isS,u=r.isChar,d=r.isNameStartChar,c=r.isNameChar,f=r.S_LIST,P=r.NAME_RE,e=E.isChar,n=h.isNCNameStartChar,s=h.isNCNameChar,p=h.NC_NAME_RE;const T="http://www.w3.org/XML/1998/namespace",b="http://www.w3.org/2000/xmlns/",I={__proto__:null,xml:T,xmlns:b},C={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},x=-1,g=-2,m=0,N=1,D=2,K=3,$=4,pt=5,Ft=6,lt=7,L=8,xt=9,Et=10,Dt=11,_t=12,A=13,G=14,ut=15,Ot=16,Y=17,bt=18,be=19,Ct=20,Ce=21,Ne=22,Se=23,Lt=24,Nt=25,dt=26,kt=27,ge=28,Re=29,Bt=30,Te=31,Ae=32,k=33,we=34,St=35,Z=36,gt=37,ve=38,jt=39,qt=40,Pe=41,Ht=42,ye=43,Ie=44,Rt=9,M=10,Tt=13,Xt=32,Vt=33,Gt=34,J=38,Ut=39,ct=45,ft=47,$e=59,O=60,U=61,R=62,w=63,Wt=91,W=93,Qt=133,zt=8232,mt=y=>y===Gt||y===Ut,Kt=[Gt,Ut],Me=[...Kt,Wt,R],Oe=[...Kt,O,W],Le=[U,w,...f],ke=[...f,R,J,O];function At(y,t,i){switch(t){case"xml":i!==T&&y.fail(`xml prefix must be bound to ${T}.`);break;case"xmlns":i!==b&&y.fail(`xmlns prefix must be bound to ${b}.`);break}switch(i){case b:y.fail(t===""?`the default namespace may not be set to ${i}.`:`may not assign a prefix (even "xmlns") to the URI ${b}.`);break;case T:switch(t){case"xml":break;case"":y.fail(`the default namespace may not be set to ${i}.`);break;default:y.fail("may not assign the xml namespace to another prefix.")}break}}function Be(y,t){for(const i of Object.keys(t))At(y,i,t[i])}const je=y=>p.test(y),qe=y=>P.test(y),B=0,Yt=1,wt=2;H.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const Zt={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};class He{get closed(){return this._closed}constructor(t){this.opt=t??{},this.fragmentOpt=!!this.opt.fragment;const i=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,i){this.nameStartCheck=n,this.nameCheck=s,this.isName=je,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},I);const a=this.opt.additionalNamespaces;a!=null&&(Be(this,a),Object.assign(this.ns,a))}else this.nameStartCheck=d,this.nameCheck=c,this.isName=qe,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}_init(){var t;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=B,this.attribList=[];const{fragmentOpt:i}=this;this.state=i?A:m,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=i,this.xmlDeclPossible=!i,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:a}=this.opt;if(a===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");a="1.0"}this.setXMLVersion(a),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(C),(t=this.readyHandler)===null||t===void 0||t.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(t,i){this[Zt[t]]=i}off(t){this[Zt[t]]=void 0}makeError(t){var i;let a=(i=this.fileName)!==null&&i!==void 0?i:"";return this.trackPosition&&(a.length>0&&(a+=":"),a+=`${this.line}:${this.column}`),a.length>0&&(a+=": "),new Error(a+t)}fail(t){const i=this.makeError(t),a=this.errorHandler;if(a===void 0)throw i;return a(i),this}write(t){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let i=!1;t===null?(i=!0,t=""):typeof t=="object"&&(t=t.toString()),this.carriedFromPrevious!==void 0&&(t=`${this.carriedFromPrevious}${t}`,this.carriedFromPrevious=void 0);let a=t.length;const l=t.charCodeAt(a-1);!i&&(l===Tt||l>=55296&&l<=56319)&&(this.carriedFromPrevious=t[a-1],a--,t=t.slice(0,a));const{stateTable:F}=this;for(this.chunk=t,this.i=0;this.i<a;)F[this.state].call(this);return this.chunkPosition+=a,i?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:t,i}=this;if(this.prevI=i,this.i=i+1,i>=t.length)return x;const a=t.charCodeAt(i);if(this.column++,a<55296){if(a>=Xt||a===Rt)return a;switch(a){case M:return this.line++,this.column=0,this.positionAtNewLine=this.position,M;case Tt:return t.charCodeAt(i+1)===M&&(this.i=i+2),this.line++,this.column=0,this.positionAtNewLine=this.position,g;default:return this.fail("disallowed character."),a}}if(a>56319)return a>=57344&&a<=65533||this.fail("disallowed character."),a;const l=65536+(a-55296)*1024+(t.charCodeAt(i+1)-56320);return this.i=i+2,l>1114111&&this.fail("disallowed character."),l}getCode11(){const{chunk:t,i}=this;if(this.prevI=i,this.i=i+1,i>=t.length)return x;const a=t.charCodeAt(i);if(this.column++,a<55296){if(a>31&&a<127||a>159&&a!==zt||a===Rt)return a;switch(a){case M:return this.line++,this.column=0,this.positionAtNewLine=this.position,M;case Tt:{const F=t.charCodeAt(i+1);(F===M||F===Qt)&&(this.i=i+2)}case Qt:case zt:return this.line++,this.column=0,this.positionAtNewLine=this.position,g;default:return this.fail("disallowed character."),a}}if(a>56319)return a>=57344&&a<=65533||this.fail("disallowed character."),a;const l=65536+(a-55296)*1024+(t.charCodeAt(i+1)-56320);return this.i=i+2,l>1114111&&this.fail("disallowed character."),l}getCodeNorm(){const t=this.getCode();return t===g?M:t}unget(){this.i=this.prevI,this.column--}captureTo(t){let{i}=this;const{chunk:a}=this;for(;;){const l=this.getCode(),F=l===g,_=F?M:l;if(_===x||t.includes(_))return this.text+=a.slice(i,this.prevI),_;F&&(this.text+=`${a.slice(i,this.prevI)}
`,i=this.i)}}captureToChar(t){let{i}=this;const{chunk:a}=this;for(;;){let l=this.getCode();switch(l){case g:this.text+=`${a.slice(i,this.prevI)}
`,i=this.i,l=M;break;case x:return this.text+=a.slice(i),!1}if(l===t)return this.text+=a.slice(i,this.prevI),!0}}captureNameChars(){const{chunk:t,i}=this;for(;;){const a=this.getCode();if(a===x)return this.name+=t.slice(i),x;if(!c(a))return this.name+=t.slice(i,this.prevI),a===g?M:a}}skipSpaces(){for(;;){const t=this.getCodeNorm();if(t===x||!o(t))return t}}setXMLVersion(t){this.currentXMLVersion=t,t==="1.0"?(this.isChar=u,this.getCode=this.getCode10):(this.isChar=e,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=N}sBeginWhitespace(){const t=this.i,i=this.skipSpaces();switch(this.prevI!==t&&(this.xmlDeclPossible=!1),i){case O:if(this.state=ut,this.text.length!==0)throw new Error("no-empty text at start");break;case x:break;default:this.unget(),this.state=A,this.xmlDeclPossible=!1}}sDoctype(){var t;const i=this.captureTo(Me);switch(i){case R:{(t=this.doctypeHandler)===null||t===void 0||t.call(this,this.text),this.text="",this.state=A,this.doctype=!0;break}case x:break;default:this.text+=String.fromCodePoint(i),i===Wt?this.state=$:mt(i)&&(this.state=K,this.q=i)}}sDoctypeQuote(){const t=this.q;this.captureToChar(t)&&(this.text+=String.fromCodePoint(t),this.q=null,this.state=D)}sDTD(){const t=this.captureTo(Oe);t!==x&&(this.text+=String.fromCodePoint(t),t===W?this.state=D:t===O?this.state=Ft:mt(t)&&(this.state=pt,this.q=t))}sDTDQuoted(){const t=this.q;this.captureToChar(t)&&(this.text+=String.fromCodePoint(t),this.state=$,this.q=null)}sDTDOpenWaka(){const t=this.getCodeNorm();switch(this.text+=String.fromCodePoint(t),t){case Vt:this.state=lt,this.openWakaBang="";break;case w:this.state=Dt;break;default:this.state=$}}sDTDOpenWakaBang(){const t=String.fromCodePoint(this.getCodeNorm()),i=this.openWakaBang+=t;this.text+=t,i!=="-"&&(this.state=i==="--"?L:$,this.openWakaBang="")}sDTDComment(){this.captureToChar(ct)&&(this.text+="-",this.state=xt)}sDTDCommentEnding(){const t=this.getCodeNorm();this.text+=String.fromCodePoint(t),this.state=t===ct?Et:L}sDTDCommentEnded(){const t=this.getCodeNorm();this.text+=String.fromCodePoint(t),t===R?this.state=$:(this.fail("malformed comment."),this.state=L)}sDTDPI(){this.captureToChar(w)&&(this.text+="?",this.state=_t)}sDTDPIEnding(){const t=this.getCodeNorm();this.text+=String.fromCodePoint(t),t===R&&(this.state=$)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:t}=this;const{chunk:i}=this;t:for(;;)switch(this.getCode()){case g:this.entity+=`${i.slice(t,this.prevI)}
`,t=this.i;break;case $e:{const{entityReturnState:a}=this,l=this.entity+i.slice(t,this.prevI);this.state=a;let F;l===""?(this.fail("empty entity name."),F="&;"):(F=this.parseEntity(l),this.entity=""),(a!==A||this.textHandler!==void 0)&&(this.text+=F);break t}case x:this.entity+=i.slice(t);break t}}sOpenWaka(){const t=this.getCode();if(d(t))this.state=we,this.unget(),this.xmlDeclPossible=!1;else switch(t){case ft:this.state=ye,this.xmlDeclPossible=!1;break;case Vt:this.state=Ot,this.openWakaBang="",this.xmlDeclPossible=!1;break;case w:this.state=Se;break;default:this.fail("disallowed character in tag name"),this.state=A,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=Ct,this.openWakaBang="";break;case"--":this.state=Y,this.openWakaBang="";break;case"DOCTYPE":this.state=D,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(ct)&&(this.state=bt)}sCommentEnding(){var t;const i=this.getCodeNorm();i===ct?(this.state=be,(t=this.commentHandler)===null||t===void 0||t.call(this,this.text),this.text=""):(this.text+=`-${String.fromCodePoint(i)}`,this.state=Y)}sCommentEnded(){const t=this.getCodeNorm();t!==R?(this.fail("malformed comment."),this.text+=`--${String.fromCodePoint(t)}`,this.state=Y):this.state=A}sCData(){this.captureToChar(W)&&(this.state=Ce)}sCDataEnding(){const t=this.getCodeNorm();t===W?this.state=Ne:(this.text+=`]${String.fromCodePoint(t)}`,this.state=Ct)}sCDataEnding2(){var t;const i=this.getCodeNorm();switch(i){case R:{(t=this.cdataHandler)===null||t===void 0||t.call(this,this.text),this.text="",this.state=A;break}case W:this.text+="]";break;default:this.text+=`]]${String.fromCodePoint(i)}`,this.state=Ct}}sPIFirstChar(){const t=this.getCodeNorm();this.nameStartCheck(t)?(this.piTarget+=String.fromCodePoint(t),this.state=Lt):t===w||o(t)?(this.fail("processing instruction without a target."),this.state=t===w?dt:Nt):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(t),this.state=Lt)}sPIRest(){const{chunk:t,i}=this;for(;;){const a=this.getCodeNorm();if(a===x){this.piTarget+=t.slice(i);return}if(!this.nameCheck(a)){this.piTarget+=t.slice(i,this.prevI);const l=a===w;l||o(a)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=l?k:kt):this.state=l?dt:Nt:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(a));break}}}sPIBody(){if(this.text.length===0){const t=this.getCodeNorm();t===w?this.state=dt:o(t)||(this.text=String.fromCodePoint(t))}else this.captureToChar(w)&&(this.state=dt)}sPIEnding(){var t;const i=this.getCodeNorm();if(i===R){const{piTarget:a}=this;a.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(t=this.piHandler)===null||t===void 0||t.call(this,{target:a,body:this.text}),this.piTarget=this.text="",this.state=A}else i===w?this.text+="?":(this.text+=`?${String.fromCodePoint(i)}`,this.state=Nt);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const t=this.skipSpaces();if(t===w){this.state=k;return}t!==x&&(this.state=ge,this.name=String.fromCodePoint(t))}sXMLDeclName(){const t=this.captureTo(Le);if(t===w){this.state=k,this.name+=this.text,this.text="",this.fail("XML declaration is incomplete.");return}if(o(t)||t===U){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail(`expected one of ${this.xmlDeclExpects.join(", ")}`)}this.state=t===U?Bt:Re}}sXMLDeclEq(){const t=this.getCodeNorm();if(t===w){this.state=k,this.fail("XML declaration is incomplete.");return}o(t)||(t!==U&&this.fail("value required."),this.state=Bt)}sXMLDeclValueStart(){const t=this.getCodeNorm();if(t===w){this.state=k,this.fail("XML declaration is incomplete.");return}o(t)||(mt(t)?this.q=t:(this.fail("value must be quoted."),this.q=Xt),this.state=Te)}sXMLDeclValue(){const t=this.captureTo([this.q,w]);if(t===w){this.state=k,this.text="",this.fail("XML declaration is incomplete.");return}if(t===x)return;const i=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const a=i;this.xmlDecl.version=a,/^1\.[0-9]+$/.test(a)?this.opt.forceXMLVersion||this.setXMLVersion(a):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(i)||this.fail("encoding value must match 	/^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=i;break;case"standalone":i!=="yes"&&i!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=i;break}this.name="",this.state=Ae}sXMLDeclSeparator(){const t=this.getCodeNorm();if(t===w){this.state=k;return}o(t)||(this.fail("whitespace required."),this.unget()),this.state=kt}sXMLDeclEnding(){var t;this.getCodeNorm()===R?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(t=this.xmldeclHandler)===null||t===void 0||t.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=A):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var t;const i=this.captureNameChars();if(i===x)return;const a=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=a.ns=Object.create(null)),(t=this.openTagStartHandler)===null||t===void 0||t.call(this,a),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),i){case R:this.openTag();break;case ft:this.state=St;break;default:o(i)||this.fail("disallowed character in tag name."),this.state=Z}}sOpenTagSlash(){this.getCode()===R?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=Z)}sAttrib(){const t=this.skipSpaces();t!==x&&(d(t)?(this.unget(),this.state=gt):t===R?this.openTag():t===ft?this.state=St:this.fail("disallowed character in attribute name."))}sAttribName(){const t=this.captureNameChars();t===U?this.state=jt:o(t)?this.state=ve:t===R?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):t!==x&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const t=this.skipSpaces();switch(t){case x:return;case U:this.state=jt;break;default:this.fail("attribute without value."),this.text="",this.name="",t===R?this.openTag():d(t)?(this.unget(),this.state=gt):(this.fail("disallowed character in attribute name."),this.state=Z)}}sAttribValue(){const t=this.getCodeNorm();mt(t)?(this.q=t,this.state=qt):o(t)||(this.fail("unquoted attribute value."),this.state=Ht,this.unget())}sAttribValueQuoted(){const{q:t,chunk:i}=this;let{i:a}=this;for(;;)switch(this.getCode()){case t:this.pushAttrib(this.name,this.text+i.slice(a,this.prevI)),this.name=this.text="",this.q=null,this.state=Pe;return;case J:this.text+=i.slice(a,this.prevI),this.state=G,this.entityReturnState=qt;return;case M:case g:case Rt:this.text+=`${i.slice(a,this.prevI)} `,a=this.i;break;case O:this.text+=i.slice(a,this.prevI),this.fail("disallowed character.");return;case x:this.text+=i.slice(a);return}}sAttribValueClosed(){const t=this.getCodeNorm();o(t)?this.state=Z:t===R?this.openTag():t===ft?this.state=St:d(t)?(this.fail("no whitespace between attributes."),this.unget(),this.state=gt):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const t=this.captureTo(ke);switch(t){case J:this.state=G,this.entityReturnState=Ht;break;case O:this.fail("disallowed character.");break;case x:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",t===R?this.openTag():this.state=Z}}sCloseTag(){const t=this.captureNameChars();t===R?this.closeTag():o(t)?this.state=Ie:t!==x&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case R:this.closeTag();break;case x:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:t,forbiddenState:i}=this;const{chunk:a,textHandler:l}=this;t:for(;;)switch(this.getCode()){case O:{if(this.state=ut,l!==void 0){const{text:F}=this,_=a.slice(t,this.prevI);F.length!==0?(l(F+_),this.text=""):_.length!==0&&l(_)}i=B;break t}case J:this.state=G,this.entityReturnState=A,l!==void 0&&(this.text+=a.slice(t,this.prevI)),i=B;break t;case W:switch(i){case B:i=Yt;break;case Yt:i=wt;break;case wt:break;default:throw new Error("impossible state")}break;case R:i===wt&&this.fail('the string "]]>" is disallowed in char data.'),i=B;break;case g:l!==void 0&&(this.text+=`${a.slice(t,this.prevI)}
`),t=this.i,i=B;break;case x:l!==void 0&&(this.text+=a.slice(t));break t;default:i=B}this.forbiddenState=i}handleTextOutsideRoot(){let{i:t}=this;const{chunk:i,textHandler:a}=this;let l=!1;t:for(;;){const F=this.getCode();switch(F){case O:{if(this.state=ut,a!==void 0){const{text:_}=this,v=i.slice(t,this.prevI);_.length!==0?(a(_+v),this.text=""):v.length!==0&&a(v)}break t}case J:this.state=G,this.entityReturnState=A,a!==void 0&&(this.text+=i.slice(t,this.prevI)),l=!0;break t;case g:a!==void 0&&(this.text+=`${i.slice(t,this.prevI)}
`),t=this.i;break;case x:a!==void 0&&(this.text+=i.slice(t));break t;default:o(F)||(l=!0)}}l&&(!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(t,i){var a;const{prefix:l,local:F}=this.qname(t),_={name:t,prefix:l,local:F,value:i};if(this.attribList.push(_),(a=this.attributeHandler)===null||a===void 0||a.call(this,_),l==="xmlns"){const v=i.trim();this.currentXMLVersion==="1.0"&&v===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[F]=v,At(this,F,v)}else if(t==="xmlns"){const v=i.trim();this.topNS[""]=v,At(this,"",v)}}pushAttribPlain(t,i){var a;const l={name:t,value:i};this.attribList.push(l),(a=this.attributeHandler)===null||a===void 0||a.call(this,l)}end(){var t,i;this.sawRoot||this.fail("document must contain a root element.");const{tags:a}=this;for(;a.length>0;){const F=a.pop();this.fail(`unclosed tag: ${F.name}`)}this.state!==m&&this.state!==A&&this.fail("unexpected end.");const{text:l}=this;return l.length!==0&&((t=this.textHandler)===null||t===void 0||t.call(this,l),this.text=""),this._closed=!0,(i=this.endHandler)===null||i===void 0||i.call(this),this._init(),this}resolve(t){var i,a;let l=this.topNS[t];if(l!==void 0)return l;const{tags:F}=this;for(let _=F.length-1;_>=0;_--)if(l=F[_].ns[t],l!==void 0)return l;return l=this.ns[t],l!==void 0?l:(a=(i=this.opt).resolvePrefix)===null||a===void 0?void 0:a.call(i,t)}qname(t){const i=t.indexOf(":");if(i===-1)return{prefix:"",local:t};const a=t.slice(i+1),l=t.slice(0,i);return(l===""||a===""||a.includes(":"))&&this.fail(`malformed name: ${t}.`),{prefix:l,local:a}}processAttribsNS(){var t;const{attribList:i}=this,a=this.tag;{const{prefix:_,local:v}=this.qname(a.name);a.prefix=_,a.local=v;const Q=a.uri=(t=this.resolve(_))!==null&&t!==void 0?t:"";_!==""&&(_==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),Q===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(_)}.`),a.uri=_))}if(i.length===0)return;const{attributes:l}=a,F=new Set;for(const _ of i){const{name:v,prefix:Q,local:Xe}=_;let z,tt;Q===""?(z=v==="xmlns"?b:"",tt=v):(z=this.resolve(Q),z===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(Q)}.`),z=Q),tt=`{${z}}${Xe}`),F.has(tt)&&this.fail(`duplicate attribute: ${tt}.`),F.add(tt),_.uri=z,l[v]=_}this.attribList=[]}processAttribsPlain(){const{attribList:t}=this,i=this.tag.attributes;for(const{name:a,value:l}of t)i[a]!==void 0&&this.fail(`duplicate attribute: ${a}.`),i[a]=l;this.attribList=[]}openTag(){var t;this.processAttribs();const{tags:i}=this,a=this.tag;a.isSelfClosing=!1,(t=this.openTagHandler)===null||t===void 0||t.call(this,a),i.push(a),this.state=A,this.name=""}openSelfClosingTag(){var t,i,a;this.processAttribs();const{tags:l}=this,F=this.tag;F.isSelfClosing=!0,(t=this.openTagHandler)===null||t===void 0||t.call(this,F),(i=this.closeTagHandler)===null||i===void 0||i.call(this,F),(this.tag=(a=l[l.length-1])!==null&&a!==void 0?a:null)===null&&(this.closedRoot=!0),this.state=A,this.name=""}closeTag(){const{tags:t,name:i}=this;if(this.state=A,this.name="",i===""){this.fail("weird empty close tag."),this.text+="</>";return}const a=this.closeTagHandler;let l=t.length;for(;l-- >0;){const F=this.tag=t.pop();if(this.topNS=F.ns,a==null||a(F),F.name===i)break;this.fail("unexpected close tag.")}l===0?this.closedRoot=!0:l<0&&(this.fail(`unmatched closing tag: ${i}.`),this.text+=`</${i}>`)}parseEntity(t){if(t[0]!=="#"){const a=this.ENTITIES[t];return a!==void 0?a:(this.fail(this.isName(t)?"undefined entity.":"disallowed character in entity name."),`&${t};`)}let i=NaN;return t[1]==="x"&&/^#x[0-9a-f]+$/i.test(t)?i=parseInt(t.slice(2),16):/^#[0-9]+$/.test(t)&&(i=parseInt(t.slice(1),10)),this.isChar(i)?String.fromCodePoint(i):(this.fail("malformed character entity."),`&${t};`)}}return H.SaxesParser=He,H}var et={},se;function Ke(){if(se)return et;se=1,Object.defineProperty(et,"__esModule",{value:!0}),et.ParseError=void 0;let r=class extends Error{constructor(h,o){const u=h.saxParser;super(h.trackPosition?`Line ${u.line} column ${u.column+1}: ${o}`:o)}};return et.ParseError=r,et}var X={},it={},ae;function Fe(){if(ae)return it;ae=1,Object.defineProperty(it,"__esModule",{value:!0}),it.BlankNode=void 0;let r=class{constructor(h){this.termType="BlankNode",this.value=h}equals(h){return!!h&&h.termType==="BlankNode"&&h.value===this.value}};return it.BlankNode=r,it}var st={},at={},re;function xe(){if(re)return at;re=1,Object.defineProperty(at,"__esModule",{value:!0}),at.DefaultGraph=void 0;let r=class{constructor(){this.termType="DefaultGraph",this.value=""}equals(h){return!!h&&h.termType==="DefaultGraph"}};return at.DefaultGraph=r,r.INSTANCE=new r,at}var rt={},nt={},ne;function Mt(){if(ne)return nt;ne=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.NamedNode=void 0;let r=class{constructor(h){this.termType="NamedNode",this.value=h}equals(h){return!!h&&h.termType==="NamedNode"&&h.value===this.value}};return nt.NamedNode=r,nt}var oe;function Ee(){if(oe)return rt;oe=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.Literal=void 0;const r=Mt();let E=class $t{constructor(o,u){this.termType="Literal",this.value=o,typeof u=="string"?(this.language=u,this.datatype=$t.RDF_LANGUAGE_STRING):u?(this.language="",this.datatype=u):(this.language="",this.datatype=$t.XSD_STRING)}equals(o){return!!o&&o.termType==="Literal"&&o.value===this.value&&o.language===this.language&&this.datatype.equals(o.datatype)}};return rt.Literal=E,E.RDF_LANGUAGE_STRING=new r.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),E.XSD_STRING=new r.NamedNode("http://www.w3.org/2001/XMLSchema#string"),rt}var ot={},he;function De(){if(he)return ot;he=1,Object.defineProperty(ot,"__esModule",{value:!0}),ot.Quad=void 0;let r=class{constructor(h,o,u,d){this.termType="Quad",this.value="",this.subject=h,this.predicate=o,this.object=u,this.graph=d}equals(h){return!!h&&(h.termType==="Quad"||!h.termType)&&this.subject.equals(h.subject)&&this.predicate.equals(h.predicate)&&this.object.equals(h.object)&&this.graph.equals(h.graph)}};return ot.Quad=r,ot}var ht={},le;function _e(){if(le)return ht;le=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.Variable=void 0;let r=class{constructor(h){this.termType="Variable",this.value=h}equals(h){return!!h&&h.termType==="Variable"&&h.value===this.value}};return ht.Variable=r,ht}var ue;function Ye(){if(ue)return st;ue=1,Object.defineProperty(st,"__esModule",{value:!0}),st.DataFactory=void 0;const r=Fe(),E=xe(),h=Ee(),o=Mt(),u=De(),d=_e();let c=0,f=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${c++}_`}namedNode(e){return new o.NamedNode(e)}blankNode(e){return new r.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,n){return new h.Literal(e,n)}variable(e){return new d.Variable(e)}defaultGraph(){return E.DefaultGraph.INSTANCE}quad(e,n,s,p){return new u.Quad(e,n,s,p||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(h.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}};return st.DataFactory=f,st}var de;function Ze(){return de||(de=1,function(r){var E=X&&X.__createBinding||(Object.create?function(o,u,d,c){c===void 0&&(c=d);var f=Object.getOwnPropertyDescriptor(u,d);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(o,c,f)}:function(o,u,d,c){c===void 0&&(c=d),o[c]=u[d]}),h=X&&X.__exportStar||function(o,u){for(var d in o)d!=="default"&&!Object.prototype.hasOwnProperty.call(u,d)&&E(u,o,d)};Object.defineProperty(r,"__esModule",{value:!0}),h(Fe(),r),h(Ye(),r),h(xe(),r),h(Ee(),r),h(Mt(),r),h(De(),r),h(_e(),r)}(X)),X}var V={},It={},ce;function Je(){return ce||(ce=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.validateIri=r.IriValidationStrategy=void 0;function E(){const f="[!$&'()*+,;=]",P="%[a-fA-F0-9]{2}",e="([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",n=`${e}\\.${e}\\.${e}\\.${e}`,s="[a-fA-F0-9]{1,4}",p=`(${s}:${s}|${n})`,T=`((${s}:){6}${p}|::(${s}:){5}${p}|(${s})?::(${s}:){4}${p}|((${s}:){0,1}${s})?::(${s}:){3}${p}|((${s}:){0,2}${s})?::(${s}:){2}${p}|((${s}:){0,3}${s})?::${s}:${p}|((${s}:){0,4}${s})?::${p}|((${s}:){0,5}${s})?::${s}|((${s}:){0,6}${s})?::)`,b=`v[a-fA-F0-9]+\\.(${f}|${f}|":)+`,I=`\\[(${T}|${b})\\]`,C="[0-9]*",x="[a-zA-Z][a-zA-Z0-9+\\-.]*",m="[ÓÄÄ-Ô£øÛ∞ÄÄ-ÛøøΩÙÄÄÄ-ÙèøΩ]",K="[a-zA-Z0-9\\-._~¬†-ÌüøÔ§Ä-Ô∑èÔ∑∞-ÔøØêÄÄ-üøΩ†ÄÄ-ØøΩ∞ÄÄ-øøΩÒÄÄÄ-ÒèøΩÒêÄÄ-ÒüøΩÒ†ÄÄ-ÒØøΩÒ∞ÄÄ-ÒøøΩÚÄÄÄ-ÚèøΩÚêÄÄ-ÚüøΩÚ†ÄÄ-ÚØøΩÚ∞ÄÄ-ÚøøΩÛÄÄÄ-ÛèøΩÛêÄÄ-ÛüøΩÛ°ÄÄ-ÛØøΩ]",$=`(${K}|${P}|${f}|[:@])*`,pt=`(${$}|[\\/?])*`,Ft=`(${$}|${m}|[\\/?])*`,lt=`(${$})+`,L=`(${$})*`,xt="",Et=`${lt}(\\/${L})*`,Dt=`\\/(${lt}(\\/${L})*)?`,_t=`(\\/${L})*`,A=`(${K}|${P}|${f})*`,G=`(${I}|${n}|${A})`,Y=`(\\/\\/${`(${`(${K}|${P}|${f}|:)*`}@)?${G}(:${C})?`}${_t}|${Dt}|${Et}|${xt})`,bt=`^${x}:${Y}(\\?${Ft})?(#${pt})?$`;return new RegExp(bt,"u")}const h=E(),o=/^[A-Za-z][\d+-.A-Za-z]*:[^\u0000-\u0020"<>\\^`{|}]*$/u;var u;(function(c){c.Strict="strict",c.Pragmatic="pragmatic",c.None="none"})(u=r.IriValidationStrategy||(r.IriValidationStrategy={}));function d(c,f=u.Strict){switch(f){case u.Strict:return h.test(c)?void 0:new Error(`Invalid IRI according to RFC 3987: '${c}'`);case u.Pragmatic:return o.test(c)?void 0:new Error(`Invalid IRI according to RDF Turtle: '${c}'`);case u.None:return;default:return new Error(`Not supported validation strategy "${f}"`)}}r.validateIri=d}(It)),It}var fe;function ti(){return fe||(fe=1,function(r){var E=V&&V.__createBinding||(Object.create?function(o,u,d,c){c===void 0&&(c=d);var f=Object.getOwnPropertyDescriptor(u,d);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(o,c,f)}:function(o,u,d,c){c===void 0&&(c=d),o[c]=u[d]}),h=V&&V.__exportStar||function(o,u){for(var d in o)d!=="default"&&!Object.prototype.hasOwnProperty.call(u,d)&&E(u,o,d)};Object.defineProperty(r,"__esModule",{value:!0}),h(Je(),r)}(V)),V}var me;function ei(){if(me)return q;me=1,Object.defineProperty(q,"__esModule",{value:!0}),q.ParseType=q.RdfXmlParser=void 0;const r=Ve(),E=ze(),h=Ge(),o=Ke(),u=Ze(),d=ti();let c=class S extends h.Transform{constructor(e){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},e&&(Object.assign(this,e),this.options=e),this.dataFactory||(this.dataFactory=new u.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.validateUri!==!1&&(this.validateUri=!0),this.iriValidationStrategy||(this.iriValidationStrategy=this.validateUri?d.IriValidationStrategy.Pragmatic:d.IriValidationStrategy.None),this.saxParser=new E.SaxesParser({xmlns:!0,position:this.trackPosition}),this.attachSaxListeners()}import(e){const n=new h.PassThrough({readableObjectMode:!0});e.on("error",p=>s.emit("error",p)),e.on("data",p=>n.push(p)),e.on("end",()=>n.push(null));const s=n.pipe(new S(this.options));return s}_transform(e,n,s){try{this.saxParser.write(e)}catch(p){return s(p)}s()}newParseError(e){return new o.ParseError(this,e)}valueToUri(e,n){return this.uriToNamedNode((0,r.resolve)(e,n.baseIRI))}uriToNamedNode(e){const n=(0,d.validateIri)(e,this.iriValidationStrategy);if(n instanceof Error)throw this.newParseError(n.message);return this.dataFactory.namedNode(e)}validateNcname(e){if(!S.NCNAME_MATCHER.test(e))throw this.newParseError(`Not a valid NCName: ${e}`)}attachSaxListeners(){this.saxParser.on("error",e=>this.emit("error",e)),this.saxParser.on("opentag",this.onTag.bind(this)),this.saxParser.on("text",this.onText.bind(this)),this.saxParser.on("cdata",this.onText.bind(this)),this.saxParser.on("closetag",this.onCloseTag.bind(this)),this.saxParser.on("doctype",this.onDoctype.bind(this))}onTag(e){const n=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let s=f.RESOURCE;if(n&&(n.hadChildren=!0,s=n.childrenParseType),n&&n.childrenStringTags){const T=e.name;let b="";for(const g in e.attributes)b+=` ${g}="${e.attributes[g].value}"`;const C=`<${`${T}${b}`}>`;n.childrenStringTags.push(C);const x={childrenStringTags:n.childrenStringTags};x.childrenStringEmitClosingTag=`</${T}>`,this.activeTagStack.push(x);return}const p={};n?(p.language=n.language,p.baseIRI=n.baseIRI):p.baseIRI=this.baseIRI,this.activeTagStack.push(p),s===f.RESOURCE?this.onTagResource(e,p,n,!n):this.onTagProperty(e,p,n)}onTagResource(e,n,s,p){n.childrenParseType=f.PROPERTY;let T=!0;if(e.uri===S.RDF){if(!p&&S.FORBIDDEN_NODE_ELEMENTS.indexOf(e.local)>=0)throw this.newParseError(`Illegal node element name: ${e.local}`);switch(e.local){case"RDF":n.childrenParseType=f.RESOURCE;case"Description":T=!1}}const b=[],I=[];let C=null,x=!1,g=!1,m=null;for(const N in e.attributes){const D=e.attributes[N];if(s&&D.uri===S.RDF)switch(D.local){case"about":if(C)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${D.value} and ${C} where found.`);C=D.value;continue;case"ID":if(C)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${D.value} and ${C} where found.`);this.validateNcname(D.value),C="#"+D.value,x=!0;continue;case"nodeID":if(C)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${D.value} and ${C} where found.`);this.validateNcname(D.value),C=D.value,g=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":m=D.value;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(D.uri===S.XML){if(D.local==="lang"){n.language=D.value===""?null:D.value.toLowerCase();continue}else if(D.local==="base"){n.baseIRI=(0,r.resolve)(D.value,n.baseIRI);continue}}D.prefix!=="xml"&&D.prefix!=="xmlns"&&(D.prefix!==""||D.local!=="xmlns")&&D.uri&&(b.push(this.uriToNamedNode(D.uri+D.local)),I.push(D.value))}if(C!==null&&(n.subject=g?this.dataFactory.blankNode(C):this.valueToUri(C,n),x&&this.claimNodeId(n.subject)),n.subject||(n.subject=this.dataFactory.blankNode()),T){const N=this.uriToNamedNode(e.uri+e.local);this.emitTriple(n.subject,this.dataFactory.namedNode(S.RDF+"type"),N,s?s.reifiedStatementId:null)}if(s){if(s.predicate)if(s.childrenCollectionSubject){const N=this.dataFactory.blankNode();this.emitTriple(s.childrenCollectionSubject,s.childrenCollectionPredicate,N,s.reifiedStatementId),this.emitTriple(N,this.dataFactory.namedNode(S.RDF+"first"),n.subject,n.reifiedStatementId),s.childrenCollectionSubject=N,s.childrenCollectionPredicate=this.dataFactory.namedNode(S.RDF+"rest")}else{this.emitTriple(s.subject,s.predicate,n.subject,s.reifiedStatementId);for(let N=0;N<s.predicateSubPredicates.length;N++)this.emitTriple(n.subject,s.predicateSubPredicates[N],s.predicateSubObjects[N],null);s.predicateSubPredicates=[],s.predicateSubObjects=[],s.predicateEmitted=!0}for(let N=0;N<b.length;N++){const D=this.dataFactory.literal(I[N],n.datatype||n.language);this.emitTriple(n.subject,b[N],D,s.reifiedStatementId)}m&&this.emitTriple(n.subject,this.dataFactory.namedNode(S.RDF+"type"),this.uriToNamedNode(m),null)}}onTagProperty(e,n,s){if(n.childrenParseType=f.RESOURCE,n.subject=s.subject,e.uri===S.RDF&&e.local==="li"?(s.listItemCounter||(s.listItemCounter=1),n.predicate=this.uriToNamedNode(e.uri+"_"+s.listItemCounter++)):n.predicate=this.uriToNamedNode(e.uri+e.local),e.uri===S.RDF&&S.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(e.local)>=0)throw this.newParseError(`Illegal property element name: ${e.local}`);n.predicateSubPredicates=[],n.predicateSubObjects=[];let p=!1,T=!1,b=null,I=!0;const C=[],x=[];for(const g in e.attributes){const m=e.attributes[g];if(m.uri===S.RDF)switch(m.local){case"resource":if(b)throw this.newParseError(`Found both rdf:resource (${m.value}) and rdf:nodeID (${b}).`);if(p)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${m.value})`);n.hadChildren=!0,b=m.value,I=!1;continue;case"datatype":if(T)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${m.value}).`);if(p)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${m.value})`);n.datatype=this.valueToUri(m.value,n);continue;case"nodeID":if(T)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${m.value}).`);if(n.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${m.value}).`);if(p)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${m.value})`);this.validateNcname(m.value),n.hadChildren=!0,b=m.value,I=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(T)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(n.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${n.datatype.value})`);if(b)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${b})`);if(m.value==="Resource"){p=!0,n.childrenParseType=f.PROPERTY;const N=this.dataFactory.blankNode();this.emitTriple(n.subject,n.predicate,N,n.reifiedStatementId),n.subject=N,n.predicate=null}else m.value==="Collection"?(p=!0,n.hadChildren=!0,n.childrenCollectionSubject=n.subject,n.childrenCollectionPredicate=n.predicate,I=!1):m.value==="Literal"&&(p=!0,n.childrenTagsToString=!0,n.childrenStringTags=[]);continue;case"ID":this.validateNcname(m.value),n.reifiedStatementId=this.valueToUri("#"+m.value,n),this.claimNodeId(n.reifiedStatementId);continue}else if(m.uri===S.XML&&m.local==="lang"){n.language=m.value===""?null:m.value.toLowerCase();continue}if(m.prefix!=="xml"&&m.prefix!=="xmlns"&&(m.prefix!==""||m.local!=="xmlns")&&m.uri){if(p||n.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${m.value}`);n.hadChildren=!0,T=!0,C.push(this.uriToNamedNode(m.uri+m.local)),x.push(this.dataFactory.literal(m.value,n.datatype||n.language))}}if(b!==null){const g=n.subject;n.subject=I?this.dataFactory.blankNode(b):this.valueToUri(b,n),this.emitTriple(g,n.predicate,n.subject,n.reifiedStatementId);for(let m=0;m<C.length;m++)this.emitTriple(n.subject,C[m],x[m],null);n.predicateEmitted=!0}else I&&(n.predicateSubPredicates=C,n.predicateSubObjects=x,n.predicateEmitted=!1)}emitTriple(e,n,s,p){this.push(this.dataFactory.quad(e,n,s,this.defaultGraph)),p&&(this.push(this.dataFactory.quad(p,this.dataFactory.namedNode(S.RDF+"type"),this.dataFactory.namedNode(S.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(p,this.dataFactory.namedNode(S.RDF+"subject"),e,this.defaultGraph)),this.push(this.dataFactory.quad(p,this.dataFactory.namedNode(S.RDF+"predicate"),n,this.defaultGraph)),this.push(this.dataFactory.quad(p,this.dataFactory.namedNode(S.RDF+"object"),s,this.defaultGraph)))}claimNodeId(e){if(!this.allowDuplicateRdfIds){if(this.nodeIds[e.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${e.value}'.`);this.nodeIds[e.value]=!0}}onText(e){const n=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;n&&(n.childrenStringTags?n.childrenStringTags.push(e):n.predicate&&(n.text=e))}onCloseTag(){const e=this.activeTagStack.pop();if(e.childrenStringEmitClosingTag&&e.childrenStringTags.push(e.childrenStringEmitClosingTag),e.childrenTagsToString&&(e.datatype=this.dataFactory.namedNode(S.RDF+"XMLLiteral"),e.text=e.childrenStringTags.join(""),e.hadChildren=!1),e.childrenCollectionSubject)this.emitTriple(e.childrenCollectionSubject,e.childrenCollectionPredicate,this.dataFactory.namedNode(S.RDF+"nil"),e.reifiedStatementId);else if(e.predicate){if(!e.hadChildren&&e.childrenParseType!==f.PROPERTY)this.emitTriple(e.subject,e.predicate,this.dataFactory.literal(e.text||"",e.datatype||e.language),e.reifiedStatementId);else if(!e.predicateEmitted){const n=this.dataFactory.blankNode();this.emitTriple(e.subject,e.predicate,n,e.reifiedStatementId);for(let s=0;s<e.predicateSubPredicates.length;s++)this.emitTriple(n,e.predicateSubPredicates[s],e.predicateSubObjects[s],null)}}}onDoctype(e){e.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(n,s,p)=>(this.saxParser.ENTITIES[s]=p,""))}};q.RdfXmlParser=c,c.MIME_TYPE="application/rdf+xml",c.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",c.XML="http://www.w3.org/XML/1998/namespace",c.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],c.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],c.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u;var f;return function(P){P[P.RESOURCE=0]="RESOURCE",P[P.PROPERTY=1]="PROPERTY"}(f||(q.ParseType=f={})),q}var pe;function ii(){return pe||(pe=1,function(r){var E=j&&j.__createBinding||(Object.create?function(o,u,d,c){c===void 0&&(c=d);var f=Object.getOwnPropertyDescriptor(u,d);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(o,c,f)}:function(o,u,d,c){c===void 0&&(c=d),o[c]=u[d]}),h=j&&j.__exportStar||function(o,u){for(var d in o)d!=="default"&&!Object.prototype.hasOwnProperty.call(u,d)&&E(u,o,d)};Object.defineProperty(r,"__esModule",{value:!0}),h(ei(),r)}(j)),j}var si=ii();class fi extends si.RdfXmlParser{constructor({factory:E,...h}={}){super({...h,dataFactory:E})}}export{fi as default};
