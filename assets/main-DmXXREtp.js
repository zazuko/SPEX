import{J as z}from"./index-BRQbOmme.js";import{r as m}from"./main-B2XjL05y.js";var c,h;function v(){if(h)return c;h=1;const _=z(),f=m(),u=/^`\[[^\]]+\](.*)$/,p=new Map([[Date,a=>_.dateTime(a)],[Number,a=>_.number(a)]]);class w extends f{constructor(e={}){super(e);let{lists:t=null}=e,r=p;if(e.coercions){r=new Map(r);for(let[s,n]of e.coercions)r.set(s,n)}let i={first:">http://www.w3.org/1999/02/22-rdf-syntax-ns#first",rest:">http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",nil:">http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};if(t){let{first:s=null,rest:n=null,nil:l=null}=t;s&&(i.first=s),n&&(i.rest=n),l&&(i.nil=l)}Object.assign(this,{_xc_state:0,_hm_coercions:r,_g_lists:i})}_serialize_comment(e,t){let r="";if(this._xc_state!==2&&(r+=`
`,this._xc_state=2),t&&t.width){let i=t.width,s=[];for(;e.length>i;){let n=e.slice(0,i+1),l=/^(.*[^\s])\s+/.exec(n);if(l){let o=l[1];s.push(o),e=e.slice(o.length).replace(/^\s+/,"")}else s.push(e.slice(0,i)),e=e.slice(i)}e=s.join(`
`)}return r+(super._serialize_comment(e)||"")}_transcode_list(e,t=this._g_lists){if(e.length){let r=e[0],i=r;return Array.isArray(r)&&(i=this._transcode_list(r,t)),{[t.first]:i,[t.rest]:e.length===1?t.nil:this._transcode_list(e.slice(1),t)}}else return t.nil}_apply_directive(e,t){let r=u.exec(e);if(!r)throw new Error(`Invalid writable data event directive string: "${e}"`);let i;try{i=JSON.parse(r[1])}catch{throw new Error(`Unable to parse JSON in writable data event directive: "${r[1]}"`)}let s=i.type;switch(s){case"comment":{if(this._serialize_comment)return{write:this._serialize_comment(t+"",i)};break}case"newlines":{if(this._serialize_newlines)return{write:this._serialize_newlines(t)};break}case"config":switch(i.value){case"lists":{let n=this._a_list_serializers;n.push(this._serialize_list_object);let l=this._g_lists,o={first:t.first||l.first,rest:t.rest||l.rest,nil:t.nil||l.nil};return this._serialize_list_object=function(d,g){let b=this._transcode_list(d,o);return this._encode_objects(b,g)},{exit:()=>{this._serialize_list_object=n.pop()}}}default:throw new Error(`No such config key '${i.value}'`)}default:throw new Error(`Invalid writable data event directive type: '${s}'`)}return{}}_serialize_c4(e){let t=this._h_prefixes,r=[],i="";for(let s in e)s!=="*"&&r.push(s),i+=this._serialize_c3(e[s]);if(r.length){let s=`Destination format does not support quads; an implicit union into the default graph was performed on the quads contained in graphs: ${r.map(n=>_.c1(n,t).verbose()).join(", ")}`;this.emit("warning",s)||console.warn(s)}return i}}return c=w,c}export{v as r};
