import{_ as g,R as S,r as x,P as y,S as C,G as L,a as l,c as P,o as p,w as i,b as n,d as o,e as E,f as m,F as A,g as I,t as _,v as R,h as B,i as v,j as F,s as G,k as N,l as V}from"./index-DMvFg8bE.js";const M=[...parsers.keys()],q=`
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
`,z={components:{GraphLayout:L,Splitpanes:C,Pane:y,ArrowPathIcon:x,ResourceCard:S},data(){return{format:"text/turtle",formats:M,shacl:q,datamodel:{tables:[],viewports:[],isIntrospected:!1},error:null,activeLinks:[]}},computed:{links(){const c=this.datamodel.tables,e=new Set(c.map(({id:s})=>s));return c.flatMap(s=>s.properties.map(a=>({...a,table:s}))).reduce((s,a)=>(a.values.forEach(t=>{const d=a.table.id,u=t.id;e.has(u)&&s.push({source:d,target:u,sourceProperty:a.id,label:a.name})}),s),[])}},methods:{async loadShacl(){const c=this.$refs.shaclEditor;this.error=null,this.datamodel.tables=[];const e=s=>V(s)||s;try{const s=await c.quads,a=v.dataset(s),t=v.clownface({dataset:a}).has(F.type,G.NodeShape);this.datamodel.tables=N(t,e)}catch(s){this.error=s.toString()}}}},D={class:"field"},H={class:"select"},U=["value"],j={class:"flex-grow flex flex-col"},X={key:0,class:"section"},J={class:"message is-danger"},K={class:"message-body"};function O(c,e,s,a,t,d){const u=l("rdf-editor"),k=l("ArrowPathIcon"),f=l("Pane"),w=l("ResourceCard"),b=l("GraphLayout"),h=l("Splitpanes");return p(),P(h,{class:"default-theme"},{default:i(()=>[n(f,{size:"40"},{default:i(()=>[e[4]||(e[4]=o("h2",{class:"font-bold text-lg px-4 py-2 bg-gray-200"},"SHACL editor",-1)),n(u,{class:"w-full h-full overflow-hidden",format:t.format,value:t.shacl,ref:"shaclEditor"},null,8,["format","value"]),o("div",D,[e[2]||(e[2]=o("label",{class:"label",for:"format"},"Format",-1)),o("div",H,[E(o("select",{id:"format","onUpdate:modelValue":e[0]||(e[0]=r=>t.format=r)},[(p(!0),m(A,null,I(t.formats,r=>(p(),m("option",{key:r,value:r},_(r),9,U))),128))],512),[[R,t.format]])])]),o("button",{class:"button is-primary",onClick:e[1]||(e[1]=(...r)=>d.loadShacl&&d.loadShacl(...r))},[n(k,{class:"icon"}),e[3]||(e[3]=o("span",null,"Update",-1))])]),_:1}),n(f,null,{default:i(()=>[n(h,{horizontal:""},{default:i(()=>[n(f,null,{default:i(()=>[o("div",j,[e[5]||(e[5]=o("h2",{class:"font-bold text-lg px-4 py-2 bg-gray-200"},"Representation",-1)),n(b,{nodes:t.datamodel.tables,links:d.links,"active-links":t.activeLinks},{node:i(({node:r})=>[n(w,{resource:r,"active-links":t.activeLinks},null,8,["resource","active-links"])]),_:1},8,["nodes","links","active-links"]),t.error?(p(),m("div",X,[o("div",J,[o("div",K," Error loading data: "+_(t.error),1)])])):B("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})}const T=g(z,[["render",O]]);export{T as default};
