import{J as O,p as F}from"./index-DMvFg8bE.js";import{r as G}from"./main-BkYFwWWS.js";function X(l,$){for(var b=0;b<$.length;b++){const x=$[b];if(typeof x!="string"&&!Array.isArray(x)){for(const y in x)if(y!=="default"&&!(y in l)){const k=Object.getOwnPropertyDescriptor(x,y);k&&Object.defineProperty(l,y,k.get?k:{enumerable:!0,get:()=>x[y]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}var q,S;function L(){if(S)return q;if(S=1,typeof queueMicrotask!="function"){let R=Promise.resolve();try{queueMicrotask=e=>R.then(e).catch(i=>setTimeout(()=>{throw i},0))}catch{}}const l=O(),$=G(),b=/^([A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u{02ff}\u{0370}-\u{037d}\u{037f}-\u{1fff}\u{200c}-\u{200d}\u{2070}-\u{218f}\u{2c00}-\u{2fef}\u{3001}-\u{d7ff}\u{f900}-\u{fdcf}\u{fdf0}-\u{fffd}\u{10000}-\u{effff}]([A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u{02ff}\u{0370}-\u{037d}\u{037f}-\u{1fff}\u{200c}-\u{200d}\u{2070}-\u{218f}\u{2c00}-\u{2fef}\u{3001}-\u{d7ff}\u{f900}-\u{fdcf}\u{fdf0}-\u{fffd}\u{10000}-\u{effff}_\-0-9\xb7\u{0300}-\u{036f}\u{203f}-\u{2040}.]*[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u{02ff}\u{0370}-\u{037d}\u{037f}-\u{1fff}\u{200c}-\u{200d}\u{2070}-\u{218f}\u{2c00}-\u{2fef}\u{3001}-\u{d7ff}\u{f900}-\u{fdcf}\u{fdf0}-\u{fffd}\u{10000}-\u{effff}_\-0-9\xb7\u{0300}-\u{036f}\u{203f}-\u{2040}])?)?$/u,x=1,y=2,k=4;class A extends ${constructor(e={}){super(e);let{prefixes:i={},lists:_=null,debug:t=!1,style:r=null}=e;Object.assign(this,{_b_debug:t,_s_indent:"	",_b_simplify_default_graph:!1,_xc_directives:0,_s_token_prefix:"@prefix"});let f="";if(r){let s=r.graph_keyword||r.graphKeyword||r["graph-keyword"];if(s)if(s===!0)f="GRAPH ";else{if(typeof s!="string")throw new TypeError(`Invalid argument type given for 'graph' token: ${s}`);if(/^graph$/i.test(s))f=s+" ";else throw new Error(`Graph token must equal case-insensitive "GRAPH"; found: "${s}"`)}let d=r.simplify_default_graph||r.simplifyDefaultGraph||r["simplify-default-graph"];d&&(this._b_simplify_default_graph=!!d),r.indent&&(this._s_indent=r.indent.replace(/[^\s]/g,""));let h=r.directives||r.directives;if(h)switch(h){case"sparql":{this._xc_directives=x,this._s_token_prefix="prefix";break}case"Sparql":{this._xc_directives=x|y,this._s_token_prefix="Prefix";break}case"SPARQL":{this._xc_directives=x|k,this._s_token_prefix="PREFIX";break}case"turtle":break;case"Turtle":{this._xc_directives=y,this._s_token_prefix="@Prefix";break}case"TURTLE":{this._xc_directives=k,this._s_token_prefix="@PREFIX";break}default:throw new Error(`Value not understood for 'directives' option: ${h}`)}}this._s_graph_keyword=f,_&&(this._serialize_list_object=function(s,d){let h=this._transcode_list(s);return this._encode_objects(h,d)});let a=this._s_token_prefix,o=this._xc_directives&x?`
`:` .
`,n="";try{for(let s in i){if(!b.test(s))throw new Error(`Invlalid prefix id for application/trig RDF serialization format: '${s}'`);n+=`${a} ${s}: ${l.namedNode(i[s]).verbose()}${o}`}}catch(s){queueMicrotask(()=>{this.emit("error",s)})}n&&this.push(n)}_serialize_prefixes(e){let i=this._xc_state===2?`

`:"";this._xc_state=0,this._h_prefixes={...this._h_prefixes};let _=this._s_token_prefix,t=this._xc_directives&x?`
`:` .
`;for(let r in e){if(!b.test(r))throw new Error(`Invlalid prefix id for application/trig RDF serialization format: '${r}'`);i+=`${_} ${r}: ${l.namedNode(e[r]).verbose()}${t}`,this._h_prefixes[r]=e[r]}return l.cache_prefixes(this._h_prefixes),i}_serialize_c3(e){let{_h_prefixes:i,_s_indent:_}=this,t=this._xc_state!==2?`
`:"";this._xc_state=2;let r="",f=null;for(let a in e){if(a[0]==="`"){let u=this._apply_directive(a,e[a]);u.write&&(t+=r+u.write,r=""),u.exit&&(f=u.exit);continue}let o=t.length;t+=r+l.c1_node(a,i).terse(i)+" ";let n="",s="",d=e[a],h=t.length,E=!0,c=null;for(let u in d){if(u[0]==="`"){let w=this._apply_directive(u,d[u]);w.write&&(t+=(n?s:`
`)+_+w.write,s="",n=_),w.exit&&(c=w.exit);continue}let m=d[u],g=this._encode_objects(m);if(!g)continue;if(E=!1,u[0]==="_"&&u[1]===":")throw new Error(`Cannot use blank node in predicate position of c3 hash; subject:'${a}', predicate:'${u}'`);let v=l.c1_named_node(u,i),j=v.isRdfTypeAlias?"a":v.terse(i);t+=s+n+j+" "+g,this._xc_state=2,s=` ;
`,n=_,c&&c()}if(E){t=t.slice(0,o)+t.slice(h);continue}r=`
`,t+=`${s?" ":n}.
`,f&&f()}return t+=`
`,t}_serialize_c4(e){let{_h_prefixes:i,_s_indent:_}=this,t=this._xc_state!==2?`
`:"";this._xc_state=2;let r=this._b_simplify_default_graph,f=this._s_graph_keyword,a=null;for(let o in e){if(o[0]==="`"){let c=this._apply_directive(o,e[o]);c.write&&(t+=c.write),c.exit&&(a=c.exit);continue}let n=l.c1_node(o,i).terse(i);t+=n?f+n+` {
`:r?"":f+`{
`;let s=!n&&r?"":_;this._xc_state=2;let d=e[o],h="",E=null;for(let c in d){if(c[0]==="`"){let p=this._apply_directive(c,d[c]);p.write&&(t+=h+s+p.write,h=""),p.exit&&(E=p.exit);continue}let u=t.length;t+=h+s+l.c1_node(c,i).terse(i)+" ";let m="",g="",v=d[c],j=t.length,w=!0,T=null;for(let p in v){if(p[0]==="`"){let P=this._apply_directive(p,v[p]);P.write&&(t+=(m?g:`
`)+_+s+P.write,g="",m=_+s),P.exit&&(T=P.exit);continue}let M=v[p],C=this._encode_objects(M);if(!C)continue;if(w=!1,p[0]==="_"&&p[1]===":")throw new Error(`Cannot use blank node in predicate position of c4 hash; graph:'${o}', subject:'${c}', predicate:'${p}'`);let I=l.c1_named_node(p,i),z=I.isRdfTypeAlias?"a":I.terse(i);t+=g+m+z+" "+C,this._xc_state=2,g=` ;
`,m=_+s,T&&T()}if(w){t=t.slice(0,u)+t.slice(j);continue}h=`
`,t+=`${g?" ":m}.
`,E&&E()}t+=(n||!r?`}
`:"")+`
`,a&&a()}return t}_encode_objects(e,i=1){let{_h_prefixes:_,_s_indent:t,_hm_coercions:r}=this;switch(typeof e){case"string":return l.c1(e,_).terse(_);case"number":return l.number(e).terse(_);case"boolean":return l.boolean(e).terse(_);case"object":{if(e===null)throw new Error("Refusing to serialize null value given as an object of quad");if(Array.isArray(e)||e instanceof Set){let f="",a="";for(let o of e)Array.isArray(o)?f+=a+this._serialize_list_object(o,i):f+=a+this._encode_objects(o,i),a=", ";return f}else if(Object===e.constructor){let f="[",a=!0,o=null;for(let n in e){if(a=!1,f+=`
`+t.repeat(2+i),n[0]==="`"){let s=this._apply_directive(n,e[n]);s.write&&(f+=s.write),s.exit&&(o=s.exit);continue}f+=l.c1(n,_).terse(_)+" "+this._encode_objects(e[n],i+1)+" ;"}return f+=(a?"":`
`+t.repeat(1+i))+"]",o&&o(),f}else{if(r.has(e.constructor))return r.get(e.constructor).apply(this,[e,i]).terse(_);if(e.isGraphyTerm)return e.terse(_);if(e.termType)return l.from.term(e).terse(_)}}default:throw new Error(`Bad type for RDF object: [${typeof e}] ${e&&e.constructor}`)}}_serialize_collection_object(e,i){let _=this._s_indent,t="(";for(let r of e){let f="";Array.isArray(r)?f=this._serialize_collection_object(r,i+1):f=this._encode_objects(r,i+1),t+=`
`+_.repeat(2+i)+f}return e.length&&(t+=`
`+_.repeat(1+i)),t+=")",t}_serialize_quad(e){let i=this._h_prefixes,_=l.from.quad(e),t=_.graph.terse(i);this._s_push+=(this._xc_state!==2?`
`:"")+this._s_graph_keyword+(t?t+" ":"")+`{
	`+_.subject.terse(i)+" "+_.predicate.terse(i)+" "+_.object.terse(i)+` .
}

`,this._xc_state=2}}return Object.assign(A.prototype,{anonymous_blank_nodes:!0,_serialize_c3r:A.prototype._serialize_c3,_serialize_c4r:A.prototype._serialize_c4,_serialize_comment:$.prototype._serialize_hash_comment,_serialize_list_object:A.prototype._serialize_collection_object}),q=function(R){return new A(R)},q}var D=L();const N=F(D),H=X({__proto__:null,default:N},[D]);export{H as m};
