import{J as S,p as C}from"./index-CLau4BBQ.js";import{r as I}from"./main-A4REgyq4.js";function j(n,x){for(var p=0;p<x.length;p++){const l=x[p];if(typeof l!="string"&&!Array.isArray(l)){for(const d in l)if(d!=="default"&&!(d in n)){const h=Object.getOwnPropertyDescriptor(l,d);h&&Object.defineProperty(n,d,h.get?h:{enumerable:!0,get:()=>l[d]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var w,$;function D(){if($)return w;if($=1,typeof queueMicrotask!="function"){let b=Promise.resolve();try{queueMicrotask=e=>b.then(e).catch(t=>setTimeout(()=>{throw t},0))}catch{}}const n=S(),x=I(),p=/^([A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u{02ff}\u{0370}-\u{037d}\u{037f}-\u{1fff}\u{200c}-\u{200d}\u{2070}-\u{218f}\u{2c00}-\u{2fef}\u{3001}-\u{d7ff}\u{f900}-\u{fdcf}\u{fdf0}-\u{fffd}\u{10000}-\u{effff}]([A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u{02ff}\u{0370}-\u{037d}\u{037f}-\u{1fff}\u{200c}-\u{200d}\u{2070}-\u{218f}\u{2c00}-\u{2fef}\u{3001}-\u{d7ff}\u{f900}-\u{fdcf}\u{fdf0}-\u{fffd}\u{10000}-\u{effff}_\-0-9\xb7\u{0300}-\u{036f}\u{203f}-\u{2040}.]*[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u{02ff}\u{0370}-\u{037d}\u{037f}-\u{1fff}\u{200c}-\u{200d}\u{2070}-\u{218f}\u{2c00}-\u{2fef}\u{3001}-\u{d7ff}\u{f900}-\u{fdcf}\u{fdf0}-\u{fffd}\u{10000}-\u{effff}_\-0-9\xb7\u{0300}-\u{036f}\u{203f}-\u{2040}])?)?$/u,l=1,d=2,h=4;class m extends x{constructor(e={}){super(e);let{prefixes:t={},lists:i=null,debug:r=!1,style:s=null}=e;if(Object.assign(this,{_b_debug:r,_s_indent:"	",_b_simplify_default_graph:!1,_xc_directives:0,_s_token_prefix:"@prefix"}),s){s.indent&&(this._s_indent=s.indent.replace(/[^\s]/g,""));let f=s.directives||s.directives;if(f)switch(f){case"sparql":{this._xc_directives=l,this._s_token_prefix="prefix";break}case"Sparql":{this._xc_directives=l|d,this._s_token_prefix="Prefix";break}case"SPARQL":{this._xc_directives=l|h,this._s_token_prefix="PREFIX";break}case"turtle":break;case"Turtle":{this._xc_directives=d,this._s_token_prefix="@Prefix";break}case"TURTLE":{this._xc_directives=h,this._s_token_prefix="@PREFIX";break}default:throw new Error(`Value not understood for 'directives' option: ${f}`)}}i&&(this._serialize_list_object=function(f,u){let y=this._transcode_list(f);return this._encode_objects(y,u)});let _=this._s_token_prefix,o=this._xc_directives&l?`
`:` .
`,a="";try{for(let f in t){if(!p.test(f))throw new Error(`Invlalid prefix id for text/turtle RDF serialization format: '${f}'`);a+=`${_} ${f}: ${n.namedNode(t[f]).verbose()}${o}`}}catch(f){queueMicrotask(()=>{this.emit("error",f)})}a&&this.push(a)}_serialize_prefixes(e){let t=this._xc_state===2?`

`:"";this._xc_state=0,this._h_prefixes={...this._h_prefixes};let i=this._s_token_prefix,r=this._xc_directives&l?`
`:` .
`;for(let s in e){if(!p.test(s))throw new Error(`Invlalid prefix id for text/turtle RDF serialization format: '${s}'`);t+=`${i} ${s}: ${n.namedNode(e[s]).verbose()}${r}`,this._h_prefixes[s]=e[s]}return n.cache_prefixes(this._h_prefixes),t}_serialize_c3(e){let{_h_prefixes:t,_s_indent:i}=this,r=this._xc_state!==2?`
`:"";this._xc_state=2;let s="",_=null;for(let o in e){if(o[0]==="`"){let c=this._apply_directive(o,e[o]);c.write&&(r+=s+c.write,s=""),c.exit&&(_=c.exit);continue}let a=r.length;r+=s+n.c1_node(o,t).terse(t)+" ";let f="",u="",y=e[o],P=r.length,E=!0,k=null;for(let c in y){if(c[0]==="`"){let g=this._apply_directive(c,y[c]);g.write&&(r+=(f?u:`
`)+i+g.write,u="",f=i),g.exit&&(k=g.exit);continue}let q=y[c],v=this._encode_objects(q);if(!v)continue;if(E=!1,c[0]==="_"&&c[1]===":")throw new Error(`Cannot use blank node in predicate position of c3 hash; subject:'${o}', predicate:'${c}'`);let A=n.c1_named_node(c,t),T=A.isRdfTypeAlias?"a":A.terse(t);r+=u+f+T+" "+v,this._xc_state=2,u=` ;
`,f=i,k&&k()}if(E){r=r.slice(0,a)+r.slice(P);continue}s=`
`,r+=`${u?" ":f}.
`,_&&_()}return r+=`
`,r}_encode_objects(e,t=1){let{_h_prefixes:i,_s_indent:r,_hm_coercions:s}=this;switch(typeof e){case"string":return n.c1(e,i).terse(i);case"number":return n.number(e).terse(i);case"boolean":return n.boolean(e).terse(i);case"object":{if(e===null)throw new Error("Refusing to serialize null value given as an object of quad");if(Array.isArray(e)||e instanceof Set){let _="",o="";for(let a of e)Array.isArray(a)?_+=o+this._serialize_list_object(a,t):_+=o+this._encode_objects(a,t),o=", ";return _}else if(Object===e.constructor){let _="[",o=!0,a=null;for(let f in e){if(o=!1,_+=`
`+r.repeat(1+t),f[0]==="`"){let u=this._apply_directive(f,e[f]);u.write&&(_+=u.write),u.exit&&(a=u.exit);continue}_+=n.c1(f,i).terse(i)+" "+this._encode_objects(e[f],t+1)+" ;"}return _+=(o?"":`
`+r.repeat(t))+"]",a&&a(),_}else{if(s.has(e.constructor))return s.get(e.constructor).apply(this,[e,t]).terse(i);if(e.isGraphyTerm)return e.terse(i);if(e.termType)return n.from.term(e).terse(i)}}default:throw new Error(`Bad type for RDF object: [${typeof e}] ${e&&e.constructor}`)}}_serialize_collection_object(e,t){let i=this._s_indent,r="(";for(let s of e){let _="";Array.isArray(s)?_=this._serialize_collection_object(s,t+1):_=this._encode_objects(s,t+1),r+=`
`+i.repeat(1+t)+_}return e.length&&(r+=`
`+i.repeat(t)),r+=")",r}_serialize_quad(e){let t=this._h_prefixes,i=n.from.quad(e);this._s_push+=(this._xc_state!==2?`
`:"")+i.subject.terse(t)+" "+i.predicate.terse(t)+" "+i.object.terse(t)+` .

`,this._xc_state=2}}return Object.assign(m.prototype,{anonymous_blank_nodes:!0,_serialize_c3r:m.prototype._serialize_c3,_serialize_c4r:m.prototype._serialize_c4,_serialize_comment:x.prototype._serialize_hash_comment,_serialize_list_object:m.prototype._serialize_collection_object}),w=function(b){return new m(b)},w}var R=D();const M=C(R),X=j({__proto__:null,default:M},[R]);export{X as m};
