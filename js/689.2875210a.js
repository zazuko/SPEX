(self["webpackChunk_zazuko_spex"]=self["webpackChunk_zazuko_spex"]||[]).push([[689],{86053:function(e,t,n){"use strict";const{AbortError:r,codes:o}=n(52837),{isNodeStream:i,isWebStream:a,kControllerErrorFunction:s}=n(25066),l=n(14434),{ERR_INVALID_ARG_TYPE:c}=o,d=(e,t)=>{if("object"!==typeof e||!("aborted"in e))throw new c(t,"AbortSignal",e)};e.exports.addAbortSignal=function(t,n){if(d(t,"signal"),!i(n)&&!a(n))throw new c("stream",["ReadableStream","WritableStream","Stream"],n);return e.exports.addAbortSignalNoValidate(t,n)},e.exports.addAbortSignalNoValidate=function(e,t){if("object"!==typeof e||!("aborted"in e))return t;const n=i(t)?()=>{t.destroy(new r(void 0,{cause:e.reason}))}:()=>{t[s](new r(void 0,{cause:e.reason}))};return e.aborted?n():(e.addEventListener("abort",n),l(t,(()=>e.removeEventListener("abort",n)))),t}},12771:function(e,t,n){"use strict";const{StringPrototypeSlice:r,SymbolIterator:o,TypedArrayPrototypeSet:i,Uint8Array:a}=n(53464),{Buffer:s}=n(48764),{inspect:l}=n(74138);e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;const e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,n=""+t.data;while(null!==(t=t.next))n+=e+t.data;return n}concat(e){if(0===this.length)return s.alloc(0);const t=s.allocUnsafe(e>>>0);let n=this.head,r=0;while(n)i(t,n.data,r),r+=n.data.length,n=n.next;return t}consume(e,t){const n=this.head.data;if(e<n.length){const t=n.slice(0,e);return this.head.data=n.slice(e),t}return e===n.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[o](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",n=this.head,o=0;do{const i=n.data;if(!(e>i.length)){e===i.length?(t+=i,++o,n.next?this.head=n.next:this.head=this.tail=null):(t+=r(i,0,e),this.head=n,n.data=r(i,e));break}t+=i,e-=i.length,++o}while(null!==(n=n.next));return this.length-=o,t}_getBuffer(e){const t=s.allocUnsafe(e),n=e;let r=this.head,o=0;do{const s=r.data;if(!(e>s.length)){e===s.length?(i(t,s,n-e),++o,r.next?this.head=r.next:this.head=this.tail=null):(i(t,new a(s.buffer,s.byteOffset,e),n-e),this.head=r,r.data=s.slice(e));break}i(t,s,n-e),e-=s.length,++o}while(null!==(r=r.next));return this.length-=o,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return l(this,{...t,depth:0,customInspect:!1})}}},73705:function(e,t,n){"use strict";const{pipeline:r}=n(93101),o=n(41928),{destroyer:i}=n(28697),{isNodeStream:a,isReadable:s,isWritable:l,isWebStream:c,isTransformStream:d,isWritableStream:u,isReadableStream:f}=n(25066),{AbortError:p,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:g}}=n(52837),y=n(14434);e.exports=function(...e){if(0===e.length)throw new g("streams");if(1===e.length)return o.from(e[0]);const t=[...e];if("function"===typeof e[0]&&(e[0]=o.from(e[0])),"function"===typeof e[e.length-1]){const t=e.length-1;e[t]=o.from(e[t])}for(let r=0;r<e.length;++r)if(a(e[r])||c(e[r])){if(r<e.length-1&&!(s(e[r])||f(e[r])||d(e[r])))throw new h(`streams[${r}]`,t[r],"must be readable");if(r>0&&!(l(e[r])||u(e[r])||d(e[r])))throw new h(`streams[${r}]`,t[r],"must be writable")}let n,v,b,m,w;function x(e){const t=m;m=null,t?t(e):e?w.destroy(e):R||E||w.destroy()}const _=e[0],S=r(e,x),E=!!(l(_)||u(_)||d(_)),R=!!(s(S)||f(S)||d(S));if(w=new o({writableObjectMode:!(null===_||void 0===_||!_.writableObjectMode),readableObjectMode:!(null===S||void 0===S||!S.writableObjectMode),writable:E,readable:R}),E){if(a(_))w._write=function(e,t,r){_.write(e,t)?r():n=r},w._final=function(e){_.end(),v=e},_.on("drain",(function(){if(n){const e=n;n=null,e()}}));else if(c(_)){const e=d(_)?_.writable:_,t=e.getWriter();w._write=async function(e,n,r){try{await t.ready,t.write(e).catch((()=>{})),r()}catch(o){r(o)}},w._final=async function(e){try{await t.ready,t.close().catch((()=>{})),v=e}catch(n){e(n)}}}const e=d(S)?S.readable:S;y(e,(()=>{if(v){const e=v;v=null,e()}}))}if(R)if(a(S))S.on("readable",(function(){if(b){const e=b;b=null,e()}})),S.on("end",(function(){w.push(null)})),w._read=function(){while(1){const e=S.read();if(null===e)return void(b=w._read);if(!w.push(e))return}};else if(c(S)){const e=d(S)?S.readable:S,t=e.getReader();w._read=async function(){while(1)try{const{value:e,done:n}=await t.read();if(!w.push(e))return;if(n)return void w.push(null)}catch{return}}}return w._destroy=function(e,t){e||null===m||(e=new p),b=null,n=null,v=null,null===m?t(e):(m=t,a(S)&&i(S,e))},w}},28697:function(e,t,n){"use strict";const r=n(34155),{aggregateTwoErrors:o,codes:{ERR_MULTIPLE_CALLBACK:i},AbortError:a}=n(52837),{Symbol:s}=n(53464),{kDestroyed:l,isDestroyed:c,isFinished:d,isServerRequest:u}=n(25066),f=s("kDestroy"),p=s("kConstruct");function h(e,t,n){e&&(e.stack,t&&!t.errored&&(t.errored=e),n&&!n.errored&&(n.errored=e))}function g(e,t){const n=this._readableState,r=this._writableState,i=r||n;return null!==r&&void 0!==r&&r.destroyed||null!==n&&void 0!==n&&n.destroyed?("function"===typeof t&&t(),this):(h(e,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?y(this,e,t):this.once(f,(function(n){y(this,o(n,e),t)})),this)}function y(e,t,n){let o=!1;function i(t){if(o)return;o=!0;const i=e._readableState,a=e._writableState;h(t,a,i),a&&(a.closed=!0),i&&(i.closed=!0),"function"===typeof n&&n(t),t?r.nextTick(v,e,t):r.nextTick(b,e)}try{e._destroy(t||null,i)}catch(t){i(t)}}function v(e,t){m(e,t),b(e)}function b(e){const t=e._readableState,n=e._writableState;n&&(n.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!==n&&void 0!==n&&n.emitClose||null!==t&&void 0!==t&&t.emitClose)&&e.emit("close")}function m(e,t){const n=e._readableState,r=e._writableState;null!==r&&void 0!==r&&r.errorEmitted||null!==n&&void 0!==n&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),e.emit("error",t))}function w(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)}function x(e,t,n){const o=e._readableState,i=e._writableState;if(null!==i&&void 0!==i&&i.destroyed||null!==o&&void 0!==o&&o.destroyed)return this;null!==o&&void 0!==o&&o.autoDestroy||null!==i&&void 0!==i&&i.autoDestroy?e.destroy(t):t&&(t.stack,i&&!i.errored&&(i.errored=t),o&&!o.errored&&(o.errored=t),n?r.nextTick(m,e,t):m(e,t))}function _(e,t){if("function"!==typeof e._construct)return;const n=e._readableState,o=e._writableState;n&&(n.constructed=!1),o&&(o.constructed=!1),e.once(p,t),e.listenerCount(p)>1||r.nextTick(S,e)}function S(e){let t=!1;function n(n){if(t)return void x(e,null!==n&&void 0!==n?n:new i);t=!0;const o=e._readableState,a=e._writableState,s=a||o;o&&(o.constructed=!0),a&&(a.constructed=!0),s.destroyed?e.emit(f,n):n?x(e,n,!0):r.nextTick(E,e)}try{e._construct((e=>{r.nextTick(n,e)}))}catch(o){r.nextTick(n,o)}}function E(e){e.emit(p)}function R(e){return(null===e||void 0===e?void 0:e.setHeader)&&"function"===typeof e.abort}function I(e){e.emit("close")}function j(e,t){e.emit("error",t),r.nextTick(I,e)}function A(e,t){e&&!c(e)&&(t||d(e)||(t=new a),u(e)?(e.socket=null,e.destroy(t)):R(e)?e.abort():R(e.req)?e.req.abort():"function"===typeof e.destroy?e.destroy(t):"function"===typeof e.close?e.close():t?r.nextTick(j,e,t):r.nextTick(I,e),e.destroyed||(e[l]=!0))}e.exports={construct:_,destroyer:A,destroy:g,undestroy:w,errorOrDestroy:x}},41928:function(e,t,n){"use strict";const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:o,ObjectKeys:i,ObjectSetPrototypeOf:a}=n(53464);e.exports=c;const s=n(75009),l=n(51572);a(c.prototype,s.prototype),a(c,s);{const e=i(l.prototype);for(let t=0;t<e.length;t++){const n=e[t];c.prototype[n]||(c.prototype[n]=l.prototype[n])}}function c(e){if(!(this instanceof c))return new c(e);s.call(this,e),l.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let d,u;function f(){return void 0===d&&(d={}),d}r(c.prototype,{writable:{__proto__:null,...o(l.prototype,"writable")},writableHighWaterMark:{__proto__:null,...o(l.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...o(l.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...o(l.prototype,"writableBuffer")},writableLength:{__proto__:null,...o(l.prototype,"writableLength")},writableFinished:{__proto__:null,...o(l.prototype,"writableFinished")},writableCorked:{__proto__:null,...o(l.prototype,"writableCorked")},writableEnded:{__proto__:null,...o(l.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...o(l.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),c.fromWeb=function(e,t){return f().newStreamDuplexFromReadableWritablePair(e,t)},c.toWeb=function(e){return f().newReadableWritablePairFromDuplex(e)},c.from=function(e){return u||(u=n(43263)),u(e,"body")}},43263:function(e,t,n){const r=n(34155),o=n(48764),{isReadable:i,isWritable:a,isIterable:s,isNodeStream:l,isReadableNodeStream:c,isWritableNodeStream:d,isDuplexNodeStream:u}=n(25066),f=n(14434),{AbortError:p,codes:{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_RETURN_VALUE:g}}=n(52837),{destroyer:y}=n(28697),v=n(41928),b=n(75009),{createDeferredPromise:m}=n(74138),w=n(40399),x=globalThis.Blob||o.Blob,_="undefined"!==typeof x?function(e){return e instanceof x}:function(e){return!1},S=globalThis.AbortController||n(28599).AbortController,{FunctionPrototypeCall:E}=n(53464);class R extends v{constructor(e){super(e),!1===(null===e||void 0===e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null===e||void 0===e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function I(e){let{promise:t,resolve:n}=m();const o=new S,i=o.signal,a=e(async function*(){while(1){const e=t;t=null;const{chunk:o,done:a,cb:s}=await e;if(r.nextTick(s),a)return;if(i.aborted)throw new p(void 0,{cause:i.reason});({promise:t,resolve:n}=m()),yield o}}(),{signal:i});return{value:a,write(e,t,r){const o=n;n=null,o({chunk:e,done:!1,cb:r})},final(e){const t=n;n=null,t({done:!0,cb:e})},destroy(e,t){o.abort(),t(e)}}}function j(e){const t=e.readable&&"function"!==typeof e.readable.read?b.wrap(e.readable):e.readable,n=e.writable;let r,o,s,l,c,d=!!i(t),u=!!a(n);function h(e){const t=l;l=null,t?t(e):e&&c.destroy(e)}return c=new R({readableObjectMode:!(null===t||void 0===t||!t.readableObjectMode),writableObjectMode:!(null===n||void 0===n||!n.writableObjectMode),readable:d,writable:u}),u&&(f(n,(e=>{u=!1,e&&y(t,e),h(e)})),c._write=function(e,t,o){n.write(e,t)?o():r=o},c._final=function(e){n.end(),o=e},n.on("drain",(function(){if(r){const e=r;r=null,e()}})),n.on("finish",(function(){if(o){const e=o;o=null,e()}}))),d&&(f(t,(e=>{d=!1,e&&y(t,e),h(e)})),t.on("readable",(function(){if(s){const e=s;s=null,e()}})),t.on("end",(function(){c.push(null)})),c._read=function(){while(1){const e=t.read();if(null===e)return void(s=c._read);if(!c.push(e))return}}),c._destroy=function(e,i){e||null===l||(e=new p),s=null,r=null,o=null,null===l?i(e):(l=i,y(n,e),y(t,e))},c}e.exports=function e(t,n){if(u(t))return t;if(c(t))return j({readable:t});if(d(t))return j({writable:t});if(l(t))return j({writable:!1,readable:!1});if("function"===typeof t){const{value:e,write:o,final:i,destroy:a}=I(t);if(s(e))return w(R,e,{objectMode:!0,write:o,final:i,destroy:a});const l=null===e||void 0===e?void 0:e.then;if("function"===typeof l){let t;const n=E(l,e,(e=>{if(null!=e)throw new g("nully","body",e)}),(e=>{y(t,e)}));return t=new R({objectMode:!0,readable:!1,write:o,final(e){i((async()=>{try{await n,r.nextTick(e,null)}catch(t){r.nextTick(e,t)}}))},destroy:a})}throw new g("Iterable, AsyncIterable or AsyncFunction",n,e)}if(_(t))return e(t.arrayBuffer());if(s(t))return w(R,t,{objectMode:!0,writable:!1});if("object"===typeof(null===t||void 0===t?void 0:t.writable)||"object"===typeof(null===t||void 0===t?void 0:t.readable)){const n=null!==t&&void 0!==t&&t.readable?c(null===t||void 0===t?void 0:t.readable)?null===t||void 0===t?void 0:t.readable:e(t.readable):void 0,r=null!==t&&void 0!==t&&t.writable?d(null===t||void 0===t?void 0:t.writable)?null===t||void 0===t?void 0:t.writable:e(t.writable):void 0;return j({readable:n,writable:r})}const o=null===t||void 0===t?void 0:t.then;if("function"===typeof o){let e;return E(o,t,(t=>{null!=t&&e.push(t),e.push(null)}),(t=>{y(e,t)})),e=new R({objectMode:!0,writable:!1,read(){}})}throw new h(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}},14434:function(e,t,n){const r=n(34155),{AbortError:o,codes:i}=n(52837),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:s}=i,{kEmptyObject:l,once:c}=n(74138),{validateAbortSignal:d,validateFunction:u,validateObject:f,validateBoolean:p}=n(95793),{Promise:h,PromisePrototypeThen:g}=n(53464),{isClosed:y,isReadable:v,isReadableNodeStream:b,isReadableStream:m,isReadableFinished:w,isReadableErrored:x,isWritable:_,isWritableNodeStream:S,isWritableStream:E,isWritableFinished:R,isWritableErrored:I,isNodeStream:j,willEmitClose:A,kIsClosedPromise:N}=n(25066);function O(e){return e.setHeader&&"function"===typeof e.abort}const k=()=>{};function D(e,t,n){var i,p;if(2===arguments.length?(n=t,t=l):null==t?t=l:f(t,"options"),u(n,"callback"),d(t.signal,"options.signal"),n=c(n),m(e)||E(e))return L(e,t,n);if(!j(e))throw new a("stream",["ReadableStream","WritableStream","Stream"],e);const h=null!==(i=t.readable)&&void 0!==i?i:b(e),g=null!==(p=t.writable)&&void 0!==p?p:S(e),N=e._writableState,D=e._readableState,T=()=>{e.writable||P()};let C=A(e)&&b(e)===h&&S(e)===g,M=R(e,!1);const P=()=>{M=!0,e.destroyed&&(C=!1),(!C||e.readable&&!h)&&(h&&!F||n.call(e))};let F=w(e,!1);const J=()=>{F=!0,e.destroyed&&(C=!1),(!C||e.writable&&!g)&&(g&&!M||n.call(e))},W=t=>{n.call(e,t)};let U=y(e);const H=()=>{U=!0;const t=I(e)||x(e);return t&&"boolean"!==typeof t?n.call(e,t):h&&!F&&b(e,!0)&&!w(e,!1)?n.call(e,new s):!g||M||R(e,!1)?void n.call(e):n.call(e,new s)},$=()=>{U=!0;const t=I(e)||x(e);if(t&&"boolean"!==typeof t)return n.call(e,t);n.call(e)},B=()=>{e.req.on("finish",P)};O(e)?(e.on("complete",P),C||e.on("abort",H),e.req?B():e.on("request",B)):g&&!N&&(e.on("end",T),e.on("close",T)),C||"boolean"!==typeof e.aborted||e.on("aborted",H),e.on("end",J),e.on("finish",P),!1!==t.error&&e.on("error",W),e.on("close",H),U?r.nextTick(H):null!==N&&void 0!==N&&N.errorEmitted||null!==D&&void 0!==D&&D.errorEmitted?C||r.nextTick($):(h||C&&!v(e)||!M&&!1!==_(e))&&(g||C&&!_(e)||!F&&!1!==v(e))?D&&e.req&&e.aborted&&r.nextTick($):r.nextTick($);const V=()=>{n=k,e.removeListener("aborted",H),e.removeListener("complete",P),e.removeListener("abort",H),e.removeListener("request",B),e.req&&e.req.removeListener("finish",P),e.removeListener("end",T),e.removeListener("close",T),e.removeListener("finish",P),e.removeListener("end",J),e.removeListener("error",W),e.removeListener("close",H)};if(t.signal&&!U){const i=()=>{const r=n;V(),r.call(e,new o(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)r.nextTick(i);else{const r=n;n=c(((...n)=>{t.signal.removeEventListener("abort",i),r.apply(e,n)})),t.signal.addEventListener("abort",i)}}return V}function L(e,t,n){let i=!1,a=k;if(t.signal)if(a=()=>{i=!0,n.call(e,new o(void 0,{cause:t.signal.reason}))},t.signal.aborted)r.nextTick(a);else{const r=n;n=c(((...n)=>{t.signal.removeEventListener("abort",a),r.apply(e,n)})),t.signal.addEventListener("abort",a)}const s=(...t)=>{i||r.nextTick((()=>n.apply(e,t)))};return g(e[N].promise,s,s),k}function T(e,t){var n;let r=!1;return null===t&&(t=l),null!==(n=t)&&void 0!==n&&n.cleanup&&(p(t.cleanup,"cleanup"),r=t.cleanup),new h(((n,o)=>{const i=D(e,t,(e=>{r&&i(),e?o(e):n()}))}))}e.exports=D,e.exports.finished=T},40399:function(e,t,n){"use strict";const r=n(34155),{PromisePrototypeThen:o,SymbolAsyncIterator:i,SymbolIterator:a}=n(53464),{Buffer:s}=n(48764),{ERR_INVALID_ARG_TYPE:l,ERR_STREAM_NULL_VALUES:c}=n(52837).codes;function d(e,t,n){let d,u;if("string"===typeof t||t instanceof s)return new e({objectMode:!0,...n,read(){this.push(t),this.push(null)}});if(t&&t[i])u=!0,d=t[i]();else{if(!t||!t[a])throw new l("iterable",["Iterable"],t);u=!1,d=t[a]()}const f=new e({objectMode:!0,highWaterMark:1,...n});let p=!1;async function h(e){const t=void 0!==e&&null!==e,n="function"===typeof d.throw;if(t&&n){const{value:t,done:n}=await d.throw(e);if(await t,n)return}if("function"===typeof d.return){const{value:e}=await d.return();await e}}async function g(){for(;;){try{const{value:e,done:t}=u?await d.next():d.next();if(t)f.push(null);else{const t=e&&"function"===typeof e.then?await e:e;if(null===t)throw p=!1,new c;if(f.push(t))continue;p=!1}}catch(e){f.destroy(e)}break}}return f._read=function(){p||(p=!0,g())},f._destroy=function(e,t){o(h(e),(()=>r.nextTick(t,e)),(n=>r.nextTick(t,n||e)))},f}e.exports=d},78951:function(e,t,n){"use strict";const{ArrayIsArray:r,ObjectSetPrototypeOf:o}=n(53464),{EventEmitter:i}=n(17187);function a(e){i.call(this,e)}function s(e,t,n){if("function"===typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?r(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}o(a.prototype,i.prototype),o(a,i),a.prototype.pipe=function(e,t){const n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",l),n.on("close",c));let a=!1;function l(){a||(a=!0,e.end())}function c(){a||(a=!0,"function"===typeof e.destroy&&e.destroy())}function d(e){u(),0===i.listenerCount(this,"error")&&this.emit("error",e)}function u(){n.removeListener("data",r),e.removeListener("drain",o),n.removeListener("end",l),n.removeListener("close",c),n.removeListener("error",d),e.removeListener("error",d),n.removeListener("end",u),n.removeListener("close",u),e.removeListener("close",u)}return s(n,"error",d),s(e,"error",d),n.on("end",u),n.on("close",u),e.on("close",u),e.emit("pipe",n),e},e.exports={Stream:a,prependListener:s}},71902:function(e,t,n){"use strict";const r=globalThis.AbortController||n(28599).AbortController,{codes:{ERR_INVALID_ARG_VALUE:o,ERR_INVALID_ARG_TYPE:i,ERR_MISSING_ARGS:a,ERR_OUT_OF_RANGE:s},AbortError:l}=n(52837),{validateAbortSignal:c,validateInteger:d,validateObject:u}=n(95793),f=n(53464).Symbol("kWeak"),{finished:p}=n(14434),h=n(73705),{addAbortSignalNoValidate:g}=n(86053),{isWritable:y,isNodeStream:v}=n(25066),{ArrayPrototypePush:b,MathFloor:m,Number:w,NumberIsNaN:x,Promise:_,PromiseReject:S,PromisePrototypeThen:E,Symbol:R}=n(53464),I=R("kEmpty"),j=R("kEof");function A(e,t){if(null!=t&&u(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&c(t.signal,"options.signal"),v(e)&&!y(e))throw new o("stream",e,"must be writable");const n=h(this,e);return null!==t&&void 0!==t&&t.signal&&g(t.signal,n),n}function N(e,t){if("function"!==typeof e)throw new i("fn",["Function","AsyncFunction"],e);null!=t&&u(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&c(t.signal,"options.signal");let n=1;return null!=(null===t||void 0===t?void 0:t.concurrency)&&(n=m(t.concurrency)),d(n,"concurrency",1),async function*(){var o,i;const a=new r,s=this,c=[],d=a.signal,u={signal:d},f=()=>a.abort();let p,h;null!==t&&void 0!==t&&null!==(o=t.signal)&&void 0!==o&&o.aborted&&f(),null===t||void 0===t||null===(i=t.signal)||void 0===i||i.addEventListener("abort",f);let g=!1;function y(){g=!0}async function v(){try{for await(let t of s){var r;if(g)return;if(d.aborted)throw new l;try{t=e(t,u)}catch(i){t=S(i)}t!==I&&("function"===typeof(null===(r=t)||void 0===r?void 0:r.catch)&&t.catch(y),c.push(t),p&&(p(),p=null),!g&&c.length&&c.length>=n&&await new _((e=>{h=e})))}c.push(j)}catch(i){const e=S(i);E(e,void 0,y),c.push(e)}finally{var o;g=!0,p&&(p(),p=null),null===t||void 0===t||null===(o=t.signal)||void 0===o||o.removeEventListener("abort",f)}}v();try{while(1){while(c.length>0){const e=await c[0];if(e===j)return;if(d.aborted)throw new l;e!==I&&(yield e),c.shift(),h&&(h(),h=null)}await new _((e=>{p=e}))}}finally{a.abort(),g=!0,h&&(h(),h=null)}}.call(this)}function O(e=void 0){return null!=e&&u(e,"options"),null!=(null===e||void 0===e?void 0:e.signal)&&c(e.signal,"options.signal"),async function*(){let t=0;for await(const r of this){var n;if(null!==e&&void 0!==e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new l({cause:e.signal.reason});yield[t++,r]}}.call(this)}async function k(e,t=void 0){for await(const n of C.call(this,e,t))return!0;return!1}async function D(e,t=void 0){if("function"!==typeof e)throw new i("fn",["Function","AsyncFunction"],e);return!await k.call(this,(async(...t)=>!await e(...t)),t)}async function L(e,t){for await(const n of C.call(this,e,t))return n}async function T(e,t){if("function"!==typeof e)throw new i("fn",["Function","AsyncFunction"],e);async function n(t,n){return await e(t,n),I}for await(const r of N.call(this,n,t));}function C(e,t){if("function"!==typeof e)throw new i("fn",["Function","AsyncFunction"],e);async function n(t,n){return await e(t,n)?t:I}return N.call(this,n,t)}class M extends a{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function P(e,t,n){var o;if("function"!==typeof e)throw new i("reducer",["Function","AsyncFunction"],e);null!=n&&u(n,"options"),null!=(null===n||void 0===n?void 0:n.signal)&&c(n.signal,"options.signal");let a=arguments.length>1;if(null!==n&&void 0!==n&&null!==(o=n.signal)&&void 0!==o&&o.aborted){const e=new l(void 0,{cause:n.signal.reason});throw this.once("error",(()=>{})),await p(this.destroy(e)),e}const s=new r,d=s.signal;if(null!==n&&void 0!==n&&n.signal){const e={once:!0,[f]:this};n.signal.addEventListener("abort",(()=>s.abort()),e)}let h=!1;try{for await(const r of this){var g;if(h=!0,null!==n&&void 0!==n&&null!==(g=n.signal)&&void 0!==g&&g.aborted)throw new l;a?t=await e(t,r,{signal:d}):(t=r,a=!0)}if(!h&&!a)throw new M}finally{s.abort()}return t}async function F(e){null!=e&&u(e,"options"),null!=(null===e||void 0===e?void 0:e.signal)&&c(e.signal,"options.signal");const t=[];for await(const r of this){var n;if(null!==e&&void 0!==e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new l(void 0,{cause:e.signal.reason});b(t,r)}return t}function J(e,t){const n=N.call(this,e,t);return async function*(){for await(const e of n)yield*e}.call(this)}function W(e){if(e=w(e),x(e))return 0;if(e<0)throw new s("number",">= 0",e);return e}function U(e,t=void 0){return null!=t&&u(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&c(t.signal,"options.signal"),e=W(e),async function*(){var n;if(null!==t&&void 0!==t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new l;for await(const o of this){var r;if(null!==t&&void 0!==t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new l;e--<=0&&(yield o)}}.call(this)}function H(e,t=void 0){return null!=t&&u(t,"options"),null!=(null===t||void 0===t?void 0:t.signal)&&c(t.signal,"options.signal"),e=W(e),async function*(){var n;if(null!==t&&void 0!==t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new l;for await(const o of this){var r;if(null!==t&&void 0!==t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new l;if(!(e-- >0))return;yield o}}.call(this)}e.exports.streamReturningOperators={asIndexedPairs:O,drop:U,filter:C,flatMap:J,map:N,take:H,compose:A},e.exports.promiseReturningOperators={every:D,forEach:T,reduce:P,toArray:F,some:k,find:L}},75955:function(e,t,n){"use strict";const{ObjectSetPrototypeOf:r}=n(53464);e.exports=i;const o=n(53606);function i(e){if(!(this instanceof i))return new i(e);o.call(this,e)}r(i.prototype,o.prototype),r(i,o),i.prototype._transform=function(e,t,n){n(null,e)}},93101:function(e,t,n){const r=n(34155),{ArrayIsArray:o,Promise:i,SymbolAsyncIterator:a}=n(53464),s=n(14434),{once:l}=n(74138),c=n(28697),d=n(41928),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:p,ERR_MISSING_ARGS:h,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:y},AbortError:v}=n(52837),{validateFunction:b,validateAbortSignal:m}=n(95793),{isIterable:w,isReadable:x,isReadableNodeStream:_,isNodeStream:S,isTransformStream:E,isWebStream:R,isReadableStream:I,isReadableEnded:j}=n(25066),A=globalThis.AbortController||n(28599).AbortController;let N,O;function k(e,t,n){let r=!1;e.on("close",(()=>{r=!0}));const o=s(e,{readable:t,writable:n},(e=>{r=!e}));return{destroy:t=>{r||(r=!0,c.destroyer(e,t||new g("pipe")))},cleanup:o}}function D(e){return b(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function L(e){if(w(e))return e;if(_(e))return T(e);throw new f("val",["Readable","Iterable","AsyncIterable"],e)}async function*T(e){O||(O=n(75009)),yield*O.prototype[a].call(e)}async function C(e,t,n,{end:r}){let o,a=null;const l=e=>{if(e&&(o=e),a){const e=a;a=null,e()}},c=()=>new i(((e,t)=>{o?t(o):a=()=>{o?t(o):e()}}));t.on("drain",l);const d=s(t,{readable:!1},l);try{t.writableNeedDrain&&await c();for await(const n of e)t.write(n)||await c();r&&t.end(),await c(),n()}catch(f){n(o!==f?u(o,f):f)}finally{d(),t.off("drain",l)}}async function M(e,t,n,{end:r}){E(t)&&(t=t.writable);const o=t.getWriter();try{for await(const t of e)await o.ready,o.write(t).catch((()=>{}));await o.ready,r&&await o.close(),n()}catch(i){try{await o.abort(i),n(i)}catch(i){n(i)}}}function P(...e){return F(e,l(D(e)))}function F(e,t,i){if(1===e.length&&o(e[0])&&(e=e[0]),e.length<2)throw new h("streams");const a=new A,s=a.signal,l=null===i||void 0===i?void 0:i.signal,c=[];function u(){T(new v)}let g,y;m(l,"options.signal"),null===l||void 0===l||l.addEventListener("abort",u);const b=[];let j,O=0;function D(e){T(e,0===--O)}function T(e,n){if(!e||g&&"ERR_STREAM_PREMATURE_CLOSE"!==g.code||(g=e),g||n){while(b.length)b.shift()(g);null===l||void 0===l||l.removeEventListener("abort",u),a.abort(),n&&(g||c.forEach((e=>e())),r.nextTick(t,g,y))}}for(let U=0;U<e.length;U++){const H=e[U],$=U<e.length-1,B=U>0,V=$||!1!==(null===i||void 0===i?void 0:i.end),G=U===e.length-1;if(S(H)){if(V){const{destroy:q,cleanup:z}=k(H,$,B);b.push(q),x(H)&&G&&c.push(z)}function P(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&D(e)}H.on("error",P),x(H)&&G&&c.push((()=>{H.removeListener("error",P)}))}if(0===U)if("function"===typeof H){if(j=H({signal:s}),!w(j))throw new p("Iterable, AsyncIterable or Stream","source",j)}else j=w(H)||_(H)||E(H)?H:d.from(H);else if("function"===typeof H){var F;if(E(j))j=L(null===(F=j)||void 0===F?void 0:F.readable);else j=L(j);if(j=H(j,{signal:s}),$){if(!w(j,!0))throw new p("AsyncIterable",`transform[${U-1}]`,j)}else{var W;N||(N=n(75955));const K=new N({objectMode:!0}),X=null===(W=j)||void 0===W?void 0:W.then;if("function"===typeof X)O++,X.call(j,(e=>{y=e,null!=e&&K.write(e),V&&K.end(),r.nextTick(D)}),(e=>{K.destroy(e),r.nextTick(D,e)}));else if(w(j,!0))O++,C(j,K,D,{end:V});else{if(!I(j)&&!E(j))throw new p("AsyncIterable or Promise","destination",j);{const Z=j.readable||j;O++,C(Z,K,D,{end:V})}}j=K;const{destroy:Y,cleanup:Q}=k(j,!1,!0);b.push(Y),G&&c.push(Q)}}else if(S(H)){if(_(j)){O+=2;const ee=J(j,H,D,{end:V});x(H)&&G&&c.push(ee)}else if(E(j)||I(j)){const te=j.readable||j;O++,C(te,H,D,{end:V})}else{if(!w(j))throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],j);O++,C(j,H,D,{end:V})}j=H}else if(R(H)){if(_(j))O++,M(L(j),H,D,{end:V});else if(I(j)||w(j))O++,M(j,H,D,{end:V});else{if(!E(j))throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],j);O++,M(j.readable,H,D,{end:V})}j=H}else j=d.from(H)}return(null!==s&&void 0!==s&&s.aborted||null!==l&&void 0!==l&&l.aborted)&&r.nextTick(u),j}function J(e,t,n,{end:o}){let i=!1;if(t.on("close",(()=>{i||n(new y)})),e.pipe(t,{end:!1}),o){function a(){i=!0,t.end()}j(e)?r.nextTick(a):e.once("end",a)}else n();return s(e,{readable:!0,writable:!1},(t=>{const r=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&r&&r.ended&&!r.errored&&!r.errorEmitted?e.once("end",n).once("error",n):n(t)})),s(t,{readable:!1,writable:!0},n)}e.exports={pipelineImpl:F,pipeline:P}},75009:function(e,t,n){const r=n(34155),{ArrayPrototypeIndexOf:o,NumberIsInteger:i,NumberIsNaN:a,NumberParseInt:s,ObjectDefineProperties:l,ObjectKeys:c,ObjectSetPrototypeOf:d,Promise:u,SafeSet:f,SymbolAsyncIterator:p,Symbol:h}=n(53464);e.exports=J,J.ReadableState=F;const{EventEmitter:g}=n(17187),{Stream:y,prependListener:v}=n(78951),{Buffer:b}=n(48764),{addAbortSignal:m}=n(86053),w=n(14434);let x=n(74138).debuglog("stream",(e=>{x=e}));const _=n(12771),S=n(28697),{getHighWaterMark:E,getDefaultHighWaterMark:R}=n(33716),{aggregateTwoErrors:I,codes:{ERR_INVALID_ARG_TYPE:j,ERR_METHOD_NOT_IMPLEMENTED:A,ERR_OUT_OF_RANGE:N,ERR_STREAM_PUSH_AFTER_EOF:O,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:k}}=n(52837),{validateObject:D}=n(95793),L=h("kPaused"),{StringDecoder:T}=n(32553),C=n(40399);d(J.prototype,y.prototype),d(J,y);const M=()=>{},{errorOrDestroy:P}=S;function F(e,t,r){"boolean"!==typeof r&&(r=t instanceof n(41928)),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.readableObjectMode)),this.highWaterMark=e?E(this,e,"readableHighWaterMark",r):R(!1),this.buffer=new _,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[L]=null,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new T(e.encoding),this.encoding=e.encoding)}function J(e){if(!(this instanceof J))return new J(e);const t=this instanceof n(41928);this._readableState=new F(e,this,t),e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&m(e.signal,this)),y.call(this,e),S.construct(this,(()=>{this._readableState.needReadable&&z(this,this._readableState)}))}function W(e,t,n,r){x("readableAddChunk",t);const o=e._readableState;let i;if(o.objectMode||("string"===typeof t?(n=n||o.defaultEncoding,o.encoding!==n&&(r&&o.encoding?t=b.from(t,n).toString(o.encoding):(t=b.from(t,n),n=""))):t instanceof b?n="":y._isUint8Array(t)?(t=y._uint8ArrayToBuffer(t),n=""):null!=t&&(i=new j("chunk",["string","Buffer","Uint8Array"],t))),i)P(e,i);else if(null===t)o.reading=!1,V(e,o);else if(o.objectMode||t&&t.length>0)if(r)if(o.endEmitted)P(e,new k);else{if(o.destroyed||o.errored)return!1;U(e,o,t,!0)}else if(o.ended)P(e,new O);else{if(o.destroyed||o.errored)return!1;o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?U(e,o,t,!1):z(e,o)):U(e,o,t,!1)}else r||(o.reading=!1,z(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function U(e,t,n,r){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&G(e)),z(e,t)}J.prototype.destroy=S.destroy,J.prototype._undestroy=S.undestroy,J.prototype._destroy=function(e,t){t(e)},J.prototype[g.captureRejectionSymbol]=function(e){this.destroy(e)},J.prototype.push=function(e,t){return W(this,e,t,!1)},J.prototype.unshift=function(e,t){return W(this,e,t,!0)},J.prototype.isPaused=function(){const e=this._readableState;return!0===e[L]||!1===e.flowing},J.prototype.setEncoding=function(e){const t=new T(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;const n=this._readableState.buffer;let r="";for(const o of n)r+=t.write(o);return n.clear(),""!==r&&n.push(r),this._readableState.length=r.length,this};const H=1073741824;function $(e){if(e>H)throw new N("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++,e}function B(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:a(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function V(e,t){if(x("onEofChunk"),!t.ended){if(t.decoder){const e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?G(e):(t.needReadable=!1,t.emittedReadable=!0,q(e))}}function G(e){const t=e._readableState;x("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(x("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(q,e))}function q(e){const t=e._readableState;x("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,te(e)}function z(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,r.nextTick(K,e,t))}function K(e,t){while(!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length)){const n=t.length;if(x("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function X(e,t){return function(){const n=e._readableState;n.awaitDrainWriters===t?(x("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(x("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(t)),n.awaitDrainWriters&&0!==n.awaitDrainWriters.size||!e.listenerCount("data")||e.resume()}}function Y(e){const t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[L]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function Q(e){x("readable nexttick read 0"),e.read(0)}function Z(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(ee,e,t))}function ee(e,t){x("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),te(e),t.flowing&&!t.reading&&e.read(0)}function te(e){const t=e._readableState;x("flow",t.flowing);while(t.flowing&&null!==e.read());}function ne(e,t){"function"!==typeof e.read&&(e=J.wrap(e,{objectMode:!0}));const n=re(e,t);return n.stream=e,n}async function*re(e,t){let n,r=M;function o(t){this===e?(r(),r=M):r=t}e.on("readable",o);const i=w(e,{writable:!1},(e=>{n=e?I(n,e):null,r(),r=M}));try{while(1){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(n)throw n;if(null===n)return;await new u(o)}}}catch(a){throw n=I(n,a),n}finally{!n&&!1===(null===t||void 0===t?void 0:t.destroyOnReturn)||void 0!==n&&!e._readableState.autoDestroy?(e.off("readable",o),i()):S.destroyer(e,null)}}function oe(e,t){if(0===t.length)return null;let n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n}function ie(e){const t=e._readableState;x("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(ae,t,e))}function ae(e,t){if(x("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)r.nextTick(se,t);else if(e.autoDestroy){const e=t._writableState,n=!e||e.autoDestroy&&(e.finished||!1===e.writable);n&&t.destroy()}}function se(e){const t=e.writable&&!e.writableEnded&&!e.destroyed;t&&e.end()}let le;function ce(){return void 0===le&&(le={}),le}J.prototype.read=function(e){x("read",e),void 0===e?e=NaN:i(e)||(e=s(e,10));const t=this._readableState,n=e;if(e>t.highWaterMark&&(t.highWaterMark=$(e)),0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return x("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?ie(this):G(this),null;if(e=B(e,t),0===e&&t.ended)return 0===t.length&&ie(this),null;let r,o=t.needReadable;if(x("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&(o=!0,x("length less than watermark",o)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)o=!1,x("reading, ended or constructing",o);else if(o){x("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0);try{this._read(t.highWaterMark)}catch(a){P(this,a)}t.sync=!1,t.reading||(e=B(n,t))}return r=e>0?oe(e,t):null,null===r?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&ie(this)),null===r||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",r)),r},J.prototype._read=function(e){throw new A("_read()")},J.prototype.pipe=function(e,t){const n=this,o=this._readableState;1===o.pipes.length&&(o.multiAwaitDrain||(o.multiAwaitDrain=!0,o.awaitDrainWriters=new f(o.awaitDrainWriters?[o.awaitDrainWriters]:[]))),o.pipes.push(e),x("pipe count=%d opts=%j",o.pipes.length,t);const i=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr,a=i?l:m;function s(e,t){x("onunpipe"),e===n&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,u())}function l(){x("onend"),e.end()}let c;o.endEmitted?r.nextTick(a):n.once("end",a),e.on("unpipe",s);let d=!1;function u(){x("cleanup"),e.removeListener("close",y),e.removeListener("finish",b),c&&e.removeListener("drain",c),e.removeListener("error",g),e.removeListener("unpipe",s),n.removeListener("end",l),n.removeListener("end",m),n.removeListener("data",h),d=!0,c&&o.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&c()}function p(){d||(1===o.pipes.length&&o.pipes[0]===e?(x("false write response, pause",0),o.awaitDrainWriters=e,o.multiAwaitDrain=!1):o.pipes.length>1&&o.pipes.includes(e)&&(x("false write response, pause",o.awaitDrainWriters.size),o.awaitDrainWriters.add(e)),n.pause()),c||(c=X(n,e),e.on("drain",c))}function h(t){x("ondata");const n=e.write(t);x("dest.write",n),!1===n&&p()}function g(t){if(x("onerror",t),m(),e.removeListener("error",g),0===e.listenerCount("error")){const n=e._writableState||e._readableState;n&&!n.errorEmitted?P(e,t):e.emit("error",t)}}function y(){e.removeListener("finish",b),m()}function b(){x("onfinish"),e.removeListener("close",y),m()}function m(){x("unpipe"),n.unpipe(e)}return n.on("data",h),v(e,"error",g),e.once("close",y),e.once("finish",b),e.emit("pipe",n),!0===e.writableNeedDrain?o.flowing&&p():o.flowing||(x("pipe resume"),n.resume()),e},J.prototype.unpipe=function(e){const t=this._readableState,n={hasUnpiped:!1};if(0===t.pipes.length)return this;if(!e){const e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}const r=o(t.pipes,e);return-1===r||(t.pipes.splice(r,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,n)),this},J.prototype.on=function(e,t){const n=y.prototype.on.call(this,e,t),o=this._readableState;return"data"===e?(o.readableListening=this.listenerCount("readable")>0,!1!==o.flowing&&this.resume()):"readable"===e&&(o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,x("on readable",o.length,o.reading),o.length?G(this):o.reading||r.nextTick(Q,this))),n},J.prototype.addListener=J.prototype.on,J.prototype.removeListener=function(e,t){const n=y.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(Y,this),n},J.prototype.off=J.prototype.removeListener,J.prototype.removeAllListeners=function(e){const t=y.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(Y,this),t},J.prototype.resume=function(){const e=this._readableState;return e.flowing||(x("resume"),e.flowing=!e.readableListening,Z(this,e)),e[L]=!1,this},J.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[L]=!0,this},J.prototype.wrap=function(e){let t=!1;e.on("data",(n=>{!this.push(n)&&e.pause&&(t=!0,e.pause())})),e.on("end",(()=>{this.push(null)})),e.on("error",(e=>{P(this,e)})),e.on("close",(()=>{this.destroy()})),e.on("destroy",(()=>{this.destroy()})),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};const n=c(e);for(let r=1;r<n.length;r++){const t=n[r];void 0===this[t]&&"function"===typeof e[t]&&(this[t]=e[t].bind(e))}return this},J.prototype[p]=function(){return ne(this)},J.prototype.iterator=function(e){return void 0!==e&&D(e,"options"),ne(this,e)},l(J.prototype,{readable:{__proto__:null,get(){const e=this._readableState;return!!e&&!1!==e.readable&&!e.destroyed&&!e.errorEmitted&&!e.endEmitted},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),l(F.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[L]},set(e){this[L]=!!e}}}),J._fromList=oe,J.from=function(e,t){return C(J,e,t)},J.fromWeb=function(e,t){return ce().newStreamReadableFromReadableStream(e,t)},J.toWeb=function(e,t){return ce().newReadableStreamFromStreamReadable(e,t)},J.wrap=function(e,t){var n,r;return new J({objectMode:null===(n=null!==(r=e.readableObjectMode)&&void 0!==r?r:e.objectMode)||void 0===n||n,...t,destroy(t,n){S.destroyer(e,t),n(t)}}).wrap(e)}},33716:function(e,t,n){"use strict";const{MathFloor:r,NumberIsInteger:o}=n(53464),{ERR_INVALID_ARG_VALUE:i}=n(52837).codes;function a(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}function s(e){return e?16:16384}function l(e,t,n,l){const c=a(t,l,n);if(null!=c){if(!o(c)||c<0){const e=l?`options.${n}`:"options.highWaterMark";throw new i(e,c)}return r(c)}return s(e.objectMode)}e.exports={getHighWaterMark:l,getDefaultHighWaterMark:s}},53606:function(e,t,n){"use strict";const{ObjectSetPrototypeOf:r,Symbol:o}=n(53464);e.exports=c;const{ERR_METHOD_NOT_IMPLEMENTED:i}=n(52837).codes,a=n(41928),{getHighWaterMark:s}=n(33716);r(c.prototype,a.prototype),r(c,a);const l=o("kCallback");function c(e){if(!(this instanceof c))return new c(e);const t=e?s(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),a.call(this,e),this._readableState.sync=!1,this[l]=null,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function d(e){"function"!==typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush(((t,n)=>{t?e?e(t):this.destroy(t):(null!=n&&this.push(n),this.push(null),e&&e())}))}function u(){this._final!==d&&d.call(this)}c.prototype._final=d,c.prototype._transform=function(e,t,n){throw new i("_transform()")},c.prototype._write=function(e,t,n){const r=this._readableState,o=this._writableState,i=r.length;this._transform(e,t,((e,t)=>{e?n(e):(null!=t&&this.push(t),o.ended||i===r.length||r.length<r.highWaterMark?n():this[l]=n)}))},c.prototype._read=function(){if(this[l]){const e=this[l];this[l]=null,e()}}},25066:function(e,t,n){"use strict";const{Symbol:r,SymbolAsyncIterator:o,SymbolIterator:i,SymbolFor:a}=n(53464),s=r("kDestroyed"),l=r("kIsErrored"),c=r("kIsReadable"),d=r("kIsDisturbed"),u=a("nodejs.webstream.isClosedPromise"),f=a("nodejs.webstream.controllerErrorFunction");function p(e,t=!1){var n;return!(!e||"function"!==typeof e.pipe||"function"!==typeof e.on||t&&("function"!==typeof e.pause||"function"!==typeof e.resume)||e._writableState&&!1===(null===(n=e._readableState)||void 0===n?void 0:n.readable)||e._writableState&&!e._readableState)}function h(e){var t;return!(!e||"function"!==typeof e.write||"function"!==typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function g(e){return!(!e||"function"!==typeof e.pipe||!e._readableState||"function"!==typeof e.on||"function"!==typeof e.write)}function y(e){return e&&(e._readableState||e._writableState||"function"===typeof e.write&&"function"===typeof e.on||"function"===typeof e.pipe&&"function"===typeof e.on)}function v(e){return!(!e||y(e)||"function"!==typeof e.pipeThrough||"function"!==typeof e.getReader||"function"!==typeof e.cancel)}function b(e){return!(!e||y(e)||"function"!==typeof e.getWriter||"function"!==typeof e.abort)}function m(e){return!(!e||y(e)||"object"!==typeof e.readable||"object"!==typeof e.writable)}function w(e){return v(e)||b(e)||m(e)}function x(e,t){return null!=e&&(!0===t?"function"===typeof e[o]:!1===t?"function"===typeof e[i]:"function"===typeof e[o]||"function"===typeof e[i])}function _(e){if(!y(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!!(e.destroyed||e[s]||null!==r&&void 0!==r&&r.destroyed)}function S(e){if(!h(e))return null;if(!0===e.writableEnded)return!0;const t=e._writableState;return(null===t||void 0===t||!t.errored)&&("boolean"!==typeof(null===t||void 0===t?void 0:t.ended)?null:t.ended)}function E(e,t){if(!h(e))return null;if(!0===e.writableFinished)return!0;const n=e._writableState;return(null===n||void 0===n||!n.errored)&&("boolean"!==typeof(null===n||void 0===n?void 0:n.finished)?null:!!(n.finished||!1===t&&!0===n.ended&&0===n.length))}function R(e){if(!p(e))return null;if(!0===e.readableEnded)return!0;const t=e._readableState;return!(!t||t.errored)&&("boolean"!==typeof(null===t||void 0===t?void 0:t.ended)?null:t.ended)}function I(e,t){if(!p(e))return null;const n=e._readableState;return(null===n||void 0===n||!n.errored)&&("boolean"!==typeof(null===n||void 0===n?void 0:n.endEmitted)?null:!!(n.endEmitted||!1===t&&!0===n.ended&&0===n.length))}function j(e){return e&&null!=e[c]?e[c]:"boolean"!==typeof(null===e||void 0===e?void 0:e.readable)?null:!_(e)&&(p(e)&&e.readable&&!I(e))}function A(e){return"boolean"!==typeof(null===e||void 0===e?void 0:e.writable)?null:!_(e)&&(h(e)&&e.writable&&!S(e))}function N(e,t){return y(e)?!!_(e)||(!1===(null===t||void 0===t?void 0:t.readable)||!j(e))&&(!1===(null===t||void 0===t?void 0:t.writable)||!A(e)):null}function O(e){var t,n;return y(e)?e.writableErrored?e.writableErrored:null!==(t=null===(n=e._writableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null}function k(e){var t,n;return y(e)?e.readableErrored?e.readableErrored:null!==(t=null===(n=e._readableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null}function D(e){if(!y(e))return null;if("boolean"===typeof e.closed)return e.closed;const t=e._writableState,n=e._readableState;return"boolean"===typeof(null===t||void 0===t?void 0:t.closed)||"boolean"===typeof(null===n||void 0===n?void 0:n.closed)?(null===t||void 0===t?void 0:t.closed)||(null===n||void 0===n?void 0:n.closed):"boolean"===typeof e._closed&&L(e)?e._closed:null}function L(e){return"boolean"===typeof e._closed&&"boolean"===typeof e._defaultKeepAlive&&"boolean"===typeof e._removedConnection&&"boolean"===typeof e._removedContLen}function T(e){return"boolean"===typeof e._sent100&&L(e)}function C(e){var t;return"boolean"===typeof e._consuming&&"boolean"===typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)}function M(e){if(!y(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!r&&T(e)||!!(r&&r.autoDestroy&&r.emitClose&&!1===r.closed)}function P(e){var t;return!(!e||!(null!==(t=e[d])&&void 0!==t?t:e.readableDidRead||e.readableAborted))}function F(e){var t,n,r,o,i,a,s,c,d,u;return!(!e||!(null!==(t=null!==(n=null!==(r=null!==(o=null!==(i=null!==(a=e[l])&&void 0!==a?a:e.readableErrored)&&void 0!==i?i:e.writableErrored)&&void 0!==o?o:null===(s=e._readableState)||void 0===s?void 0:s.errorEmitted)&&void 0!==r?r:null===(c=e._writableState)||void 0===c?void 0:c.errorEmitted)&&void 0!==n?n:null===(d=e._readableState)||void 0===d?void 0:d.errored)&&void 0!==t?t:null===(u=e._writableState)||void 0===u?void 0:u.errored))}e.exports={kDestroyed:s,isDisturbed:P,kIsDisturbed:d,isErrored:F,kIsErrored:l,isReadable:j,kIsReadable:c,kIsClosedPromise:u,kControllerErrorFunction:f,isClosed:D,isDestroyed:_,isDuplexNodeStream:g,isFinished:N,isIterable:x,isReadableNodeStream:p,isReadableStream:v,isReadableEnded:R,isReadableFinished:I,isReadableErrored:k,isNodeStream:y,isWebStream:w,isWritable:A,isWritableNodeStream:h,isWritableStream:b,isWritableEnded:S,isWritableFinished:E,isWritableErrored:O,isServerRequest:C,isServerResponse:T,willEmitClose:M,isTransformStream:m}},51572:function(e,t,n){const r=n(34155),{ArrayPrototypeSlice:o,Error:i,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:s,ObjectDefineProperties:l,ObjectSetPrototypeOf:c,StringPrototypeToLowerCase:d,Symbol:u,SymbolHasInstance:f}=n(53464);e.exports=T,T.WritableState=D;const{EventEmitter:p}=n(17187),h=n(78951).Stream,{Buffer:g}=n(48764),y=n(28697),{addAbortSignal:v}=n(86053),{getHighWaterMark:b,getDefaultHighWaterMark:m}=n(33716),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:x,ERR_MULTIPLE_CALLBACK:_,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:E,ERR_STREAM_ALREADY_FINISHED:R,ERR_STREAM_NULL_VALUES:I,ERR_STREAM_WRITE_AFTER_END:j,ERR_UNKNOWN_ENCODING:A}=n(52837).codes,{errorOrDestroy:N}=y;function O(){}c(T.prototype,h.prototype),c(T,h);const k=u("kOnFinished");function D(e,t,r){"boolean"!==typeof r&&(r=t instanceof n(41928)),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?b(this,e,"writableHighWaterMark",r):m(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const o=!(!e||!1!==e.decodeStrings);this.decodeStrings=!o,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=J.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,L(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[k]=[]}function L(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function T(e){const t=this instanceof n(41928);if(!t&&!a(T,this))return new T(e);this._writableState=new D(e,this,t),e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final),"function"===typeof e.construct&&(this._construct=e.construct),e.signal&&v(e.signal,this)),h.call(this,e),y.construct(this,(()=>{const e=this._writableState;e.writing||$(this,e),q(this,e)}))}function C(e,t,n,o){const i=e._writableState;if("function"===typeof n)o=n,n=i.defaultEncoding;else{if(n){if("buffer"!==n&&!g.isEncoding(n))throw new A(n)}else n=i.defaultEncoding;"function"!==typeof o&&(o=O)}if(null===t)throw new I;if(!i.objectMode)if("string"===typeof t)!1!==i.decodeStrings&&(t=g.from(t,n),n="buffer");else if(t instanceof g)n="buffer";else{if(!h._isUint8Array(t))throw new w("chunk",["string","Buffer","Uint8Array"],t);t=h._uint8ArrayToBuffer(t),n="buffer"}let a;return i.ending?a=new j:i.destroyed&&(a=new E("write")),a?(r.nextTick(o,a),N(e,a,!0),a):(i.pendingcb++,M(e,i,t,n,o))}function M(e,t,n,r,o){const i=t.objectMode?1:n.length;t.length+=i;const a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:n,encoding:r,callback:o}),t.allBuffers&&"buffer"!==r&&(t.allBuffers=!1),t.allNoop&&o!==O&&(t.allNoop=!1)):(t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,e._write(n,r,t.onwrite),t.sync=!1),a&&!t.errored&&!t.destroyed}function P(e,t,n,r,o,i,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new E("write")):n?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function F(e,t,n,r){--t.pendingcb,r(n),H(t),N(e,n)}function J(e,t){const n=e._writableState,o=n.sync,i=n.writecb;"function"===typeof i?(n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,t?(t.stack,n.errored||(n.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),o?r.nextTick(F,e,n,t,i):F(e,n,t,i)):(n.buffered.length>n.bufferedIndex&&$(e,n),o?null!==n.afterWriteTickInfo&&n.afterWriteTickInfo.cb===i?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:i,stream:e,state:n},r.nextTick(W,n.afterWriteTickInfo)):U(e,n,1,i))):N(e,new _)}function W({stream:e,state:t,count:n,cb:r}){return t.afterWriteTickInfo=null,U(e,t,n,r)}function U(e,t,n,r){const o=!t.ending&&!e.destroyed&&0===t.length&&t.needDrain;o&&(t.needDrain=!1,e.emit("drain"));while(n-- >0)t.pendingcb--,r();t.destroyed&&H(t),q(e,t)}function H(e){if(e.writing)return;for(let o=e.bufferedIndex;o<e.buffered.length;++o){var t;const{chunk:n,callback:r}=e.buffered[o],i=e.objectMode?1:n.length;e.length-=i,r(null!==(t=e.errored)&&void 0!==t?t:new E("write"))}const n=e[k].splice(0);for(let o=0;o<n.length;o++){var r;n[o](null!==(r=e.errored)&&void 0!==r?r:new E("end"))}L(e)}function $(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;const{buffered:n,bufferedIndex:r,objectMode:i}=t,a=n.length-r;if(!a)return;let s=r;if(t.bufferProcessing=!0,a>1&&e._writev){t.pendingcb-=a-1;const r=t.allNoop?O:e=>{for(let t=s;t<n.length;++t)n[t].callback(e)},i=t.allNoop&&0===s?n:o(n,s);i.allBuffers=t.allBuffers,P(e,t,!0,t.length,i,"",r),L(t)}else{do{const{chunk:r,encoding:o,callback:a}=n[s];n[s++]=null;const l=i?1:r.length;P(e,t,!1,l,r,o,a)}while(s<n.length&&!t.writing);s===n.length?L(t):s>256?(n.splice(0,s),t.bufferedIndex=0):t.bufferedIndex=s}t.bufferProcessing=!1}function B(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function V(e,t){let n=!1;function o(o){if(n)N(e,null!==o&&void 0!==o?o:_());else if(n=!0,t.pendingcb--,o){const n=t[k].splice(0);for(let e=0;e<n.length;e++)n[e](o);N(e,o,t.sync)}else B(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,r.nextTick(z,e,t))}t.sync=!0,t.pendingcb++;try{e._final(o)}catch(i){o(i)}t.sync=!1}function G(e,t){t.prefinished||t.finalCalled||("function"!==typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,V(e,t)))}function q(e,t,n){B(t)&&(G(e,t),0===t.pendingcb&&(n?(t.pendingcb++,r.nextTick(((e,t)=>{B(t)?z(e,t):t.pendingcb--}),e,t)):B(t)&&(t.pendingcb++,z(e,t))))}function z(e,t){t.pendingcb--,t.finished=!0;const n=t[k].splice(0);for(let r=0;r<n.length;r++)n[r]();if(e.emit("finish"),t.autoDestroy){const t=e._readableState,n=!t||t.autoDestroy&&(t.endEmitted||!1===t.readable);n&&e.destroy()}}D.prototype.getBuffer=function(){return o(this.buffered,this.bufferedIndex)},s(D.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),s(T,f,{__proto__:null,value:function(e){return!!a(this,e)||this===T&&(e&&e._writableState instanceof D)}}),T.prototype.pipe=function(){N(this,new S)},T.prototype.write=function(e,t,n){return!0===C(this,e,t,n)},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){const e=this._writableState;e.corked&&(e.corked--,e.writing||$(this,e))},T.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=d(e)),!g.isEncoding(e))throw new A(e);return this._writableState.defaultEncoding=e,this},T.prototype._write=function(e,t,n){if(!this._writev)throw new x("_write()");this._writev([{chunk:e,encoding:t}],n)},T.prototype._writev=null,T.prototype.end=function(e,t,n){const o=this._writableState;let a;if("function"===typeof e?(n=e,e=null,t=null):"function"===typeof t&&(n=t,t=null),null!==e&&void 0!==e){const n=C(this,e,t);n instanceof i&&(a=n)}return o.corked&&(o.corked=1,this.uncork()),a||(o.errored||o.ending?o.finished?a=new R("end"):o.destroyed&&(a=new E("end")):(o.ending=!0,q(this,o,!0),o.ended=!0)),"function"===typeof n&&(a||o.finished?r.nextTick(n,a):o[k].push(n)),this},l(T.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){const e=this._writableState;return!!e&&!1!==e.writable&&!e.destroyed&&!e.errored&&!e.ending&&!e.ended},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const e=this._writableState;return!!e&&(!e.destroyed&&!e.ending&&e.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const K=y.destroy;let X;function Y(){return void 0===X&&(X={}),X}T.prototype.destroy=function(e,t){const n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[k].length)&&r.nextTick(H,n),K.call(this,e,t),this},T.prototype._undestroy=y.undestroy,T.prototype._destroy=function(e,t){t(e)},T.prototype[p.captureRejectionSymbol]=function(e){this.destroy(e)},T.fromWeb=function(e,t){return Y().newStreamWritableFromWritableStream(e,t)},T.toWeb=function(e){return Y().newWritableStreamFromStreamWritable(e)}},95793:function(e,t,n){"use strict";const{ArrayIsArray:r,ArrayPrototypeIncludes:o,ArrayPrototypeJoin:i,ArrayPrototypeMap:a,NumberIsInteger:s,NumberIsNaN:l,NumberMAX_SAFE_INTEGER:c,NumberMIN_SAFE_INTEGER:d,NumberParseInt:u,ObjectPrototypeHasOwnProperty:f,RegExpPrototypeExec:p,String:h,StringPrototypeToUpperCase:g,StringPrototypeTrim:y}=n(53464),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:m,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:x,ERR_UNKNOWN_SIGNAL:_}}=n(52837),{normalizeEncoding:S}=n(74138),{isAsyncFunction:E,isArrayBufferView:R}=n(74138).types,I={};function j(e){return e===(0|e)}function A(e){return e===e>>>0}const N=/^[0-7]+$/,O="must be a 32-bit unsigned integer or an octal string";function k(e,t,n){if("undefined"===typeof e&&(e=n),"string"===typeof e){if(null===p(N,e))throw new w(t,e,O);e=u(e,8)}return T(e,t),e}const D=v(((e,t,n=d,r=c)=>{if("number"!==typeof e)throw new m(t,"number",e);if(!s(e))throw new x(t,"an integer",e);if(e<n||e>r)throw new x(t,`>= ${n} && <= ${r}`,e)})),L=v(((e,t,n=-2147483648,r=2147483647)=>{if("number"!==typeof e)throw new m(t,"number",e);if(!s(e))throw new x(t,"an integer",e);if(e<n||e>r)throw new x(t,`>= ${n} && <= ${r}`,e)})),T=v(((e,t,n=!1)=>{if("number"!==typeof e)throw new m(t,"number",e);if(!s(e))throw new x(t,"an integer",e);const r=n?1:0,o=4294967295;if(e<r||e>o)throw new x(t,`>= ${r} && <= ${o}`,e)}));function C(e,t){if("string"!==typeof e)throw new m(t,"string",e)}function M(e,t,n=void 0,r){if("number"!==typeof e)throw new m(t,"number",e);if(null!=n&&e<n||null!=r&&e>r||(null!=n||null!=r)&&l(e))throw new x(t,`${null!=n?`>= ${n}`:""}${null!=n&&null!=r?" && ":""}${null!=r?`<= ${r}`:""}`,e)}const P=v(((e,t,n)=>{if(!o(n,e)){const r=i(a(n,(e=>"string"===typeof e?`'${e}'`:h(e))),", "),o="must be one of: "+r;throw new w(t,e,o)}}));function F(e,t){if("boolean"!==typeof e)throw new m(t,"boolean",e)}function J(e,t,n){return null!=e&&f(e,t)?e[t]:n}const W=v(((e,t,n=null)=>{const o=J(n,"allowArray",!1),i=J(n,"allowFunction",!1),a=J(n,"nullable",!1);if(!a&&null===e||!o&&r(e)||"object"!==typeof e&&(!i||"function"!==typeof e))throw new m(t,"Object",e)})),U=v(((e,t)=>{if(null!=e&&"object"!==typeof e&&"function"!==typeof e)throw new m(t,"a dictionary",e)})),H=v(((e,t,n=0)=>{if(!r(e))throw new m(t,"Array",e);if(e.length<n){const r=`must be longer than ${n}`;throw new w(t,e,r)}}));function $(e,t){H(e,t);for(let n=0;n<e.length;n++)C(e[n],`${t}[${n}]`)}function B(e,t){H(e,t);for(let n=0;n<e.length;n++)F(e[n],`${t}[${n}]`)}function V(e,t="signal"){if(C(e,t),void 0===I[e]){if(void 0!==I[g(e)])throw new _(e+" (signals must use all capital letters)");throw new _(e)}}const G=v(((e,t="buffer")=>{if(!R(e))throw new m(t,["Buffer","TypedArray","DataView"],e)}));function q(e,t){const n=S(t),r=e.length;if("hex"===n&&r%2!==0)throw new w("encoding",t,`is invalid for data of length ${r}`)}function z(e,t="Port",n=!0){if("number"!==typeof e&&"string"!==typeof e||"string"===typeof e&&0===y(e).length||+e!==+e>>>0||e>65535||0===e&&!n)throw new b(t,e,n);return 0|e}const K=v(((e,t)=>{if(void 0!==e&&(null===e||"object"!==typeof e||!("aborted"in e)))throw new m(t,"AbortSignal",e)})),X=v(((e,t)=>{if("function"!==typeof e)throw new m(t,"Function",e)})),Y=v(((e,t)=>{if("function"!==typeof e||E(e))throw new m(t,"Function",e)})),Q=v(((e,t)=>{if(void 0!==e)throw new m(t,"undefined",e)}));function Z(e,t,n){if(!o(n,e))throw new m(t,`('${i(n,"|")}')`,e)}const ee=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function te(e,t){if("undefined"===typeof e||!p(ee,e))throw new w(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ne(e){if("string"===typeof e)return te(e,"hints"),e;if(r(e)){const t=e.length;let n="";if(0===t)return n;for(let r=0;r<t;r++){const o=e[r];te(o,"hints"),n+=o,r!==t-1&&(n+=", ")}return n}throw new w("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:j,isUint32:A,parseFileMode:k,validateArray:H,validateStringArray:$,validateBooleanArray:B,validateBoolean:F,validateBuffer:G,validateDictionary:U,validateEncoding:q,validateFunction:X,validateInt32:L,validateInteger:D,validateNumber:M,validateObject:W,validateOneOf:P,validatePlainFunction:Y,validatePort:z,validateSignalName:V,validateString:C,validateUint32:T,validateUndefined:Q,validateUnion:Z,validateAbortSignal:K,validateLinkHeaderValue:ne}},57164:function(e,t,n){"use strict";const r=n(17373),o=n(97019),i=r.Readable.destroy;e.exports=r.Readable,e.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,e.exports._isUint8Array=r._isUint8Array,e.exports.isDisturbed=r.isDisturbed,e.exports.isErrored=r.isErrored,e.exports.isReadable=r.isReadable,e.exports.Readable=r.Readable,e.exports.Writable=r.Writable,e.exports.Duplex=r.Duplex,e.exports.Transform=r.Transform,e.exports.PassThrough=r.PassThrough,e.exports.addAbortSignal=r.addAbortSignal,e.exports.finished=r.finished,e.exports.destroy=r.destroy,e.exports.destroy=i,e.exports.pipeline=r.pipeline,e.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get(){return o}}),e.exports.Stream=r.Stream,e.exports["default"]=e.exports},52837:function(e,t,n){"use strict";const{format:r,inspect:o,AggregateError:i}=n(74138),a=globalThis.AggregateError||i,s=Symbol("kIsNodeError"),l=["string","function","number","object","Function","Object","boolean","bigint","symbol"],c=/^([A-Z][a-z0-9]*)+$/,d="__node_internal_",u={};function f(e,t){if(!e)throw new u.ERR_INTERNAL_ASSERTION(t)}function p(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function h(e,t,n){if("function"===typeof t)return f(t.length<=n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${t.length}).`),t(...n);const o=(t.match(/%[dfijoOs]/g)||[]).length;return f(o===n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${o}).`),0===n.length?t:r(t,...n)}function g(e,t,n){n||(n=Error);class r extends n{constructor(...n){super(h(e,t,n))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=e,r.prototype[s]=!0,u[e]=r}function y(e){const t=d+e.name;return Object.defineProperty(e,"name",{value:t}),e}function v(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const n=new a([t,e],t.message);return n.code=t.code,n}return e||t}class b extends Error{constructor(e="The operation was aborted",t=void 0){if(void 0!==t&&"object"!==typeof t)throw new u.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}g("ERR_ASSERTION","%s",Error),g("ERR_INVALID_ARG_TYPE",((e,t,n)=>{f("string"===typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let r="The ";e.endsWith(" argument")?r+=`${e} `:r+=`"${e}" ${e.includes(".")?"property":"argument"} `,r+="must be ";const i=[],a=[],s=[];for(const o of t)f("string"===typeof o,"All expected entries have to be of type string"),l.includes(o)?i.push(o.toLowerCase()):c.test(o)?a.push(o):(f("object"!==o,'The value "object" should be written as "Object"'),s.push(o));if(a.length>0){const e=i.indexOf("object");-1!==e&&(i.splice(i,e,1),a.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{const e=i.pop();r+=`one of type ${i.join(", ")}, or ${e}`}}(a.length>0||s.length>0)&&(r+=" or ")}if(a.length>0){switch(a.length){case 1:r+=`an instance of ${a[0]}`;break;case 2:r+=`an instance of ${a[0]} or ${a[1]}`;break;default:{const e=a.pop();r+=`an instance of ${a.join(", ")}, or ${e}`}}s.length>0&&(r+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(r+="an "),r+=`${s[0]}`;break;case 2:r+=`one of ${s[0]} or ${s[1]}`;break;default:{const e=s.pop();r+=`one of ${s.join(", ")}, or ${e}`}}if(null==n)r+=`. Received ${n}`;else if("function"===typeof n&&n.name)r+=`. Received function ${n.name}`;else if("object"===typeof n){var d;if(null!==(d=n.constructor)&&void 0!==d&&d.name)r+=`. Received an instance of ${n.constructor.name}`;else{const e=o(n,{depth:-1});r+=`. Received ${e}`}}else{let e=o(n,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),r+=`. Received type ${typeof n} (${e})`}return r}),TypeError),g("ERR_INVALID_ARG_VALUE",((e,t,n="is invalid")=>{let r=o(t);r.length>128&&(r=r.slice(0,128)+"...");const i=e.includes(".")?"property":"argument";return`The ${i} '${e}' ${n}. Received ${r}`}),TypeError),g("ERR_INVALID_RETURN_VALUE",((e,t,n)=>{var r;const o=null!==n&&void 0!==n&&null!==(r=n.constructor)&&void 0!==r&&r.name?`instance of ${n.constructor.name}`:"type "+typeof n;return`Expected ${e} to be returned from the "${t}" function but got ${o}.`}),TypeError),g("ERR_MISSING_ARGS",((...e)=>{let t;f(e.length>0,"At least one arg needs to be specified");const n=e.length;switch(e=(Array.isArray(e)?e:[e]).map((e=>`"${e}"`)).join(" or "),n){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}break}return`${t} must be specified`}),TypeError),g("ERR_OUT_OF_RANGE",((e,t,n)=>{let r;return f(t,'Missing "range" argument'),Number.isInteger(n)&&Math.abs(n)>2**32?r=p(String(n)):"bigint"===typeof n?(r=String(n),(n>2n**32n||n<-(2n**32n))&&(r=p(r)),r+="n"):r=o(n),`The value of "${e}" is out of range. It must be ${t}. Received ${r}`}),RangeError),g("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),g("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),g("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),g("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),g("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),g("ERR_STREAM_WRITE_AFTER_END","write after end",Error),g("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:b,aggregateTwoErrors:y(v),hideStackFrames:y,codes:u}},53464:function(e){"use strict";e.exports={ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,n){return e.slice(t,n)},Error:Error,FunctionPrototypeCall(e,t,...n){return e.call(t,...n)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number:Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,n){return Object.defineProperty(e,t,n)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise:Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,n){return e.then(t,n)},PromiseReject(e){return Promise.reject(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String:String,StringPrototypeSlice(e,t,n){return e.slice(t,n)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol:Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(e,t,n){return e.set(t,n)},Uint8Array:Uint8Array}},74138:function(e,t,n){"use strict";const r=n(48764),o=Object.getPrototypeOf((async function(){})).constructor,i=globalThis.Blob||r.Blob,a="undefined"!==typeof i?function(e){return e instanceof i}:function(e){return!1};class s extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let n=0;n<e.length;n++)t+=`    ${e[n].stack}\n`;super(t),this.name="AggregateError",this.errors=e}}e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...n){t||(t=!0,e.apply(this,n))}},createDeferredPromise:function(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return{promise:n,resolve:e,reject:t}},promisify(e){return new Promise(((t,n)=>{e(((e,...r)=>e?n(e):t(...r)))}))},debuglog(){return function(){}},format(e,...t){return e.replace(/%([sdifj])/g,(function(...[e,n]){const r=t.shift();if("f"===n)return r.toFixed(6);if("j"===n)return JSON.stringify(r);if("s"===n&&"object"===typeof r){const e=r.constructor!==Object?r.constructor.name:"";return`${e} {}`.trim()}return r.toString()}))},inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}},types:{isAsyncFunction(e){return e instanceof o},isArrayBufferView(e){return ArrayBuffer.isView(e)}},isBlob:a},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},17373:function(e,t,n){const{Buffer:r}=n(48764),{ObjectDefineProperty:o,ObjectKeys:i,ReflectApply:a}=n(53464),{promisify:{custom:s}}=n(74138),{streamReturningOperators:l,promiseReturningOperators:c}=n(71902),{codes:{ERR_ILLEGAL_CONSTRUCTOR:d}}=n(52837),u=n(73705),{pipeline:f}=n(93101),{destroyer:p}=n(28697),h=n(14434),g=n(97019),y=n(25066),v=e.exports=n(78951).Stream;v.isDisturbed=y.isDisturbed,v.isErrored=y.isErrored,v.isReadable=y.isReadable,v.Readable=n(75009);for(const w of i(l)){const x=l[w];function b(...e){if(new.target)throw d();return v.Readable.from(a(x,this,e))}o(b,"name",{__proto__:null,value:x.name}),o(b,"length",{__proto__:null,value:x.length}),o(v.Readable.prototype,w,{__proto__:null,value:b,enumerable:!1,configurable:!0,writable:!0})}for(const _ of i(c)){const S=c[_];function b(...e){if(new.target)throw d();return a(S,this,e)}o(b,"name",{__proto__:null,value:S.name}),o(b,"length",{__proto__:null,value:S.length}),o(v.Readable.prototype,_,{__proto__:null,value:b,enumerable:!1,configurable:!0,writable:!0})}v.Writable=n(51572),v.Duplex=n(41928),v.Transform=n(53606),v.PassThrough=n(75955),v.pipeline=f;const{addAbortSignal:m}=n(86053);v.addAbortSignal=m,v.finished=h,v.destroy=p,v.compose=u,o(v,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return g}}),o(f,s,{__proto__:null,enumerable:!0,get(){return g.pipeline}}),o(h,s,{__proto__:null,enumerable:!0,get(){return g.finished}}),v.Stream=v,v._isUint8Array=function(e){return e instanceof Uint8Array},v._uint8ArrayToBuffer=function(e){return r.from(e.buffer,e.byteOffset,e.byteLength)}},97019:function(e,t,n){"use strict";const{ArrayPrototypePop:r,Promise:o}=n(53464),{isIterable:i,isNodeStream:a,isWebStream:s}=n(25066),{pipelineImpl:l}=n(93101),{finished:c}=n(14434);function d(...e){return new o(((t,n)=>{let o,c;const d=e[e.length-1];if(d&&"object"===typeof d&&!a(d)&&!i(d)&&!s(d)){const t=r(e);o=t.signal,c=t.end}l(e,((e,r)=>{e?n(e):t(r)}),{signal:o,end:c})}))}n(42830),e.exports={finished:c,pipeline:d}},95456:function(e){"use strict";e.exports=function e(t){return null===t||"object"!==typeof t||null!=t.toJSON?JSON.stringify(t):Array.isArray(t)?"["+t.reduce(((t,n,r)=>{const o=0===r?"":",",i=void 0===n||"symbol"===typeof n?null:n;return t+o+e(i)}),"")+"]":"{"+Object.keys(t).sort().reduce(((n,r,o)=>{if(void 0===t[r]||"symbol"===typeof t[r])return n;const i=0===n.length?"":",";return n+i+e(r)+":"+e(t[r])}),"")+"}"}},68058:function(e,t,n){"use strict";const{isArray:r,isObject:o,isString:i}=n(30832),{asArray:a}=n(51055),{prependBase:s}=n(82278),l=n(54093),c=n(26767),d=10;function u(e){throw new l("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:e})}function f({context:e,base:t}){if(!e)return;const n=e["@context"];if(i(n))e["@context"]=s(t,n);else if(r(n))for(let r=0;r<n.length;++r){const e=n[r];i(e)?n[r]=s(t,e):o(e)&&f({context:{"@context":e},base:t})}else if(o(n))for(const r in n)f({context:n[r],base:t})}e.exports=class{constructor({sharedCache:e}){this.perOpCache=new Map,this.sharedCache=e}async resolve({activeCtx:e,context:t,documentLoader:n,base:s,cycles:l=new Set}){t&&o(t)&&t["@context"]&&(t=t["@context"]),t=a(t);const d=[];for(const a of t){if(i(a)){let t=this._get(a);t||(t=await this._resolveRemoteContext({activeCtx:e,url:a,documentLoader:n,base:s,cycles:l})),r(t)?d.push(...t):d.push(t);continue}if(null===a){d.push(new c({document:null}));continue}o(a)||u(t);const f=JSON.stringify(a);let p=this._get(f);p||(p=new c({document:a}),this._cacheResolvedContext({key:f,resolved:p,tag:"static"})),d.push(p)}return d}_get(e){let t=this.perOpCache.get(e);if(!t){const n=this.sharedCache.get(e);n&&(t=n.get("static"),t&&this.perOpCache.set(e,t))}return t}_cacheResolvedContext({key:e,resolved:t,tag:n}){if(this.perOpCache.set(e,t),void 0!==n){let r=this.sharedCache.get(e);r||(r=new Map,this.sharedCache.set(e,r)),r.set(n,t)}return t}async _resolveRemoteContext({activeCtx:e,url:t,documentLoader:n,base:r,cycles:o}){t=s(r,t);const{context:i,remoteDoc:a}=await this._fetchContext({activeCtx:e,url:t,documentLoader:n,cycles:o});r=a.documentUrl||t,f({context:i,base:r});const l=await this.resolve({activeCtx:e,context:i,documentLoader:n,base:r,cycles:o});return this._cacheResolvedContext({key:t,resolved:l,tag:a.tag}),l}async _fetchContext({activeCtx:e,url:t,documentLoader:n,cycles:a}){if(a.size>d)throw new l("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"loading remote context failed":"context overflow",max:d});if(a.has(t))throw new l("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"recursive context inclusion":"context overflow",url:t});let s,c;a.add(t);try{c=await n(t),s=c.document||null,i(s)&&(s=JSON.parse(s))}catch(u){throw new l("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:t,cause:u})}if(!o(s))throw new l("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:t});return s="@context"in s?{"@context":s["@context"]}:{"@context":{}},c.contextUrl&&(r(s["@context"])||(s["@context"]=[s["@context"]]),s["@context"].push(c.contextUrl)),{context:s,remoteDoc:c}}}},54093:function(e){"use strict";e.exports=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",t="jsonld.Error",n={}){super(e),this.name=t,this.message=e,this.details=n}}},60731:function(e){"use strict";e.exports=e=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(t,n){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(t,n)},t.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(t)},t.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(t)},t}},69048:function(e,t,n){"use strict";e.exports=n(47055).NQuads},40533:function(e){"use strict";e.exports=class{constructor(){this._requests={}}wrapLoader(e){const t=this;return t._loader=e,function(){return t.add.apply(t,arguments)}}async add(e){let t=this._requests[e];if(t)return Promise.resolve(t);t=this._requests[e]=this._loader(e);try{return await t}finally{delete this._requests[e]}}}},26767:function(e,t,n){"use strict";const r=n(80421),o=10;e.exports=class{constructor({document:e}){this.document=e,this.cache=new r({max:o})}getProcessed(e){return this.cache.get(e)}setProcessed(e,t){this.cache.set(e,t)}}},83251:function(e,t,n){"use strict";const r=n(54093),{isArray:o,isObject:i,isString:a,isUndefined:s}=n(30832),{isList:l,isValue:c,isGraph:d,isSimpleGraph:u,isSubjectReference:f}=n(18463),{expandIri:p,getContextValue:h,isKeyword:g,process:y,processingMode:v}=n(54131),{removeBase:b,prependBase:m}=n(82278),{REGEX_KEYWORD:w,addValue:x,asArray:_,compareShortestLeast:S}=n(51055),E={};function R(e,t,n,r,o,a){null===a&&(a="@null");const s=[];if(("@id"===a||"@reverse"===a)&&i(n)&&"@id"in n){"@reverse"===a&&s.push("@reverse");const t=E.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:!0}});e.mappings.has(t)&&e.mappings.get(t)&&e.mappings.get(t)["@id"]===n["@id"]?s.push.apply(s,["@vocab","@id"]):s.push.apply(s,["@id","@vocab"])}else{s.push(a);const e=s.find((e=>e.includes("_")));e&&s.push(e.replace(/^[^_]+_/,"_"))}s.push("@none");const l=e.inverse[t];for(const i of r){if(!(i in l))continue;const e=l[i][o];for(const t of s)if(t in e)return e[t]}return null}function I(e,t,n){if("@nest"!==p(e,t,{vocab:!0},n))throw new r("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}e.exports=E,E.compact=async({activeCtx:e,activeProperty:t=null,element:n,options:p={}})=>{if(o(n)){let r=[];for(let o=0;o<n.length;++o){const i=await E.compact({activeCtx:e,activeProperty:t,element:n[o],options:p});null!==i&&r.push(i)}if(p.compactArrays&&1===r.length){const n=h(e,t,"@container")||[];0===n.length&&(r=r[0])}return r}const b=h(e,t,"@context");if(s(b)||(e=await y({activeCtx:e,localCtx:b,propagate:!0,overrideProtected:!0,options:p})),i(n)){if(p.link&&"@id"in n&&p.link.hasOwnProperty(n["@id"])){const e=p.link[n["@id"]];for(let t=0;t<e.length;++t)if(e[t].expanded===n)return e[t].compacted}if(c(n)||f(n)){const r=E.compactValue({activeCtx:e,activeProperty:t,value:n,options:p});return p.link&&f(n)&&(p.link.hasOwnProperty(n["@id"])||(p.link[n["@id"]]=[]),p.link[n["@id"]].push({expanded:n,compacted:r})),r}if(l(n)){const r=h(e,t,"@container")||[];if(r.includes("@list"))return E.compact({activeCtx:e,activeProperty:t,element:n["@list"],options:p})}const b="@reverse"===t,m={},w=e;c(n)||f(n)||(e=e.revertToPreviousContext());const S=h(w,t,"@context");s(S)||(e=await y({activeCtx:e,localCtx:S,propagate:!0,overrideProtected:!0,options:p})),p.link&&"@id"in n&&(p.link.hasOwnProperty(n["@id"])||(p.link[n["@id"]]=[]),p.link[n["@id"]].push({expanded:n,compacted:m}));let R=n["@type"]||[];R.length>1&&(R=Array.from(R).sort());const j=e;for(const t of R){const n=E.compactIri({activeCtx:j,iri:t,relativeTo:{vocab:!0}}),r=h(w,n,"@context");s(r)||(e=await y({activeCtx:e,localCtx:r,options:p,propagate:!1}))}const A=Object.keys(n).sort();for(const s of A){const f=n[s];if("@id"!==s)if("@type"!==s)if("@reverse"!==s)if("@preserve"!==s)if("@index"!==s)if("@graph"!==s&&"@list"!==s&&"@included"!==s&&g(s)){const t=E.compactIri({activeCtx:e,iri:s,relativeTo:{vocab:!0}});x(m,t,f)}else{if(!o(f))throw new r("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===f.length){const t=E.compactIri({activeCtx:e,iri:s,value:f,relativeTo:{vocab:!0},reverse:b}),n=e.mappings.has(t)?e.mappings.get(t)["@nest"]:null;let r=m;n&&(I(e,n,p),i(m[n])||(m[n]={}),r=m[n]),x(r,t,f,{propertyIsArray:!0})}for(const t of f){const n=E.compactIri({activeCtx:e,iri:s,value:t,relativeTo:{vocab:!0},reverse:b}),r=e.mappings.has(n)?e.mappings.get(n)["@nest"]:null;let f=m;r&&(I(e,r,p),i(m[r])||(m[r]={}),f=m[r]);const g=h(e,n,"@container")||[],y=d(t),v=l(t);let w;v?w=t["@list"]:y&&(w=t["@graph"]);let S=await E.compact({activeCtx:e,activeProperty:n,element:v||y?w:t,options:p});if(v){if(o(S)||(S=[S]),g.includes("@list")){x(f,n,S,{valueIsArray:!0,allowDuplicate:!0});continue}S={[E.compactIri({activeCtx:e,iri:"@list",relativeTo:{vocab:!0}})]:S},"@index"in t&&(S[E.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"])}if(y)if(g.includes("@graph")&&(g.includes("@id")||g.includes("@index")&&u(t))){let r;f.hasOwnProperty(n)?r=f[n]:f[n]=r={};const o=(g.includes("@id")?t["@id"]:t["@index"])||E.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}});x(r,o,S,{propertyIsArray:!p.compactArrays||g.includes("@set")})}else g.includes("@graph")&&u(t)?(o(S)&&S.length>1&&(S={"@included":S}),x(f,n,S,{propertyIsArray:!p.compactArrays||g.includes("@set")})):(o(S)&&1===S.length&&p.compactArrays&&(S=S[0]),S={[E.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}})]:S},"@id"in t&&(S[E.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=t["@id"]),"@index"in t&&(S[E.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"]),x(f,n,S,{propertyIsArray:!p.compactArrays||g.includes("@set")}));else if(g.includes("@language")||g.includes("@index")||g.includes("@id")||g.includes("@type")){let r,o;if(f.hasOwnProperty(n)?r=f[n]:f[n]=r={},g.includes("@language"))c(S)&&(S=S["@value"]),o=t["@language"];else if(g.includes("@index")){const r=h(e,n,"@index")||"@index",i=E.compactIri({activeCtx:e,iri:r,relativeTo:{vocab:!0}});if("@index"===r)o=t["@index"],delete S[i];else{let e;if([o,...e]=_(S[r]||[]),a(o))switch(e.length){case 0:delete S[r];break;case 1:S[r]=e[0];break;default:S[r]=e;break}else o=null}}else if(g.includes("@id")){const t=E.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});o=S[t],delete S[t]}else if(g.includes("@type")){const r=E.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}});let i;switch([o,...i]=_(S[r]||[]),i.length){case 0:delete S[r];break;case 1:S[r]=i[0];break;default:S[r]=i;break}1===Object.keys(S).length&&"@id"in t&&(S=await E.compact({activeCtx:e,activeProperty:n,element:{"@id":t["@id"]},options:p}))}o||(o=E.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}})),x(r,o,S,{propertyIsArray:g.includes("@set")})}else{const e=!p.compactArrays||g.includes("@set")||g.includes("@list")||o(S)&&0===S.length||"@list"===s||"@graph"===s;x(f,n,S,{propertyIsArray:e})}}}else{const n=h(e,t,"@container")||[];if(n.includes("@index"))continue;const r=E.compactIri({activeCtx:e,iri:s,relativeTo:{vocab:!0}});x(m,r,f)}else{const n=await E.compact({activeCtx:e,activeProperty:t,element:f,options:p});o(n)&&0===n.length||x(m,s,n)}else{const t=await E.compact({activeCtx:e,activeProperty:"@reverse",element:f,options:p});for(const n in t)if(e.mappings.has(n)&&e.mappings.get(n).reverse){const r=t[n],o=h(e,n,"@container")||[],i=o.includes("@set")||!p.compactArrays;x(m,n,r,{propertyIsArray:i}),delete t[n]}if(Object.keys(t).length>0){const n=E.compactIri({activeCtx:e,iri:s,relativeTo:{vocab:!0}});x(m,n,t)}}else{let t=_(f).map((e=>E.compactIri({activeCtx:w,iri:e,relativeTo:{vocab:!0}})));1===t.length&&(t=t[0]);const n=E.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}}),r=h(e,n,"@container")||[],i=r.includes("@set")&&v(e,1.1),a=i||o(t)&&0===f.length;x(m,n,t,{propertyIsArray:a})}else{let t=_(f).map((t=>E.compactIri({activeCtx:e,iri:t,relativeTo:{vocab:!1},base:p.base})));1===t.length&&(t=t[0]);const n=E.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});m[n]=t}}return m}return n},E.compactIri=({activeCtx:e,iri:t,value:n=null,relativeTo:o={vocab:!1},reverse:a=!1,base:s=null})=>{if(null===t)return t;e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext);const u=e.getInverse();if(g(t)&&t in u&&"@none"in u[t]&&"@type"in u[t]["@none"]&&"@none"in u[t]["@none"]["@type"])return u[t]["@none"]["@type"]["@none"];if(o.vocab&&t in u){const r=e["@language"]||"@none",o=[];i(n)&&"@index"in n&&!("@graph"in n)&&o.push("@index","@index@set"),i(n)&&"@preserve"in n&&(n=n["@preserve"][0]),d(n)?("@index"in n&&o.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n&&o.push("@graph@id","@graph@id@set"),o.push("@graph","@graph@set","@set"),"@index"in n||o.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n||o.push("@graph@id","@graph@id@set")):i(n)&&!c(n)&&o.push("@id","@id@set","@type","@set@type");let s="@language",u="@null";if(a)s="@type",u="@reverse",o.push("@set");else if(l(n)){"@index"in n||o.push("@list");const e=n["@list"];if(0===e.length)s="@any",u="@none";else{let t=0===e.length?r:null,n=null;for(let r=0;r<e.length;++r){const o=e[r];let i="@none",a="@none";if(c(o))if("@direction"in o){const e=(o["@language"]||"").toLowerCase(),t=o["@direction"];i=`${e}_${t}`}else"@language"in o?i=o["@language"].toLowerCase():"@type"in o?a=o["@type"]:i="@null";else a="@id";if(null===t?t=i:i!==t&&c(o)&&(t="@none"),null===n?n=a:a!==n&&(n="@none"),"@none"===t&&"@none"===n)break}t=t||"@none",n=n||"@none","@none"!==n?(s="@type",u=n):u=t}}else{if(c(n))if("@language"in n&&!("@index"in n)){o.push("@language","@language@set"),u=n["@language"];const e=n["@direction"];e&&(u=`${u}_${e}`)}else"@direction"in n&&!("@index"in n)?u=`_${n["@direction"]}`:"@type"in n&&(s="@type",u=n["@type"]);else s="@type",u="@id";o.push("@set")}o.push("@none"),i(n)&&!("@index"in n)&&o.push("@index","@index@set"),c(n)&&1===Object.keys(n).length&&o.push("@language","@language@set");const f=R(e,t,n,o,s,u);if(null!==f)return f}if(o.vocab&&"@vocab"in e){const n=e["@vocab"];if(0===t.indexOf(n)&&t!==n){const r=t.substr(n.length);if(!e.mappings.has(r))return r}}let f=null;const p=[];let h=e.fastCurieMap;const y=t.length-1;for(let r=0;r<y&&t[r]in h;++r)h=h[t[r]],""in h&&p.push(h[""][0]);for(let r=p.length-1;r>=0;--r){const o=p[r],i=o.terms;for(const r of i){const i=r+":"+t.substr(o.iri.length),a=e.mappings.get(r)._prefix&&(!e.mappings.has(i)||null===n&&e.mappings.get(i)["@id"]===t);a&&(null===f||S(i,f)<0)&&(f=i)}}if(null!==f)return f;for(const[i,l]of e.mappings)if(l&&l._prefix&&t.startsWith(i+":"))throw new r(`Absolute IRI "${t}" confused with prefix "${i}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:e});if(!o.vocab){if("@base"in e){if(e["@base"]){const n=b(m(s,e["@base"]),t);return w.test(n)?`./${n}`:n}return t}return b(s,t)}return t},E.compactValue=({activeCtx:e,activeProperty:t,value:n,options:r})=>{if(c(n)){const r=h(e,t,"@type"),o=h(e,t,"@language"),i=h(e,t,"@direction"),s=h(e,t,"@container")||[],l="@index"in n&&!s.includes("@index");if(!l&&"@none"!==r){if(n["@type"]===r)return n["@value"];if("@language"in n&&n["@language"]===o&&"@direction"in n&&n["@direction"]===i)return n["@value"];if("@language"in n&&n["@language"]===o)return n["@value"];if("@direction"in n&&n["@direction"]===i)return n["@value"]}const c=Object.keys(n).length,d=1===c||2===c&&"@index"in n&&!l,u="@language"in e,f=a(n["@value"]),p=e.mappings.has(t)&&null===e.mappings.get(t)["@language"];if(d&&"@none"!==r&&(!u||!f||p))return n["@value"];const g={};return l&&(g[E.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=n["@index"]),"@type"in n?g[E.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}})]=E.compactIri({activeCtx:e,iri:n["@type"],relativeTo:{vocab:!0}}):"@language"in n&&(g[E.compactIri({activeCtx:e,iri:"@language",relativeTo:{vocab:!0}})]=n["@language"]),"@direction"in n&&(g[E.compactIri({activeCtx:e,iri:"@direction",relativeTo:{vocab:!0}})]=n["@direction"]),g[E.compactIri({activeCtx:e,iri:"@value",relativeTo:{vocab:!0}})]=n["@value"],g}const o=p(e,t,{vocab:!0},r),i=h(e,t,"@type"),s=E.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:"@vocab"===i},base:r.base});return"@id"===i||"@vocab"===i||"@graph"===o?s:{[E.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]:s}}},93770:function(e){"use strict";const t="http://www.w3.org/1999/02/22-rdf-syntax-ns#",n="http://www.w3.org/2001/XMLSchema#";e.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:t,RDF_LIST:t+"List",RDF_FIRST:t+"first",RDF_REST:t+"rest",RDF_NIL:t+"nil",RDF_TYPE:t+"type",RDF_PLAIN_LITERAL:t+"PlainLiteral",RDF_XML_LITERAL:t+"XMLLiteral",RDF_JSON_LITERAL:t+"JSON",RDF_OBJECT:t+"object",RDF_LANGSTRING:t+"langString",XSD:n,XSD_BOOLEAN:n+"boolean",XSD_DOUBLE:n+"double",XSD_INTEGER:n+"integer",XSD_STRING:n+"string"}},54131:function(e,t,n){"use strict";const r=n(51055),o=n(54093),{isArray:i,isObject:a,isString:s,isUndefined:l}=n(30832),{isAbsolute:c,isRelative:d,prependBase:u}=n(82278),{handleEvent:f}=n(91696),{REGEX_BCP47:p,REGEX_KEYWORD:h,asArray:g,compareShortestLeast:y}=n(51055),v=new Map,b=1e4,m={};function w(e,t,n,r,o,i){if(null===t||!s(t)||m.isKeyword(t))return t;if(t.match(h))return null;if(r&&r.hasOwnProperty(t)&&!0!==o.get(t)&&m.createTermDefinition({activeCtx:e,localCtx:r,term:t,defined:o,options:i}),n=n||{},n.vocab){const n=e.mappings.get(t);if(null===n)return null;if(a(n)&&"@id"in n)return n["@id"]}const l=t.indexOf(":");if(l>0){const n=t.substr(0,l),a=t.substr(l+1);if("_"===n||0===a.indexOf("//"))return t;r&&r.hasOwnProperty(n)&&m.createTermDefinition({activeCtx:e,localCtx:r,term:n,defined:o,options:i});const s=e.mappings.get(n);if(s&&s._prefix)return s["@id"]+a;if(c(t))return t}if(n.vocab&&"@vocab"in e){const n=e["@vocab"]+t;t=n}else if(n.base){let n,r;"@base"in e?e["@base"]?(r=u(i.base,e["@base"]),n=u(r,t)):(r=e["@base"],n=t):(r=i.base,n=u(i.base,t)),t=n}return t}function x(e,t){if(!e||"object"!==typeof e||!t||"object"!==typeof t)return e===t;const n=Array.isArray(e);if(n!==Array.isArray(t))return!1;if(n){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!x(e[n],t[n]))return!1;return!0}const r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(const i in e){let n=e[i],r=t[i];if("@container"===i&&Array.isArray(n)&&Array.isArray(r)&&(n=n.slice().sort(),r=r.slice().sort()),!x(n,r))return!1}return!0}e.exports=m,m.process=async({activeCtx:e,localCtx:t,options:n,propagate:r=!0,overrideProtected:l=!1,cycles:h=new Set})=>{a(t)&&"@context"in t&&i(t["@context"])&&(t=t["@context"]);const y=g(t);if(0===y.length)return e;const v=[],b=[({event:e,next:t})=>{v.push(e),t()}];n.eventHandler&&b.push(n.eventHandler);const x=n;n={...n,eventHandler:b};const _=await n.contextResolver.resolve({activeCtx:e,context:t,documentLoader:n.documentLoader,base:n.base});a(_[0].document)&&"boolean"===typeof _[0].document["@propagate"]&&(r=_[0].document["@propagate"]);let S=e;r||S.previousContext||(S=S.clone(),S.previousContext=e);for(const i of _){let{document:r}=i;if(e=S,null===r){if(!l&&0!==Object.keys(e.protected).length)throw new o("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});S=e=m.getInitialContext(n).clone();continue}const g=i.getProcessed(e);if(g){if(x.eventHandler)for(const e of g.events)f({event:e,options:x});S=e=g.context;continue}if(a(r)&&"@context"in r&&(r=r["@context"]),!a(r))throw new o("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:r});S=S.clone();const y=new Map;if("@version"in r){if(1.1!==r["@version"])throw new o("Unsupported JSON-LD version: "+r["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:r});if(e.processingMode&&"json-ld-1.0"===e.processingMode)throw new o("@version: "+r["@version"]+" not compatible with "+e.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:r});S.processingMode="json-ld-1.1",S["@version"]=r["@version"],y.set("@version",!0)}if(S.processingMode=S.processingMode||e.processingMode,"@base"in r){let e=r["@base"];if(null===e||c(e));else{if(!d(e))throw new o('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:r});e=u(S["@base"],e)}S["@base"]=e,y.set("@base",!0)}if("@vocab"in r){const e=r["@vocab"];if(null===e)delete S["@vocab"];else{if(!s(e))throw new o('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:r});if(!c(e)&&m.processingMode(S,1))throw new o('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:r});{const t=w(S,e,{vocab:!0,base:!0},void 0,void 0,n);c(t)||n.eventHandler&&f({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:t}},options:n}),S["@vocab"]=t}}y.set("@vocab",!0)}if("@language"in r){const e=r["@language"];if(null===e)delete S["@language"];else{if(!s(e))throw new o('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:r});e.match(p)||n.eventHandler&&f({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:e}},options:n}),S["@language"]=e.toLowerCase()}y.set("@language",!0)}if("@direction"in r){const t=r["@direction"];if("json-ld-1.0"===e.processingMode)throw new o("Invalid JSON-LD syntax; @direction not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:r});if(null===t)delete S["@direction"];else{if("ltr"!==t&&"rtl"!==t)throw new o('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:r});S["@direction"]=t}y.set("@direction",!0)}if("@propagate"in r){const n=r["@propagate"];if("json-ld-1.0"===e.processingMode)throw new o("Invalid JSON-LD syntax; @propagate not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:r});if("boolean"!==typeof n)throw new o("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:t});y.set("@propagate",!0)}if("@import"in r){const i=r["@import"];if("json-ld-1.0"===e.processingMode)throw new o("Invalid JSON-LD syntax; @import not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:r});if(!s(i))throw new o("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:t});const a=await n.contextResolver.resolve({activeCtx:e,context:i,documentLoader:n.documentLoader,base:n.base});if(1!==a.length)throw new o("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:t});const l=a[0].getProcessed(e);if(l)r=l;else{const n=a[0].document;if("@import"in n)throw new o("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:t});for(const e in n)r.hasOwnProperty(e)||(r[e]=n[e]);a[0].setProcessed(e,r)}y.set("@import",!0)}y.set("@protected",r["@protected"]||!1);for(const e in r)if(m.createTermDefinition({activeCtx:S,localCtx:r,term:e,defined:y,options:n,overrideProtected:l}),a(r[e])&&"@context"in r[e]){const t=r[e]["@context"];let i=!0;if(s(t)){const e=u(n.base,t);h.has(e)?i=!1:h.add(e)}if(i)try{await m.process({activeCtx:S.clone(),localCtx:r[e]["@context"],overrideProtected:!0,options:n,cycles:h})}catch(E){throw new o("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:r[e]["@context"],term:e})}}i.setProcessed(e,{context:S,events:v})}return S},m.createTermDefinition=({activeCtx:e,localCtx:t,term:n,defined:r,options:l,overrideProtected:d=!1})=>{if(r.has(n)){if(r.get(n))return;throw new o("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:n})}let u;if(r.set(n,!1),t.hasOwnProperty(n)&&(u=t[n]),"@type"===n&&a(u)&&"@set"===(u["@container"]||"@set")&&m.processingMode(e,1.1)){const e=["@container","@id","@protected"],r=Object.keys(u);if(0===r.length||r.some((t=>!e.includes(t))))throw new o("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n})}else{if(m.isKeyword(n))throw new o("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n});if(n.match(h))return void(l.eventHandler&&f({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:n}},options:l}));if(""===n)throw new o("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t})}const p=e.mappings.get(n);e.mappings.has(n)&&e.mappings.delete(n);let g=!1;if((s(u)||null===u)&&(g=!0,u={"@id":u}),!a(u))throw new o("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});const y={};e.mappings.set(n,y),y.reverse=!1;const v=["@container","@id","@language","@reverse","@type"];m.processingMode(e,1.1)&&v.push("@context","@direction","@index","@nest","@prefix","@protected");for(const i in u)if(!v.includes(i))throw new o("Invalid JSON-LD syntax; a term definition must not contain "+i,"jsonld.SyntaxError",{code:"invalid term definition",context:t});const b=n.indexOf(":");if(y._termHasColon=b>0,"@reverse"in u){if("@id"in u)throw new o("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});if("@nest"in u)throw new o("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});const i=u["@reverse"];if(!s(i))throw new o("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(i.match(h))return l.eventHandler&&f({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:i}},options:l}),void(p?e.mappings.set(n,p):e.mappings.delete(n));const a=w(e,i,{vocab:!0,base:!1},t,r,l);if(!c(a))throw new o("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});y["@id"]=a,y.reverse=!0}else if("@id"in u){let i=u["@id"];if(i&&!s(i))throw new o("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(null===i)y["@id"]=null;else{if(!m.isKeyword(i)&&i.match(h))return l.eventHandler&&f({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:i}},options:l}),void(p?e.mappings.set(n,p):e.mappings.delete(n));if(i!==n){if(i=w(e,i,{vocab:!0,base:!1},t,r,l),!c(i)&&!m.isKeyword(i))throw new o("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(n.match(/(?::[^:])|\//)){const a=new Map(r).set(n,!0),s=w(e,n,{vocab:!0,base:!1},t,a,l);if(s!==i)throw new o("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t})}y["@id"]=i,y._prefix=g&&!y._termHasColon&&i.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in y))if(y._termHasColon){const o=n.substr(0,b);if(t.hasOwnProperty(o)&&m.createTermDefinition({activeCtx:e,localCtx:t,term:o,defined:r,options:l}),e.mappings.has(o)){const t=n.substr(b+1);y["@id"]=e.mappings.get(o)["@id"]+t}else y["@id"]=n}else if("@type"===n)y["@id"]=n;else{if(!("@vocab"in e))throw new o("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:n});y["@id"]=e["@vocab"]+n}if((!0===u["@protected"]||!0===r.get("@protected")&&!1!==u["@protected"])&&(e.protected[n]=!0,y.protected=!0),r.set(n,!0),"@type"in u){let n=u["@type"];if(!s(n))throw new o("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@json"===n||"@none"===n){if(m.processingMode(e,1))throw new o(`Invalid JSON-LD syntax; an @context @type value must not be "${n}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else if("@id"!==n&&"@vocab"!==n){if(n=w(e,n,{vocab:!0,base:!1},t,r,l),!c(n))throw new o("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===n.indexOf("_:"))throw new o("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}y["@type"]=n}if("@container"in u){const n=s(u["@container"])?[u["@container"]]:u["@container"]||[],r=["@list","@set","@index","@language"];let a=!0;const l=n.includes("@set");if(m.processingMode(e,1.1)){if(r.push("@graph","@id","@type"),n.includes("@list")){if(1!==n.length)throw new o("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else if(n.includes("@graph")){if(n.some((e=>"@graph"!==e&&"@id"!==e&&"@index"!==e&&"@set"!==e)))throw new o("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else a&=n.length<=(l?2:1);if(n.includes("@type")&&(y["@type"]=y["@type"]||"@id",!["@id","@vocab"].includes(y["@type"])))throw new o("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else a&=!i(u["@container"]),a&=n.length<=1;if(a&=n.every((e=>r.includes(e))),a&=!(l&&n.includes("@list")),!a)throw new o("Invalid JSON-LD syntax; @context @container value must be one of the following: "+r.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(y.reverse&&!n.every((e=>["@index","@set"].includes(e))))throw new o("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});y["@container"]=n}if("@index"in u){if(!("@container"in u)||!y["@container"].includes("@index"))throw new o(`Invalid JSON-LD syntax; @index without @index in @container: "${u["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});if(!s(u["@index"])||0===u["@index"].indexOf("@"))throw new o(`Invalid JSON-LD syntax; @index must expand to an IRI: "${u["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});y["@index"]=u["@index"]}if("@context"in u&&(y["@context"]=u["@context"]),"@language"in u&&!("@type"in u)){let e=u["@language"];if(null!==e&&!s(e))throw new o("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==e&&(e=e.toLowerCase()),y["@language"]=e}if("@prefix"in u){if(n.match(/:|\//))throw new o("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:t});if(m.isKeyword(y["@id"]))throw new o("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:t});if("boolean"!==typeof u["@prefix"])throw new o("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:t});y._prefix=!0===u["@prefix"]}if("@direction"in u){const e=u["@direction"];if(null!==e&&"ltr"!==e&&"rtl"!==e)throw new o('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:t});y["@direction"]=e}if("@nest"in u){const e=u["@nest"];if(!s(e)||"@nest"!==e&&0===e.indexOf("@"))throw new o("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:t});y["@nest"]=e}
// disallow aliasing @context and @preserve
const _=y["@id"];if("@context"===_||"@preserve"===_)throw new o("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t});if(p&&p.protected&&!d&&(e.protected[n]=!0,y.protected=!0,!x(p,y)))throw new o("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:t,term:n})},m.expandIri=(e,t,n,r)=>w(e,t,n,void 0,void 0,r),m.getInitialContext=e=>{const t=JSON.stringify({processingMode:e.processingMode}),n=v.get(t);if(n)return n;const o={processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:i,clone:l,revertToPreviousContext:c,protected:{}};return v.size===b&&v.clear(),v.set(t,o),o;function i(){const e=this;if(e.inverse)return e.inverse;const t=e.inverse={},n=e.fastCurieMap={},r={},o=(e["@language"]||"@none").toLowerCase(),i=e["@direction"],l=e.mappings,c=[...l.keys()].sort(y);for(const a of c){const e=l.get(a);if(null===e)continue;let c=e["@container"]||"@none";if(c=[].concat(c).sort().join(""),null===e["@id"])continue;const d=g(e["@id"]);for(const l of d){let d=t[l];const u=m.isKeyword(l);if(d)u||e._termHasColon||r[l].push(a);else if(t[l]=d={},!u&&!e._termHasColon){r[l]=[a];const e={iri:l,terms:r[l]};l[0]in n?n[l[0]].push(e):n[l[0]]=[e]}if(d[c]||(d[c]={"@language":{},"@type":{},"@any":{}}),d=d[c],s(a,d["@any"],"@none"),e.reverse)s(a,d["@type"],"@reverse");else if("@none"===e["@type"])s(a,d["@any"],"@none"),s(a,d["@language"],"@none"),s(a,d["@type"],"@none");else if("@type"in e)s(a,d["@type"],e["@type"]);else if("@language"in e&&"@direction"in e){const t=e["@language"],n=e["@direction"];s(a,d["@language"],t&&n?`${t}_${n}`.toLowerCase():t?t.toLowerCase():n?`_${n}`:"@null")}else"@language"in e?s(a,d["@language"],(e["@language"]||"@null").toLowerCase()):"@direction"in e?e["@direction"]?s(a,d["@language"],`_${e["@direction"]}`):s(a,d["@language"],"@none"):i?(s(a,d["@language"],`_${i}`),s(a,d["@language"],"@none"),s(a,d["@type"],"@none")):(s(a,d["@language"],o),s(a,d["@language"],"@none"),s(a,d["@type"],"@none"))}}for(const s in n)a(n,s,1);return t}function a(e,t,n){const r=e[t],o=e[t]={};let i,s;for(const a of r)i=a.iri,s=n>=i.length?"":i[n],s in o?o[s].push(a):o[s]=[a];for(const l in o)""!==l&&a(o,l,n+1)}function s(e,t,n){t.hasOwnProperty(n)||(t[n]=e)}function l(){const e={};return e.mappings=r.clone(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,e.protected=r.clone(this.protected),this.previousContext&&(e.previousContext=this.previousContext.clone()),e.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(e["@base"]=this["@base"]),"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e}function c(){return this.previousContext?this.previousContext.clone():this}},m.getContextValue=(e,t,n)=>{if(null===t){if("@context"===n)return;return null}if(e.mappings.has(t)){const r=e.mappings.get(t);if(l(n))return r;if(r.hasOwnProperty(n))return r[n]}return"@language"===n&&n in e||"@direction"===n&&n in e?e[n]:"@context"!==n?null:void 0},m.processingMode=(e,t)=>t.toString()>="1.1"?!e.processingMode||e.processingMode>="json-ld-"+t.toString():"json-ld-1.0"===e.processingMode,m.isKeyword=e=>{if(!s(e)||"@"!==e[0])return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},8831:function(e,t,n){"use strict";const{parseLinkHeader:r,buildHeaders:o}=n(51055),{LINK_HEADER_CONTEXT:i}=n(93770),a=n(54093),s=n(40533),{prependBase:l}=n(82278),c=/(^|(\r\n))link:/i;function d(e,t,n){e=e||XMLHttpRequest;const r=new e;return new Promise(((e,o)=>{r.onload=()=>e(r),r.onerror=e=>o(e),r.open("GET",t,!0);for(const t in n)r.setRequestHeader(t,n[t]);r.send()}))}e.exports=({secure:e,headers:t={},xhr:n}={headers:{}})=>{t=o(t);const u=new s;return u.wrapLoader(f);async function f(o){if(0!==o.indexOf("http:")&&0!==o.indexOf("https:"))throw new a('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:o});if(e&&0!==o.indexOf("https"))throw new a('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:o});let s;try{s=await d(n,o,t)}catch(y){throw new a("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:o,cause:y})}if(s.status>=400)throw new a("URL could not be dereferenced: "+s.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:o,httpStatusCode:s.status});let u={contextUrl:null,documentUrl:o,document:s.response},p=null;const h=s.getResponseHeader("Content-Type");let g;if(c.test(s.getAllResponseHeaders())&&(g=s.getResponseHeader("Link")),g&&"application/ld+json"!==h){const e=r(g),t=e[i];if(Array.isArray(t))throw new a("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:o});t&&(u.contextUrl=t.target),p=e.alternate,p&&"application/ld+json"==p.type&&!(h||"").match(/^application\/(\w*\+)?json$/)&&(u=await f(l(o,p.target)))}return u}}},91696:function(e,t,n){"use strict";const r=n(54093),{isArray:o}=n(30832),{asArray:i}=n(51055),a={};function s({event:e,handlers:t}){let n=!0;for(let i=0;n&&i<t.length;++i){n=!1;const a=t[i];if(o(a))n=s({event:e,handlers:a});else if("function"===typeof a)a({event:e,next:()=>{n=!0}});else{if("object"!==typeof a)throw new r("Invalid event handler.","jsonld.InvalidEventHandler",{event:e});e.code in a?a[e.code]({event:e,next:()=>{n=!0}}):n=!0}}return n}e.exports=a,a.defaultEventHandler=null,a.setupEventHandler=({options:e={}})=>{const t=[].concat(e.safe?a.safeEventHandler:[],e.eventHandler?i(e.eventHandler):[],a.defaultEventHandler?a.defaultEventHandler:[]);return 0===t.length?null:t},a.handleEvent=({event:e,options:t})=>{s({event:e,handlers:t.eventHandler})};const l=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference"]);a.safeEventHandler=function({event:e,next:t}){if("warning"===e.level&&l.has(e.code))throw new r("Safe mode validation error.","jsonld.ValidationError",{event:e});t()},a.logEventHandler=function({event:e,next:t}){console.log(`EVENT: ${e.message}`,{event:e}),t()},a.logWarningEventHandler=function({event:e,next:t}){"warning"===e.level&&console.warn(`WARNING: ${e.message}`,{event:e}),t()},a.unhandledEventHandler=function({event:e}){throw new r("No handler for event.","jsonld.UnhandledEvent",{event:e})},a.setDefaultEventHandler=function({eventHandler:e}={}){a.defaultEventHandler=e?i(e):null}},62759:function(e,t,n){"use strict";const r=n(54093),{isArray:o,isObject:i,isEmptyObject:a,isString:s,isUndefined:l}=n(30832),{isList:c,isValue:d,isGraph:u,isSubject:f}=n(18463),{expandIri:p,getContextValue:h,isKeyword:g,process:y,processingMode:v}=n(54131),{isAbsolute:b}=n(82278),{REGEX_BCP47:m,REGEX_KEYWORD:w,addValue:x,asArray:_,getValues:S,validateTypeValue:E}=n(51055),{handleEvent:R}=n(91696),I={};function j({value:e,count:t,options:n}){if(0===t||"@value"in e||"@list"in e||1===t&&"@id"in e){if(n.eventHandler){let r,o;0===t?(r="empty object",o="Dropping empty object."):"@value"in e?(r="object with only @value",o="Dropping object with only @value."):"@list"in e?(r="object with only @list",o="Dropping object with only @list."):1===t&&"@id"in e&&(r="object with only @id",o="Dropping object with only @id."),R({event:{type:["JsonLdEvent"],code:r,level:"warning",message:o,details:{value:e}},options:n})}return null}return e}async function A({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:u,expandedParent:w,options:S={},insideList:N,typeKey:D,typeScopedContext:L}){const T=Object.keys(u).sort(),C=[];let M;const P=u[D]&&"@json"===p(e,o(u[D])?u[D][0]:u[D],{vocab:!0},{...S,typeExpansion:!0});for(const A of T){let N,D=u[A];if("@context"===A)continue;const T=p(e,A,{vocab:!0},S);if(null===T||!b(T)&&!g(T)){S.eventHandler&&R({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:A,expandedProperty:T}},options:S});continue}if(g(T)){if("@reverse"===n)throw new r("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:D});if(T in w&&"@included"!==T&&"@type"!==T)throw new r("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:T})}if("@id"===T){if(!s(D)){if(!S.isFrame)throw new r('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:D});if(i(D)){if(!a(D))throw new r('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:D})}else{if(!o(D))throw new r('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:D});if(!D.every((e=>s(e))))throw new r('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:D})}}x(w,"@id",_(D).map((t=>{if(s(t)){const n=p(e,t,{base:!0},S);return S.eventHandler&&(null===n?R(null===t?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:t}},options:S}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:t}},options:S}):b(n)||R({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:t,expandedId:n}},options:S})),n}return t})),{propertyIsArray:S.isFrame});continue}if("@type"===T){i(D)&&(D=Object.fromEntries(Object.entries(D).map((([e,t])=>[p(L,e,{vocab:!0}),_(t).map((e=>p(L,e,{base:!0,vocab:!0},{...S,typeExpansion:!0})))])))),E(D,S.isFrame),x(w,"@type",_(D).map((e=>{if(s(e)){const t=p(L,e,{base:!0,vocab:!0},{...S,typeExpansion:!0});return"@json"===t||b(t)||S.eventHandler&&R({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:e}},options:S}),t}return e})),{propertyIsArray:!!S.isFrame});continue}if("@included"===T&&v(e,1.1)){const n=_(await I.expand({activeCtx:e,activeProperty:t,element:D,options:S}));if(!n.every((e=>f(e))))throw new r("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:D});x(w,"@included",n,{propertyIsArray:!0});continue}if("@graph"===T&&!i(D)&&!o(D))throw new r('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:D});if("@value"===T){M=D,P&&v(e,1.1)?w["@value"]=D:x(w,"@value",D,{propertyIsArray:S.isFrame});continue}if("@language"===T){if(null===D)continue;if(!s(D)&&!S.isFrame)throw new r('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:D});D=_(D).map((e=>s(e)?e.toLowerCase():e));for(const e of D)s(e)&&!e.match(m)&&S.eventHandler&&R({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:e}},options:S});x(w,"@language",D,{propertyIsArray:S.isFrame});continue}if("@direction"===T){if(!s(D)&&!S.isFrame)throw new r('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:D});D=_(D);for(const e of D)if(s(e)&&"ltr"!==e&&"rtl"!==e)throw new r('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:D});x(w,"@direction",D,{propertyIsArray:S.isFrame});continue}if("@index"===T){if(!s(D))throw new r('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:D});x(w,"@index",D);continue}if("@reverse"===T){if(!i(D))throw new r('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:D});if(N=await I.expand({activeCtx:e,activeProperty:"@reverse",element:D,options:S}),"@reverse"in N)for(const e in N["@reverse"])x(w,e,N["@reverse"][e],{propertyIsArray:!0});let t=w["@reverse"]||null;for(const e in N){if("@reverse"===e)continue;null===t&&(t=w["@reverse"]={}),x(t,e,[],{propertyIsArray:!0});const n=N[e];for(let o=0;o<n.length;++o){const i=n[o];if(d(i)||c(i))throw new r('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:N});x(t,e,i,{propertyIsArray:!0})}}continue}if("@nest"===T){C.push(A);continue}let F=e;const J=h(e,A,"@context");l(J)||(F=await y({activeCtx:e,localCtx:J,propagate:!0,overrideProtected:!0,options:S}));const W=h(F,A,"@container")||[];if(W.includes("@language")&&i(D)){const e=h(F,A,"@direction");N=O(F,D,e,S)}else if(W.includes("@index")&&i(D)){const t=W.includes("@graph"),n=h(F,A,"@index")||"@index",r="@index"!==n&&p(e,n,{vocab:!0},S);N=await k({activeCtx:F,options:S,activeProperty:A,value:D,asGraph:t,indexKey:n,propertyIndex:r})}else if(W.includes("@id")&&i(D)){const e=W.includes("@graph");N=await k({activeCtx:F,options:S,activeProperty:A,value:D,asGraph:e,indexKey:"@id"})}else if(W.includes("@type")&&i(D))N=await k({activeCtx:F.revertToPreviousContext(),options:S,activeProperty:A,value:D,asGraph:!1,indexKey:"@type"});else{const r="@list"===T;if(r||"@set"===T){let e=t;r&&"@graph"===n&&(e=null),N=await I.expand({activeCtx:F,activeProperty:e,element:D,options:S,insideList:r})}else N="@json"===h(e,A,"@type")?{"@type":"@json","@value":D}:await I.expand({activeCtx:F,activeProperty:A,element:D,options:S,insideList:!1})}if(null!==N||"@value"===T){if("@list"!==T&&!c(N)&&W.includes("@list")&&(N={"@list":_(N)}),W.includes("@graph")&&!W.some((e=>"@id"===e||"@index"===e))){N=_(N);const e=Object.keys(N[0]).length;if(!S.isFrame&&null===j({value:N[0],count:e,options:S}))continue;N=N.map((e=>({"@graph":_(e)})))}if(F.mappings.has(A)&&F.mappings.get(A).reverse){const e=w["@reverse"]=w["@reverse"]||{};N=_(N);for(let t=0;t<N.length;++t){const n=N[t];if(d(n)||c(n))throw new r('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:N});x(e,T,n,{propertyIsArray:!0})}}else x(w,T,N,{propertyIsArray:!0})}}if("@value"in w)if("@json"===w["@type"]&&v(e,1.1));else if((i(M)||o(M))&&!S.isFrame)throw new r('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:M});for(const a of C){const s=o(u[a])?u[a]:[u[a]];for(const o of s){if(!i(o)||Object.keys(o).some((t=>"@value"===p(e,t,{vocab:!0},S))))throw new r("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:o});await A({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:o,expandedParent:w,options:S,insideList:N,typeScopedContext:L,typeKey:D})}}}function N({activeCtx:e,activeProperty:t,value:n,options:r}){if(null===n||void 0===n)return null;const o=p(e,t,{vocab:!0},r);if("@id"===o)return p(e,n,{base:!0},r);if("@type"===o)return p(e,n,{vocab:!0,base:!0},{...r,typeExpansion:!0});const i=h(e,t,"@type");if(("@id"===i||"@graph"===o)&&s(n)){const o=p(e,n,{base:!0},r);return null===o&&n.match(w)&&r.eventHandler&&R({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:t}},options:r}),{"@id":o}}if("@vocab"===i&&s(n))return{"@id":p(e,n,{vocab:!0,base:!0},r)};if(g(o))return n;const a={};if(i&&!["@id","@vocab","@none"].includes(i))a["@type"]=i;else if(s(n)){const n=h(e,t,"@language");null!==n&&(a["@language"]=n);const r=h(e,t,"@direction");null!==r&&(a["@direction"]=r)}return["boolean","number","string"].includes(typeof n)||(n=n.toString()),a["@value"]=n,a}function O(e,t,n,i){const a=[],l=Object.keys(t).sort();for(const c of l){const l=p(e,c,{vocab:!0},i);let d=t[c];o(d)||(d=[d]);for(const e of d){if(null===e)continue;if(!s(e))throw new r("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});const o={"@value":e};"@none"!==l&&(c.match(m)||i.eventHandler&&R({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:c}},options:i}),o["@language"]=c.toLowerCase()),n&&(o["@direction"]=n),a.push(o)}}return a}async function k({activeCtx:e,options:t,activeProperty:n,value:i,asGraph:a,indexKey:s,propertyIndex:c}){const f=[],g=Object.keys(i).sort(),v="@type"===s;for(let b of g){if(v){const n=h(e,b,"@context");l(n)||(e=await y({activeCtx:e,localCtx:n,propagate:!1,options:t}))}let g,m=i[b];o(m)||(m=[m]),m=await I.expand({activeCtx:e,activeProperty:n,element:m,options:t,insideList:!1,insideIndex:!0}),g=c?"@none"===b?"@none":N({activeCtx:e,activeProperty:s,value:b,options:t}):p(e,b,{vocab:!0},t),"@id"===s?b=p(e,b,{base:!0},t):v&&(b=g);for(let e of m){if(a&&!u(e)&&(e={"@graph":[e]}),"@type"===s)"@none"===g||(e["@type"]?e["@type"]=[b].concat(e["@type"]):e["@type"]=[b]);else{if(d(e)&&!["@language","@type","@index"].includes(s))throw new r(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${s}".`,"jsonld.SyntaxError",{code:"invalid value object",value:e});c?"@none"!==g&&x(e,c,g,{propertyIsArray:!0,prependValue:!0}):"@none"===g||s in e||(e[s]=b)}f.push(e)}}return f}e.exports=I,I.expand=async({activeCtx:e,activeProperty:t=null,element:n,options:c={},insideList:d=!1,insideIndex:u=!1,typeScopedContext:f=null})=>{if(null===n||void 0===n)return null;if("@default"===t&&(c=Object.assign({},c,{isFrame:!1})),!o(n)&&!i(n))return d||null!==t&&"@graph"!==p(e,t,{vocab:!0},c)?N({activeCtx:e,activeProperty:t,value:n,options:c}):(c.eventHandler&&R({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:n}},options:c}),null);if(o(n)){let r=[];const i=h(e,t,"@container")||[];d=d||i.includes("@list");for(let a=0;a<n.length;++a){let i=await I.expand({activeCtx:e,activeProperty:t,element:n[a],options:c,insideIndex:u,typeScopedContext:f});d&&o(i)&&(i={"@list":i}),null!==i&&(o(i)?r=r.concat(i):r.push(i))}return r}const g=p(e,t,{vocab:!0},c),m=h(e,t,"@context");f=f||(e.previousContext?e:null);let w=Object.keys(n).sort(),x=!u;if(x&&f&&w.length<=2&&!w.includes("@context"))for(const r of w){const t=p(f,r,{vocab:!0},c);if("@value"===t){x=!1,e=f;break}if("@id"===t&&1===w.length){x=!1;break}}x&&(e=e.revertToPreviousContext()),l(m)||(e=await y({activeCtx:e,localCtx:m,propagate:!0,overrideProtected:!0,options:c})),"@context"in n&&(e=await y({activeCtx:e,localCtx:n["@context"],options:c})),f=e;let E=null;for(const r of w){const t=p(e,r,{vocab:!0},c);if("@type"===t){E=E||r;const t=n[r],o=Array.isArray(t)?t.length>1?t.slice().sort():t:[t];for(const n of o){const t=h(f,n,"@context");l(t)||(e=await y({activeCtx:e,localCtx:t,options:c,propagate:!1}))}}}let O={};await A({activeCtx:e,activeProperty:t,expandedActiveProperty:g,element:n,expandedParent:O,options:c,insideList:d,typeKey:E,typeScopedContext:f}),w=Object.keys(O);let k=w.length;if("@value"in O){if("@type"in O&&("@language"in O||"@direction"in O))throw new r('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:O});let t=k-1;if("@type"in O&&(t-=1),"@index"in O&&(t-=1),"@language"in O&&(t-=1),"@direction"in O&&(t-=1),0!==t)throw new r('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:O});const n=null===O["@value"]?[]:_(O["@value"]),o=S(O,"@type");if(v(e,1.1)&&o.includes("@json")&&1===o.length);else if(0===n.length)c.eventHandler&&R({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:O}},options:c}),O=null;else{if(!n.every((e=>s(e)||a(e)))&&"@language"in O)throw new r("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:O});if(!o.every((e=>b(e)&&!(s(e)&&0===e.indexOf("_:"))||a(e))))throw new r('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:O})}}else if("@type"in O&&!o(O["@type"]))O["@type"]=[O["@type"]];else if("@set"in O||"@list"in O){if(k>1&&(2!==k||!("@index"in O)))throw new r('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:O});"@set"in O&&(O=O["@set"],w=Object.keys(O),k=w.length)}else 1===k&&"@language"in O&&(c.eventHandler&&R({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:O}},options:c}),O=null);return!i(O)||c.keepFreeFloatingNodes||d||null!==t&&"@graph"!==g&&!(h(e,t,"@container")||[]).includes("@graph")||(O=j({value:O,count:k,options:c})),O}},41565:function(e,t,n){"use strict";const{isSubjectReference:r}=n(18463),{createMergedNodeMap:o}=n(32664),i={};e.exports=i,i.flatten=e=>{const t=o(e),n=[],i=Object.keys(t).sort();for(let o=0;o<i.length;++o){const e=t[i[o]];r(e)||n.push(e)}return n}},63859:function(e,t,n){"use strict";const{isKeyword:r}=n(54131),o=n(18463),i=n(30832),a=n(51055),s=n(82278),l=n(54093),{createNodeMap:c,mergeNodeMapGraphs:d}=n(32664),u={};function f(e){const t={};for(const n in e)void 0!==e[n]&&(t["@"+n]=[e[n]]);return[t]}function p(e,t,n){for(let r=n.length-1;r>=0;--r){const o=n[r];if(o.graph===t&&o.subject["@id"]===e["@id"])return!0}return!1}function h(e,t,n){const r="@"+n;let o=r in e?e[r][0]:t[n];if("embed"===n)if(!0===o)o="@once";else if(!1===o)o="@never";else if("@always"!==o&&"@never"!==o&&"@link"!==o&&"@first"!==o&&"@last"!==o&&"@once"!==o)throw new l("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:e});return o}function g(e){if(!i.isArray(e)||1!==e.length||!i.isObject(e[0]))throw new l("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e});if("@id"in e[0])for(const t of a.asArray(e[0]["@id"]))if(!i.isObject(t)&&!s.isAbsolute(t)||i.isString(t)&&0===t.indexOf("_:"))throw new l("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e});if("@type"in e[0])for(const t of a.asArray(e[0]["@type"]))if(!i.isObject(t)&&!s.isAbsolute(t)&&"@json"!==t||i.isString(t)&&0===t.indexOf("_:"))throw new l("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}function y(e,t,n,r){const o={};for(const i of t){const t=e.graphMap[e.graph][i];v(e,t,n,r)&&(o[i]=t)}return o}function v(e,t,n,s){let l=!0,c=!1;for(const d in n){let u=!1;const f=a.getValues(t,d),p=0===a.getValues(n,d).length;if("@id"===d){if(i.isEmptyObject(n["@id"][0]||{})?u=!0:n["@id"].length>=0&&(u=n["@id"].includes(f[0])),!s.requireAll)return u}else if("@type"===d){if(l=!1,p){if(f.length>0)return!1;u=!0}else if(1===n["@type"].length&&i.isEmptyObject(n["@type"][0]))u=f.length>0;else for(const e of n["@type"])u=!(!i.isObject(e)||!("@default"in e))||(u||f.some((t=>t===e)));if(!s.requireAll)return u}else{if(r(d))continue;{const t=a.getValues(n,d)[0];let r=!1;if(t&&(g([t]),r="@default"in t),l=!1,0===f.length&&r)continue;if(f.length>0&&p)return!1;if(void 0===t){if(f.length>0)return!1;u=!0}else if(o.isList(t)){const n=t["@list"][0];if(o.isList(f[0])){const t=f[0]["@list"];o.isValue(n)?u=t.some((e=>_(n,e))):(o.isSubject(n)||o.isSubjectReference(n))&&(u=t.some((t=>x(e,n,t,s))))}}else u=o.isValue(t)?f.some((e=>_(t,e))):o.isSubjectReference(t)?f.some((n=>x(e,t,n,s))):!!i.isObject(t)&&f.length>0}}if(!u&&s.requireAll)return!1;c=c||u}return l||c}function b(e,t){const n=e.uniqueEmbeds[e.graph],r=n[t],o=r.parent,s=r.property,l={"@id":t};if(i.isArray(o)){for(let i=0;i<o.length;++i)if(a.compareValues(o[i],l)){o[i]=l;break}}else{const e=i.isArray(o[s]);a.removeValue(o,s,l,{propertyIsArray:e}),a.addValue(o,s,l,{propertyIsArray:e})}const c=e=>{const t=Object.keys(n);for(const r of t)r in n&&i.isObject(n[r].parent)&&n[r].parent["@id"]===e&&(delete n[r],c(r))};c(t)}
/**
 * Removes the @preserve keywords from expanded result of framing.
 *
 * @param input the framed, framed output.
 * @param options the framing options used.
 *
 * @return the resulting output.
 */function m(e,t){if(i.isArray(e))return e.map((e=>m(e,t)));if(i.isObject(e)){
// remove @preserve
if("@preserve"in e)return e["@preserve"][0];if(o.isValue(e))return e;if(o.isList(e))return e["@list"]=m(e["@list"],t),e;if("@id"in e){const n=e["@id"];if(t.link.hasOwnProperty(n)){const r=t.link[n].indexOf(e);if(-1!==r)return t.link[n][r];t.link[n].push(e)}else t.link[n]=[e]}for(const n in e)"@id"===n&&t.bnodesToClear.includes(e[n])?delete e["@id"]:e[n]=m(e[n],t)}return e}function w(e,t,n){i.isObject(e)?a.addValue(e,t,n,{propertyIsArray:!0}):e.push(n)}function x(e,t,n,r){if(!("@id"in n))return!1;const o=e.subjects[n["@id"]];return o&&v(e,o,t,r)}function _(e,t){const n=t["@value"],r=t["@type"],o=t["@language"],a=e["@value"]?i.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],s=e["@type"]?i.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],l=e["@language"]?i.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return 0===a.length&&0===s.length&&0===l.length||!(!a.includes(n)&&!i.isEmptyObject(a[0]))&&(!!(!r&&0===s.length||s.includes(r)||r&&i.isEmptyObject(s[0]))&&!!(!o&&0===l.length||l.includes(o)||o&&i.isEmptyObject(l[0])))}e.exports=u,u.frameMergedOrDefault=(e,t,n)=>{const r={options:n,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},o=new a.IdentifierIssuer("_:b");c(e,r.graphMap,"@default",o),n.merged&&(r.graphMap["@merged"]=d(r.graphMap),r.graph="@merged"),r.subjects=r.graphMap[r.graph];const i=[];return u.frame(r,Object.keys(r.subjects).sort(),t,i),n.pruneBlankNodeIdentifiers&&(n.bnodesToClear=Object.keys(r.bnodeMap).filter((e=>1===r.bnodeMap[e].length))),
// remove @preserve from results
n.link={},m(i,n)},u.frame=(e,t,n,s,c=null)=>{g(n),n=n[0];const d=e.options,v={embed:h(n,d,"embed"),explicit:h(n,d,"explicit"),requireAll:h(n,d,"requireAll")};e.link.hasOwnProperty(e.graph)||(e.link[e.graph]={});const m=e.link[e.graph],x=y(e,t,n,v),S=Object.keys(x).sort();for(const g of S){const y=x[g];if(null===c?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{},"@link"===v.embed&&g in m){w(s,c,m[g]);continue}const S={"@id":g};if(0===g.indexOf("_:")&&a.addValue(e.bnodeMap,g,S,{propertyIsArray:!0}),m[g]=S,("@first"===v.embed||"@last"===v.embed)&&e.is11)throw new l("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:n});if(e.embedded||!e.uniqueEmbeds[e.graph].hasOwnProperty(g))if(!e.embedded||"@never"!==v.embed&&!p(y,e.graph,e.subjectStack))if(!e.embedded||"@first"!=v.embed&&"@once"!=v.embed||!e.uniqueEmbeds[e.graph].hasOwnProperty(g)){if("@last"===v.embed&&g in e.uniqueEmbeds[e.graph]&&b(e,g),e.uniqueEmbeds[e.graph][g]={parent:s,property:c},e.subjectStack.push({subject:y,graph:e.graph}),g in e.graphMap){let t=!1,r=null;"@graph"in n?(r=n["@graph"][0],t=!("@merged"===g||"@default"===g),i.isObject(r)||(r={})):(t="@merged"!==e.graph,r={}),t&&u.frame({...e,graph:g,embedded:!1},Object.keys(e.graphMap[g]).sort(),[r],S,"@graph")}"@included"in n&&u.frame({...e,embedded:!1},t,n["@included"],S,"@included");for(const t of Object.keys(y).sort())if(r(t)){if(S[t]=a.clone(y[t]),"@type"===t)for(const n of y["@type"])0===n.indexOf("_:")&&a.addValue(e.bnodeMap,n,S,{propertyIsArray:!0})}else if(!v.explicit||t in n)for(const r of y[t]){const i=t in n?n[t]:f(v);if(o.isList(r)){const i=n[t]&&n[t][0]&&n[t][0]["@list"]?n[t][0]["@list"]:f(v),s={"@list":[]};w(S,t,s);const l=r["@list"];for(const t of l)o.isSubjectReference(t)?u.frame({...e,embedded:!0},[t["@id"]],i,s,"@list"):w(s,"@list",a.clone(t))}else o.isSubjectReference(r)?u.frame({...e,embedded:!0},[r["@id"]],i,S,t):_(i[0],r)&&w(S,t,a.clone(r))}for(const e of Object.keys(n).sort()){if("@type"===e){if(!i.isObject(n[e][0])||!("@default"in n[e][0]))continue}else if(r(e))continue;const t=n[e][0]||{},o=h(t,d,"omitDefault");if(!o&&!(e in S)){let n="@null";"@default"in t&&(n=a.clone(t["@default"])),i.isArray(n)||(n=[n]),S[e]=[{"@preserve":n}]}}for(const t of Object.keys(n["@reverse"]||{}).sort()){const r=n["@reverse"][t];for(const n of Object.keys(e.subjects)){const o=a.getValues(e.subjects[n],t);o.some((e=>e["@id"]===g))&&(S["@reverse"]=S["@reverse"]||{},a.addValue(S["@reverse"],t,[],{propertyIsArray:!0}),u.frame({...e,embedded:!0},[n],r,S["@reverse"][t],c))}}w(s,c,S),e.subjectStack.pop()}else w(s,c,S);else w(s,c,S)}},u.cleanupNull=(e,t)=>{if(i.isArray(e)){const n=e.map((e=>u.cleanupNull(e,t)));return n.filter((e=>e))}if("@null"===e)return null;if(i.isObject(e)){if("@id"in e){const n=e["@id"];if(t.link.hasOwnProperty(n)){const r=t.link[n].indexOf(e);if(-1!==r)return t.link[n][r];t.link[n].push(e)}else t.link[n]=[e]}for(const n in e)e[n]=u.cleanupNull(e[n],t)}return e}},25076:function(e,t,n){"use strict";const r=n(54093),o=n(18463),i=n(30832),{REGEX_BCP47:a,addValue:s}=n(51055),{handleEvent:l}=n(91696),{RDF_LIST:c,RDF_FIRST:d,RDF_REST:u,RDF_NIL:f,RDF_TYPE:p,RDF_JSON_LITERAL:h,XSD_BOOLEAN:g,XSD_DOUBLE:y,XSD_INTEGER:v,XSD_STRING:b}=n(93770),m={};function w(e,t,n,o){if(e.termType.endsWith("Node"))return{"@id":e.value};const s={"@value":e.value};if(e.language)e.language.match(a)||o.eventHandler&&l({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:e.language}},options:o}),s["@language"]=e.language;else{let d=e.datatype.value;if(d||(d=b),d===h){d="@json";try{s["@value"]=JSON.parse(s["@value"])}catch(c){throw new r("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:s["@value"],cause:c})}}if(t){if(d===g)"true"===s["@value"]?s["@value"]=!0:"false"===s["@value"]&&(s["@value"]=!1);else if(i.isNumeric(s["@value"]))if(d===v){const e=parseInt(s["@value"],10);e.toFixed(0)===s["@value"]&&(s["@value"]=e)}else d===y&&(s["@value"]=parseFloat(s["@value"]));[g,v,y,b].includes(d)||(s["@type"]=d)}else if("i18n-datatype"===n&&d.startsWith("https://www.w3.org/ns/i18n#")){const[,e,t]=d.split(/[#_]/);e.length>0&&(s["@language"]=e,e.match(a)||o.eventHandler&&l({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:e}},options:o})),s["@direction"]=t}else d!==b&&(s["@type"]=d)}return s}e.exports=m,m.fromRDF=async(e,t)=>{const n={},r={"@default":n},a={},{useRdfType:l=!1,useNativeTypes:h=!1,rdfDirection:g=null}=t;for(const o of e){const e="DefaultGraph"===o.graph.termType?"@default":o.graph.value;e in r||(r[e]={}),"@default"===e||e in n||(n[e]={"@id":e});const i=r[e],c=o.subject.value,d=o.predicate.value,u=o.object;c in i||(i[c]={"@id":c});const y=i[c],v=u.termType.endsWith("Node");if(v&&!(u.value in i)&&(i[u.value]={"@id":u.value}),d===p&&!l&&v){s(y,"@type",u.value,{propertyIsArray:!0});continue}const b=w(u,h,g,t);if(s(y,d,b,{propertyIsArray:!0}),v)if(u.value===f){const e=i[u.value];"usages"in e||(e.usages=[]),e.usages.push({node:y,property:d,value:b})}else u.value in a?a[u.value]=!1:a[u.value]={node:y,property:d,value:b}}for(const s in r){const e=r[s];if(!(f in e))continue;const t=e[f];if(t.usages){for(let n of t.usages){let t=n.node,r=n.property,s=n.value;const l=[],f=[];let p=Object.keys(t).length;while(r===u&&i.isObject(a[t["@id"]])&&i.isArray(t[d])&&1===t[d].length&&i.isArray(t[u])&&1===t[u].length&&(3===p||4===p&&i.isArray(t["@type"])&&1===t["@type"].length&&t["@type"][0]===c))if(l.push(t[d][0]),f.push(t["@id"]),n=a[t["@id"]],t=n.node,r=n.property,s=n.value,p=Object.keys(t).length,!o.isBlankNode(t))break;delete s["@id"],s["@list"]=l.reverse();for(const n of f)delete e[n]}delete t.usages}}const y=[],v=Object.keys(n).sort();for(const i of v){const e=n[i];if(i in r){const t=e["@graph"]=[],n=r[i],a=Object.keys(n).sort();for(const e of a){const r=n[e];o.isSubjectReference(r)||t.push(r)}}o.isSubjectReference(e)||y.push(e)}return y}},18463:function(e,t,n){"use strict";const r=n(30832),o={};e.exports=o,o.isSubject=e=>{if(r.isObject(e)&&!("@value"in e||"@set"in e||"@list"in e)){const t=Object.keys(e).length;return t>1||!("@id"in e)}return!1},o.isSubjectReference=e=>r.isObject(e)&&1===Object.keys(e).length&&"@id"in e,o.isValue=e=>r.isObject(e)&&"@value"in e,o.isList=e=>r.isObject(e)&&"@list"in e,o.isGraph=e=>r.isObject(e)&&"@graph"in e&&1===Object.keys(e).filter((e=>"@id"!==e&&"@index"!==e)).length,o.isSimpleGraph=e=>o.isGraph(e)&&!("@id"in e),o.isBlankNode=e=>{if(r.isObject(e)){if("@id"in e){const t=e["@id"];return!r.isString(t)||0===t.indexOf("_:")}return 0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e)}return!1}},36805:function(e,t,n){
/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2022 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
const r=n(47055),o=n(67222),i=n(51055),a=n(68058),s=i.IdentifierIssuer,l=n(54093),c=n(80421),d=n(69048),{expand:u}=n(62759),{flatten:f}=n(41565),{fromRDF:p}=n(25076),{toRDF:h}=n(19382),{frameMergedOrDefault:g,cleanupNull:y}=n(63859),{isArray:v,isObject:b,isString:m}=n(30832),{isSubjectReference:w}=n(18463),{expandIri:x,getInitialContext:_,process:S,processingMode:E}=n(54131),{compact:R,compactIri:I}=n(83251),{createNodeMap:j,createMergedNodeMap:A,mergeNodeMaps:N}=n(32664),{logEventHandler:O,logWarningEventHandler:k,safeEventHandler:D,setDefaultEventHandler:L,setupEventHandler:T,strictEventHandler:C,unhandledEventHandler:M}=n(91696),P=function(e){const t={},P=100,F=new c({max:P});function J(t,{documentLoader:n=e.documentLoader,...r}){if(t&&"compactionMap"in t)throw new l('"compactionMap" not supported.',"jsonld.OptionsError");if(t&&"expansionMap"in t)throw new l('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:n},r,t,{eventHandler:T({options:t})})}return e.compact=async function(t,n,r){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===n)throw new l("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===t)return null;let o;r=J(r,{base:m(t)?t:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new s("_:b"),contextResolver:new a({sharedCache:F})}),r.link&&(r.skipExpansion=!0),r.compactToRelative||delete r.base,o=r.skipExpansion?t:await e.expand(t,r);const c=await e.processContext(_(r),n,r);let d=await R({activeCtx:c,element:o,options:r});r.compactArrays&&!r.graph&&v(d)?1===d.length?d=d[0]:0===d.length&&(d={}):r.graph&&b(d)&&(d=[d]),b(n)&&"@context"in n&&(n=n["@context"]),n=i.clone(n),v(n)||(n=[n]);const u=n;n=[];for(let e=0;e<u.length;++e)(!b(u[e])||Object.keys(u[e]).length>0)&&n.push(u[e]);const f=n.length>0;if(1===n.length&&(n=n[0]),v(d)){const e=I({activeCtx:c,iri:"@graph",relativeTo:{vocab:!0}}),t=d;d={},f&&(d["@context"]=n),d[e]=t}else if(b(d)&&f){const e=d;d={"@context":n};for(const t in e)d[t]=e[t]}return d},e.expand=async function(t,n){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");n=J(n,{keepFreeFloatingNodes:!1,contextResolver:new a({sharedCache:F})});const r={},o=[];if("expandContext"in n){const e=i.clone(n.expandContext);b(e)&&"@context"in e?r.expandContext=e:r.expandContext={"@context":e},o.push(r.expandContext)}let s;if(m(t)){const i=await e.get(t,n);s=i.documentUrl,r.input=i.document,i.contextUrl&&(r.remoteContext={"@context":i.contextUrl},o.push(r.remoteContext))}else r.input=i.clone(t);"base"in n||(n.base=s||"");let l=_(n);for(const e of o)l=await S({activeCtx:l,localCtx:e,options:n});let c=await u({activeCtx:l,element:r.input,options:n});return b(c)&&"@graph"in c&&1===Object.keys(c).length?c=c["@graph"]:null===c&&(c=[]),v(c)||(c=[c]),c},e.flatten=async function(t,n,r){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");n="function"===typeof n?null:n||null,r=J(r,{base:m(t)?t:"",contextResolver:new a({sharedCache:F})});const o=await e.expand(t,r),i=f(o);if(null===n)return i;r.graph=!0,r.skipExpansion=!0;const s=await e.compact(i,n,r);return s},e.frame=async function(t,n,r){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(r=J(r,{base:m(t)?t:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new a({sharedCache:F})}),m(n)){const t=await e.get(n,r);if(n=t.document,t.contextUrl){let e=n["@context"];e?v(e)?e.push(t.contextUrl):e=[e,t.contextUrl]:e=t.contextUrl,n["@context"]=e}}const o=n&&n["@context"]||{},i=await e.processContext(_(r),o,r);r.hasOwnProperty("omitGraph")||(r.omitGraph=E(i,1.1)),r.hasOwnProperty("pruneBlankNodeIdentifiers")||(r.pruneBlankNodeIdentifiers=E(i,1.1));const s=await e.expand(t,r),l={...r};l.isFrame=!0,l.keepFreeFloatingNodes=!0;const c=await e.expand(n,l),d=Object.keys(n).map((e=>x(i,e,{vocab:!0})));l.merged=!d.includes("@graph"),l.is11=E(i,1.1);const u=g(s,c,l);l.graph=!r.omitGraph,l.skipExpansion=!0,l.link={},l.framing=!0;let f=await e.compact(u,o,l);return l.link={},f=y(f,l),f},e.link=async function(t,n,r){const o={};return n&&(o["@context"]=n),o["@embed"]="@link",e.frame(t,o,r)},e.normalize=e.canonize=async function(t,n){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if(n=J(n,{base:m(t)?t:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new a({sharedCache:F})}),"inputFormat"in n){if("application/n-quads"!==n.inputFormat&&"application/nquads"!==n.inputFormat)throw new l("Unknown canonicalization input format.","jsonld.CanonizeError");const e=d.parse(t);return r.canonize(e,n)}const o={...n};delete o.format,o.produceGeneralizedRdf=!1;const i=await e.toRDF(t,o);return r.canonize(i,n)},e.fromRDF=async function(e,n){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");n=J(n,{format:m(e)?"application/n-quads":void 0});const{format:r}=n;let{rdfParser:o}=n;if(r){if(o=o||t[r],!o)throw new l("Unknown input format.","jsonld.UnknownFormat",{format:r})}else o=()=>e;const i=await o(e);return p(i,n)},e.toRDF=async function(t,n){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let r;n=J(n,{base:m(t)?t:"",skipExpansion:!1,contextResolver:new a({sharedCache:F})}),r=n.skipExpansion?t:await e.expand(t,n);const o=h(r,n);if(n.format){if("application/n-quads"===n.format||"application/nquads"===n.format)return d.serialize(o);throw new l("Unknown output format.","jsonld.UnknownFormat",{format:n.format})}return o},e.createNodeMap=async function(t,n){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");n=J(n,{base:m(t)?t:"",contextResolver:new a({sharedCache:F})});const r=await e.expand(t,n);return A(r,n)},e.merge=async function(t,n,r){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!v(t))throw new TypeError('Could not merge, "docs" must be an array.');n="function"===typeof n?null:n||null,r=J(r,{contextResolver:new a({sharedCache:F})});const o=await Promise.all(t.map((t=>{const n={...r};return e.expand(t,n)})));let l=!0;"mergeNodes"in r&&(l=r.mergeNodes);const c=r.issuer||new s("_:b"),d={"@default":{}};for(let e=0;e<o.length;++e){const t=i.relabelBlankNodes(o[e],{issuer:new s("_:b"+e+"-")}),n=l||0===e?d:{"@default":{}};if(j(t,n,"@default",c),n!==d)for(const e in n){const t=n[e];if(!(e in d)){d[e]=t;continue}const r=d[e];for(const e in t)e in r||(r[e]=t[e])}}const u=N(d),f=[],p=Object.keys(u).sort();for(let e=0;e<p.length;++e){const t=u[p[e]];w(t)||f.push(t)}if(null===n)return f;r.graph=!0,r.skipExpansion=!0;const h=await e.compact(f,n,r);return h},Object.defineProperty(e,"documentLoader",{get:()=>e._documentLoader,set:t=>e._documentLoader=t}),e.documentLoader=async e=>{throw new l("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:e})},e.get=async function(t,n){let r;r="function"===typeof n.documentLoader?n.documentLoader:e.documentLoader;const o=await r(t);try{if(!o.document)throw new l("No remote document found at the given URL.","jsonld.NullRemoteDocument");m(o.document)&&(o.document=JSON.parse(o.document))}catch(i){throw new l("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:i,remoteDoc:o})}return o},e.processContext=async function(e,t,n){return n=J(n,{base:"",contextResolver:new a({sharedCache:F})}),null===t?_(n):(t=i.clone(t),b(t)&&"@context"in t||(t={"@context":t}),S({activeCtx:e,localCtx:t,options:n}))},e.getContextValue=n(54131).getContextValue,e.documentLoaders={},e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new l('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(e,n){t[e]=n},e.unregisterRDFParser=function(e){delete t[e]},e.registerRDFParser("application/n-quads",d.parse),e.registerRDFParser("application/nquads",d.parse),e.url=n(82278),e.logEventHandler=O,e.logWarningEventHandler=k,e.safeEventHandler=D,e.setDefaultEventHandler=L,e.strictEventHandler=C,e.unhandledEventHandler=M,e.util=i,Object.assign(e,i),e.promises=e,e.RequestQueue=n(40533),e.JsonLdProcessor=n(60731)(e),o.setupGlobals(e),o.setupDocumentLoaders(e),e},F=function(){return P((function(){return F()}))};P(F),e.exports=F},32664:function(e,t,n){"use strict";const{isKeyword:r}=n(54131),o=n(18463),i=n(30832),a=n(51055),s=n(54093),l={};e.exports=l,l.createMergedNodeMap=(e,t)=>{t=t||{};const n=t.issuer||new a.IdentifierIssuer("_:b"),r={"@default":{}};return l.createNodeMap(e,r,"@default",n),l.mergeNodeMaps(r)},l.createNodeMap=(e,t,n,c,d,u)=>{if(i.isArray(e)){for(const r of e)l.createNodeMap(r,t,n,c,void 0,u);return}if(!i.isObject(e))return void(u&&u.push(e));if(o.isValue(e)){if("@type"in e){let t=e["@type"];0===t.indexOf("_:")&&(e["@type"]=t=c.getId(t))}return void(u&&u.push(e))}if(u&&o.isList(e)){const r=[];return l.createNodeMap(e["@list"],t,n,c,d,r),void u.push({"@list":r})}if("@type"in e){const t=e["@type"];for(const e of t)0===e.indexOf("_:")&&c.getId(e)}i.isUndefined(d)&&(d=o.isBlankNode(e)?c.getId(e["@id"]):e["@id"]),u&&u.push({"@id":d});const f=t[n],p=f[d]=f[d]||{};p["@id"]=d;const h=Object.keys(e).sort();for(let i of h){if("@id"===i)continue;if("@reverse"===i){const r={"@id":d},i=e["@reverse"];for(const e in i){const s=i[e];for(const i of s){let s=i["@id"];o.isBlankNode(i)&&(s=c.getId(s)),l.createNodeMap(i,t,n,c,s),a.addValue(f[s],e,r,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===i){d in t||(t[d]={}),l.createNodeMap(e[i],t,d,c);continue}if("@included"===i){l.createNodeMap(e[i],t,n,c);continue}if("@type"!==i&&r(i)){if("@index"===i&&i in p&&(e[i]!==p[i]||e[i]["@id"]!==p[i]["@id"]))throw new s("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:p});p[i]=e[i];continue}const u=e[i];if(0===i.indexOf("_:")&&(i=c.getId(i)),0!==u.length)for(let e of u)if("@type"===i&&(e=0===e.indexOf("_:")?c.getId(e):e),o.isSubject(e)||o.isSubjectReference(e)){if("@id"in e&&!e["@id"])continue;const r=o.isBlankNode(e)?c.getId(e["@id"]):e["@id"];a.addValue(p,i,{"@id":r},{propertyIsArray:!0,allowDuplicate:!1}),l.createNodeMap(e,t,n,c,r)}else if(o.isValue(e))a.addValue(p,i,e,{propertyIsArray:!0,allowDuplicate:!1});else if(o.isList(e)){const r=[];l.createNodeMap(e["@list"],t,n,c,d,r),e={"@list":r},a.addValue(p,i,e,{propertyIsArray:!0,allowDuplicate:!1})}else l.createNodeMap(e,t,n,c,d),a.addValue(p,i,e,{propertyIsArray:!0,allowDuplicate:!1});else a.addValue(p,i,[],{propertyIsArray:!0})}},l.mergeNodeMapGraphs=e=>{const t={};for(const n of Object.keys(e).sort())for(const o of Object.keys(e[n]).sort()){const i=e[n][o];o in t||(t[o]={"@id":o});const s=t[o];for(const e of Object.keys(i).sort())if(r(e)&&"@type"!==e)s[e]=a.clone(i[e]);else for(const t of i[e])a.addValue(s,e,a.clone(t),{propertyIsArray:!0,allowDuplicate:!1})}return t},l.mergeNodeMaps=e=>{const t=e["@default"],n=Object.keys(e).sort();for(const r of n){if("@default"===r)continue;const n=e[r];let i=t[r];i?"@graph"in i||(i["@graph"]=[]):t[r]=i={"@id":r,"@graph":[]};const a=i["@graph"];for(const e of Object.keys(n).sort()){const t=n[e];o.isSubjectReference(t)||a.push(t)}}return t}},67222:function(e,t,n){"use strict";const r=n(8831),o={};e.exports=o,o.setupDocumentLoaders=function(e){"undefined"!==typeof XMLHttpRequest&&(e.documentLoaders.xhr=r,e.useDocumentLoader("xhr"))},o.setupGlobals=function(e){"undefined"===typeof globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor})}},19382:function(e,t,n){"use strict";const{createNodeMap:r}=n(32664),{isKeyword:o}=n(54131),i=n(18463),a=n(95456),s=n(30832),l=n(51055),{handleEvent:c}=n(91696),{RDF_FIRST:d,RDF_REST:u,RDF_NIL:f,RDF_TYPE:p,RDF_JSON_LITERAL:h,RDF_LANGSTRING:g,XSD_BOOLEAN:y,XSD_DOUBLE:v,XSD_INTEGER:b,XSD_STRING:m}=n(93770),{isAbsolute:w}=n(82278),x={};function _(e,t,n,r,i){const a=Object.keys(t).sort();for(const s of a){const a=t[s],l=Object.keys(a).sort();for(let t of l){const l=a[t];if("@type"===t)t=p;else if(o(t))continue;for(const o of l){const a={termType:s.startsWith("_:")?"BlankNode":"NamedNode",value:s};if(!w(s)){i.eventHandler&&c({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:s}},options:i});continue}const l={termType:t.startsWith("_:")?"BlankNode":"NamedNode",value:t};if(!w(t)){i.eventHandler&&c({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:t}},options:i});continue}if("BlankNode"===l.termType&&!i.produceGeneralizedRdf){i.eventHandler&&c({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:r.getOldIds().find((e=>r.getId(e)===t))}},options:i});continue}const d=E(o,r,e,n,i.rdfDirection,i);d&&e.push({subject:a,predicate:l,object:d,graph:n})}}}}function S(e,t,n,r,o,i){const a={termType:"NamedNode",value:d},s={termType:"NamedNode",value:u},l={termType:"NamedNode",value:f},c=e.pop(),p=c?{termType:"BlankNode",value:t.getId()}:l;let h=p;for(const d of e){const e=E(d,t,n,r,o,i),l={termType:"BlankNode",value:t.getId()};n.push({subject:h,predicate:a,object:e,graph:r}),n.push({subject:h,predicate:s,object:l,graph:r}),h=l}if(c){const e=E(c,t,n,r,o,i);n.push({subject:h,predicate:a,object:e,graph:r}),n.push({subject:h,predicate:s,object:l,graph:r})}return p}function E(e,t,n,r,o,l){const d={};if(i.isValue(e)){d.termType="Literal",d.value=void 0,d.datatype={termType:"NamedNode"};let t=e["@value"];const n=e["@type"]||null;if("@json"===n)d.value=a(t),d.datatype.value=h;else if(s.isBoolean(t))d.value=t.toString(),d.datatype.value=n||y;else if(s.isDouble(t)||n===v)s.isDouble(t)||(t=parseFloat(t)),d.value=t.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),d.datatype.value=n||v;else if(s.isNumber(t))d.value=t.toFixed(0),d.datatype.value=n||b;else if("i18n-datatype"===o&&"@direction"in e){const n="https://www.w3.org/ns/i18n#"+(e["@language"]||"")+`_${e["@direction"]}`;d.datatype.value=n,d.value=t}else"@language"in e?(d.value=t,d.datatype.value=n||g,d.language=e["@language"]):(d.value=t,d.datatype.value=n||m)}else if(i.isList(e)){const i=S(e["@list"],t,n,r,o,l);d.termType=i.termType,d.value=i.value}else{const t=s.isObject(e)?e["@id"]:e;d.termType=t.startsWith("_:")?"BlankNode":"NamedNode",d.value=t}return"NamedNode"!==d.termType||w(d.value)?d:(l.eventHandler&&c({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:d.value}},options:l}),null)}e.exports=x,x.toRDF=(e,t)=>{const n=new l.IdentifierIssuer("_:b"),o={"@default":{}};r(e,o,"@default",n);const i=[],a=Object.keys(o).sort();for(const r of a){let e;if("@default"===r)e={termType:"DefaultGraph",value:""};else{if(!w(r)){t.eventHandler&&c({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:r}},options:t});continue}e=r.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},e.value=r}_(i,o[r],e,n,t)}return i}},30832:function(e){"use strict";const t={};e.exports=t,t.isArray=Array.isArray,t.isBoolean=e=>"boolean"===typeof e||"[object Boolean]"===Object.prototype.toString.call(e),t.isDouble=e=>t.isNumber(e)&&(-1!==String(e).indexOf(".")||Math.abs(e)>=1e21),t.isEmptyObject=e=>t.isObject(e)&&0===Object.keys(e).length,t.isNumber=e=>"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e),t.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),t.isObject=e=>"[object Object]"===Object.prototype.toString.call(e),t.isString=e=>"string"===typeof e||"[object String]"===Object.prototype.toString.call(e),t.isUndefined=e=>"undefined"===typeof e},82278:function(e,t,n){"use strict";const r=n(30832),o={};e.exports=o,o.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},o.parse=(e,t)=>{const n={},r=o.parsers[t||"full"],i=r.regex.exec(e);let a=r.keys.length;while(a--)n[r.keys[a]]=void 0===i[a]?null:i[a];return("https"===n.scheme&&"443"===n.port||"http"===n.scheme&&"80"===n.port)&&(n.href=n.href.replace(":"+n.port,""),n.authority=n.authority.replace(":"+n.port,""),n.port=null),n.normalizedPath=o.removeDotSegments(n.path),n},o.prependBase=(e,t)=>{if(null===e)return t;if(o.isAbsolute(t))return t;e&&!r.isString(e)||(e=o.parse(e||""));const n=o.parse(t),i={protocol:e.protocol||""};if(null!==n.authority)i.authority=n.authority,i.path=n.path,i.query=n.query;else if(i.authority=e.authority,""===n.path)i.path=e.path,null!==n.query?i.query=n.query:i.query=e.query;else{if(0===n.path.indexOf("/"))i.path=n.path;else{let t=e.path;t=t.substr(0,t.lastIndexOf("/")+1),(t.length>0||e.authority)&&"/"!==t.substr(-1)&&(t+="/"),t+=n.path,i.path=t}i.query=n.query}""!==n.path&&(i.path=o.removeDotSegments(i.path));let a=i.protocol;return null!==i.authority&&(a+="//"+i.authority),a+=i.path,null!==i.query&&(a+="?"+i.query),null!==n.fragment&&(a+="#"+n.fragment),""===a&&(a="./"),a},o.removeBase=(e,t)=>{if(null===e)return t;e&&!r.isString(e)||(e=o.parse(e||""));let n="";if(""!==e.href?n+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(n+="//"),0!==t.indexOf(n))return t;const i=o.parse(t.substr(n.length)),a=e.normalizedPath.split("/"),s=i.normalizedPath.split("/"),l=i.fragment||i.query?0:1;while(a.length>0&&s.length>l){if(a[0]!==s[0])break;a.shift(),s.shift()}let c="";if(a.length>0){a.pop();for(let e=0;e<a.length;++e)c+="../"}return c+=s.join("/"),null!==i.query&&(c+="?"+i.query),null!==i.fragment&&(c+="#"+i.fragment),""===c&&(c="./"),c},o.removeDotSegments=e=>{if(0===e.length)return"";const t=e.split("/"),n=[];while(t.length>0){const e=t.shift(),r=0===t.length;"."!==e?".."!==e?n.push(e):(n.pop(),r&&n.push("")):r&&n.push("")}return"/"===e[0]&&n.length>0&&""!==n[0]&&n.unshift(""),1===n.length&&""===n[0]?"/":n.join("/")};const i=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;o.isAbsolute=e=>r.isString(e)&&i.test(e),o.isRelative=e=>r.isString(e)},51055:function(e,t,n){"use strict";const r=n(18463),o=n(30832),i=n(47055).IdentifierIssuer,a=n(54093),s=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,l=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,c=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,d=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,u=/^@[a-zA-Z]+$/,f={headers:{accept:"application/ld+json, application/json"}},p={};function h(e,t){if(o.isArray(t))for(let n=0;n<t.length;++n)t[n]=h(e,t[n]);else if(r.isList(t))t["@list"]=h(e,t["@list"]);else if(o.isObject(t)){r.isBlankNode(t)&&(t["@id"]=e.getId(t["@id"]));const n=Object.keys(t).sort();for(let r=0;r<n.length;++r){const o=n[r];"@id"!==o&&(t[o]=h(e,t[o]))}}return t}e.exports=p,p.IdentifierIssuer=i,p.REGEX_BCP47=s,p.REGEX_KEYWORD=u,p.clone=function(e){if(e&&"object"===typeof e){let t;if(o.isArray(e)){t=[];for(let n=0;n<e.length;++n)t[n]=p.clone(e[n])}else if(e instanceof Map){t=new Map;for(const[n,r]of e)t.set(n,p.clone(r))}else if(e instanceof Set){t=new Set;for(const n of e)t.add(p.clone(n))}else if(o.isObject(e)){t={};for(const n in e)t[n]=p.clone(e[n])}else t=e.toString();return t}return e},p.asArray=function(e){return Array.isArray(e)?e:[e]},p.buildHeaders=(e={})=>{const t=Object.keys(e).some((e=>"accept"===e.toLowerCase()));if(t)throw new RangeError('Accept header may not be specified; only "'+f.headers.accept+'" is supported.');return Object.assign({Accept:f.headers.accept},e)},p.parseLinkHeader=e=>{const t={},n=e.match(l);for(let r=0;r<n.length;++r){let e=n[r].match(c);if(!e)continue;const o={target:e[1]},i=e[2];while(e=d.exec(i))o[e[1]]=void 0===e[2]?e[3]:e[2];const a=o.rel||"";Array.isArray(t[a])?t[a].push(o):t.hasOwnProperty(a)?t[a]=[t[a],o]:t[a]=o}return t},p.validateTypeValue=(e,t)=>{if(!o.isString(e)&&(!o.isArray(e)||!e.every((e=>o.isString(e))))){if(t&&o.isObject(e))switch(Object.keys(e).length){case 0:return;case 1:if("@default"in e&&p.asArray(e["@default"]).every((e=>o.isString(e))))return}throw new a('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}},p.hasProperty=(e,t)=>{if(e.hasOwnProperty(t)){const n=e[t];return!o.isArray(n)||n.length>0}return!1},p.hasValue=(e,t,n)=>{if(p.hasProperty(e,t)){let i=e[t];const a=r.isList(i);if(o.isArray(i)||a){a&&(i=i["@list"]);for(let e=0;e<i.length;++e)if(p.compareValues(n,i[e]))return!0}else if(!o.isArray(n))return p.compareValues(n,i)}return!1},p.addValue=(e,t,n,r)=>{if(r=r||{},"propertyIsArray"in r||(r.propertyIsArray=!1),"valueIsArray"in r||(r.valueIsArray=!1),"allowDuplicate"in r||(r.allowDuplicate=!0),"prependValue"in r||(r.prependValue=!1),r.valueIsArray)e[t]=n;else if(o.isArray(n)){0===n.length&&r.propertyIsArray&&!e.hasOwnProperty(t)&&(e[t]=[]),r.prependValue&&(n=n.concat(e[t]),e[t]=[]);for(let o=0;o<n.length;++o)p.addValue(e,t,n[o],r)}else if(e.hasOwnProperty(t)){const i=!r.allowDuplicate&&p.hasValue(e,t,n);o.isArray(e[t])||i&&!r.propertyIsArray||(e[t]=[e[t]]),i||(r.prependValue?e[t].unshift(n):e[t].push(n))}else e[t]=r.propertyIsArray?[n]:n},p.getValues=(e,t)=>[].concat(e[t]||[]),p.removeProperty=(e,t)=>{delete e[t]},p.removeValue=(e,t,n,r)=>{r=r||{},"propertyIsArray"in r||(r.propertyIsArray=!1);const o=p.getValues(e,t).filter((e=>!p.compareValues(e,n)));0===o.length?p.removeProperty(e,t):1!==o.length||r.propertyIsArray?e[t]=o:e[t]=o[0]},p.relabelBlankNodes=(e,t)=>{t=t||{};const n=t.issuer||new i("_:b");return h(n,e)},p.compareValues=(e,t)=>e===t||(!(!r.isValue(e)||!r.isValue(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!(o.isObject(e)&&"@id"in e&&o.isObject(t)&&"@id"in t)&&e["@id"]===t["@id"]),p.compareShortestLeast=(e,t)=>e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1},80421:function(e,t,n){"use strict";const r=n(48701),o=Symbol("max"),i=Symbol("length"),a=Symbol("lengthCalculator"),s=Symbol("allowStale"),l=Symbol("maxAge"),c=Symbol("dispose"),d=Symbol("noDisposeOnSet"),u=Symbol("lruList"),f=Symbol("cache"),p=Symbol("updateAgeOnGet"),h=()=>1;class g{constructor(e){if("number"===typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!==typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[o]=e.max||1/0;const t=e.length||h;if(this[a]="function"!==typeof t?h:t,this[s]=e.stale||!1,e.maxAge&&"number"!==typeof e.maxAge)throw new TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[c]=e.dispose,this[d]=e.noDisposeOnSet||!1,this[p]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!==typeof e||e<0)throw new TypeError("max must be a non-negative number");this[o]=e||1/0,b(this)}get max(){return this[o]}set allowStale(e){this[s]=!!e}get allowStale(){return this[s]}set maxAge(e){if("number"!==typeof e)throw new TypeError("maxAge must be a non-negative number");this[l]=e,b(this)}get maxAge(){return this[l]}set lengthCalculator(e){"function"!==typeof e&&(e=h),e!==this[a]&&(this[a]=e,this[i]=0,this[u].forEach((e=>{e.length=this[a](e.value,e.key),this[i]+=e.length}))),b(this)}get lengthCalculator(){return this[a]}get length(){return this[i]}get itemCount(){return this[u].length}rforEach(e,t){t=t||this;for(let n=this[u].tail;null!==n;){const r=n.prev;x(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[u].head;null!==n;){const r=n.next;x(this,e,n,t),n=r}}keys(){return this[u].toArray().map((e=>e.key))}values(){return this[u].toArray().map((e=>e.value))}reset(){this[c]&&this[u]&&this[u].length&&this[u].forEach((e=>this[c](e.key,e.value))),this[f]=new Map,this[u]=new r,this[i]=0}dump(){return this[u].map((e=>!v(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[u]}set(e,t,n){if(n=n||this[l],n&&"number"!==typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,s=this[a](t,e);if(this[f].has(e)){if(s>this[o])return m(this,this[f].get(e)),!1;const a=this[f].get(e),l=a.value;return this[c]&&(this[d]||this[c](e,l.value)),l.now=r,l.maxAge=n,l.value=t,this[i]+=s-l.length,l.length=s,this.get(e),b(this),!0}const p=new w(e,t,s,r,n);return p.length>this[o]?(this[c]&&this[c](e,t),!1):(this[i]+=p.length,this[u].unshift(p),this[f].set(e,this[u].head),b(this),!0)}has(e){if(!this[f].has(e))return!1;const t=this[f].get(e).value;return!v(this,t)}get(e){return y(this,e,!0)}peek(e){return y(this,e,!1)}pop(){const e=this[u].tail;return e?(m(this,e),e.value):null}del(e){m(this,this[f].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],o=r.e||0;if(0===o)this.set(r.k,r.v);else{const e=o-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[f].forEach(((e,t)=>y(this,t,!1)))}}const y=(e,t,n)=>{const r=e[f].get(t);if(r){const t=r.value;if(v(e,t)){if(m(e,r),!e[s])return}else n&&(e[p]&&(r.value.now=Date.now()),e[u].unshiftNode(r));return t.value}},v=(e,t)=>{if(!t||!t.maxAge&&!e[l])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[l]&&n>e[l]},b=e=>{if(e[i]>e[o])for(let t=e[u].tail;e[i]>e[o]&&null!==t;){const n=t.prev;m(e,t),t=n}},m=(e,t)=>{if(t){const n=t.value;e[c]&&e[c](n.key,n.value),e[i]-=n.length,e[f].delete(n.key),e[u].removeNode(t)}};class w{constructor(e,t,n,r,o){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=o||0}}const x=(e,t,n,r)=>{let o=n.value;v(e,o)&&(m(e,n),e[s]||(o=void 0)),o&&t.call(r,o.value,o.key,e)};e.exports=g},18444:function(e){"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},48701:function(e,t,n){"use strict";function r(e){var t=this;if(t instanceof r||(t=new r),t.tail=null,t.head=null,t.length=0,e&&"function"===typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,o=arguments.length;n<o;n++)t.push(arguments[n]);return t}function o(e,t,n){var r=t===e.head?new s(n,null,t,e):new s(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function i(e,t){e.tail=new s(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function a(e,t){e.head=new s(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function s(e,t,n,r){if(!(this instanceof s))return new s(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=r,r.Node=s,r.create=r,r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)a(this,arguments[e]);return this.length},r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},r.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},r.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},r.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},r.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},r.prototype.map=function(e,t){t=t||this;for(var n=new r,o=this.head;null!==o;)n.push(e.call(t,o.value,this)),o=o.next;return n},r.prototype.mapReverse=function(e,t){t=t||this;for(var n=new r,o=this.tail;null!==o;)n.push(e.call(t,o.value,this)),o=o.prev;return n},r.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var o=0;null!==r;o++)n=e(n,r.value,o),r=r.next;return n},r.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var o=this.length-1;null!==r;o--)n=e(n,r.value,o),r=r.prev;return n},r.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},r.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},r.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=0,i=this.head;null!==i&&o<e;o++)i=i.next;for(;null!==i&&o<t;o++,i=i.next)n.push(i.value);return n},r.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=this.length,i=this.tail;null!==i&&o>t;o--)i=i.prev;for(;null!==i&&o>e;o--,i=i.prev)n.push(i.value);return n},r.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;var a=[];for(r=0;i&&r<t;r++)a.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(r=0;r<n.length;r++)i=o(this,i,n[r]);return a},r.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{n(18444)(r)}catch(l){}},47055:function(e,t,n){e.exports=n(29344)},23445:function(e,t,n){"use strict";
/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const r=n(12401),o=n(75947),i=n(68326),a=n(69980);function s(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}e.exports=class{constructor({createMessageDigest:e=(()=>new o("sha256")),canonicalIdMap:t=new Map,maxDeepIterations:n=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new r("_:c14n",t),this.createMessageDigest=e,this.maxDeepIterations=n,this.quads=null,this.deepIterations=null}async main(e){this.deepIterations=new Map,this.quads=e;for(const r of e)this._addBlankNodeQuadInfo({quad:r,component:r.subject}),this._addBlankNodeQuadInfo({quad:r,component:r.object}),this._addBlankNodeQuadInfo({quad:r,component:r.graph});const t=new Map,n=[...this.blankNodeInfo.keys()];let o=0;for(const r of n)++o%100===0&&await this._yield(),await this._hashAndTrackBlankNode({id:r,hashToBlankNodes:t});const i=[...t.keys()].sort(),l=[];for(const r of i){const e=t.get(r);if(e.length>1){l.push(e);continue}const n=e[0];this.canonicalIssuer.getId(n)}for(const a of l){const e=[];for(const t of a){if(this.canonicalIssuer.hasId(t))continue;const n=new r("_:b");n.getId(t);const o=await this.hashNDegreeQuads(t,n);e.push(o)}e.sort(s);for(const t of e){const e=t.issuer.getOldIds();for(const t of e)this.canonicalIssuer.getId(t)}}const c=[];for(const r of this.quads){const e=a.serializeQuadComponents(this._componentWithCanonicalId(r.subject),r.predicate,this._componentWithCanonicalId(r.object),this._componentWithCanonicalId(r.graph));c.push(e)}return c.sort(),c.join("")}async hashFirstDegreeQuads(e){const t=[],n=this.blankNodeInfo.get(e),r=n.quads;for(const i of r){const n={subject:null,predicate:i.predicate,object:null,graph:null};n.subject=this.modifyFirstDegreeComponent(e,i.subject,"subject"),n.object=this.modifyFirstDegreeComponent(e,i.object,"object"),n.graph=this.modifyFirstDegreeComponent(e,i.graph,"graph"),t.push(a.serializeQuad(n))}t.sort();const o=this.createMessageDigest();for(const i of t)o.update(i);return n.hash=await o.digest(),n.hash}async hashRelatedBlankNode(e,t,n,r){let o;o=this.canonicalIssuer.hasId(e)?this.canonicalIssuer.getId(e):n.hasId(e)?n.getId(e):this.blankNodeInfo.get(e).hash;const i=this.createMessageDigest();return i.update(r),"g"!==r&&i.update(this.getRelatedPredicate(t)),i.update(o),i.digest()}async hashNDegreeQuads(e,t){const n=this.deepIterations.get(e)||0;if(n>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(e,n+1);const r=this.createMessageDigest(),o=await this.createHashToRelated(e,t),a=[...o.keys()].sort();for(const s of a){r.update(s);let e,n="";const a=new i(o.get(s));let l=0;while(a.hasNext()){const r=a.next();++l%3===0&&await this._yield();let o=t.clone(),i="";const s=[];let c=!1;for(const e of r)if(this.canonicalIssuer.hasId(e)?i+=this.canonicalIssuer.getId(e):(o.hasId(e)||s.push(e),i+=o.getId(e)),0!==n.length&&i>n){c=!0;break}if(!c){for(const e of s){const t=await this.hashNDegreeQuads(e,o);if(i+=o.getId(e),i+=`<${t.hash}>`,o=t.issuer,0!==n.length&&i>n){c=!0;break}}c||(0===n.length||i<n)&&(n=i,e=o)}}r.update(n),t=e}return{hash:await r.digest(),issuer:t}}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}async createHashToRelated(e,t){const n=new Map,r=this.blankNodeInfo.get(e).quads;let o=0;for(const i of r)++o%100===0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:i,component:i.subject,position:"s",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:i,component:i.object,position:"o",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:i,component:i.graph,position:"g",id:e,issuer:t,hashToRelated:n})]);return n}async _hashAndTrackBlankNode({id:e,hashToBlankNodes:t}){const n=await this.hashFirstDegreeQuads(e),r=t.get(n);r?r.push(e):t.set(n,[e])}_addBlankNodeQuadInfo({quad:e,component:t}){if("BlankNode"!==t.termType)return;const n=t.value,r=this.blankNodeInfo.get(n);r?r.quads.add(e):this.blankNodeInfo.set(n,{quads:new Set([e]),hash:null})}async _addRelatedBlankNodeHash({quad:e,component:t,position:n,id:r,issuer:o,hashToRelated:i}){if("BlankNode"!==t.termType||t.value===r)return;const a=t.value,s=await this.hashRelatedBlankNode(a,e,o,n),l=i.get(s);l?l.push(a):i.set(s,[a])}_componentWithCanonicalId(e){return"BlankNode"!==e.termType||e.value.startsWith(this.canonicalIssuer.prefix)?e:{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}}async _yield(){return new Promise((e=>setImmediate(e)))}}},89201:function(e,t,n){"use strict";
/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const r=n(75947),o=n(23445);e.exports=class extends o{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new r("sha1")}modifyFirstDegreeComponent(e,t,n){return"BlankNode"!==t.termType?t:"graph"===n?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}async createHashToRelated(e,t){const n=new Map,r=this.blankNodeInfo.get(e).quads;let o=0;for(const i of r){let r,a;if("BlankNode"===i.subject.termType&&i.subject.value!==e)a=i.subject.value,r="p";else{if("BlankNode"!==i.object.termType||i.object.value===e)continue;a=i.object.value,r="r"}++o%100===0&&await this._yield();const s=await this.hashRelatedBlankNode(a,i,t,r),l=n.get(s);l?l.push(a):n.set(s,[a])}return n}}},17702:function(e,t,n){"use strict";
/*!
 * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
 */const r=n(75947),o=n(5643);e.exports=class extends o{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new r("sha1")}modifyFirstDegreeComponent(e,t,n){return"BlankNode"!==t.termType?t:"graph"===n?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t){const n=new Map,r=this.blankNodeInfo.get(e).quads;for(const o of r){let r,i;if("BlankNode"===o.subject.termType&&o.subject.value!==e)i=o.subject.value,r="p";else{if("BlankNode"!==o.object.termType||o.object.value===e)continue;i=o.object.value,r="r"}const a=this.hashRelatedBlankNode(i,o,t,r),s=n.get(a);s?s.push(i):n.set(a,[i])}return n}}},29344:function(e,t,n){"use strict";const r=n(23445),o=n(89201),i=n(5643),a=n(17702);let s;try{s=n(97670)}catch(c){}function l(e){return Array.isArray(e)?e:t.NQuads.legacyDatasetToQuads(e)}t.NQuads=n(69980),t.IdentifierIssuer=n(12401),t._rdfCanonizeNative=function(e){return e&&(s=e),s},t.canonize=async function(e,t){const n=l(e,t);if(t.useNative){if(!s)throw new Error("rdf-canonize-native not available");if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise(((e,r)=>s.canonize(n,t,((t,n)=>t?r(t):e(n)))))}if("URDNA2015"===t.algorithm)return new r(t).main(n);if("URGNA2012"===t.algorithm){if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new o(t).main(n)}if(!("algorithm"in t))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm)},t._canonizeSync=function(e,t){const n=l(e,t);if(t.useNative){if(!s)throw new Error("rdf-canonize-native not available");if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return s.canonizeSync(n,t)}if("URDNA2015"===t.algorithm)return new i(t).main(n);if("URGNA2012"===t.algorithm){if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new a(t).main(n)}if(!("algorithm"in t))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm)}},97670:function(){},77689:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(90540),o=n(36805),i=n(57164),a=n(41775);class s extends i.Readable{constructor(e,{baseIRI:t,compact:n,context:r={},encoding:o="object",flatten:i,frame:a,prettyPrint:s,skipContext:l}={}){super({objectMode:!0,read:()=>{}}),this.compact=n,this.context=r,this.encoding=o,this.flatten=i,this.frame=a,this.prettyPrint=s,this.skipContext=l,t&&(this.context["@base"]=t.value||t.toString()),e.on("prefix",((e,t)=>{this.context[e]||(this.context[e]=t.value)})),this.handleData(e)}async handleData(e){try{const t=(await(0,a.Z)(e)).map(s.toJsonldQuad),n=await o.fromRDF(t),r=await this.transform(n,this.options);this.push(r),this.push(null)}catch(t){this.emit("error",t)}}async transform(e){return this.compact&&(e=await o.compact(e,this.context)),this.flatten&&(e=await o.flatten(e,this.context)),this.frame&&(e=await o.frame(e,this.context)),this.skipContext&&e["@context"]&&delete e["@context"],"string"===this.encoding?this.prettyPrint?JSON.stringify(e,null,2):JSON.stringify(e):e}static toJsonldQuad(e){return{subject:s.toJsonldTerm(e.subject),predicate:s.toJsonldTerm(e.predicate),object:s.toJsonldTerm(e.object),graph:s.toJsonldTerm(e.graph)}}static toJsonldTerm(e){return"BlankNode"===e.termType?{termType:"BlankNode",value:`_:${e.value}`}:e}}var l=s;class c extends r.Z{constructor(e){super(l,e)}}var d=c},90540:function(e,t){"use strict";class n{constructor(e,t){this.Impl=e,this.options=t}import(e,t){const n=new this.Impl(e,{...this.options,...t});return e.on("end",(()=>{n.readable||n.emit("end")})),e.on("error",(e=>{n.emit("error",e)})),n}}t.Z=n}}]);
//# sourceMappingURL=689.2875210a.js.map