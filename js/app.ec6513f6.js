(function(){var e={84152:function(e,t,n){"use strict";var s=n(49963),a=n(66252);const l={id:"app",class:"h-full flex flex-col"};var o=(0,a.aZ)({__name:"App",setup(e){let t=null;function n(e){t=e.detail,s()}function s(){t&&t.waiting&&t.waiting.postMessage({type:"SKIP_WAITING"})}function o(){window.location.reload()}return(0,a.bv)((()=>{document.addEventListener("swUpdated",n,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",o)})),(0,a.Jd)((()=>{document.addEventListener("swUpdated",n),navigator.serviceWorker.removeEventListener("controllerchange",o)})),(e,t)=>{const n=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",l,[(0,a.Wm)(n)])}}});const r=o;var i=r,c=n(22201),u=(n(57658),n(2262)),p=n(3577),d=n(73462),m=n(22886),f=n(47327),h=n(74919),v=n(62439),g=n(39155),w=n.n(g),y=n(54803),b=n(58027);const _=".well-known/void",x=[...Object.keys(b.q1)],k=["en","*"];class S{static getInstance(e){if(null===this._endpointInstance&&e)return this._endpointInstance=new S(e),this._endpointInstance;if(e&&this._endpointInstance&&this._endpointInstance.applySettings(e),null===this._endpointInstance)throw new Error("Endpoint Not Configured");return this._endpointInstance}constructor(e){(0,f.Z)(this,"_settings",void 0),(0,f.Z)(this,"_client",void 0),this._settings=e,this.applySettings(e)}applySettings(e){this._settings=e,this._client=new(w())({endpointUrl:this._settings.sparqlEndpoint??"",user:this._settings.username??void 0,password:this._settings.password??void 0}),Object.keys(b.q1).forEach((e=>{x.includes(e)||delete b.q1[e]})),this._settings.prefixes.forEach((({prefix:e,namespace:t})=>{b.q1[e]=t}))}shrink(e){return(0,h.F)(e)||e}async fetchGraphs(e){const t=e?.offset??0,n=e?.limit??null,s=`\n      SELECT DISTINCT ?g\n      WHERE {\n        GRAPH ?g { ?s ?p ?o }\n      }\n      ORDER BY ?g\n      OFFSET ${t}\n      LIMIT ${n}\n    `,a=await this._client.query.select(s);return a.map((({g:{value:e}})=>e))}async fetchDataModel(){if(this._settings.forceIntrospection)return this.fetchIntrospectDataModel();const e=await this.fetchPredefinedDataModel();return e.tables?e:this.fetchIntrospectDataModel()}get datasetURI(){return this._settings.sparqlEndpoint?.replace(/query\/?$/,_)??""}get sparqlEndpoint(){return this._settings.sparqlEndpoint??""}get prefixes(){return this._settings.prefixes}async fetchPredefinedDataModel(){const e=this._settings.namedGraph?`FROM <${this._settings.namedGraph}>`:"",t=`\n      #pragma describe.strategy cbd\n      DESCRIBE <${this.datasetURI}>\n      ${e}\n    `,n=await this._client.query.construct(t),s=v.ZP.clownface({dataset:v.ZP.dataset(n),term:v.ZP.namedNode(this.datasetURI)});return this.dataModelFromSHACL(s)}dataModelFromSHACL(e){return(0,y.zV)(e,k,this.shrink)}dataModelToSHACL(e){return(0,y.oV)(e,this.datasetURI)}async fetchIntrospectDataModel(){const e=await this._fetchStructure(),t=e.reduce(((e,{cls:t,property:n,linktype:s,datatype:a})=>{const l=e.get(t.value)??{id:t.value,name:this.shrink(t.value),properties:new Map,isShown:!0},o=s&&s.value||a&&a.value||null,r=s?"NamedNode":a?"Literal":null,i=o&&{id:o,name:this.shrink(o),termType:r};return l.properties.has(n.value)?i&&l.properties.get(n.value).values.push(i):l.properties.set(n.value,{id:n.value,name:this.shrink(n.value),values:i?[i]:[]}),e.set(t.value,l),e}),new Map),n=[...t.values()].map((e=>({...e,properties:[...e.properties.values()]}))),s=await this.countClasses();return n.forEach((e=>{e.count=s.get(e.id)})),{tables:n,viewports:[],isIntrospected:!0}}async _fetchStructure(){const e=this._settings.namedGraph?`FROM <${this._settings.namedGraph}>`:"",t=`\n      SELECT DISTINCT ?cls ?property ?linktype ?datatype\n      ${e}\n      WHERE {\n        ?subject a ?cls .\n        ?subject ?property ?object .\n\n        OPTIONAL {\n          ?object a ?linktype .\n        }\n\n        BIND(DATATYPE(?object) AS ?datatype)\n      }\n    `;return this._client.query.select(t)}async fetchTableData(e,t){const n=v.ZP.namedNode(e.id),s=t?.limit??10,a=t?.offset??0,l=this._settings.namedGraph?`GRAPH <${this._settings.namedGraph}>`:"",o=`\n      DESCRIBE ?subject {\n        {\n          SELECT ?subject\n          WHERE {\n            ${l} {\n              ?subject a <${e.id}>\n            }\n          }\n          LIMIT ${s}\n          OFFSET ${a}\n        }\n      }\n    `,r=await this._client.query.construct(o),i=v.ZP.dataset(r),c=[...i.match(null,b.E_.type,n)],u=v.ZP.termMap(c.map((({subject:e})=>[e,{id:e.value,term:e}])));return r.forEach((({subject:e,predicate:{value:t},object:n})=>{const s=u.get(e);s&&(s[t]||(s[t]=v.ZP.termSet()),s[t].add(n),u.set(e,s))})),[...u.values()]}async fetchResource(e){const t=`\n      DESCRIBE <${e}> {}\n    `,n=await this._client.query.construct(t),s=n.reduce(((e,{predicate:t,object:n})=>{if(!e.has(t.value)){const n={id:t.value,term:t,name:this.shrink(t.value),values:v.ZP.termSet()};e.set(t.value,n)}return e.get(t.value).values.add(n),e}),new Map),a={value:e,termType:"NamedNode"};return{id:e,term:a,name:this.shrink(a.value),properties:[...s.values()]}}async canFetchOne(){const e="\n      SELECT ?s WHERE {\n        ?s ?p ?o\n      } LIMIT 1\n    ";try{const t=await this._client.query.select(e);return 1===t.length}catch(t){return!1}}async countClasses(){const e=new Map,t=E(this._settings.namedGraph),n=await this._client.query.select(t);return n.forEach((t=>{e.set(t.class.value,Number(t.count.value))})),e}}function E(e){const t=e?`FROM <${e}>`:"";return`\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n\nSELECT ?class (count(?x) as ?count) ${t} WHERE {\n  ?x a ?class . \n} group by ?class\n`}(0,f.Z)(S,"_endpointInstance",null);n(24512);var U=n(26786),I=n(19863),C=n(25616),j=n(41283);const q={class:"flex items-center justify-center min-h-screen"},O={class:"modal-card"},Z={name:"SpexDialog"};var W=(0,a.aZ)({...Z,props:{open:{type:Boolean}},emits:["close"],setup(e,{emit:t}){return(t,n)=>((0,a.wg)(),(0,a.j4)((0,u.SU)(j.Vq),{open:e.open,onClose:n[0]||(n[0]=e=>t.$emit("close")),class:"fixed inset-0 z-10 overflow-y-auto"},{default:(0,a.w5)((()=>[(0,a._)("div",q,[(0,a.Wm)((0,u.SU)(j.t9),{class:"fixed inset-0 bg-black opacity-50"}),(0,a._)("div",O,[(0,a.WI)(t.$slots,"default")])])])),_:3},8,["open"]))}});const D=W;var H=D,z=n(14592),P=n(65981);const $=e=>((0,a.dD)("data-v-369db967"),e=e(),(0,a.Cn)(),e),L={class:"modal-card-head py-4"},T=$((()=>(0,a._)("h3",{style:{color:"grey"}},"Generated SHACL shapes",-1))),M={class:"ml-auto"},N={class:"modal-card-body overflow-y-hidden flex flex-col pb-0"},F={class:"flex justify-between"},R={class:"flex items-center gap-2"},V=$((()=>(0,a._)("span",null,"Copy",-1))),G={name:"ModalShacl"};var A=(0,a.aZ)({...G,props:{datamodel:null,loadShacl:null},emits:["close","open-load-shacl"],setup(e,{emit:t}){const n=e,l=S.getInstance(),o=(0,a.Fl)((()=>l.prefixes.reduce(((e,{prefix:t,namespace:n})=>({...e,[t]:n})),{}))),r=(0,a.Fl)((()=>[...l.dataModelToSHACL(n.datamodel).dataset])),i=(0,u.iH)(null),c=(0,u.iH)(null),d=(0,u.iH)([{label:"JSON-LD",value:"application/ld+json"},{label:"Turtle",value:"text/turtle"},{label:"N-Triples",value:"application/n-triples"}]),m=(0,u.iH)("application/ld+json"),f=(0,u.iH)(["sh","schema"].join(","));async function h(){const e=c.value.codeMirror.value;await navigator.clipboard.writeText(e),i.value="Copied ðŸ‘",setTimeout((()=>{i.value=null}),3e3)}function v(){t("open-load-shacl"),t("close")}return(e,t)=>{const n=(0,a.up)("rdf-editor");return(0,a.wg)(),(0,a.j4)(H,{onClose:t[2]||(t[2]=t=>e.$emit("close"))},{default:(0,a.w5)((()=>[(0,a._)("div",L,[T,(0,a._)("div",M,[(0,a.Wm)(z.Z,{label:"Load SHACL shapes",position:"bottom",class:"mr-4"},{default:(0,a.w5)((()=>[(0,a._)("button",{class:"button",onClick:v},[(0,a.Wm)((0,u.SU)(U),{class:"icon"})])])),_:1}),(0,a.Wm)(z.Z,{label:"Close",position:"bottom"},{default:(0,a.w5)((()=>[(0,a._)("button",{class:"button is-light",onClick:t[0]||(t[0]=t=>e.$emit("close"))},[(0,a.Wm)((0,u.SU)(I),{class:"icon"})])])),_:1})])]),(0,a._)("div",N,[(0,a._)("div",F,[(0,a.Wm)((0,u.SU)(P.Ee),{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=e=>m.value=e),class:"field has-addons"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.value,(e=>((0,a.wg)(),(0,a.j4)((0,u.SU)(P.$v),{key:e.value,value:e.value,class:"control"},{default:(0,a.w5)((({checked:t})=>[(0,a._)("span",{class:(0,p.C_)(["button",t?"is-primary":""])},(0,p.zw)(e.label),3)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,a._)("div",R,[(0,a.wy)((0,a._)("span",{class:"text-green-500"},(0,p.zw)(i.value),513),[[s.F8,i.value]]),(0,a._)("button",{class:"button",onClick:h},[(0,a.Wm)((0,u.SU)(C),{class:"icon"}),V])])]),(0,a.Wm)(n,{format:m.value,".quads":(0,u.SU)(r),".prefixes":f.value,".customPrefixes":(0,u.SU)(o),ref_key:"snippet",ref:c,class:"overflow-y-auto"},null,8,["format",".quads",".prefixes",".customPrefixes"])])])),_:1})}}}),B=n(83744);const Y=(0,B.Z)(A,[["__scopeId","data-v-369db967"]]);var K=Y;const X={class:"modal-card-head py-4"},J=(0,a._)("h3",{style:{color:"grey"}},"Load SHACL shapes",-1),Q={class:"ml-auto"},ee={class:"modal-card-body"},te={class:"field"},ne={key:0,class:"help is-danger"},se=(0,a._)("p",{class:"help",style:{color:"grey"}},[(0,a.Uk)(" Paste your SHACL shapes in "),(0,a._)("strong",null,"Turtle"),(0,a.Uk)(" format in the field above. ")],-1),ae=(0,a._)("div",{class:"field"},[(0,a._)("button",{class:"button is-primary",type:"submit"},"Load")],-1);function le(e,t,n,l,o,r){const i=(0,a.up)("XMarkIcon"),c=(0,a.up)("SpexDialog");return(0,a.wg)(),(0,a.j4)(c,{onClose:t[3]||(t[3]=t=>e.$emit("close"))},{default:(0,a.w5)((()=>[(0,a._)("div",X,[J,(0,a._)("div",Q,[(0,a._)("button",{class:"button is-light",title:"Close",onClick:t[0]||(t[0]=t=>e.$emit("close"))},[(0,a.Wm)(i,{class:"icon"})])])]),(0,a._)("div",ee,[(0,a._)("form",{onSubmit:t[2]||(t[2]=(0,s.iM)(((...e)=>r.onSubmit&&r.onSubmit(...e)),["prevent"]))},[(0,a._)("div",te,[(0,a.wy)((0,a._)("textarea",{type:"textarea",class:(0,p.C_)(["textarea",{"is-danger":o.error}]),"onUpdate:modelValue":t[1]||(t[1]=e=>o.data=e)},null,2),[[s.nr,o.data]]),o.error?((0,a.wg)(),(0,a.iD)("p",ne,(0,p.zw)(o.error),1)):(0,a.kq)("",!0),se]),ae],32)])])),_:1})}var oe=n(57003),re={name:"ModalShaclLoad",props:["load","endpoint"],emits:["close"],components:{SpexDialog:H,XMarkIcon:I},data(){return{data:"",error:null}},methods:{async onSubmit(){if(!this.data)return;const e=new oe.Z;try{const t=e.parse(this.data),n=v.ZP.dataset(t),s=v.ZP.clownface({dataset:n,term:b.It.DefaultShapes}).in(b.E_.type).in(b.It.shape);if(!s.term)throw new Error("No node with spex:shape pointing to a spex:DefaultShapes found");const a=this.endpoint.dataModelFromSHACL(s);this.load(a),this.$emit("close")}catch(t){this.error=t.toString()}}}};const ie=(0,B.Z)(re,[["render",le]]);var ce=ie,ue=n(45816),pe=n(34539),de=n(54799);const me={class:"flex gap-1"},fe={name:"ShapeComponent"};var he=(0,a.aZ)({...fe,props:{table:null,activeLinks:null},emits:["hide","explore","export"],setup(e,{emit:t}){const n=(0,u.iH)(null);function s(e){t("export",e),n.value="ðŸ‘",setTimeout((()=>{n.value=null}),1500)}return(t,l)=>((0,a.wg)(),(0,a.j4)(de.Z,{resource:e.table,"active-links":e.activeLinks},{actions:(0,a.w5)((()=>[(0,a._)("div",me,[(0,a.Wm)(z.Z,{label:`${n.value?n.value:"Copy"}`},{default:(0,a.w5)((()=>[(0,a._)("button",{class:"button is-light is-small",onClick:l[0]||(l[0]=t=>s(e.table))},[(0,a.Wm)((0,u.SU)(C),{class:"icon"})])])),_:1},8,["label"]),(0,a.Wm)(z.Z,{label:"Hide"},{default:(0,a.w5)((()=>[(0,a._)("button",{class:"button is-light is-small",onClick:l[1]||(l[1]=n=>t.$emit("hide",e.table))},[(0,a.Wm)((0,u.SU)(ue),{class:"icon"})])])),_:1}),(0,a.Wm)(z.Z,{label:"Explore"},{default:(0,a.w5)((()=>[(0,a._)("button",{class:"button is-light is-small",onClick:l[2]||(l[2]=n=>t.$emit("explore",e.table))},[(0,a.Wm)((0,u.SU)(pe),{class:"icon"})])])),_:1})])])),_:1},8,["resource","active-links"]))}});const ve=he;var ge=ve,we=n(15409);const ye={class:"z-10 absolute bottom-2 right-2 text-sm text-gray-400"},be={key:1,class:"flex-grow bg-gray-50 flex flex-col items-center justify-center"},_e=(0,a._)("p",{class:"pb-4"},"No classes to show",-1),xe=[_e],ke={name:"DataModelComponent"};var Se=(0,a.aZ)({...ke,props:{datamodel:null},emits:["explore","toggle-shape","export"],setup(e,{emit:t}){const n=e,l=(0,u.iH)([]),o=(0,a.Fl)((()=>n.datamodel.tables.filter((({isShown:e})=>e)))),r=(0,a.Fl)((()=>{const e=new Set(o.value.map((({id:e})=>e)));return o.value.flatMap((e=>e.properties.map((t=>({...t,table:e}))))).reduce(((t,n)=>(n.values.forEach((s=>{const a=n.table.id,l=s.id;e.has(l)&&t.push({source:a,target:l,sourceProperty:n.id,label:n.name})})),t)),[])}));function i(e){l.value=r.value.filter((t=>t.source===e.id))}function c(e,t){l.value=r.value.filter((n=>n.source===e.id&&n.sourceProperty===t.id))}function p(){l.value=[]}function d(e){l.value=[e]}return(t,n)=>(0,u.SU)(o).length>0?((0,a.wg)(),(0,a.j4)((0,u.SU)(we.Y),{key:0,nodes:(0,u.SU)(o),links:(0,u.SU)(r),"active-links":l.value,onLinkEnter:d,onLinkOut:p,class:"bg-gray-50 dark:bg-gray-700 flex-grow"},{node:(0,a.w5)((({node:e})=>[(0,a.Wm)(ge,{table:e,"active-links":l.value,onExplore:n[0]||(n[0]=e=>t.$emit("explore",e)),onHide:n[1]||(n[1]=e=>t.$emit("toggle-shape",e,!1)),onExport:n[2]||(n[2]=e=>t.$emit("export",e)),onHoverTitle:i,onUnhoverTitle:p,onHoverProperty:c,onUnhoverProperty:p},null,8,["table","active-links"])])),default:(0,a.w5)((()=>[(0,a.WI)(t.$slots,"default"),(0,a.wy)((0,a._)("p",ye," introspected ",512),[[s.F8,e.datamodel.isIntrospected]])])),_:3},8,["nodes","links","active-links"])):((0,a.wg)(),(0,a.iD)("div",be,xe))}});const Ee=Se;var Ue=Ee,Ie=n(14966);const Ce={key:0,class:"has-text-grey"},je={name:"SpexTerm"};var qe=(0,a.aZ)({...je,props:{term:null},setup(e){const t=e,n=S.getInstance(),s=(0,u.iH)(i(n,t.term)),l=c(n,t.term),o=(0,u.iH)(t.term&&t.term.language),r=(0,u.iH)(l!==s.value?l:"");function i(e,t){return t?"NamedNode"===t.termType?e.shrink(t.value):t.value:t}function c(e,t){if("Literal"===t.termType){const n=t.datatype?`^^${e.shrink(t.datatype.value)}`:"",s=t.language?`@${t.language}`:"";return`${t.value}${n}${s}`}return t.value}return(e,t)=>((0,a.wg)(),(0,a.j4)(z.Z,{label:r.value},{default:(0,a.w5)((()=>[(0,a.Uk)((0,p.zw)(s.value),1),o.value?((0,a.wg)(),(0,a.iD)("small",Ce,"@"+(0,p.zw)(o.value),1)):(0,a.kq)("",!0)])),_:1},8,["label"]))}});const Oe=qe;var Ze=Oe,We=n(20401);const De={name:"TermExploreButton"};var He=(0,a.aZ)({...De,props:{term:null},emits:["explore-resource"],setup(e,{emit:t}){const n=e,s=(0,a.Fl)((()=>["NamedNode","BlankNode"].includes(n.term.termType))),l=(0,a.Fl)((()=>{const e={id:n.term.value,name:n.term.value,term:n.term};return e}));return(e,t)=>(0,u.SU)(s)?((0,a.wg)(),(0,a.j4)(z.Z,{key:0,label:"Explore"},{default:(0,a.w5)((()=>[(0,a._)("button",{class:"button is-white is-small",onClick:t[0]||(t[0]=t=>e.$emit("explore-resource",(0,u.SU)(l)))},[(0,a.Wm)((0,u.SU)(We),{class:"icon"})])])),_:1})):(0,a.kq)("",!0)}});const ze=He;var Pe=ze;const $e={class:"card h-full flex flex-col"},Le={class:"card-header has-background-light"},Te=(0,a._)("h3",{class:"card-header-title"}," Resources Explorer ",-1),Me={class:"card-header-icon py-0 px-1"},Ne=["href"],Fe=["onClick"],Re={class:"flex items-center"},Ve={name:"ResourcesExplorer"};var Ge=(0,a.aZ)({...Ve,props:{resources:null},emits:["explore-resource","unexplore-resource","close"],setup(e,{emit:t}){const n=e,s=(0,c.yj)(),l=S.getInstance(),o=(0,a.Fl)((()=>{const e=new Set(n.resources.map((({id:e})=>e)));return n.resources.filter((e=>e.properties)).flatMap((e=>e.properties.map((t=>({...t,resource:e}))))).reduce(((t,n)=>(n.values.forEach((s=>{const a=n.resource.id,l=s.value;e.has(l)&&t.push({source:a,target:l,sourceProperty:n.id,label:n.name})})),t)),[])})),r=(0,u.iH)([]);function i(e){r.value.push(e)}function p(){r.value=[]}function d(e){r.value=o.value.filter((t=>t.source===e.id))}function m(e,t){r.value=o.value.filter((n=>n.source===e.id&&n.sourceProperty===t.id))}async function f(){n.resources.forEach((async e=>{if(!e.isFetched)try{const n=await l.fetchResource(e.id),s={...n,isFetched:!0};t("explore-resource",s)}catch(n){const s={...e,isFetched:!0};t("explore-resource",s)}}))}(0,a.bv)((()=>{f()})),(0,a.YP)(n.resources,f);(0,a.Fl)((()=>s.params.uri));return(t,n)=>((0,a.wg)(),(0,a.iD)("div",$e,[(0,a._)("div",Le,[Te,(0,a._)("p",Me,[(0,a._)("button",{class:"button is-light",onClick:n[0]||(n[0]=e=>t.$emit("close")),title:"Close"},[(0,a.Wm)((0,u.SU)(I),{class:"icon"})])])]),(0,a.Wm)((0,u.SU)(we.Y),{class:"card-content p-0",nodes:e.resources,links:(0,u.SU)(o),"active-links":r.value,"auto-zoom":!1,onLinkEnter:i,onLinkOut:p},{node:(0,a.w5)((({node:e})=>[(0,a.Wm)(de.Z,{resource:e,"active-links":r.value,onHoverTitle:d,onUnhoverTitle:p,onHoverProperty:m,onUnhoverProperty:p},{actions:(0,a.w5)((()=>[(0,a.Wm)(z.Z,{label:"Open URI in new tab"},{default:(0,a.w5)((()=>[(0,a._)("a",{href:e.id,target:"_blank",rel:"noopener noreferrer",class:"button is-light"},[(0,a.Wm)((0,u.SU)(Ie),{class:"icon"})],8,Ne)])),_:2},1024),(0,a.Wm)(z.Z,{label:"Hide"},{default:(0,a.w5)((()=>[(0,a._)("button",{class:"button is-light",onClick:n=>t.$emit("unexplore-resource",e)},[(0,a.Wm)((0,u.SU)(ue),{class:"icon"})],8,Fe)])),_:2},1024)])),"property-value":(0,a.w5)((({value:e})=>[(0,a._)("div",Re,[(0,a.Wm)(Ze,{term:e,endpoint:(0,u.SU)(l)},null,8,["term","endpoint"]),(0,a.Wm)(Pe,{term:e,onExploreResource:n[1]||(n[1]=e=>t.$emit("explore-resource",e))},null,8,["term"])])])),_:2},1032,["resource","active-links"])])),_:1},8,["nodes","links","active-links"])]))}});const Ae=Ge;var Be=Ae,Ye=n(77826),Ke=n(78911),Xe=n(66166),Je=n(98547),Qe=n(39598);const et={class:"animate-spin h-8 w-8",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},tt=(0,a._)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"#ffb15e","stroke-width":"4"},null,-1),nt=(0,a._)("path",{class:"opacity-75",fill:"#ffb15e",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),st=[tt,nt];function at(e,t){return(0,a.wg)(),(0,a.iD)("svg",et,st)}const lt={},ot=(0,B.Z)(lt,[["render",at]]);var rt=ot;const it=["id","value"],ct={key:0},ut=(0,a._)("span",null,"Load more",-1),pt={name:"SelectGraph"};var dt=(0,a.aZ)({...pt,props:{id:null,modelValue:null,graphs:null,loading:{type:Boolean},hasMoreGraphs:{type:Boolean}},emits:["update:modelValue","fetch-more"],setup(e,{emit:t}){return(t,n)=>((0,a.wg)(),(0,a.j4)((0,u.SU)(Je.Ri),{as:"div",class:"control",modelValue:e.modelValue,"onUpdate:modelValue":n[2]||(n[2]=e=>t.$emit("update:modelValue",e))},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(Je.Y4),{as:"div",class:"relative"},{default:(0,a.w5)((()=>[(0,a._)("input",{id:e.id,placeholder:"DEFAULT",class:"input",value:e.modelValue,onInput:n[0]||(n[0]=e=>t.$emit("update:modelValue",e.target.value)),autocomplete:"off"},null,40,it),(0,a.wy)((0,a.Wm)(rt,{class:"absolute top-2 right-2"},null,512),[[s.F8,e.loading]])])),_:1}),(0,a.Wm)(s.uT,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"scale-95 opacity-0","enter-to-class":"scale-100 opacity-100","leave-active-class":"transition duration-75 ease-out","leave-from-class":"scale-100 opacity-100","leave-to-class":"scale-95 opacity-0"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(Je.O_),{as:"ul",class:"bg-white border border-gray-100 shadow-md absolute w-full z-10 max-h-64 overflow-y-scroll"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.graphs,(e=>((0,a.wg)(),(0,a.j4)((0,u.SU)(Je.wt),{as:"template",key:e,value:e},{default:(0,a.w5)((({active:t,selected:n})=>[(0,a._)("li",{class:(0,p.C_)(["px-2 py-2",{"bg-gray-100":t,"bg-primary-300":n}])},(0,p.zw)(e),3)])),_:2},1032,["value"])))),128)),e.hasMoreGraphs?((0,a.wg)(),(0,a.iD)("li",ct,[(0,a._)("button",{type:"button",class:(0,p.C_)(["button is-light justify-start w-full",{"is-loading":e.loading}]),onClick:n[1]||(n[1]=e=>t.$emit("fetch-more"))},[(0,a.Wm)((0,u.SU)(Qe),{class:"icon"}),ut],2)])):(0,a.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"]))}});const mt=dt;var ft=mt,ht=n(77925);const vt={name:"SpexSwitch"};var gt=(0,a.aZ)({...vt,props:{modelValue:null},emits:["update:modelValue"],setup(e,{emit:t}){return(t,n)=>((0,a.wg)(),(0,a.j4)((0,u.SU)(ht.rs),{modelValue:e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=e=>t.$emit("update:modelValue",e)),class:(0,p.C_)([e.modelValue?"bg-primary-400":"bg-gray-300","relative inline-flex shrink-0 items-center h-6 w-10 rounded-full shadow-inner"])},{default:(0,a.w5)((()=>[(0,a._)("span",{class:(0,p.C_)([e.modelValue?"translate-x-5":"translate-x-1","inline-block w-4 h-4 bg-white rounded-full shadow transition duration-200 ease-in-out"])},null,2)])),_:1},8,["modelValue","class"]))}});const wt=gt;var yt=wt;const bt={class:"card is-shadowless h-full overflow-y-auto"},_t={class:"card-header has-background-light"},xt=(0,a._)("h3",{class:"card-header-title"},"Options",-1),kt={class:"card-header-icon py-0 px-1"},St=["onSubmit"],Et={class:"field"},Ut=(0,a._)("label",{class:"label",for:"endpoint"},"Sparql Endpoint URL",-1),It={class:"control has-icons-right"},Ct={key:0,class:"icon is-small is-right",CheckIcon:""},jt={class:"field"},qt=(0,a._)("label",{class:"label",for:"username"},"Username",-1),Ot={class:"field"},Zt=(0,a._)("label",{class:"label",for:"password"},"Password",-1),Wt=(0,a._)("label",{class:"label",for:"graph"},"Named Graph",-1),Dt={class:"field"},Ht={key:0,class:"message is-danger"},zt={class:"message-body"},Pt={class:"field"},$t=(0,a._)("label",{class:"label"},"Custom prefixes",-1),Lt={class:"flex flex-col gap-1"},Tt=["onUpdate:modelValue"],Mt=["onUpdate:modelValue"],Nt=["onClick"],Ft={key:0,class:"has-text-grey"},Rt={class:"field"},Vt={class:"label flex items-center gap-2"},Gt=(0,a._)("p",{class:"help"},[(0,a.Uk)(" By default, the explorer will use the endpoint schema provided at "),(0,a._)("code",null,"endpoint/.well-known/void"),(0,a.Uk)(" (if any). Use this option to force an introspection. ")],-1),At=(0,a._)("div",{class:"field"},[(0,a._)("button",{class:"button is-primary",type:"submit"},"Load")],-1),Bt={name:"SettingsPane"};var Yt=(0,a.aZ)({...Bt,props:{settings:null},emits:["settingsChanged","close"],setup(e,{emit:t}){const n=e,l=10,o=(0,u.iH)({sparqlEndpoint:n.settings.sparqlEndpoint,namedGraph:n.settings.namedGraph,prefixes:n.settings.prefixes,username:n.settings.username,password:n.settings.password,forceIntrospection:n.settings.forceIntrospection}),r=(0,u.iH)(!1),i=(0,u.iH)(!1);let c=null;n.settings.sparqlEndpoint&&_();const d=(0,u.iH)([]),m=(0,u.iH)(!1),f=(0,u.iH)(!1),h=(0,u.iH)(null),v=(0,u.iH)(0);function g(){t("settingsChanged",o.value)}function w(){t("close")}function y(e){o.value.namedGraph=null,_()}function b(e){((o.value.username?.length??0)>0&&(o.value.username?.length??0)>0||0===(o.value.username?.length??0)&&0===(o.value.username?.length??0))&&_()}async function _(){const e=S.getInstance(o.value);r.value=await e.canFetchOne(),i.value=!1,r.value&&x()}async function x(){f.value=!0,c=S.getInstance(o.value),v.value=0,d.value=await E()??[]}async function k(){const e=await E()??[];d.value=d.value.concat(e)}async function E(){f.value=!0,h.value="";try{const e={offset:v.value,limit:l},t=await(c?.fetchGraphs(e));return v.value=v.value+l,m.value=(t?.length??0)>=l,t}catch(e){return h.value=e.toString(),[]}finally{f.value=!1}}function U(){o.value.prefixes.push({prefix:"",namespace:""})}function C(e){o.value.prefixes.splice(e,1)}function j(){i.value=!0,c=null}return(0,a.bv)((async()=>{null!==n.settings.sparqlEndpoint&&await x()})),(e,t)=>((0,a.wg)(),(0,a.iD)("div",bt,[(0,a._)("div",_t,[xt,(0,a._)("p",kt,[(0,a._)("button",{type:"button",class:"button is-light",onClick:w,title:"Close"},[(0,a.Wm)((0,u.SU)(I),{class:"icon"})])])]),(0,a._)("form",{class:"card-content",onSubmit:(0,s.iM)(g,["prevent"])},[(0,a._)("div",Et,[Ut,(0,a._)("p",It,[(0,a.wy)((0,a._)("input",{id:"endpoint",type:"text",class:"input","onUpdate:modelValue":t[0]||(t[0]=e=>o.value.sparqlEndpoint=e),onBlur:y,onFocusin:j},null,544),[[s.nr,o.value.sparqlEndpoint]]),i.value?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",Ct,[r.value?((0,a.wg)(),(0,a.j4)((0,u.SU)(Ye),{key:0,class:"icon",style:{color:"green"}})):(0,a.kq)("",!0),r.value?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)((0,u.SU)(I),{key:1,class:"icon",style:{color:"red"}}))]))])]),(0,a._)("div",jt,[qt,(0,a.wy)((0,a._)("input",{id:"username",type:"text",class:"input","onUpdate:modelValue":t[1]||(t[1]=e=>o.value.username=e),onBlur:b},null,544),[[s.nr,o.value.username]])]),(0,a._)("div",Ot,[Zt,(0,a.wy)((0,a._)("input",{id:"password",type:"password",class:"input","onUpdate:modelValue":t[2]||(t[2]=e=>o.value.password=e),onBlur:b},null,544),[[s.nr,o.value.password]])]),(0,a._)("div",{class:(0,p.C_)(["field",h.value?"is-danger":""])},[Wt,(0,a.Wm)(ft,{id:"graph",modelValue:o.value.namedGraph,"onUpdate:modelValue":t[3]||(t[3]=e=>o.value.namedGraph=e),graphs:d.value,loading:f.value,"has-more-graphs":m.value,onFetchMore:k},null,8,["modelValue","graphs","loading","has-more-graphs"])],2),(0,a._)("div",Dt,[h.value?((0,a.wg)(),(0,a.iD)("div",Ht,[(0,a._)("div",zt,(0,p.zw)(h.value),1)])):(0,a.kq)("",!0)]),(0,a._)("div",Pt,[$t,(0,a._)("div",Lt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.value.prefixes,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"flex gap-1"},[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t=>e.prefix=t,placeholder:"schema",class:"input w-24",required:""},null,8,Tt),[[s.nr,e.prefix]]),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t=>e.namespace=t,placeholder:"http://schema.org/",class:"input flex-grow",required:""},null,8,Mt),[[s.nr,e.namespace]]),(0,a._)("button",{type:"button",class:"button is-white",title:"Remove prefix",onClick:e=>C(t)},[(0,a.Wm)((0,u.SU)(Ke),{class:"icon"})],8,Nt)])))),128)),0===o.value.prefixes.length?((0,a.wg)(),(0,a.iD)("p",Ft," No custom prefix ")):(0,a.kq)("",!0),(0,a._)("p",null,[(0,a._)("button",{type:"button",class:"button is-white",title:"Add prefix",onClick:U},[(0,a.Wm)((0,u.SU)(Xe),{class:"icon"})])])])]),(0,a._)("div",Rt,[(0,a._)("label",Vt,[(0,a.Wm)(yt,{modelValue:o.value.forceIntrospection,"onUpdate:modelValue":t[4]||(t[4]=e=>o.value.forceIntrospection=e)},null,8,["modelValue"]),(0,a.Uk)(" Force introspection ")]),Gt]),At],40,St)]))}});const Kt=Yt;var Xt=Kt,Jt=n(95284),Qt=n(91452);const en={class:"card h-full flex flex-col"},tn={class:"card-header has-background-light"},nn={class:"card-header-title"},sn={key:0},an={key:1},ln={class:"card-header-icon py-0 px-1"},on={class:"card-content h-full p-0 overflow-auto flex flex-col"},rn={key:0,class:"table is-fullwidth mb-0"},cn=(0,a._)("th",null,"URI",-1),un={class:"border-b"},pn={class:"flex items-center"},dn={class:"sticky bottom-0"},mn={class:"bg-gray-50"},fn=["colspan"],hn={class:"flex items-center gap-2"},vn=["disabled"],gn={key:1,class:"flex-grow flex justify-center items-center"},wn={key:2,class:"message is-danger"},yn={class:"message-body"},bn={name:"TableExplorer"};var _n=(0,a.aZ)({...bn,props:{table:null,tables:null},emits:["close","explore-resource"],setup(e,{emit:t}){const n=e,l=S.getInstance(),o=(0,u.iH)([]),r=(0,u.iH)(null),i=(0,u.iH)(!1),c=10,d=(0,u.iH)(1),m=async()=>{if(o.value=[],r.value=null,!n.table)return;const e=(d.value-1)*c,t=c;i.value=!0;try{l&&(o.value=await l.fetchTableData(n.table,{offset:e,limit:t}))}catch(s){r.value=s,console.error(s)}finally{i.value=!1}};(0,a.YP)((()=>n.table),((e,t)=>{f(1)}));const f=e=>{d.value=e,m()};return(0,a.bv)((()=>{f(1)})),(t,n)=>((0,a.wg)(),(0,a.iD)("div",en,[(0,a._)("div",tn,[(0,a._)("h3",nn,[e.table?((0,a.wg)(),(0,a.iD)("span",sn,(0,p.zw)(e.table.name),1)):((0,a.wg)(),(0,a.iD)("span",an,"No table selected"))]),(0,a._)("p",ln,[(0,a._)("button",{class:"button is-light",onClick:n[0]||(n[0]=e=>t.$emit("close")),title:"Close"},[(0,a.Wm)((0,u.SU)(I),{class:"icon"})])])]),(0,a._)("div",on,[e.table?((0,a.wg)(),(0,a.iD)("table",rn,[(0,a._)("thead",null,[(0,a._)("tr",null,[cn,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.table.properties,((e,t)=>((0,a.wg)(),(0,a.iD)("th",{key:t},(0,p.zw)(e.name),1)))),128))])]),(0,a._)("tbody",un,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.value,((s,o)=>((0,a.wg)(),(0,a.iD)("tr",{key:o},[(0,a._)("td",null,[(0,a._)("p",pn,[(0,a.Wm)(Ze,{term:s.term,endpoint:(0,u.SU)(l)},null,8,["term","endpoint"]),(0,a.Wm)(Pe,{term:s.term,onExploreResource:n[1]||(n[1]=e=>t.$emit("explore-resource",e))},null,8,["term"])])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.table.properties,((e,o)=>((0,a.wg)(),(0,a.iD)("td",{key:o},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s[e.id]||[],((e,s)=>((0,a.wg)(),(0,a.iD)("p",{class:"flex items-center",key:s},[(0,a.Wm)(Ze,{term:e,endpoint:(0,u.SU)(l)},null,8,["term","endpoint"]),(0,a.Wm)(Pe,{term:e,onExploreResource:n[2]||(n[2]=e=>t.$emit("explore-resource",e))},null,8,["term"])])))),128))])))),128))])))),128))]),(0,a.wy)((0,a._)("tfoot",dn,[(0,a._)("tr",mn,[(0,a._)("td",{colspan:1+e.table.properties.length},[(0,a._)("div",hn,[(0,a._)("button",{class:"button px-2",disabled:1===d.value,onClick:n[3]||(n[3]=e=>f(d.value-1))},[(0,a.Wm)((0,u.SU)(Jt),{class:"w-5 h-5"})],8,vn),(0,a._)("span",null,"Page "+(0,p.zw)(d.value),1),(0,a._)("button",{class:"button px-2",onClick:n[4]||(n[4]=e=>f(d.value+1))},[(0,a.Wm)((0,u.SU)(Qt),{class:"w-5 h-5"})])])],8,fn)])],512),[[s.F8,!i.value]])])):(0,a.kq)("",!0),i.value?((0,a.wg)(),(0,a.iD)("div",gn,[(0,a.Wm)(rt)])):(0,a.kq)("",!0),r.value?((0,a.wg)(),(0,a.iD)("div",wn,[(0,a._)("div",yn," Error loading data: "+(0,p.zw)(r.value),1)])):(0,a.kq)("",!0)])]))}});const xn=_n;var kn=xn,Sn=n(83447),En=n(78246),Un=n(69128);const In={class:"panel-block is-justify-content-space-between"},Cn={style:{"flex-grow":"1","overflow-x":"clip","text-overflow":"ellipsis"}},jn={style:{"flex-grow":"0"},class:"badge"},qn={name:"TableListItem"};var On=(0,a.aZ)({...qn,props:{table:null},emits:["toggle-table","select-viewport"],setup(e,{emit:t}){const n=e,s=(0,a.Fl)((()=>{const e=n.table.count??0;return e>1e3&&e<1e6?l(e/1e3,1)+"K":e>1e6?l(e/1e6,1)+"M":`${e}`}));function l(e,t){const n=Math.pow(10,t||0);return Math.round(e*n)/n}return(t,n)=>((0,a.wg)(),(0,a.iD)("div",In,[(0,a._)("span",Cn,(0,p.zw)(e.table.name),1),(0,a.Wm)(z.Z,{label:"Instances"},{default:(0,a.w5)((()=>[(0,a._)("div",jn,(0,p.zw)((0,u.SU)(s)),1)])),_:1}),(0,a.Wm)(yt,{style:{"flex-grow":"0"},modelValue:e.table.isShown,"onUpdate:modelValue":n[0]||(n[0]=n=>t.$emit("toggle-table",e.table,n))},null,8,["modelValue"])]))}});const Zn=(0,B.Z)(On,[["__scopeId","data-v-1d718848"]]);var Wn=Zn;const Dn={class:"card is-shadowless overflow-y-auto"},Hn={class:"card-header has-background-light"},zn=(0,a._)("h3",{class:"card-header-title"},"Classes",-1),Pn={class:"card-header-icon py-0 px-1"},$n={class:"card-content px-0 py-1"},Ln={class:"field m-0 px-2 py-2 border-b flex flex-wrap justify-end items-center gap-2"},Tn=(0,a._)("label",{class:"label m-0",for:"predefined-views"},"Predefined views",-1),Mn={class:"select"},Nn=(0,a._)("option",{value:""},"-",-1),Fn=["value"],Rn={class:"panel-block is-justify-content-space-between"},Vn={style:{"flex-grow":"1",display:"flex","flex-direction":"row","align-items":"center"}},Gn={name:"TableList"};var An=(0,a.aZ)({...Gn,props:{datamodel:null},emits:["toggle-table","select-viewport","close"],setup(e,{emit:t}){const n=e,l=(0,u.iH)(!0),o=(0,u.iH)(!1),r=(0,u.iH)(""),i=(0,u.iH)(n.datamodel.tables);(0,a.bv)((()=>{i.value=i.value.sort(((e,t)=>(t.count??0)-(e.count??0)))})),(0,a.YP)(r,((e,t)=>{o.value?i.value=n.datamodel.tables.filter((t=>t.name.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1)).sort(((e,t)=>(e.count??0)-(t.count??0))):i.value=n.datamodel.tables.filter((t=>t.name.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1)).sort(((e,t)=>(t.count??0)-(e.count??0)))})),(0,a.YP)(o,((e,t)=>{i.value=e?n.datamodel.tables.filter((e=>e.name.toLocaleLowerCase().indexOf(r.value.toLocaleLowerCase())>-1)).sort(((e,t)=>(e.count??0)-(t.count??0))):n.datamodel.tables.filter((e=>e.name.toLocaleLowerCase().indexOf(r.value.toLocaleLowerCase())>-1)).sort(((e,t)=>(t.count??0)-(e.count??0)))}));const c=e=>{const s=e.target.value,a=n.datamodel.viewports.find((e=>e.id===s))??null;t("select-viewport",a)};function d(){o.value=!o.value}const m=e=>{l.value=e,n.datamodel.tables.forEach((t=>{t.isShown=e}))};return(t,n)=>((0,a.wg)(),(0,a.iD)("div",Dn,[(0,a._)("div",Hn,[zn,(0,a._)("p",Pn,[(0,a._)("button",{class:"button is-light",onClick:n[0]||(n[0]=e=>t.$emit("close"))},[(0,a.Wm)((0,u.SU)(I),{class:"icon"})])])]),(0,a._)("div",$n,[(0,a.wy)((0,a._)("div",Ln,[Tn,(0,a._)("div",Mn,[(0,a._)("select",{id:"predefined-views",onInput:c},[Nn,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.datamodel.viewports,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.id},(0,p.zw)(e.name),9,Fn)))),128))],32)])],512),[[s.F8,e.datamodel.viewports.length>0]]),(0,a._)("ul",null,[(0,a._)("li",Rn,[(0,a._)("div",Vn,[(0,a.Wm)((0,u.SU)(Sn),{class:"icon",style:{"margin-right":"5px"}}),(0,a.wy)((0,a._)("input",{type:"text",class:"input","onUpdate:modelValue":n[1]||(n[1]=e=>r.value=e)},null,512),[[s.nr,r.value]])]),(0,a._)("button",{onClick:d,style:{"flex-grow":"0","margin-left":"5px","margin-right":"5px",width:"35px"}},[o.value?((0,a.wg)(),(0,a.j4)((0,u.SU)(En),{key:0,class:"icon"})):(0,a.kq)("",!0),o.value?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)((0,u.SU)(Un),{key:1,class:"icon"}))]),(0,a.Wm)(yt,{style:{"flex-grow":"0"},modelValue:l.value,"onUpdate:modelValue":m},null,8,["modelValue"])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.value,(e=>((0,a.wg)(),(0,a.j4)(Wn,{key:e.id,table:e,onToggleTable:n=>t.$emit("toggle-table",e,n)},null,8,["table","onToggleTable"])))),128))])])]))}});const Bn=An;var Yn=Bn,Kn=n(77850),Xn=n(18155);const Jn={href:"https://github.com/zazuko/SPEX",target:"_blank",rel:"noopener noreferer",title:"Github repository"},Qn=(0,a._)("svg",{class:"w-5 h-5 opacity-100 dark:fill-white hover:opacity-70","aria-hidden":"true",viewBox:"0 0 16 16",version:"1.1","data-view-component":"true"},[(0,a._)("path",{"fill-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})],-1),es=[Qn];function ts(e,t,n,s,l,o){return(0,a.wg)(),(0,a.iD)("a",Jn,es)}var ns={name:"GitHubLogo"};const ss=(0,B.Z)(ns,[["render",ts]]);var as=ss;const ls={href:"https://zazuko.com",target:"_blank",rel:"noopener"},os=(0,a.uE)('<svg class="h-8 dark:fill-white opacity-100 hover:opacity-70" clip-rule="evenodd" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.41421" viewBox="0 0 768 260" xmlns="http://www.w3.org/2000/svg"><path d="m2137 3767c1-1-44-1-42-1h240c6-2 12-7 12-14s-5-13-12-14h-195c-35 0-63-29-63-64 0-31 23-57 53-62 2-1-14-1-13-1h223c7-1 12-7 12-14 0-8-7-14-15-14-80 0-161 2-242 2-16 0-27-17-31-30-21-62-34-144-80-190-121-121-165-296-94-456 66-149 211-240 374-241 336-3 529 388 328 654 16 21 25 47 25 74 0 65-53 119-118 119-66 0-119-54-119-119 0-66 53-119 119-119 19 0 37 5 53 13 175-233 5-574-287-571-143 1-270 80-329 211-62 140-23 293 84 399 56 56 66 131 90 204v1h227c35 0 64 28 64 63 0 31-23 58-53 63-2 0-32 0-34 0h29c-2 0-4 0-6 0h-199c-7 2-12 8-12 14 0 7 5 13 12 14h194c35 0 64 29 64 64 0 31-23 57-54 62-1 1 27 1 25 1h-29c-2 0-4 0-6 0h-188c-6 1-11 7-11 14 0 8 6 14 14 14 21 0 73-1 94 0 206 15 363-55 512-199 135-131 211-315 211-502 0-69-10-136-29-200h-1c-25-86-67-167-123-238h-2c-85-108-201-190-335-233v-3l-1 2c-34-11-69-19-105-24-3 11-8 22-15 33-37 54-110 69-165 33-23-16-40-39-48-65-333 56-587 346-587 695 0 89 17 178 50 261 14-7 30-10 46-10 66 0 119 53 119 119 0 65-53 118-119 118-65 0-118-53-118-118 0-30 10-58 30-80-38-92-58-190-58-290 0-374 273-685 631-744 0-2 1-5 1-7h2c3-15 9-30 18-44 36-54 110-69 165-33 29 20 47 50 51 82 43 6 85 17 126 30v1c77 26 149 64 213 112v-1c70 53 129 115 176 186h1c80 120 126 263 126 418 0 237-111 459-301 603-205 141-324 151-565 147-35 0-64-28-64-63 0-31 23-58 54-62zm183-1327v-1c1-1 1-2 1-3l1-1v-1-1-1l1-1v-1-1l1-2v-1-1-1-1-1l1-1v-1c0-1 0-2 0-3v-1-1-1-1-1-1-1-1-1-1-1-1l-1-1v-1-1-2-1l-1-2v-1-1l-1-1v-1-1-1h-1v-1c-5-14-14-27-28-36-32-22-77-13-99 20-3 5-6 11-8 17v2h-1v3h-1v5h-1v23l1 1v4l1 1v3l1 1v2l1 1v2l1 1c5 13 14 24 26 32 33 22 77 13 99-19 3-5 5-9 7-13zm234 910c-7-7-15-13-23-18-10-5-21-7-32-7-39 0-71 32-71 71s31 71 71 71c39 0 71-32 71-71 0-17-6-33-16-46zm-905 233c40 0 71-32 71-71 0-40-31-72-71-72-39 0-71 32-71 72 0 39 32 71 71 71z" transform="matrix(.14637844056 0 0 .14637844056 -192.39293319 -322.90052908)"></path><g fill="#ff441c"><path d="m3509 3401.22c-4 5-6 10-6 17 0 3 1 6 2 10l6 9c2 2 5 4 8 5s7 2 11 2h417c7 0 13-2 18-7 5-6 8-12 8-20s-3-13-8-19c-5-5-11-7-18-7h-343c-4 0-7-2-8-5s-1-7 1-9l371-443c4-5 6-11 6-18 0-3-1-6-2-9s-4-7-6-9-5-4-8-6c-4-1-7-2-11-2h-417c-8 0-13 3-18 8-6 5-8 11-8 18 0 8 2 14 8 20 5 5 10 8 18 8h342c3 0 6 1 8 4 1 3 1 7-2 9z" transform="matrix(.12790089092 0 0 .12790089092 -128.22109287 -266.58431113)"></path><path d="m4479 3418.22c0 7 2 13 7 18 6 6 12 8 20 8 7 0 13-2 18-8 6-5 8-11 8-18v-251c0-77-27-142-81-196s-119-81-196-81-142 27-196 81c-54 55-81 119-81 196s27 142 81 196 119 81 196 81c32 0 63-5 93-16 29-10 56-26 81-45l36-29c2-2 6-3 9-1 3 1 5 4 5 7zm-224-474c30 0 60 5 88 17 26 12 50 28 70 49 21 20 37 44 48 70 12 28 18 57 18 87s-6 59-18 87c-11 26-27 50-48 70-20 21-44 37-71 49s-57 18-87 18-60-6-88-18c-27-12-50-28-71-48-20-21-36-45-47-71-12-28-18-57-18-87s6-59 18-87c11-26 27-50 47-70 21-21 44-37 71-49 28-12 57-17 88-17z" transform="matrix(.12790089092 0 0 .12790089092 -128.22109287 -266.58431113)"></path><path d="m4597 3401.22c-4 5-5 10-5 17 0 3 0 6 2 10 1 3 3 6 5 9 3 2 5 4 8 5s7 2 11 2h417c7 0 13-2 18-7 6-6 8-12 8-20s-2-13-8-19c-5-5-10-7-18-7h-343c-4 0-6-2-8-5-1-3-1-7 1-9l371-443c5-5 6-11 6-18 0-3-1-6-2-9s-3-7-6-9c-2-2-5-4-8-6-3-1-7-2-11-2h-417c-7 0-13 3-18 8-6 5-8 11-8 18 0 8 2 14 8 20 5 5 11 8 18 8h342c3 0 6 1 8 4 1 3 1 7-1 9z" transform="matrix(.12790089092 0 0 .12790089092 -128.22109287 -266.58431113)"></path><path d="m5609 3444.22c8 0 14-2 20-7 5-6 7-12 7-19v-502c0-7-2-13-7-18-6-5-11-8-19-8s-14 2-19 8c-6 5-8 11-8 18v272c0 27-5 54-16 79-10 24-25 46-43 64-19 19-41 33-65 44-25 11-51 16-79 16-27 0-54-5-79-16-24-11-46-25-64-43-19-19-33-41-43-65-11-25-16-52-16-79v-272c0-7-3-13-8-18-6-5-11-8-19-8s-13 2-19 8c-5 5-8 11-8 18v272c0 34 7 67 20 99 14 30 32 58 56 82 24 23 51 41 82 55 31 13 64 20 98 20 28 0 56-3 83-12 26-8 49-21 70-38l35-27c3-2 6-3 9-1 3 1 5 4 5 7l1 44c0 8 3 14 8 20 5 5 11 7 18 7z" transform="matrix(.12790089092 0 0 .12790089092 -128.22109287 -266.58431113)"></path><path d="m6162 3439.22c4 4 10 5 16 5 4 0 8 0 11-2 3-1 5-3 8-5 3-3 5-6 6-10 2-3 2-6 2-9 0-8-3-14-8-20l-253-285c-2-2-3-5-2-7 0-3 1-5 3-6l252-163c7-5 8-12 8-21 0-3 0-6-1-9-2-3-4-7-7-9-2-2-5-4-8-6-3-1-7-2-11-2-5 0-9 1-14 4l-363 236c-2 2-5 2-8 0-3-1-5-4-5-7v-470c0-7-2-13-7-19-6-5-12-8-19-8-8 0-14 3-19 8-6 6-8 12-8 19v764c0 8 2 14 8 19 5 6 11 8 19 8 7 0 13-2 18-8 6-5 8-11 8-19v-210c0-3 2-6 4-7l93-61c4-3 8-2 11 1z" transform="matrix(.12790089092 0 0 .12790089092 -128.22109287 -266.58431113)"></path><path d="m6802.94 3171.21c0-39.08-6.34-76.05-21.12-111.96-14.79-35.91-36.97-67.59-64.43-95.06-57.04-57.03-125.69-85.55-207.02-85.55-80.27 0-148.92 28.52-207.01 85.55-57.04 58.09-85.55 125.69-85.55 207.02 0 81.32 28.51 149.98 85.55 207.01 58.09 57.04 126.74 85.55 207.01 85.55 81.33 0 149.98-28.51 207.02-85.55 58.09-57.03 86.6-125.69 85.55-207.01zm-292.57-235.53c32.74 0 63.37 5.28 92.95 17.95 27.46 12.68 52.81 29.58 74.99 51.76 21.12 21.12 38.02 46.47 49.64 73.93 12.67 29.57 19.01 60.2 19.01 91.89 0 31.68-6.34 62.31-19.01 91.89-11.62 27.46-28.52 52.81-49.64 73.93-22.18 22.18-47.53 39.08-74.99 51.75-29.58 12.68-60.21 19.02-92.95 19.02-31.68 0-63.37-6.34-92.94-19.02-27.46-12.67-52.81-29.57-73.94-50.69-22.18-22.18-39.08-47.53-50.69-74.99-12.68-29.58-17.96-60.21-17.96-91.89 0-31.69 5.28-62.32 17.96-91.89 11.61-27.46 28.51-52.81 50.69-73.93 21.13-22.18 46.48-39.08 73.94-51.76 29.57-12.67 61.26-17.95 92.94-17.95z" transform="matrix(.12790089092 0 0 .12790089092 -129.98018937 -266.58431113)"></path></g></svg>',1),rs=[os];function is(e,t,n,s,l,o){return(0,a.wg)(),(0,a.iD)("a",ls,rs)}var cs={name:"ZazukoLogo"};const us=(0,B.Z)(cs,[["render",is]]);var ps=us;const ds={class:"z-10 py-1 shadow-sm flex justify-between items-center dark:bg-gray-800"},ms=(0,a._)("h1",{class:"px-4 py-2 text-3xl text-black dark:text-white font-bold font-title"}," SPEX ",-1),fs={class:"flex flex-row items-center gap-3"},hs={key:0},vs={key:1},gs={key:0,class:"flex flex-row items-center mr-2"},ws=(0,a._)("div",{style:{height:"15px","border-left":"1px solid","margin-left":"6px","margin-right":"8px",width:"1px"}},null,-1),ys={key:1},bs={name:"SpexHeader"};var _s=(0,a.aZ)({...bs,props:{isSettingsEditorShown:{type:Boolean},sparqlEndpointUrl:null},emits:["toggle-settings-editor","toggle-prefix-help"],setup(e,{emit:t}){const n=e;function s(){t("toggle-settings-editor",!n.isSettingsEditorShown)}function l(){t("toggle-prefix-help")}return(t,n)=>((0,a.wg)(),(0,a.iD)("div",ds,[ms,(0,a._)("div",fs,[(0,a._)("button",{class:"button is-white dark:is-dark flex items-center gap-1",title:"Options",onClick:s},[(0,a._)("h2",null,[e.sparqlEndpointUrl?((0,a.wg)(),(0,a.iD)("span",hs,(0,p.zw)(e.sparqlEndpointUrl),1)):((0,a.wg)(),(0,a.iD)("span",vs,"No endpoint configured yet"))]),(0,a.Wm)((0,u.SU)(Kn),{class:"icon"})]),(0,a._)("button",{class:"button is-white dark:is-dark",title:"Prefix Zazuko",onClick:l},[(0,a.Wm)((0,u.SU)(Xn),{class:"icon"})])]),e.isSettingsEditorShown?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",gs,[(0,a.Wm)(ps),ws,(0,a.Wm)(as)])),e.isSettingsEditorShown?((0,a.wg)(),(0,a.iD)("div",ys)):(0,a.kq)("",!0)]))}});const xs=_s;var ks=xs,Ss=n(63617),Es=n(91296),Us=n.n(Es);class Is{constructor(e){(0,f.Z)(this,"_type",void 0),(0,f.Z)(this,"_comment",void 0),(0,f.Z)(this,"_serverResponseItem",void 0),this._serverResponseItem=e,this._type=e.parts.filter((e=>"rdf:type"===e.predicate))[0]?.object??"";const t=e.parts.filter((e=>"rdfs:comment"===e.predicate));if(t.length<2)this._comment=Cs(t[0]?.object??"no comment");else{const e=t.filter((e=>"en"===e.object.language));1===e.length?this._comment=Cs(e[0]?.object??"no comment"):this._comment="no comment"}}get type(){return this._type}get avatar(){const e=this.type.split(":");return e.length<2?"NT":(e[0].charAt(0)+e[1].charAt(0)).toUpperCase()}get itemText(){return this._serverResponseItem.itemText}get ontologyTitle(){return this._serverResponseItem.ontologyTitle}get label(){return this._serverResponseItem.label}get splitA(){return this._serverResponseItem.prefixedSplitA}get splitB(){return this._serverResponseItem.prefixedSplitB}get comment(){return this._comment}get parts(){return this._serverResponseItem.parts}}function Cs(e){return"string"===typeof e?e:e.datatype&&"http://www.w3.org/2001/XMLSchema#string"===e.datatype.value||e.datatype&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"===e.datatype.value?e.value:""}const js={class:"avatar"},qs={class:"card-text"},Os={class:"card-title"},Zs={class:"card-comment"},Ws={name:"PrefixZazukoListItem"};var Ds=(0,a.aZ)({...Ws,props:{item:null},emits:["item-selected"],setup(e,{emit:t}){const n=e;return(e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"card",onClick:t[0]||(t[0]=t=>e.$emit("item-selected",n.item))},[(0,a.Wm)(z.Z,{label:n.item.type},{default:(0,a.w5)((()=>[(0,a._)("div",js,(0,p.zw)(n.item.avatar),1)])),_:1},8,["label"]),(0,a._)("div",qs,[(0,a._)("div",Os,(0,p.zw)(n.item.itemText),1),(0,a._)("div",Zs,(0,p.zw)(n.item.comment),1)])]))}});const Hs=(0,B.Z)(Ds,[["__scopeId","data-v-196aa4f4"]]);var zs=Hs;const Ps={name:"PrefixZazukoList"};var $s=(0,a.aZ)({...Ps,props:{items:null},emits:["item-selected"],setup(e,{emit:t}){const n=e;function s(e){t("item-selected",e)}return(e,t)=>((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.items,(e=>((0,a.wg)(),(0,a.j4)(zs,{key:e.itemText,item:e,onItemSelected:s},null,8,["item"])))),128))}});const Ls=$s;var Ts=Ls;const Ms=["item"],Ns={name:"PrefixZazukoDetail"};var Fs=(0,a.aZ)({...Ns,props:{item:null},emits:["item-selected"],setup(e,{emit:t}){const n=e;return(e,t)=>((0,a.wg)(),(0,a.iD)("table",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.item.parts,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.predicate,item:e},[(0,a._)("th",null,(0,p.zw)((0,u.SU)(Cs)(e.predicate)),1),(0,a._)("td",null,(0,p.zw)((0,u.SU)(Cs)(e.object)),1)],8,Ms)))),128))]))}});const Rs=(0,B.Z)(Fs,[["__scopeId","data-v-3afac95e"]]);var Vs=Rs;const Gs={class:"card is-shadowless h-full overflow-y-auto"},As={class:"card-header has-background-light"},Bs=(0,a._)("h3",{class:"card-header-title"},"Resolve RDF Terms",-1),Ys={class:"card-header-icon py-0 px-1"},Ks={key:0,style:{padding:"21px"}},Xs={class:"field"},Js=(0,a._)("div",{class:"flex flex-row"},[(0,a._)("label",{class:"label",for:"prefix"},"Prefix"),(0,a.Uk)("Â Â Â ("),(0,a._)("a",{target:"_blank",href:"https://prefix.zazuko.com/"},"prefix.zazuko.com"),(0,a.Uk)(") ")],-1),Qs={key:1,style:{padding:"21px"}},ea={class:"flex flex-row items-center mb-4"},ta={style:{display:"flex","flex-direction":"column"},class:"pl-4"},na={class:"title mb-0"},sa={name:"PrefixHelp"};var aa=(0,a.aZ)({...sa,props:{searchString:null},emits:["close"],setup(e,{emit:t}){const n=e,l=(0,u.iH)(n.searchString),o=(0,u.iH)([]),r=(0,u.iH)(null);async function i(e){const t="https://prefix.zazuko.com/api/v1/search",n=`q=${encodeURIComponent(e)}`,s=await fetch(t+"?"+n),a=await s.json(),l=a.map((e=>new Is(e)));o.value=l}function c(){t("close")}function d(e){r.value=e}function m(){r.value=null}return(0,a.YP)(l,Us()((e=>{i(e)}),300)),(e,t)=>((0,a.wg)(),(0,a.iD)("div",Gs,[(0,a._)("div",As,[Bs,(0,a._)("p",Ys,[(0,a._)("button",{type:"button",class:"button is-light",onClick:c,title:"Close"},[(0,a.Wm)((0,u.SU)(I),{class:"icon"})])])]),null===r.value?((0,a.wg)(),(0,a.iD)("div",Ks,[(0,a._)("div",Xs,[Js,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),placeholder:"Start typing to search... eg. sh:name",class:"input",required:""},null,512),[[s.nr,l.value]])]),(0,a.Wm)(Ts,{items:o.value,onItemSelected:d},null,8,["items"])])):(0,a.kq)("",!0),null!==r.value?((0,a.wg)(),(0,a.iD)("div",Qs,[(0,a._)("div",ea,[(0,a._)("button",{class:"flex flex-grow-0",onClick:m},[(0,a.Wm)((0,u.SU)(Ss),{class:"icon"})]),(0,a._)("div",ta,[(0,a._)("h1",na,(0,p.zw)(r.value.splitA)+":"+(0,p.zw)(r.value.splitB),1),(0,a._)("div",null,(0,p.zw)(r.value.type),1)])]),(0,a.Wm)(Vs,{item:r.value},null,8,["item"])])):(0,a.kq)("",!0)]))}});const la=aa;var oa=la;const ra={class:"z-10 absolute m-3"},ia=(0,a._)("span",null,"Classes",-1),ca={class:"z-10 absolute bottom-2 left-2 text-sm bg-gray-50 dark:bg-gray-700 flex items-center gap-2"},ua={class:"bg-gray-50 dark:bg-gray-700 flex-grow flex items-center"},pa={key:0,class:"m-auto"},da={key:1,class:"section"},ma={class:"message is-danger"},fa={class:"message-body"},ha={name:"SpexMain"};var va=(0,a.aZ)({...ha,props:{settings:null},emits:["settingsChanged"],setup(e,{emit:t}){const n=e,l=(0,u.iH)(""),o=(0,u.iH)(!1),r=S.getInstance(n.settings),i=(0,a.Fl)((()=>y.value.length>0));(0,a.YP)((()=>n.settings),(e=>{(e.sparqlEndpoint?.length??0)>0?(c.value=!1,F(e)):c.value=!0})),(0,a.bv)((async()=>{n.settings.sparqlEndpoint?await F(n.settings):c.value=!0}));const c=(0,u.iH)(!1),f=(0,u.iH)(!1),h=(0,u.iH)(!1),v=(0,u.iH)(!1),g=(0,u.iH)(!1),w=(0,u.iH)(null),y=(0,u.iH)([]),_=(0,u.iH)(null),x=(0,u.iH)(!1),k=(0,u.iH)(null);function E(){o.value=!o.value}function U(){o.value=!1}function I(e){c.value="undefined"!==typeof e?e:!c.value}function C(e){j(e),y.value.push(e)}function j(e){y.value=y.value.filter((t=>t.id!==e.id))}function q(){y.value=[]}function O(e){e.isShown=!e.isShown}function Z(e){const t=e?e.tables:new Set(_.value?.tables.map((({id:e})=>e)));_.value?.tables.forEach((e=>{t.has(e.id)?e.isShown=!0:e.isShown=!1}))}function W(){h.value=!0}function D(){h.value=!1}function H(){f.value=!1}function z(){w.value=null,f.value=!1}function P(){v.value=!0}function $(){g.value=!0}function L(e){_.value=e}function T(){v.value=!1}function M(){g.value=!1}async function N(){z(),k.value=null,x.value=!0,_.value=null;try{_.value=await r.fetchDataModel()}catch(e){k.value=e,I(!0),console.error(e)}finally{x.value=!1}}async function F(e){r.applySettings(e),await N()}function R(e){f.value=!0,w.value=e}async function V(e){const t=r.dataModelToSHACL(_.value).namedNode(e.id).in(b.sh.targetClass),n=t.value,s=t.out(b.sh.targetClass).value;let a=`_:${n} a <http://www.w3.org/ns/shacl#NodeShape> `;a+=`\n\t<${b.sh.targetClass.value}> <${s}> `;const l=t.out(b.sh.property);l.values.length>0&&(a+=`\n\t<${b.sh.property.value}> `,l.forEach(((e,t)=>{a+="\n\t\t[";const n=e.out(b.E_.type).value,s=e.out(b.sh.path).value,o=e.out(b.sh["class"]).value,r=e.out(b.sh.datatype).value,i=e.out(b.sh.or);let c=`\t\t\t<${b.E_.type}> <${n}> \n\t\t\t<http://www.w3.org/ns/shacl#path> <${s}> \n`;if(c+=o?`\t\t\t<http://www.w3.org/ns/shacl#class> <${o}> \n`:"",c+=r?`\t\t\t<http://www.w3.org/ns/shacl#datatype> <${r}> \n`:"",i.values.length>0){let e="\t\t\t<http://www.w3.org/ns/shacl#shOr> (\n";const t=i.list();Array.from(t).forEach((t=>{const n=[];t.dataset.match(t.term,null,null,null).filter((e=>!(e.predicate.equals(b.E_.last)||e.predicate.equals(b.E_.last)||e.predicate.equals(b.E_.nil)))).forEach((e=>n.push(`\t\t\t\t\t<${e.predicate.value}> <${e.object.value}>`))),e+=`\t\t\t\t[\n${n.join(" \n")}`,e+=" \n\t\t\t\t]\n"})),c+=`${e}`,c+="\t\t\t) \n"}a+=`\n${c}\t\t] ${t===l.values.length-1?".":","}`}))),await navigator.clipboard.writeText(a)}function G(e){t("settingsChanged",e)}return(t,n)=>((0,a.wg)(),(0,a.j4)((0,u.SU)(m.F),{class:"default-theme flex-grow overflow-hidden"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(m.X),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(m.F),{horizontal:"",class:"h-full"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(m.X),{class:"flex flex-col"},{default:(0,a.w5)((()=>[(0,a.Wm)(ks,{isSettingsEditorShown:c.value,sparqlEndpointUrl:(0,u.SU)(r).sparqlEndpoint,onToggleSettingsEditor:I,onTogglePrefixHelp:E},null,8,["isSettingsEditorShown","sparqlEndpointUrl"]),_.value?((0,a.wg)(),(0,a.j4)((0,u.SU)(m.F),{key:0,vertical:"",class:"overflow-hidden"},{default:(0,a.w5)((()=>[h.value?((0,a.wg)(),(0,a.j4)((0,u.SU)(m.X),{key:0,size:"30"},{default:(0,a.w5)((()=>[(0,a.Wm)(Yn,{datamodel:_.value,onToggleTable:O,onSelectViewport:Z,onClose:D},null,8,["datamodel"])])),_:1})):(0,a.kq)("",!0),(0,a.Wm)((0,u.SU)(m.X),{class:"relative h-full"},{default:(0,a.w5)((()=>[(0,a._)("div",ra,[(0,a.wy)((0,a._)("button",{class:"button",onClick:W},[(0,a.Wm)((0,u.SU)(d),{class:"icon"}),ia],512),[[s.F8,!h.value]])]),(0,a.Wm)(Ue,{datamodel:_.value,onExplore:R,onExport:V,onToggleShape:O},{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("p",ca,[(0,u.SU)(r)&&!k.value?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"button is-white is-small",onClick:P}," SHACL ")):(0,a.kq)("",!0)],512),[[s.F8,!(f.value||(0,u.SU)(i))]])])),_:1},8,["datamodel"])])),_:1}),o.value?((0,a.wg)(),(0,a.j4)((0,u.SU)(m.X),{key:1,size:"30"},{default:(0,a.w5)((()=>[(0,a.Wm)(oa,{onClose:U,"search-string":l.value},null,8,["search-string"])])),_:1})):(0,a.kq)("",!0)])),_:1})):(0,a.kq)("",!0),(0,a._)("div",ua,[x.value?((0,a.wg)(),(0,a.iD)("div",pa,[(0,a.Wm)(rt)])):(0,a.kq)("",!0)]),k.value?((0,a.wg)(),(0,a.iD)("div",da,[(0,a._)("div",ma,[(0,a._)("div",fa," Error loading data: "+(0,p.zw)(k.value),1)])])):(0,a.kq)("",!0)])),_:1}),f.value||(0,u.SU)(i)?((0,a.wg)(),(0,a.j4)((0,u.SU)(m.X),{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(m.F),{vertical:""},{default:(0,a.w5)((()=>[f.value?((0,a.wg)(),(0,a.j4)((0,u.SU)(m.X),{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(kn,{table:w.value,onClose:H,onExploreResource:C},null,8,["table"])])),_:1})):(0,a.kq)("",!0),(0,u.SU)(i)?((0,a.wg)(),(0,a.j4)((0,u.SU)(m.X),{key:1},{default:(0,a.w5)((()=>[(0,a.Wm)(Be,{resources:y.value,onClose:q,onExploreResource:C,onUnexploreResource:j},null,8,["resources"])])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1}),c.value?((0,a.wg)(),(0,a.j4)((0,u.SU)(m.X),{key:0,size:"30"},{default:(0,a.w5)((()=>[(0,a.Wm)(Xt,{settings:e.settings,onSettingsChanged:G,onClose:I},null,8,["settings"])])),_:1})):(0,a.kq)("",!0),v.value?((0,a.wg)(),(0,a.j4)(K,{key:1,open:v.value,onClose:T,endpoint:(0,u.SU)(r),datamodel:_.value,onOpenLoadShacl:$},null,8,["open","endpoint","datamodel"])):(0,a.kq)("",!0),g.value?((0,a.wg)(),(0,a.j4)(ce,{key:2,open:g.value,onClose:M,endpoint:(0,u.SU)(r),load:L},null,8,["open","endpoint"])):(0,a.kq)("",!0)])),_:1}))}});const ga=va;var wa=ga;const ya="settings",ba="spex.zazuko.com.settings";class _a{constructor(){(0,f.Z)(this,"settingsObject",{sparqlEndpoint:null,username:null,password:null,namedGraph:null,prefixes:[],forceIntrospection:!1}),this._migrateLegacyConfig(),this._readSettingsFromLocalStorage()}mergeSettingsWithUrlSettings(e){this.sparqlEndpoint!==e.sparqlEndpoint&&(this.password=null,this.username=null),this.sparqlEndpoint=e.sparqlEndpoint,this.namedGraph=e.namedGraph,this.prefixes=e.prefixes,this.forceIntrospection=e.forceIntrospection,this.storeSettings()}_readSettingsFromLocalStorage(){Object.keys(this.settingsObject).forEach((e=>{const t=localStorage.getItem(`${ba}.${e}`);if(null===t)return;if("forceIntrospection"===e){const e=JSON.parse(t);if("boolean"!==typeof e)return;this.settingsObject.forceIntrospection=e}if("prefixes"===e){const e=JSON.parse(t);return void(Array.isArray(e)&&this._isPrefixArray(e)&&(this.settingsObject.prefixes=e))}const n=JSON.parse(t);"string"!==typeof n&&null!==n||(this.settingsObject[e]=n)}))}_migrateLegacyConfig(){const e=localStorage.getItem(ya);if(null===e)return;const t=JSON.parse(e);if(null===t.url)return localStorage.removeItem(ya),void this.storeSettings();"string"===typeof t.url&&(this.settingsObject.sparqlEndpoint=t.url),"string"===typeof t.user&&(this.settingsObject.username=t.user),"string"===typeof t.password&&(this.settingsObject.password=t.password),"string"===typeof t.graph&&(this.settingsObject.namedGraph=t.graph),Array.isArray(t.prefixes)&&this._isLegacyPrefixArray(t.prefixes)&&(this.settingsObject.prefixes=t.prefixes.map((e=>({prefix:e.prefix,namespace:e.url})))),"boolean"===typeof t.forceIntrospection&&(this.settingsObject.forceIntrospection=t.forceIntrospection),this.storeSettings()}storeSettings(){Object.keys(this.settingsObject).forEach((e=>{localStorage.setItem(`${ba}.${e}`,JSON.stringify(this.settingsObject[e]))}))}_isStringsArray(e){return e.every((e=>"string"===typeof e))}_isPrefixArray(e){return e.every((e=>"string"===typeof e.prefix&&"string"===typeof e.namespace))}_isLegacyPrefixArray(e){return e.every((e=>"string"===typeof e.prefix&&"string"===typeof e.url))}get sparqlEndpoint(){return this.settingsObject.sparqlEndpoint}set sparqlEndpoint(e){null===e&&(this.settingsObject.username=null,this.settingsObject.password=null,this.settingsObject.namedGraph=null),this.settingsObject.sparqlEndpoint=e}get password(){return this.settingsObject.password}set password(e){this.settingsObject.password=e}get username(){return this.settingsObject.username}set username(e){this.settingsObject.username=e}get prefixes(){return this.settingsObject.prefixes}set prefixes(e){this.settingsObject.prefixes=e}get namedGraph(){return this.settingsObject.namedGraph}set namedGraph(e){this.settingsObject.namedGraph=e}get forceIntrospection(){return this.settingsObject.forceIntrospection}set forceIntrospection(e){this.settingsObject.forceIntrospection=e}toJson(){return JSON.stringify(this.settingsObject,null,4)}}class xa{static createUrlSettingFromQueryParams(e){const t=new xa(null,null,[],!1),n=e.sparqlEndpoint;if(!n)return null;n&&"string"===typeof n&&(t.sparqlEndpoint=n);const s=e.namedGraph;s&&"string"===typeof s&&(t.namedGraph=s);const a=e.forceIntrospection;"boolean"===typeof a&&(t.forceIntrospection=a);const l=e.prefixes;return Array.isArray(l)&&(t.prefixes=l.map((e=>{const t=e?.split(":")[0],n=e?.substring((t?.length??0)+1);return t&&n?{prefix:t,namespace:n}:{prefix:"",namespace:""}})).filter((e=>e.prefix.length>0&&e.namespace.length>0))),t}constructor(e,t,n,s){(0,f.Z)(this,"_sparqlEndpoint",void 0),(0,f.Z)(this,"_namedGraph",void 0),(0,f.Z)(this,"_prefixes",void 0),(0,f.Z)(this,"_forceIntrospection",void 0),this._sparqlEndpoint=e,this._namedGraph=t,this._prefixes=n,this._forceIntrospection=s}get sparqlEndpoint(){return this._sparqlEndpoint}set sparqlEndpoint(e){this._sparqlEndpoint=e}get namedGraph(){return this._namedGraph}set namedGraph(e){this._namedGraph=e}get prefixes(){return this._prefixes}set prefixes(e){this._prefixes=e}get forceIntrospection(){return this._forceIntrospection}set forceIntrospection(e){this._forceIntrospection=e}toRouterQueryObject(){const e=this.prefixes.map((e=>`${e.prefix}:${e.namespace}`)),t={sparqlEndpoint:this.sparqlEndpoint,forceIntrospection:this.forceIntrospection,namedGraph:this.namedGraph,prefixes:e};return t}toJson(){return JSON.stringify({sparqlEndpoint:this.sparqlEndpoint,namedGraph:this.namedGraph,prefixes:this.prefixes,forceIntrospection:this.forceIntrospection},null,4)}}const ka={name:"SpexOverview"};var Sa=(0,a.aZ)({...ka,setup(e){const t=new _a,n=(0,u.iH)(t),s=(0,c.tv)(),l=(0,c.yj)(),o=xa.createUrlSettingFromQueryParams(l.query);if(null!==o)t.mergeSettingsWithUrlSettings(o),n.value=t;else if(t.sparqlEndpoint){const e=new xa(t.sparqlEndpoint,t.namedGraph,t.prefixes,t.forceIntrospection);i(e.toRouterQueryObject())}function r(e){const t=new _a;t.sparqlEndpoint=e.sparqlEndpoint,t.username=e.username,t.password=e.password,t.prefixes=e.prefixes,t.namedGraph=e.namedGraph,t.forceIntrospection=e.forceIntrospection,t.storeSettings(),n.value=t;const s=new xa(t.sparqlEndpoint,t.namedGraph,t.prefixes,t.forceIntrospection);i(s.toRouterQueryObject())}async function i(e){try{await s.push({query:e})}catch(t){if(!(0,c.ES)(t,c.lB.duplicated))throw t}}return(e,t)=>((0,a.wg)(),(0,a.j4)(wa,{settings:n.value,onSettingsChanged:r},null,8,["settings"]))}});const Ea=Sa;var Ua=Ea;const Ia=()=>n.e(346).then(n.bind(n,16346)),Ca=()=>n.e(16).then(n.bind(n,39016)),ja=[{path:"/",name:"Overview",component:Ua},{path:"/shacl",name:"ShaclEditor",component:Ia},{path:"/rdf-editor",name:"RdfEditor",component:Ca}],qa=(0,c.p7)({history:(0,c.r5)("/"),routes:ja});var Oa=qa,Za=n(95205);(0,Za.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(e){console.log("New content is available please refresh."),document.dispatchEvent(new CustomEvent("swUpdated",{detail:e}))},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),self.addEventListener("message",(e=>{e.data&&"SKIP_WAITING"===e.data.type&&self.skipWaiting()}));const Wa=(0,s.ri)(i);Wa.use(Oa).mount("#app")},58027:function(e,t,n){"use strict";n.d(t,{E_:function(){return l},It:function(){return i},fK:function(){return o},q1:function(){return s.Z},sh:function(){return r}});var s=n(2518),a=n(62439);s.Z.spex="https://described.at/spex/";const l=a.ZP.namespace(s.Z.rdf),o=a.ZP.namespace(s.Z.schema),r=a.ZP.namespace(s.Z.sh),i=a.ZP.namespace(s.Z.spex)},54803:function(e,t,n){"use strict";n.d(t,{NV:function(){return o},oV:function(){return c},zV:function(){return l}});var s=n(62439),a=n(58027);function l(e,t,n){const s=e.out(a.It.shape).has(a.E_.type,a.It.DefaultShapes),l=s.term?o(s.out(a.fK.hasPart),n):null,r=e.out(a.It.viewport).map((e=>({id:e.term.value,term:e.term,name:e.out(a.fK.name,{language:t}).value,tables:new Set(e.out(a.It.includes).terms.map((({value:e})=>e)))})));return{tables:l,viewports:r,isIntrospected:!1}}function o(e,t){return e.toArray().map((e=>{const n=e.out(a.sh.targetClass).term;if(!n)return null;const s=n.value,l=e.out(a.sh.property).map((e=>{const n=e.out(a.sh.path).term;if(!n)return null;const s=n.value,l=r(e,t);return{id:s,name:t(s),values:l}})).filter(Boolean),o={id:s,name:t(s),properties:l,isShown:!0};return o})).filter(Boolean)}function r(e,t){return[...e.out(a.sh.datatype).terms.map((e=>i(e,"Literal",t))),...e.out(a.sh["class"]).terms.map((e=>i(e,"NamedNode",t))),...[...e.out(a.sh.or).list()].flatMap((e=>r(e,t)))]}function i(e,t,n){return{id:e.value,name:n(e.value),termType:t}}function c(e,t){const n=s.ZP.clownface({dataset:s.ZP.dataset(),term:s.ZP.namedNode(t)});return n.addOut(a.It.shape,(t=>{t.addOut(a.E_.type,a.It.DefaultShapes),e.tables.forEach((e=>{t.addOut(a.fK.hasPart,(t=>{t.addOut(a.E_.type,a.sh.NodeShape).addOut(a.sh.targetClass,s.ZP.namedNode(e.id)),e.properties.forEach((e=>{t.addOut(a.sh.property,(t=>{t.addOut(a.E_.type,a.sh.PropertyShape).addOut(a.sh.path,s.ZP.namedNode(e.id));const n=e=>"NamedNode"===e.termType?[a.sh["class"],s.ZP.namedNode(e.id)]:[a.sh.datatype,s.ZP.namedNode(e.id)];1===e.values.length?t.addOut(...n(e.values[0])):e.values.length>1&&t.addList(a.sh.or,e.values.map((e=>t.blankNode().addOut(...n(e)))))}))}))}))}))})),n}},54799:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var s=n(66252),a=n(3577),l=n(2262),o=n(14592);const r={class:"font-bold"},i={class:"flex flex-nowrap"},c={class:"w-full"},u=["data-id","onMouseenter","onMouseleave"],p={class:"border-b dark:border-gray-500 px-3 py-2 text-gray-800 dark:text-gray-50"},d={class:"border-b dark:border-gray-500 px-3 py-2"},m={name:"ResourceCard"};var f=(0,s.aZ)({...m,props:{resource:null,activeLinks:null},emits:["hover-title","unhover-title","hover-property","unhover-property"],setup(e,{emit:t}){const n=e;function m(e){e.stopPropagation()}const f=(0,s.Fl)((()=>n.activeLinks.some((e=>e.target===n.resource.id))));function h(e){return n.activeLinks.some((t=>t.source===n.resource.id&&t.sourceProperty===e.id))}return(t,n)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,a.C_)(["border dark:border-gray-500 rounded shadow-md bg-white dark:bg-gray-800 opacity-90 text-sm",{active:(0,l.SU)(f)}])},[(0,s._)("header",{class:"bg-gray-100 dark:bg-gray-900 flex items-center gap-4 justify-between px-3 py-2",onMouseenter:n[0]||(n[0]=n=>t.$emit("hover-title",e.resource)),onMouseleave:n[1]||(n[1]=n=>t.$emit("unhover-title",e.resource))},[(0,s._)("h3",r,[(0,s.Wm)(o.Z,{label:e.resource.id},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.resource.name),1)])),_:1},8,["label"])]),(0,s._)("span",i,[(0,s.WI)(t.$slots,"actions")])],32),(0,s._)("table",c,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.resource.properties,((n,l)=>((0,s.wg)(),(0,s.iD)("tr",{key:l,"data-id":n.id,class:(0,a.C_)({active:h(n)}),onMouseenter:s=>t.$emit("hover-property",e.resource,n),onMouseleave:s=>t.$emit("unhover-property",e.resource,n)},[(0,s._)("th",p,[(0,s.Wm)(o.Z,{label:n.id},{default:(0,s.w5)((()=>[(0,s._)("span",{onMousedown:m},(0,a.zw)(n.name),33)])),_:2},1032,["label"])]),(0,s._)("td",d,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.values,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id},[(0,s.WI)(t.$slots,"property-value",{value:e},(()=>[(0,s.Wm)(o.Z,{label:e.id},{default:(0,s.w5)((()=>[(0,s._)("span",{onMousedown:m},(0,a.zw)(e.name),33)])),_:2},1032,["label"])]))])))),128))])],42,u)))),128))])],2))}}),h=n(83744);const v=(0,h.Z)(f,[["__scopeId","data-v-1fdd9383"]]);var g=v},14592:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var s=n(66252),a=n(3577);const l={class:"group inline-block relative"},o={key:0,class:"invisible group-hover:visible absolute z-10 bottom-full left-1/2 -translate-x-1/2 -translate-y-1 delay-300"},r={class:"bg-gray-800 text-white font-normal text-sm rounded py-1 px-3"},i=(0,s._)("svg",{class:"absolute h-3 w-full left-0 top-full fill-current text-gray-800",viewBox:"0 0 255 255"},[(0,s._)("polygon",{points:"0,0 127.5,127.5 255,0"})],-1),c={name:"SpexTooltip"};var u=(0,s.aZ)({...c,props:{label:null,position:null},setup(e){return(t,n)=>((0,s.wg)(),(0,s.iD)("div",l,[e.label?((0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",r,[(0,s.Uk)((0,a.zw)(e.label)+" ",1),i])])):(0,s.kq)("",!0),(0,s.WI)(t.$slots,"default")]))}});const p=u;var d=p},71156:function(){},56965:function(){},70147:function(){},52361:function(){},94616:function(){},2649:function(){},66973:function(){}},t={};function n(s){var a=t[s];if(void 0!==a)return a.exports;var l=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(l.exports,l,l.exports,n),l.loaded=!0,l.exports}n.m=e,function(){var e=[];n.O=function(t,s,a,l){if(!s){var o=1/0;for(u=0;u<e.length;u++){s=e[u][0],a=e[u][1],l=e[u][2];for(var r=!0,i=0;i<s.length;i++)(!1&l||o>=l)&&Object.keys(n.O).every((function(e){return n.O[e](s[i])}))?s.splice(i--,1):(r=!1,l<o&&(o=l));if(r){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[s,a,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(s,a){if(1&a&&(s=this(s)),8&a)return s;if("object"===typeof s&&s){if(4&a&&s.__esModule)return s;if(16&a&&"function"===typeof s.then)return s}var l=Object.create(null);n.r(l);var o={};e=e||[null,t({}),t([]),t(t)];for(var r=2&a&&s;"object"==typeof r&&!~e.indexOf(r);r=t(r))Object.getOwnPropertyNames(r).forEach((function(e){o[e]=function(){return s[e]}}));return o["default"]=function(){return s},n.d(l,o),l}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,s){return n.f[s](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{5:"1923283b",16:"b1e5c288",21:"817aae2c",144:"9bcb4544",346:"0c2fdead",404:"0598d268",442:"eff49bb2",476:"fe1a1ad7",565:"3919b150",624:"b206e18f",650:"84df66a8",787:"f2fd30fc",833:"4c0216c6",853:"90bf3705",888:"91f9bfb5"}[e]+".js"}}(),function(){n.miniCssF=function(e){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="@zazuko/spex:";n.l=function(s,a,l,o){if(e[s])e[s].push(a);else{var r,i;if(void 0!==l)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var p=c[u];if(p.getAttribute("src")==s||p.getAttribute("data-webpack")==t+l){r=p;break}}r||(i=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,n.nc&&r.setAttribute("nonce",n.nc),r.setAttribute("data-webpack",t+l),r.src=s),e[s]=[a];var d=function(t,n){r.onerror=r.onload=null,clearTimeout(m);var a=e[s];if(delete e[s],r.parentNode&&r.parentNode.removeChild(r),a&&a.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(d.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=d.bind(null,r.onerror),r.onload=d.bind(null,r.onload),i&&document.head.appendChild(r)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p="/"}(),function(){var e={143:0};n.f.j=function(t,s){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)s.push(a[2]);else{var l=new Promise((function(n,s){a=e[t]=[n,s]}));s.push(a[2]=l);var o=n.p+n.u(t),r=new Error,i=function(s){if(n.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var l=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.src;r.message="Loading chunk "+t+" failed.\n("+l+": "+o+")",r.name="ChunkLoadError",r.type=l,r.request=o,a[1](r)}};n.l(o,i,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,l,o=s[0],r=s[1],i=s[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(i)var u=i(n)}for(t&&t(s);c<o.length;c++)l=o[c],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(u)},s=self["webpackChunk_zazuko_spex"]=self["webpackChunk_zazuko_spex"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(84152)}));s=n.O(s)})();
//# sourceMappingURL=app.ec6513f6.js.map