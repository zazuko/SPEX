"use strict";(self["webpackChunk_zazuko_spex"]=self["webpackChunk_zazuko_spex"]||[]).push([[346],{16346:function(t,e,a){a.r(e),a.d(e,{default:function(){return j}});var n=a(66252),s=a(3577),o=a(49963);const r=(0,n._)("h2",{class:"font-bold text-lg px-4 py-2 bg-gray-200"},"SHACL editor",-1),l=["format","value"],i={class:"field"},c=(0,n._)("label",{class:"label",for:"format"},"Format",-1),d={class:"select"},u=["value"],p=(0,n._)("span",null,"Update",-1),f={class:"flex-grow flex flex-col"},h=(0,n._)("h2",{class:"font-bold text-lg px-4 py-2 bg-gray-200"},"Representation",-1),m={key:0,class:"section"},w={class:"message is-danger"},v={class:"message-body"};function b(t,e,a,b,g,y){const _=(0,n.up)("ArrowPathIcon"),k=(0,n.up)("Pane"),x=(0,n.up)("ResourceCard"),P=(0,n.up)("GraphLayout"),S=(0,n.up)("Splitpanes");return(0,n.wg)(),(0,n.j4)(S,{class:"default-theme"},{default:(0,n.w5)((()=>[(0,n.Wm)(k,{size:"40"},{default:(0,n.w5)((()=>[r,(0,n._)("rdf-editor",{class:"w-full h-full overflow-hidden",format:g.format,value:g.shacl,ref:"shaclEditor"},null,8,l),(0,n._)("div",i,[c,(0,n._)("div",d,[(0,n.wy)((0,n._)("select",{id:"format","onUpdate:modelValue":e[0]||(e[0]=t=>g.format=t)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(g.formats,(t=>((0,n.wg)(),(0,n.iD)("option",{key:t,value:t},(0,s.zw)(t),9,u)))),128))],512),[[o.bM,g.format]])])]),(0,n._)("button",{class:"button is-primary",onClick:e[1]||(e[1]=(...t)=>y.loadShacl&&y.loadShacl(...t))},[(0,n.Wm)(_,{class:"icon"}),p])])),_:1}),(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[(0,n.Wm)(S,{horizontal:""},{default:(0,n.w5)((()=>[(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[(0,n._)("div",f,[h,(0,n.Wm)(P,{nodes:g.datamodel.tables,links:y.links,"active-links":g.activeLinks},{node:(0,n.w5)((({node:t})=>[(0,n.Wm)(x,{resource:t,"active-links":g.activeLinks},null,8,["resource","active-links"])])),_:1},8,["nodes","links","active-links"]),g.error?((0,n.wg)(),(0,n.iD)("div",m,[(0,n._)("div",w,[(0,n._)("div",v," Error loading data: "+(0,s.zw)(g.error),1)])])):(0,n.kq)("",!0)])])),_:1})])),_:1})])),_:1})])),_:1})}a(57658);var g=a(39598),y=a(74919),_=a(15409),k=a(22886),x=(a(24512),a(90038)),P=a(62439),S=a(54803),W=a(58027),z=a(91909);const L=[...x.f.keys()],C="\n@prefix sh: <http://www.w3.org/ns/shacl#> .\n@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .\n";var E={components:{GraphLayout:_.Y,Splitpanes:k.F,Pane:k.X,ArrowPathIcon:g,ResourceCard:z.Z},data(){return{format:"text/turtle",formats:L,shacl:C,datamodel:{tables:[],viewports:[],isIntrospected:!1},error:null,activeLinks:[]}},computed:{links(){const t=this.datamodel.tables,e=new Set(t.map((({id:t})=>t)));return t.flatMap((t=>t.properties.map((e=>({...e,table:t}))))).reduce(((t,a)=>(a.values.forEach((n=>{const s=a.table.id,o=n.id;e.has(o)&&t.push({source:s,target:o,sourceProperty:a.id,label:a.name})})),t)),[])}},methods:{async loadShacl(){const t=this.$refs.shaclEditor;this.error=null,this.datamodel.tables=[];const e=t=>(0,y.F)(t)||t;try{const a=await t.quads,n=P.ZP.dataset(a),s=P.ZP.clownface({dataset:n}).has(W.E_.type,W.sh.NodeShape);this.datamodel.tables=(0,S.NV)(s,e)}catch(a){this.error=a.toString()}}}},M=a(83744);const R=(0,M.Z)(E,[["render",b]]);var j=R},90038:function(t,e,a){async function n(){const t=(await a.e(624).then(a.t.bind(a,92624,19))).default;return new t}async function s(){const t=(await Promise.resolve().then(a.t.bind(a,82919,19))).default;return new t}async function o(){const t=await a.e(787).then(a.t.bind(a,25787,19));let e;return e=t.default?t.default.RdfXmlParser:t.RdfXmlParser,new e}async function r(){const t=(await a.e(144).then(a.t.bind(a,66144,19))).default;return new t({encoding:"string"})}async function l(){const t=(await a.e(650).then(a.t.bind(a,60650,19))).default;return new t}a.d(e,{f:function(){return u},z:function(){return p}});var i=a(36642);const c=new i.W,d=new i.W;c.set("application/ld+json",n),c.set("application/trig",s),c.set("application/n-quads",s),c.set("application/n-triples",s),c.set("text/n3",s),c.set("text/turtle",s),c.set("application/rdf+xml",o),d.set("application/ld+json",r),d.set("application/n-quads",l),d.set("application/n-triples",l),d.set("text/n3",l),d.set("text/turtle",l);const u=c,p=d},36642:function(t,e,a){a.d(e,{W:function(){return s}});var n=a(88473);class s extends Map{import(t,e,a){const s=this.get(t);if(!s)return null;if("function"===typeof s){const o=new n.PassThrough({objectMode:!0});return Promise.resolve().then((async()=>{const n=await s();this.set(t,n);const r=n.import(e,a);r.on("prefix",((t,e)=>{o.emit("prefix",t,e)})),r.on("error",(t=>{o.emit("error",t),o.emit("end")})),r.pipe(o)})),o}return s.import(e,a)}}}}]);
//# sourceMappingURL=346.4523eb9c.js.map