{"version":3,"file":"js/853.1fdcb84b.js","mappings":"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","sources":["webpack://@zazuko/spex/./node_modules/@graphy/core.data.factory/main.js","webpack://@zazuko/spex/./node_modules/@rdf-esm/formats-common/parsers.js","webpack://@zazuko/spex/./node_modules/@rdf-esm/formats-common/serializers.js","webpack://@zazuko/spex/./node_modules/@rdf-esm/formats-common/index.js","webpack://@zazuko/spex/./node_modules/@rdf-esm/sink-map/index.js","webpack://@zazuko/spex/./node_modules/@rdf-esm/to-ntriples/lib/blankNode.js","webpack://@zazuko/spex/./node_modules/@rdf-esm/to-ntriples/lib/dataset.js","webpack://@zazuko/spex/./node_modules/@rdf-esm/to-ntriples/lib/defaultGraph.js","webpack://@zazuko/spex/./node_modules/@rdf-esm/to-ntriples/lib/namedNode.js","webpack://@zazuko/spex/./node_modules/@rdf-esm/to-ntriples/lib/literal.js","webpack://@zazuko/spex/./node_modules/@rdf-esm/to-ntriples/lib/quad.js","webpack://@zazuko/spex/./node_modules/@rdf-esm/to-ntriples/lib/variable.js","webpack://@zazuko/spex/./node_modules/@rdf-esm/to-ntriples/index.js","webpack://@zazuko/spex/./node_modules/@rdf-esm/term-map/index.js","webpack://@zazuko/spex/./node_modules/@rdfjs-elements/formats-pretty/serializers/TransformToConciseHash.js","webpack://@zazuko/spex/./node_modules/@rdfjs-elements/formats-pretty/serializers/graphy.js","webpack://@zazuko/spex/./node_modules/@rdfjs-elements/formats-pretty/parsers/graphy.js","webpack://@zazuko/spex/./node_modules/@rdfjs-elements/formats-pretty/serializers/jsonld.js","webpack://@zazuko/spex/./node_modules/@rdfjs-elements/formats-pretty/index.js"],"sourcesContent":["\n\n\nconst crypto = require('crypto');\n\nconst R_INVALID_IRIREF = /([\\x00-\\x20<>\"{}|^`\\\\]|%(?![0-9A-F][0-9A-F]))/g;\nconst F_REPLACE_INVALID_IRIREF = (s_, s_v) => {\n\tlet s_code = s_v.codePointAt(0).toString(16)+'';\n\treturn s_code.length > 4\n\t\t? '\\\\U'+s_code.padStart(8, '0')\n\t\t: '\\\\u'+s_code.padStart(4, '0');\n};\n\nconst clean_iri = p_iri_dirty => p_iri_dirty.replace(R_INVALID_IRIREF, F_REPLACE_INVALID_IRIREF);\n\n\n\n// eslint-disable-next-line no-misleading-character-class\nconst RT_AVOID_PNAME_NS = /^(?:[\\u0000-@[-`{-\\u00bf\\u00d7\\u00f7\\u0300-\\u306f\\u037e\\u2000-\\u200b\\u200e-\\u206f\\u2190-\\u2bff\\u2ff0-\\u3000\\ud800-\\uf8ff\\ufdd0-\\ufddf\\ufffe\\uffff].+|(?:.+?[\\u0000-,\\/:-@[-^`{-\\u00b6\\u00b8-\\u00bf\\u00d7\\u00f7\\u037e\\u2000-\\u200b\\u200e-\\u203e\\u2041-\\u206f\\u2190-\\u2bff\\u2ff0-\\u3000\\ud800-\\uf8ff\\ufdd0-\\ufddf\\ufffe\\uffff].*)|.+\\.)$/;\n\n// eslint-disable-next-line no-misleading-character-class\nconst RT_AVOID_PNAME_LOCAL = /^(?:\\\\|[\\u0000-\\/;-@[-^`{-\\u00bf\\u00d7\\u00f7\\u0300-\\u306f\\u037e\\u2000-\\u200b\\u200e-\\u206f\\u2190-\\u2bff\\u2ff0-\\u3000\\ud800-\\uf8ff\\ufdd0-\\ufddf\\ufffe\\uffff].+|(?:.+?(?:\\\\|[\\u0000-,\\/;-@[-^`{-\\u00b6\\u00b8-\\u00bf\\u00d7\\u00f7\\u037e\\u2000-\\u200b\\u200e-\\u203e\\u2041-\\u206f\\u2190-\\u2bff\\u2ff0-\\u3000\\ud800-\\uf8ff\\ufdd0-\\ufddf\\ufffe\\uffff]).+)|(?:.+?(?:\\\\|[\\u0000-,.\\/;-@[-^`{-\\u00b6\\u00b8-\\u00bf\\u00d7\\u00f7\\u037e\\u2000-\\u200b\\u200e-\\u203e\\u2041-\\u206f\\u2190-\\u2bff\\u2ff0-\\u3000\\ud800-\\uf8ff\\ufdd0-\\ufddf\\ufffe\\uffff])))$/;\n\nconst RT_BOOLEAN_TRUE = /^([Tt](rue)?|TRUE)$/;\nconst RT_BOOLEAN_FALSE = /^([Ff](alse)?|FALSE)$/;\n\nconst S_UUID_V4 = 'xxxxxxxx_xxxx_4xxx_yxxx_xxxxxxxxxxxx';\nconst R_UUID_V4 = /[xy]/g;\n\nconst uuid_v4 = () => {\n\tlet dt_now = Date.now();\n\tif('undefined' !== typeof performance) dt_now += performance.now();\n\treturn S_UUID_V4.replace(R_UUID_V4, (s) => {\n\t\tlet x_r = (dt_now + (Math.random()*16)) % 16 | 0;\n\t\tdt_now = Math.floor(dt_now / 16);\n\t\treturn ('x' === s? x_r: ((x_r & 0x3) | 0x8)).toString(16);\n\t});\n};\n\n\n// symbol to access cache on a prefix mapping\nconst $_PREFIX_CACHE = Symbol('prefix-cache');\n\n// escape characters for compiling regexes\nconst R_REGEX_ESCAPE = /[$^*()+[\\\\{}|.?]/g;\n\n// valid locals of prefixed names\nconst SR_PN_LOCAL = '((?:[A-Za-z\\\\xc0-\\\\xd6\\\\xd8-\\\\xf6\\\\xf8-\\\\u{02ff}\\\\u{0370}-\\\\u{037d}\\\\u{037f}-\\\\u{1fff}\\\\u{200c}-\\\\u{200d}\\\\u{2070}-\\\\u{218f}\\\\u{2c00}-\\\\u{2fef}\\\\u{3001}-\\\\u{d7ff}\\\\u{f900}-\\\\u{fdcf}\\\\u{fdf0}-\\\\u{fffd}\\\\u{10000}-\\\\u{effff}_:0-9]|%[A-Fa-f0-9]{2}|\\\\\\\\[_~.\\\\-!$&\\'()*+,;=/?#@%])(?:(?:[A-Za-z\\\\xc0-\\\\xd6\\\\xd8-\\\\xf6\\\\xf8-\\\\u{02ff}\\\\u{0370}-\\\\u{037d}\\\\u{037f}-\\\\u{1fff}\\\\u{200c}-\\\\u{200d}\\\\u{2070}-\\\\u{218f}\\\\u{2c00}-\\\\u{2fef}\\\\u{3001}-\\\\u{d7ff}\\\\u{f900}-\\\\u{fdcf}\\\\u{fdf0}-\\\\u{fffd}\\\\u{10000}-\\\\u{effff}_\\\\-0-9\\\\xb7\\\\u{0300}-\\\\u{036f}\\\\u{203f}-\\\\u{2040}.:]|%[A-Fa-f0-9]{2}|\\\\\\\\[_~.\\\\-!$&\\'()*+,;=/?#@%])*(?:[A-Za-z\\\\xc0-\\\\xd6\\\\xd8-\\\\xf6\\\\xf8-\\\\u{02ff}\\\\u{0370}-\\\\u{037d}\\\\u{037f}-\\\\u{1fff}\\\\u{200c}-\\\\u{200d}\\\\u{2070}-\\\\u{218f}\\\\u{2c00}-\\\\u{2fef}\\\\u{3001}-\\\\u{d7ff}\\\\u{f900}-\\\\u{fdcf}\\\\u{fdf0}-\\\\u{fffd}\\\\u{10000}-\\\\u{effff}_\\\\-0-9\\\\xb7\\\\u{0300}-\\\\u{036f}\\\\u{203f}-\\\\u{2040}:]|%[A-Fa-f0-9]{2}|\\\\\\\\[_~.\\\\-!$&\\'()*+,;=/?#@%]))?)$';\n\n\n// create a cache on a prefix mapping\nfunction cache_prefixes(h_prefixes, b_terse=false) {\n\t// regex cache string building\n\tlet a_cache = [];\n\n\t// inverse mappings\n\tlet h_inverse = {};\n\n\t// each prefix/iri pair\n\tfor(let si_prefix in h_prefixes) {\n\t\tlet p_iri = h_prefixes[si_prefix];\n\n\t\t// prefix would make an invalid namespace; skip\n\t\tif(b_terse && RT_AVOID_PNAME_NS.test(si_prefix)) continue;\n\n\t\t// save inverse mapping\n\t\th_inverse[p_iri] = si_prefix;\n\n\t\t// push iri\n\t\ta_cache.push(p_iri.replace(R_REGEX_ESCAPE, '\\\\$&'));\n\t}\n\n\t// no prefixes; forgo cache\n\tif(!a_cache.length) return h_prefixes;\n\n\t// save cache object\n\th_prefixes[$_PREFIX_CACHE] = {\n\t\t_r_iris: new RegExp(`^(${a_cache.join('|')})${SR_PN_LOCAL}`, 'u'),\n\t\t_h_inverse: h_inverse,\n\t};\n\n\t// freeze object\n\treturn Object.freeze(h_prefixes);\n}\n\n\n\n// attempt to turn an iri into a terse prefixed name\nconst terse = (p_iri, h_prefixes) => {\n\t// ref cache\n\tlet g_cache = h_prefixes[$_PREFIX_CACHE];\n\n\t// cache exists\n\tif(g_cache) {\n\t\t// iri matching\n\t\tlet m_iri = g_cache._r_iris.exec(p_iri);\n\n\t\t// prefix mapped; compress\n\t\tif(m_iri) {\n\t\t\treturn g_cache._h_inverse[m_iri[1]]+':'+m_iri[2];\n\t\t}\n\t}\n\t// cache does not exist\n\telse {\n\t\t// best prefix id\n\t\tlet si_best_prefix = '';\n\t\tlet s_best_suffix = '';\n\n\t\t// length of longest matching iri\n\t\tlet nl_best_prefix_iri = -1;\n\n\t\t// each prefix in hash\n\t\tfor(let si_prefix in h_prefixes) {\n\t\t\tlet p_prefix_iri = h_prefixes[si_prefix];\n\n\t\t\t// target iri starts with prefix iri and its longer than the current best\n\t\t\tif(0 === p_iri.indexOf(p_prefix_iri) && p_prefix_iri.length > nl_best_prefix_iri\n\t\t\t\t// namespace is okay to use\n\t\t\t\t&& !RT_AVOID_PNAME_NS.test(si_prefix)\n\t\t\t) {\n\t\t\t\t// compute suffix\n\t\t\t\tlet s_suffix = p_iri.slice(p_prefix_iri.length);\n\n\t\t\t\t// suffix is okay to use\n\t\t\t\tif(!RT_AVOID_PNAME_LOCAL.test(s_suffix)) {\n\t\t\t\t\ts_best_suffix = s_suffix;\n\n\t\t\t\t\t// save prefix id as best\n\t\t\t\t\tsi_best_prefix = si_prefix;\n\n\t\t\t\t\t// update best iri length\n\t\t\t\t\tnl_best_prefix_iri = p_prefix_iri.length;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// found a prefix\n\t\tif(-1 !== nl_best_prefix_iri) {\n\t\t\t// use terse prefixed name\n\t\t\treturn si_best_prefix+':'+s_best_suffix;\n\t\t}\n\t}\n\n\t// fallback\n\treturn '<'+p_iri+'>';\n};\n\n// attempt to turn an iri into a concise prefixed name\nconst concise = (p_iri, h_prefixes={}) => {\n\t// ref cache\n\tlet g_cache = h_prefixes[$_PREFIX_CACHE];\n\n\t// cache exists\n\tif(g_cache) {\n\t\t// iri matching\n\t\tlet m_iri = g_cache._r_iris.exec(p_iri);\n\n\t\t// prefix mapped; compress\n\t\tif(m_iri) {\n\t\t\treturn g_cache._h_inverse[m_iri[1]]+':'+m_iri[2];\n\t\t}\n\t}\n\t// cache does not exists\n\telse {\n\t\t// best prefix id\n\t\tlet s_best_prefix_id = '';\n\n\t\t// length of longest matching iri\n\t\tlet nl_best_prefix_iri = -1;\n\n\t\t// each prefix in hash\n\t\tfor(let s_prefix_id in h_prefixes) {\n\t\t\tlet p_prefix_iri = h_prefixes[s_prefix_id];\n\n\t\t\t// target iri starts with prefix iri and its longer than the current best\n\t\t\tif(p_iri.startsWith(p_prefix_iri) && p_prefix_iri.length > nl_best_prefix_iri) {\n\t\t\t\t// save prefix id as best\n\t\t\t\ts_best_prefix_id = s_prefix_id;\n\n\t\t\t\t// update best iri length\n\t\t\t\tnl_best_prefix_iri = p_prefix_iri.length;\n\t\t\t}\n\t\t}\n\n\t\t// found a prefix\n\t\tif(-1 !== nl_best_prefix_iri) {\n\t\t\treturn s_best_prefix_id+':'+p_iri.slice(nl_best_prefix_iri);\n\t\t}\n\t}\n\n\t// no prefix found; default to full iri\n\treturn '>'+p_iri;\n};\n\nconst R_C1N_DECONSTRUCT = /^([^:]*):(.*)$/;\n\nfunction c1_to_nt(sc1_in, h_prefixes={}, b_verbose=false) {\n\tswitch(sc1_in[0]) {\n\t\t// absolute iri\n\t\tcase '>': return '<'+sc1_in.slice(1)+'>';\n\n\t\t// blank node\n\t\tcase '_': {\n\t\t\t// ephemeral hint\n\t\t\tif(sc1_in.length <= 2 || '#' === sc1_in[2]) {\n\t\t\t\treturn (new EphemeralBlankNode())[b_verbose? 'verbose': 'terse']();\n\t\t\t}\n\t\t\t// labeled\n\t\t\telse {\n\t\t\t\treturn sc1_in;\n\t\t\t}\n\t\t}\n\n\t\t// simple literal\n\t\tcase '\"': return JSON.stringify(sc1_in.slice(1));\n\n\t\t// languaged literal\n\t\tcase '@': {\n\t\t\tlet i_contents = sc1_in.indexOf('\"');\n\t\t\treturn JSON.stringify(sc1_in.slice(i_contents+1))+sc1_in.slice(0, i_contents);\n\t\t}\n\n\t\t// datatyped literal\n\t\tcase '^': {\n\t\t\tlet i_contents = sc1_in.indexOf('\"');\n\t\t\treturn JSON.stringify(sc1_in.slice(i_contents+1))+'^^'+c1_to_nt(sc1_in.slice(1, i_contents), h_prefixes, b_verbose);\n\t\t}\n\n\t\t// default graph\n\t\tcase '*': return '';\n\n\t\t// directive / node explicit\n\t\tcase '<':\n\t\tcase '`': return factory.c1(sc1_in).terse(h_prefixes);\n\n\t\t// otherwise\n\t\tdefault: {\n\t\t\t// rdf:type alis\n\t\t\tif('a' === sc1_in) return b_verbose? '<http://www.w3.org/1999/02/22-rdf-syntax-ns#type>': 'a';\n\n\t\t\t// deconstruct prefixed name\n\t\t\tlet [, si_prefix, s_suffix] = R_C1N_DECONSTRUCT.exec(sc1_in);\n\n\t\t\t// avoid illegal prefixed name parts\n\t\t\tif(b_verbose || RT_AVOID_PNAME_LOCAL.test(s_suffix) || RT_AVOID_PNAME_NS.test(si_prefix)) {\n\t\t\t\treturn '<'+h_prefixes[si_prefix]+s_suffix+'>';\n\t\t\t}\n\n\t\t\t// good as-is\n\t\t\treturn sc1_in;\n\t\t}\n\t}\n}\n\n\nclass GenericTerm {\n\tvalueOf() {\n\t\treturn this.concise();\n\t}\n\n\ttoString() {\n\t\treturn this.concise();\n\t}\n\n\tequals(z_other) {\n\t\treturn z_other\n\t\t\t? this === z_other\n\t\t\t\t|| (z_other.termType === this.termType && z_other.value === this.value)\n\t\t\t: false;\n\t}\n} Object.assign(GenericTerm.prototype, {\n\tisGraphyTerm: true,\n});\n\n\nclass NamedNode extends GenericTerm {\n\tconstructor(s_iri) {\n\t\tsuper();\n\t\tthis.value = s_iri;\n\t}\n\n\tconcise(h_prefixes={}) {\n\t\treturn concise(this.value, h_prefixes);\n\t}\n\n\tterse(h_prefixes={}, b_opt=false) {\n\t\treturn terse(clean_iri(this.value), h_prefixes, b_opt);\n\t}\n\n\tverbose() {\n\t\treturn '<'+clean_iri(this.value)+'>';\n\t}\n\n\tisolate() {\n\t\treturn {\n\t\t\ttermType: 'NamedNode',\n\t\t\tvalue: this.value,\n\t\t};\n\t}\n} Object.assign(NamedNode.prototype, {\n\ttermType: 'NamedNode',\n\tisNamedNode: true,\n});\n\nconst KT_RDF_TYPE = new NamedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#type');\nKT_RDF_TYPE.isRdfTypeAlias = true;  // for serialization\n\nconst KT_RDF_LANG_STRING = new NamedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#langString');\nconst G_ISOLATE_RDF_LANG_STRING = KT_RDF_LANG_STRING.isolate();\n\nconst KT_RDF_FIRST = new NamedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#first');\nconst KT_RDF_REST = new NamedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#rest');\nconst KT_RDF_NIL = new NamedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#nil');\n\nconst KT_XSD_DATE = new NamedNode('http://www.w3.org/2001/XMLSchema#date');\nconst KT_XSD_DATETIME = new NamedNode('http://www.w3.org/2001/XMLSchema#dateTime');\nconst KT_XSD_STRING = new NamedNode('http://www.w3.org/2001/XMLSchema#string');\n\nclass GenericLiteral extends GenericTerm {\n\tequals(z_other) {\n\t\treturn z_other\n\t\t\t? this === z_other\n\t\t\t\t|| ('Literal' === z_other.termType && z_other.value === this.value\n\t\t\t\t\t&& this.datatype.equals(z_other.datatype) && z_other.language === this.language)\n\t\t\t: false;\n\t}\n\n\tverbose() {\n\t\treturn JSON.stringify(this.value)\n\t\t\t+ (this.language\n\t\t\t\t? '@'+this.language\n\t\t\t\t: '^^'+this.datatype.verbose());\n\t}\n\n\tconcise(h_prefixes) {\n\t\tif(this.language) {\n\t\t\treturn '@'+this.language+'\"'+this.value;\n\t\t}\n\t\telse {\n\t\t\treturn '^'+concise(this.datatype.value, h_prefixes)+'\"'+this.value;\n\t\t}\n\t}\n\n\tterse(h_prefixes={}) {\n\t\t// turn into terse\n\t\tlet st_datatype = this.datatype.terse(h_prefixes);\n\n\t\t// stringify literal\n\t\treturn JSON.stringify(this.value)\n\t\t\t+ (this.language\n\t\t\t\t? '@'+this.language\n\t\t\t\t: '^^'+st_datatype);\n\t}\n\n\tisolate() {\n\t\treturn {\n\t\t\ttermType: 'Literal',\n\t\t\tvalue: this.value,\n\t\t\tlanguage: this.language,\n\t\t\tdatatype: this.datatype.isolate(),\n\t\t};\n\t}\n} Object.assign(GenericLiteral.prototype, {\n\tdatatype: KT_XSD_STRING,\n\tlanguage: '',\n\ttermType: 'Literal',\n\tisLiteral: true,\n\tisSimple: false,\n});\n\nclass LanguagedLiteral extends GenericLiteral {\n\tconstructor(s_value, s_lang) {\n\t\tsuper();\n\t\tthis.value = s_value;\n\n\t\t// remove optional '@' character from beginning\n\t\tthis.language = ('@' === s_lang[0]? s_lang.slice(1): s_lang).toLowerCase();\n\t}\n\n\tverbose() {\n\t\treturn JSON.stringify(this.value)+'@'+this.language;\n\t}\n\n\tconcise() {\n\t\treturn '@'+this.language+'\"'+this.value;\n\t}\n\n\tterse() {\n\t\t// stringify literal\n\t\treturn JSON.stringify(this.value)+'@'+this.language;\n\t}\n\n\tisolate() {\n\t\treturn {\n\t\t\ttermType: 'Literal',\n\t\t\tvalue: this.value,\n\t\t\tlanguage: this.language,\n\t\t\tdatatype: G_ISOLATE_RDF_LANG_STRING,\n\t\t};\n\t}\n} Object.assign(LanguagedLiteral.prototype, {\n\tdatatype: KT_RDF_LANG_STRING,\n\tisLanguaged: true,\n});\n\n\nclass DatatypedLiteral extends GenericLiteral {\n\tverbose() {\n\t\treturn JSON.stringify(this.value)+'^^'+this.datatype.verbose();\n\t}\n\n\tconcise(h_prefixes) {\n\t\treturn '^'+concise(this.datatype.value, h_prefixes)+'\"'+this.value;\n\t}\n\n\tterse(h_prefixes={}) {\n\t\t// turn into terse\n\t\tlet st_datatype = this.datatype.terse(h_prefixes);\n\n\t\t// stringify literal\n\t\treturn JSON.stringify(this.value)+'^^'+st_datatype;\n\t}\n\n\tisolate() {\n\t\treturn {\n\t\t\ttermType: 'Literal',\n\t\t\tvalue: this.value,\n\t\t\tlanguage: this.language,\n\t\t\tdatatype: this.datatype.isolate(),\n\t\t};\n\t}\n} Object.assign(DatatypedLiteral.prototype, {\n\tisDatatyped: true,\n});\n\nclass ExplicitlyDatatypedLiteral extends DatatypedLiteral {\n\tconstructor(s_value, kt_datatype) {\n\t\tsuper();\n\t\tthis.value = s_value;\n\t\tthis.datatype = kt_datatype;\n\t}\n}\n\nclass RawLiteral extends GenericTerm {\n\tconstructor(s_value) {\n\t\tsuper();\n\t\tthis.value = s_value;\n\t}\n\n\tget isSimple() {\n\t\treturn !this.language && !this.datatype.equals(KT_XSD_STRING);\n\t}\n\n\tget isLanguaged() {\n\t\treturn !!this.language;\n\t}\n\n\tget isDatatyped() {\n\t\treturn KT_XSD_STRING.equals(this.datatype);\n\t}\n\n\tequals(z_other) {\n\t\treturn z_other\n\t\t\t? this === z_other\n\t\t\t\t|| ('Literal' === z_other.termType && z_other.value === this.value\n\t\t\t\t\t&& this.datatype.equals(z_other.datatype) && z_other.language === this.language)\n\t\t\t: false;\n\t}\n\n\tverbose() {\n\t\treturn JSON.stringify(this.value)\n\t\t\t+ (this.language\n\t\t\t\t? '@'+this.language\n\t\t\t\t: '^^'+this.datatype.verbose());\n\t}\n\n\tconcise(h_prefixes) {\n\t\tif(this.language) {\n\t\t\treturn '@'+this.language+'\"'+this.value;\n\t\t}\n\t\telse {\n\t\t\treturn '^'+concise(this.datatype.value, h_prefixes)+'\"'+this.value;\n\t\t}\n\t}\n\n\tterse(h_prefixes={}) {\n\t\t// turn into terse\n\t\tlet st_datatype = this.datatype.terse(h_prefixes);\n\n\t\t// stringify literal\n\t\treturn JSON.stringify(this.value)\n\t\t\t+ (this.language\n\t\t\t\t? '@'+this.language\n\t\t\t\t: '^^'+st_datatype);\n\t}\n\n\tisolate() {\n\t\treturn {\n\t\t\ttermType: 'Literal',\n\t\t\tvalue: this.value,\n\t\t\tlanguage: this.language,\n\t\t\tdatatype: this.datatype.isolate(),\n\t\t};\n\t}\n} Object.assign(RawLiteral.prototype, {\n\tdatatype: KT_XSD_STRING,\n\tlanguage: '',\n\ttermType: 'Literal',\n\tisLiteral: true,\n});\n\nclass SimpleLiteral extends GenericLiteral {\n\tconstructor(s_value) {\n\t\tsuper();\n\t\tthis.value = s_value;\n\t}\n\n\tverbose() {\n\t\treturn JSON.stringify(this.value);\n\t}\n\n\tconcise() {\n\t\treturn '\"'+this.value;\n\t}\n\n\tterse() {\n\t\treturn JSON.stringify(this.value);\n\t}\n} Object.assign(SimpleLiteral.prototype, {\n\tisSimple: true,\n});\n\n\n\nconst KT_XSD_INTEGER = new NamedNode('http://www.w3.org/2001/XMLSchema#integer');\nclass Literal_Integer extends DatatypedLiteral {\n\tstatic from(s_literal) {\n\t\tlet kt = new Literal_Integer(+s_literal);\n\t\tkt.value = s_literal;\n\t\treturn kt;\n\t}\n\n\tconstructor(x_value) {\n\t\tsuper();\n\t\tthis.value = x_value+'';\n\n\t\tthis.number = x_value;\n\t}\n\n\tconcise(h_prefixes={}) {\n\t\treturn '^'+KT_XSD_INTEGER.concise(h_prefixes)+'\"'+this.value;\n\t}\n\n\tterse() {\n\t\treturn this.value.includes('e')\n\t\t\t? `\"${this.value}\"^^<http://www.w3.org/2001/XMLSchema#integer>`\n\t\t\t: this.value;\n\t}\n} Object.assign(Literal_Integer.prototype, {\n\tdatatype: KT_XSD_INTEGER,\n\n\tisNumeric: true,\n\tisInteger: true,\n});\nconst KT_XSD_DOUBLE = new NamedNode('http://www.w3.org/2001/XMLSchema#double');\nclass Literal_Double extends DatatypedLiteral {\n\tstatic from(s_literal) {\n\t\tlet kt = new Literal_Double(+s_literal);\n\t\tkt.value = s_literal;\n\t\treturn kt;\n\t}\n\n\tconstructor(x_value) {\n\t\tsuper();\n\t\tthis.value = x_value+'';\n\n\t\tthis.number = x_value;\n\t}\n\n\tconcise(h_prefixes={}) {\n\t\treturn '^'+KT_XSD_DOUBLE.concise(h_prefixes)+'\"'+this.value;\n\t}\n\n\tterse() {\n\t\treturn this.number.toExponential();\n\t}\n} Object.assign(Literal_Double.prototype, {\n\tdatatype: KT_XSD_DOUBLE,\n\n\tisNumeric: true,\n\tisDouble: true,\n});\nconst KT_XSD_DECIMAL = new NamedNode('http://www.w3.org/2001/XMLSchema#decimal');\nclass Literal_Decimal extends DatatypedLiteral {\n\tstatic from(s_literal) {\n\t\tlet kt = new Literal_Decimal(+s_literal);\n\t\tkt.value = s_literal;\n\t\treturn kt;\n\t}\n\n\tconstructor(x_value) {\n\t\tsuper();\n\t\tthis.value = x_value+'';\n\n\t\tthis.number = x_value;\n\t}\n\n\tconcise(h_prefixes={}) {\n\t\treturn '^'+KT_XSD_DECIMAL.concise(h_prefixes)+'\"'+this.value;\n\t}\n\n\tterse() {\n\t\treturn this.value.includes('e')\n\t\t\t? `\"${this.value}\"^^<http://www.w3.org/2001/XMLSchema#decimal>`\n\t\t\t: this.value+(this.value.includes('.')? '': '.0');\n\t}\n} Object.assign(Literal_Decimal.prototype, {\n\tdatatype: KT_XSD_DECIMAL,\n\n\tisNumeric: true,\n\tisDecimal: true,\n});\nconst KT_XSD_BOOLEAN = new NamedNode('http://www.w3.org/2001/XMLSchema#boolean');\nclass Literal_Boolean extends DatatypedLiteral {\n\tstatic from(s_literal) {\n\t\tlet kt = new Literal_Boolean(+s_literal);\n\t\tkt.value = s_literal;\n\t\treturn kt;\n\t}\n\n\tconstructor(b_value) {\n\t\tsuper();\n\t\tthis.value = b_value+'';\n\t\tthis.boolean = b_value;\n\t}\n\n\tconcise(h_prefixes={}) {\n\t\treturn '^'+KT_XSD_BOOLEAN.concise(h_prefixes)+'\"'+this.value;\n\t}\n\n\tterse() {\n\t\treturn this.value+'';\n\t}\n} Object.assign(Literal_Boolean.prototype, {\n\tdatatype: KT_XSD_BOOLEAN,\n\tisBoolean: true,\n});\n\n\n\nclass Literal_PositiveInfinity extends Literal_Double {\n\tconstructor() {\n\t\tsuper(Infinity);\n\t\tthis.value = 'INF';\n\t}\n\n\tterse(h_prefixes) {\n\t\treturn '\"INF\"^^'+KT_XSD_DOUBLE.terse(h_prefixes);\n\t}\n} Object.assign(Literal_PositiveInfinity.prototype, {\n\tisInfinite: true,\n});\n\nclass Literal_NegativeInfinity extends Literal_Double {\n\tconstructor() {\n\t\tsuper(-Infinity);\n\t\tthis.value = '-INF';\n\t}\n\n\tterse(h_prefixes) {\n\t\treturn '\"-INF\"^^'+KT_XSD_DOUBLE.terse(h_prefixes);\n\t}\n} Object.assign(Literal_NegativeInfinity.prototype, {\n\tisInfinite: true,\n});\n\nclass Literal_NaN extends Literal_Double {\n\tconstructor() {\n\t\tsuper(NaN);\n\t\tthis.value = 'NaN';\n\t}\n\n\tterse(h_prefixes) {\n\t\treturn '\"NaN\"^^'+KT_XSD_DOUBLE.terse(h_prefixes);\n\t}\n} Object.assign(Literal_NaN.prototype, {\n\tisNaN: true,\n});\n\n\nfunction BlankNode(s_value, b_anonymous=false) {\n\tthis.value = s_value;\n\tthis.isAnonymous = b_anonymous;\n} BlankNode.prototype = Object.assign(\n\tObject.create(GenericTerm.prototype), {\n\t\ttermType: 'BlankNode',\n\t\tisBlankNode: true,\n\n\t\tconcise() {\n\t\t\treturn '_:'+this.value;\n\t\t},\n\n\t\tterse() {\n\t\t\treturn '_:'+this.value;\n\t\t},\n\n\t\tverbose() {\n\t\t\treturn '_:'+this.value;\n\t\t},\n\n\t\tisolate() {\n\t\t\treturn {\n\t\t\t\ttermType: 'BlankNode',\n\t\t\t\tvalue: this.value,\n\t\t\t};\n\t\t},\n\t});\n\n\nfunction EphemeralBlankNode() {}\nEphemeralBlankNode.prototype = Object.assign(\n\tObject.create(BlankNode.prototype), {\n\t\tisAnonymous: true,\n\t\tisEphemeral: true,\n\n\t\tconcise() {\n\t\t\treturn '_:#'+this.value;\n\t\t},\n\n\t\tterse() {\n\t\t\treturn '[]';\n\t\t},\n\n\t\tverbose() {\n\t\t\treturn '_:'+this.value;\n\t\t},\n\n\t\tisolate() {\n\t\t\treturn {\n\t\t\t\ttermType: 'BlankNode',\n\t\t\t\tvalue: this.value,\n\t\t\t};\n\t\t},\n\n\t\tequals() {\n\t\t\treturn false;\n\t\t},\n\t});\nObject.defineProperty(EphemeralBlankNode.prototype, 'value', {\n\tget() {\n\t\treturn '_'+uuid_v4();\n\t},\n});\n\nclass Variable extends GenericTerm {\n\tconstructor(s_label) {\n\t\tsuper();\n\t\tthis.value = s_label;\n\t}\n\n\tconcise() {\n\t\treturn '?'+this.value;\n\t}\n\n\tterse() {\n\t\tthrow new Error(`Cannot call .terse() on 'Variable' term type`);\n\t}\n\n\tverbose() {\n\t\tthrow new Error(`Cannot call .verbose() on 'Variable' term type`);\n\t}\n\n\tisolate() {\n\t\treturn {\n\t\t\ttermType: 'Variable',\n\t\t\tvalue: this.value,\n\t\t};\n\t}\n} Object.assign(Variable.prototype, {\n\ttermType: 'Variable',\n\tisVariable: true,\n});\n\n\nfunction DefaultGraph() {}\nDefaultGraph.prototype = Object.assign(\n\tObject.create(GenericTerm.prototype), {\n\t\tvalue: '',\n\t\ttermType: 'DefaultGraph',\n\t\tisDefaultGraph: true,\n\n\t\tconcise() {\n\t\t\treturn '*';\n\t\t},\n\n\t\tterse() {\n\t\t\treturn '';\n\t\t},\n\n\t\tverbose() {\n\t\t\treturn '';\n\t\t},\n\n\t\tisolate() {\n\t\t\treturn {\n\t\t\t\ttermType: 'DefaultGraph',\n\t\t\t\tvalue: '',\n\t\t\t};\n\t\t},\n\t});\n\nfunction NoGraph() {}\nNoGraph.prototype = Object.assign(\n\tObject.create(GenericTerm.prototype), {\n\t\tvalue: '',\n\t\ttermType: 'NoGraph',\n\n\t\tconcise() {\n\t\t\treturn '';\n\t\t},\n\n\t\tterse() {\n\t\t\treturn '';\n\t\t},\n\n\t\tverbose() {\n\t\t\treturn '';\n\t\t},\n\n\t\tisolate() {\n\t\t\treturn {\n\t\t\t\ttermType: 'NoGraph',\n\t\t\t\tvalue: '',\n\t\t\t};\n\t\t},\n\t});\n\nconst KT_DEFAULT_GRAPH = new DefaultGraph();\nfunction Quad(h_subject, h_predicate, h_object, h_graph=KT_DEFAULT_GRAPH) {\n\tthis.subject = h_subject;\n\tthis.predicate = h_predicate;\n\tthis.object = h_object;\n\tthis.graph = h_graph;\n} Object.assign(Quad.prototype, {\n\tisGraphyQuad: true,\n\n\tequals(z_other) {\n\t\treturn z_other\n\t\t\t? this === z_other\n\t\t\t\t|| (this.object.equals(z_other.object)\n\t\t\t\t\t&& this.subject.equals(z_other.subject)\n\t\t\t\t\t&& this.predicate.equals(z_other.predicate)\n\t\t\t\t\t&& this.graph.equals(z_other.graph))\n\t\t\t: false;\n\t},\n\n\tvalueOf() {\n\t\treturn this.verbose();\n\t},\n\n\tconcise(h_prefixes={}) {\n\t\treturn [\n\t\t\tthis.subject.concise(h_prefixes),\n\t\t\tthis.predicate.concise(h_prefixes),\n\t\t\tthis.object.concise(h_prefixes),\n\t\t\tthis.graph.concise(h_prefixes),\n\t\t];\n\t},\n\n\tterse(h_prefixes) {\n\t\tlet b_default_graph = this.graph.isDefaultGraph;\n\t\treturn (b_default_graph? '': this.graph.terse(h_prefixes)+' { ')\n\t\t\t+this.subject.terse(h_prefixes)\n\t\t\t+' '+this.predicate.terse(h_prefixes)\n\t\t\t+' '+this.object.terse(h_prefixes)+' .'\n\t\t\t+(b_default_graph? '': ' }');\n\t},\n\n\tverbose() {\n\t\treturn this.subject.verbose()\n\t\t\t+' '+this.predicate.verbose()\n\t\t\t+' '+this.object.verbose()\n\t\t\t+' '+(this.graph.isDefaultGraph? '': this.graph.verbose()+' ')+'.';\n\t},\n\n\tisolate() {\n\t\treturn {\n\t\t\tsubject: this.subject.isolate(),\n\t\t\tpredicate: this.predicate.isolate(),\n\t\t\tobject: this.object.isolate(),\n\t\t\tgraph: this.graph.isolate(),\n\t\t};\n\t},\n});\n\n\n\nlet g_raw = {\n\tnamedNode(p_iri) {\n\t\treturn new NamedNode(p_iri);\n\t},\n\n\tblankNode(s_label, b_anonymous) {\n\t\treturn new BlankNode(s_label, b_anonymous);\n\t},\n\n\tliteral(s_value) {\n\t\treturn new RawLiteral(s_value);\n\t},\n\n\tdefaultGraph() {\n\t\treturn new DefaultGraph();\n\t},\n\n\tquad(kt_subject, kt_predicate, kt_object, kt_graph) {\n\t\treturn new Quad(kt_subject, kt_predicate, kt_object, kt_graph || KT_DEFAULT_GRAPH);\n\t},\n\n\tinteger(w) {\n\t\treturn Literal_Integer.from(w);\n\t},\n\n\tdouble(w) {\n\t\treturn Literal_Double.from(w);\n\t},\n\n\tdecimal(w) {\n\t\treturn Literal_Decimal.from(w);\n\t},\n\n\tboolean(w) {\n\t\treturn new Literal_Boolean(w);\n\t},\n\n};\n\n\nconst factory = module.exports = {\n\tconcise,\n\n\tadopt(dc_factory) {\n\t\tlet dc_extend = Object.create(dc_factory);\n\t\tlet b_use_extend = false;\n\n\t\tif('function' !== typeof dc_factory.boolean) {\n\t\t\tlet kt_xsd_boolean = dc_factory.namedNode('http://www.w3.org/2001/XMLSchema#boolean');\n\t\t\tdc_extend.boolean = b_value => dc_factory.literal(b_value, kt_xsd_boolean);\n\t\t\tb_use_extend = true;\n\t\t}\n\n\t\tif('function' !== typeof dc_factory.double) {\n\t\t\tlet kt_xsd_double = dc_factory.namedNode('http://www.w3.org/2001/XMLSchema#double');\n\t\t\tdc_extend.double = s_value => dc_factory.double(s_value, kt_xsd_double);\n\t\t\tb_use_extend = true;\n\t\t}\n\n\t\tif('function' !== typeof dc_factory.decimal) {\n\t\t\tlet kt_xsd_decimal = dc_factory.namedNode('http://www.w3.org/2001/XMLSchema#decimal');\n\t\t\tdc_extend.decimal = s_value => dc_factory.decimal(s_value, kt_xsd_decimal);\n\t\t\tb_use_extend = true;\n\t\t}\n\n\t\tif('function' !== typeof dc_factory.integer) {\n\t\t\tlet kt_xsd_integer = dc_factory.namedNode('http://www.w3.org/2001/XMLSchema#integer');\n\t\t\tdc_extend.integer = s_value => dc_factory.integer(s_value, kt_xsd_integer);\n\t\t\tb_use_extend = true;\n\t\t}\n\n\t\tif('function' !== typeof dc_factory.simpleLiteral) {\n\t\t\tdc_extend.simpleLiteral = s_value => dc_factory.literal(s_value);\n\t\t\tb_use_extend = true;\n\t\t}\n\n\t\tif('function' !== typeof dc_factory.languagedLiteral) {\n\t\t\tdc_extend.languagedLiteral = (s_value, s_lang) => dc_factory.literal(s_value, s_lang);\n\t\t\tb_use_extend = true;\n\t\t}\n\n\t\tif('function' !== typeof dc_factory.datatypedLiteral) {\n\t\t\tdc_extend.datatypedLiteral = (s_value, kt_datatype) => dc_factory.literal(s_value, kt_datatype);\n\t\t\tb_use_extend = true;\n\t\t}\n\n\t\tif(b_use_extend) {\n\t\t\treturn dc_extend;\n\t\t}\n\t\telse {\n\t\t\treturn dc_factory;\n\t\t}\n\t},\n\n\traw: g_raw,\n\tunfiltered: {\n\t\t...g_raw,\n\t\tliteral(s_value, z_datatype_or_lang) {\n\t\t\tif(!z_datatype_or_lang || KT_XSD_STRING.equals(z_datatype_or_lang)) {\n\t\t\t\treturn new SimpleLiteral(s_value);\n\t\t\t}\n\t\t\telse if('string' === typeof z_datatype_or_lang) {\n\t\t\t\treturn new LanguagedLiteral(s_value, z_datatype_or_lang);\n\t\t\t}\n\t\t\telse if(KT_XSD_STRING.equals(z_datatype_or_lang)) {\n\t\t\t\treturn new SimpleLiteral(s_value);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn new ExplicitlyDatatypedLiteral(s_value, z_datatype_or_lang);\n\t\t\t}\n\t\t},\n\n\t\tsimpleLiteral(s_value) {\n\t\t\treturn new SimpleLiteral(s_value);\n\t\t},\n\n\t\tlanguagedLiteral(s_value, s_language) {\n\t\t\treturn new LanguagedLiteral(s_value, s_language);\n\t\t},\n\n\t\tdatatypedLiteral(s_value, kt_datatype) {\n\t\t\tif(KT_XSD_STRING.equals(kt_datatype)) {\n\t\t\t\treturn new SimpleLiteral(s_value);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn new ExplicitlyDatatypedLiteral(s_value, kt_datatype);\n\t\t\t}\n\t\t},\n\t},\n\n\tnumber(x) {\n\t\t// not finite or not a number\n\t\tif('number' === typeof x && (!Number.isFinite(x) || Number.isNaN(x))) {\n\t\t\treturn factory.double(x);\n\t\t}\n\t\t// integer or bigint\n\t\telse if(Number.isInteger(x) || 'bigint' === typeof x) {  // eslint-disable-line valid-typeof\n\t\t\treturn factory.integer(x);\n\t\t}\n\t\t// non-integer\n\t\telse {\n\t\t\treturn factory.decimal(x);\n\t\t}\n\t},\n\n\tdate(dt) {\n\t\treturn factory.literal(dt.toISOString().replace(/T.+$/, 'Z'), KT_XSD_DATE);\n\t},\n\n\tdateTime(dt) {\n\t\treturn factory.literal(dt.toISOString(), KT_XSD_DATETIME);\n\t},\n\n\tnamedNode(p_iri) {\n\t\treturn new NamedNode(p_iri);\n\t},\n\n\tephemeral() {\n\t\treturn new EphemeralBlankNode();\n\t},\n\n\t// @deprecated\n\tanonymous() {\n\t\treturn new EphemeralBlankNode();\n\t},\n\n\tblankNode(z_label) {\n\t\t// no label given, generate a UUID\n\t\tif(!z_label) {\n\t\t\t// eslint-disable-next-line no-undef\n\t\t\treturn new BlankNode('_'+uuid_v4(), true);\n\t\t}\n\t\t// label given\n\t\telse if('string' === typeof z_label) {\n\t\t\treturn new BlankNode(z_label);\n\t\t}\n\n\t\tthrow new TypeError(`factory.blankNode(label) expects 'label' parameter to be falsy or a string; instead found: ${z_label}`);\n\t},\n\n\tliteral(s_value, z_datatype_or_lang) {\n\t\tif(!z_datatype_or_lang || KT_XSD_STRING.equals(z_datatype_or_lang)) {\n\t\t\treturn new SimpleLiteral(s_value);\n\t\t}\n\t\telse if('string' === typeof z_datatype_or_lang) {\n\t\t\treturn new LanguagedLiteral(s_value, z_datatype_or_lang);\n\t\t}\n\t\telse {\n\t\t\treturn new ExplicitlyDatatypedLiteral(s_value, z_datatype_or_lang);\n\t\t}\n\t},\n\n\tinteger(w_value) {\n\t\tlet s_type = typeof w_value;\n\n\t\t// a number was given\n\t\tif('number' === s_type) {\n\t\t\t// not a finite number\n\t\t\tif(!Number.isFinite(w_value)) {\n\t\t\t\t// NaN\n\t\t\t\tif(Number.isNaN(w_value)) {\n\t\t\t\t\tthrow new Error('XSD integer cannot encode NaN. Try using double');\n\t\t\t\t}\n\n\t\t\t\tthrow new Error('XSD integer cannot encode +/-infinity. Try using double');\n\t\t\t}\n\t\t\t// not an integer\n\t\t\telse if(!Number.isInteger(w_value)) {\n\t\t\t\tthrow new Error('Number is not an integer: '+w_value);\n\t\t\t}\n\n\t\t\treturn new Literal_Integer(w_value);\n\t\t}\n\t\t// string\n\t\telse if('string' === s_type) {\n\t\t\t// empty string\n\t\t\tif('' === w_value) {\n\t\t\t\tthrow new Error('Refusing to serialize empty string as xsd:integer');\n\t\t\t}\n\n\t\t\t// parse to number\n\t\t\tlet x_value = +w_value;\n\n\t\t\t// failed to parse or not an integer\n\t\t\tif(Number.isNaN(x_value) || !Number.isInteger(x_value)) {\n\t\t\t\tthrow new Error('Invalid integer string: '+w_value);\n\t\t\t}\n\n\t\t\treturn new Literal_Integer(x_value);\n\t\t}\n\t\t// undefined\n\t\telse if('undefined' === s_type) {\n\t\t\tthrow new Error('Refusing to serialize undefined value as xsd:integer');\n\t\t}\n\t\t// other\n\t\telse {\n\t\t\t// null\n\t\t\tif(null === w_value) {\n\t\t\t\tthrow new Error('Refusing to serialize null value as xsd:integer');\n\t\t\t}\n\n\t\t\t// invalid\n\t\t\tthrow new Error('XSD integer expects a number type or integer string');\n\t\t}\n\t},\n\tdouble(w_value) {\n\t\tlet s_type = typeof w_value;\n\n\t\t// a number was given\n\t\tif('number' === s_type) {\n\t\t\t// not a finite number\n\t\t\tif(!Number.isFinite(w_value)) {\n\t\t\t\t// NaN\n\t\t\t\tif(Number.isNaN(w_value)) {\n\t\t\t\t\treturn new Literal_NaN();\n\t\t\t\t}\n\n\t\t\t\treturn w_value > 0\n\t\t\t\t\t? new Literal_PositiveInfinity()\n\t\t\t\t\t: new Literal_NegativeInfinity();\n\t\t\t}\n\n\t\t\treturn new Literal_Double(w_value);\n\t\t}\n\t\t// string\n\t\telse if('string' === s_type) {\n\t\t\t// empty string\n\t\t\tif('' === w_value) {\n\t\t\t\tthrow new Error('Refusing to serialize empty string as xsd:double');\n\t\t\t}\n\n\t\t\t// parse to number\n\t\t\tlet x_value = +w_value;\n\n\t\t\t// failed to parse\n\t\t\tif(Number.isNaN(x_value)) {\n\t\t\t\tthrow new Error('Invalid decimal string: '+w_value);\n\t\t\t}\n\n\t\t\treturn new Literal_Double(x_value);\n\t\t}\n\t\t// undefined\n\t\telse if('undefined' === s_type) {\n\t\t\tthrow new Error('Refusing to serialize undefined value as xsd:double');\n\t\t}\n\t\t// other\n\t\telse {\n\t\t\t// null\n\t\t\tif(null === w_value) {\n\t\t\t\tthrow new Error('Refusing to serialize null value as xsd:double');\n\t\t\t}\n\n\t\t\t// invalid\n\t\t\tthrow new Error('XSD double expects a number type or double string');\n\t\t}\n\t},\n\tdecimal(w_value) {\n\t\tlet s_type = typeof w_value;\n\n\t\t// a number was given\n\t\tif('number' === s_type) {\n\t\t\t// not a finite number\n\t\t\tif(!Number.isFinite(w_value)) {\n\t\t\t\t// NaN\n\t\t\t\tif(Number.isNaN(w_value)) {\n\t\t\t\t\tthrow new Error('XSD decimal cannot encode NaN. Try using double');\n\t\t\t\t}\n\n\t\t\t\tthrow new Error('XSD decimal cannot encode +/-infinity. Try using double');\n\t\t\t}\n\n\t\t\treturn new Literal_Decimal(w_value);\n\t\t}\n\t\t// string\n\t\telse if('string' === s_type) {\n\t\t\t// empty string\n\t\t\tif('' === w_value) {\n\t\t\t\tthrow new Error('Refusing to serialize empty string as xsd:decimal');\n\t\t\t}\n\n\t\t\t// parse to number\n\t\t\tlet x_value = +w_value;\n\n\t\t\t// failed to parse\n\t\t\tif(Number.isNaN(x_value)) {\n\t\t\t\tthrow new Error('Invalid decimal string: '+w_value);\n\t\t\t}\n\n\t\t\treturn new Literal_Decimal(x_value);\n\t\t}\n\t\t// undefined\n\t\telse if('undefined' === s_type) {\n\t\t\tthrow new Error('Refusing to serialize undefined value as xsd:decimal');\n\t\t}\n\t\t// other\n\t\telse {\n\t\t\t// null\n\t\t\tif(null === w_value) {\n\t\t\t\tthrow new Error('Refusing to serialize null value as xsd:decimal');\n\t\t\t}\n\n\t\t\t// invalid\n\t\t\tthrow new Error('XSD decimal expects a number type or decimal string');\n\t\t}\n\t},\n\tboolean(w_value) {\n\t\tlet s_type = typeof w_value;\n\n\t\t// boolean\n\t\tif('boolean' === s_type) {\n\t\t\treturn new Literal_Boolean(w_value);\n\t\t}\n\t\t// number\n\t\telse if('number' === s_type) {\n\t\t\t// 1\n\t\t\tif(1 === w_value) {\n\t\t\t\treturn new Literal_Boolean(true);\n\t\t\t}\n\t\t\t// 0\n\t\t\telse if(0 === w_value) {\n\t\t\t\treturn new Literal_Boolean(false);\n\t\t\t}\n\n\t\t\t// invalid\n\t\t\tthrow new Error(`Boolean value 'w_value' must be either a '1' or '0' if using numbers`);\n\t\t}\n\t\t// string\n\t\telse if('string' === s_type) {\n\t\t\t// truthy value\n\t\t\tif(RT_BOOLEAN_TRUE.test(w_value)) {\n\t\t\t\treturn new Literal_Boolean(true);\n\t\t\t}\n\t\t\t// falsy value\n\t\t\telse if(RT_BOOLEAN_FALSE.test(w_value)) {\n\t\t\t\treturn new Literal_Boolean(false);\n\t\t\t}\n\n\t\t\t// empty string\n\t\t\tif('' === w_value) {\n\t\t\t\tthrow new Error('Refusing to serialize empty string as xsd:boolean');\n\t\t\t}\n\n\t\t\t// failed to parse\n\t\t\tthrow new Error('Invalid boolean string: '+w_value);\n\t\t}\n\t\t// undefined\n\t\telse if('undefined' === s_type) {\n\t\t\tthrow new Error('Refusing to serialize undefined value as xsd:boolean');\n\t\t}\n\t\t// other\n\t\telse {\n\t\t\t// null\n\t\t\tif(null === w_value) {\n\t\t\t\tthrow new Error('Refusing to serialize null value as xsd:boolean');\n\t\t\t}\n\n\t\t\t// invalid\n\t\t\tthrow new Error('XSD boolean expects a boolean type or boolean string');\n\t\t}\n\t},\n\n\n\tdefaultGraph() {\n\t\treturn new DefaultGraph();\n\t},\n\n\tvariable(s_label) {\n\t\treturn new Variable(s_label);\n\t},\n\n\t// warn\n\ttriple(h_subject, h_predicate, h_object) {\n\t\tlet e_stack = new Error('It is strongly encouraged to use .quad() instead of .triple()');\n\t\tconsole.warn(e_stack.stack.replace(/^(\\s*)Error:/, '$1Warning:'));\n\t\treturn new Quad(h_subject, h_predicate, h_object);\n\t},\n\n\tquad(h_subject, h_predicate, h_object, h_graph) {\n\t\treturn new Quad(h_subject, h_predicate, h_object, h_graph || KT_DEFAULT_GRAPH);\n\t},\n\n\tterm(z_term, w_prefixes) {\n\t\t// concise term\n\t\tif('string' === typeof z_term) {\n\t\t\treturn factory.c1(z_term, w_prefixes);\n\t\t}\n\t\t// rdfjs term\n\t\telse {\n\t\t\treturn factory.from.rdfjs_term(z_term);\n\t\t}\n\t},\n\n\t/**\n\t * construct a term object from a concise term string\n\t * @param  {c1_string} sc1_term - a representation of the term object to create\n\t * @param  {Object} h_prefixes - mappings for prefixes\n\t * @return {Term} - an RDFJS-compatible term object\n\t */\n\tc1(sc1_term, h_prefixes={}) {\n\t\t// deduce term type\n\t\tswitch(sc1_term[0]) {\n\t\t\t// datatyped literal\n\t\t\tcase '^': {\n\t\t\t\t// find literal's contents delimiter\n\t\t\t\tlet i_contents = sc1_term.indexOf('\"');\n\n\t\t\t\t// no delimiter\n\t\t\t\tif(-1 === i_contents) {\n\t\t\t\t\tthrow new Error(`Invalid concise-term string, no content literal delimiter found: '${sc1_term}'`);\n\t\t\t\t}\n\n\t\t\t\t// extract datatype\n\t\t\t\tlet s_datatype = sc1_term.slice(1, i_contents);\n\n\t\t\t\t// make term\n\t\t\t\treturn factory.literal(sc1_term.slice(i_contents+1), factory.c1_node_explicit(s_datatype, h_prefixes));\n\t\t\t}\n\n\t\t\t// languaged literal\n\t\t\tcase '@': {\n\t\t\t\t// find literal's contents delimiter\n\t\t\t\tlet i_contents = sc1_term.indexOf('\"');\n\n\t\t\t\t// no delimiter\n\t\t\t\tif(-1 === i_contents) {\n\t\t\t\t\tthrow new Error(`Invalid concise-term string, no content literal delimiter found: '${sc1_term}'`);\n\t\t\t\t}\n\n\t\t\t\t// extract language\n\t\t\t\tlet s_language = sc1_term.slice(1, i_contents);\n\n\t\t\t\t// make term\n\t\t\t\treturn factory.literal(sc1_term.slice(i_contents+1), s_language);\n\t\t\t}\n\n\t\t\t// simple literal\n\t\t\tcase '\"': {\n\t\t\t\t// make term\n\t\t\t\treturn factory.literal(sc1_term.slice(1));\n\t\t\t}\n\n\t\t\t// prefixed name\n\t\t\tdefault: return factory.c1_node(sc1_term, h_prefixes);\n\t\t}\n\t},\n\n\t// construct a term object from a concise term string for nodes\n\tc1_node(sc1_node, h_prefixes={}) {\n\t\t// rdf:type shortcut\n\t\tif('a' === sc1_node) return KT_RDF_TYPE;\n\n\t\t// default graph\n\t\tif('*' === sc1_node) return factory.defaultGraph();\n\n\t\t// blank node\n\t\tif('_' === sc1_node[0]) {\n\t\t\tif(':' !== sc1_node[1]) throw new Error(`Invliad concise-term string, prefixes are not allowed to start with an underscore: '${sc1_node}'`);\n\n\t\t\t// interpret ephemeral hint\n\t\t\tif('#' === sc1_node[2] || 2 === sc1_node.length) return factory.ephemeral();\n\n\t\t\t// create blank node\n\t\t\treturn factory.blankNode(sc1_node.slice(2));\n\t\t}\n\n\t\t// other\n\t\treturn factory.c1_node_explicit(sc1_node, h_prefixes);\n\t},\n\n\t// construct a named node\n\tc1_named_node(sc1_node, h_prefixes={}) {\n\t\t// rdf:type shortcut\n\t\tif('a' === sc1_node) return KT_RDF_TYPE;\n\n\t\t// other\n\t\treturn factory.c1_node_explicit(sc1_node, h_prefixes);\n\t},\n\n\t// construct a term object from a concise term string for nodes (no shortcuts)\n\tc1_node_explicit(sc1_node, h_prefixes={}) {\n\t\t// deduce term type\n\t\tswitch(sc1_node[0]) {\n\t\t\t// iri\n\t\t\tcase '>': return factory.namedNode(sc1_node.slice(1));\n\n\t\t\t// invalid concise-term string\n\t\t\tcase '<': throw new Error(`Whoops! It looks like this concise-term string starts with a '<' character. Remember to use '>' if you are trying to make an absolute IRI reference.\\nInvalid concise-term string '${sc1_node}'`);\n\t\t\tcase '`': throw new Error(`The backtick character '\\`' is reserved for concise-struct key directives and should not be used in the object position.\\nInvalid concise-term string '${sc1_node}'`);\n\n\t\t\t// prefixed name\n\t\t\tdefault: return this.c1_prefixed_node(sc1_node, h_prefixes);\n\t\t}\n\t},\n\n\t// construct a term object from a concise term string for prefixed nodes\n\tc1_prefixed_node(sc1_node, h_prefixes={}) {\n\t\t// find prefix delimiter\n\t\tlet i_colon = sc1_node.indexOf(':');\n\n\t\t// no delimter; invalid concise-term string for node\n\t\tif(-1 === i_colon) throw new Error(`A relative or prefixed node must include a ':' character. \\nInvalid concise-term string for node: '${sc1_node}'`);\n\n\t\t// prefix id\n\t\tlet s_prefix_id = sc1_node.slice(0, i_colon);\n\n\t\t// suffix\n\t\tlet s_suffix = sc1_node.slice(i_colon+1);\n\n\t\t// find prefix in hash\n\t\tif(s_prefix_id in h_prefixes) {\n\t\t\treturn factory.namedNode(h_prefixes[s_prefix_id]+s_suffix);\n\t\t}\n\t\t// prefix not exists\n\t\telse {\n\t\t\tthrow new Error(`Prefix not defined: '${s_prefix_id}'`);\n\t\t}\n\t},\n\n\tc1_to_nt,\n\n\t* quads(hc4_quads, h_prefixes={}) {\n\t\tfor(let sc1_graph in hc4_quads) {\n\t\t\tyield* factory.triples(hc4_quads[sc1_graph], h_prefixes, sc1_graph);\n\t\t}\n\t},\n\n\t* triples(hc3_triples, h_prefixes={}, sc1_graph='*') {\n\t\tlet k_graph = factory.c1(sc1_graph, h_prefixes);\n\t\tfor(let sc1_subject in hc3_triples) {\n\t\t\tlet k_subject = factory.c1(sc1_subject, h_prefixes);\n\t\t\tlet hc2_pairs = hc3_triples[sc1_subject];\n\n\t\t\tyield* factory.pairs(k_graph, k_subject, hc2_pairs, h_prefixes);\n\t\t}\n\t},\n\n\t* pairs(k_graph, k_subject, hc2_pairs, h_prefixes={}) {\n\t\tfor(let sc1_predicate in hc2_pairs) {\n\t\t\tlet k_predicate = factory.c1(sc1_predicate, h_prefixes);\n\t\t\tlet z_objects = hc2_pairs[sc1_predicate];\n\n\t\t\tyield* factory.objects(k_graph, k_subject, k_predicate, z_objects, h_prefixes);\n\t\t}\n\t},\n\n\t* collection(k_graph, k_subject, a_objects, h_prefixes={}) {\n\t\t// first item\n\t\tyield* factory.objects(k_graph, k_subject, KT_RDF_FIRST, a_objects[0], h_prefixes);\n\n\t\t// rest of items\n\t\tlet a_rest = a_objects.slice(1);\n\n\t\t// no more\n\t\tif(!a_rest.length) {\n\t\t\tyield new Quad(k_subject, KT_RDF_REST, KT_RDF_NIL, k_graph);\n\t\t}\n\t\t// more remain\n\t\telse {\n\t\t\t// auto blank node\n\t\t\tlet k_hop = factory.blankNode();\n\n\t\t\t// incoming triple\n\t\t\tyield new Quad(k_subject, KT_RDF_REST, k_hop, k_graph);\n\n\t\t\t// outgoing triples\n\t\t\tyield* factory.collection(k_graph, k_hop, a_rest, h_prefixes);\n\t\t}\n\t},\n\n\t* objects(k_graph, k_subject, k_predicate, z_objects, h_prefixes, b_nested=false) {\n\t\t// value type\n\t\tlet s_type = typeof z_objects;\n\t\tswitch(s_type) {\n\t\t\t// c1-string\n\t\t\tcase 'string': {\n\t\t\t\tyield new Quad(k_subject, k_predicate, factory.c1(z_objects, h_prefixes), k_graph);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// number\n\t\t\tcase 'number': {\n\t\t\t\tyield new Quad(k_subject, k_predicate, factory.number(z_objects), k_graph);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// object\n\t\t\tcase 'object': {\n\t\t\t\t// array\n\t\t\t\tif(Array.isArray(z_objects)) {\n\t\t\t\t\t// RDF collection\n\t\t\t\t\tif(b_nested) {\n\t\t\t\t\t\t// auto blank node\n\t\t\t\t\t\tlet k_hop = factory.blankNode();\n\n\t\t\t\t\t\t// incoming triple\n\t\t\t\t\t\tyield new Quad(k_subject, k_predicate, k_hop, k_graph);\n\n\t\t\t\t\t\t// outgoing triple\n\t\t\t\t\t\tyield* factory.collection(k_graph, k_hop, z_objects, h_prefixes);\n\t\t\t\t\t}\n\t\t\t\t\t// list of objects\n\t\t\t\t\telse {\n\t\t\t\t\t\tfor(let z_item of z_objects) {\n\t\t\t\t\t\t\tyield* factory.objects(k_graph, k_subject, k_predicate, z_item, h_prefixes, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// simple object\n\t\t\t\telse {\n\t\t\t\t\t// auto blank node\n\t\t\t\t\tlet k_hop = factory.blankNode();\n\n\t\t\t\t\t// incoming triple\n\t\t\t\t\tyield new Quad(k_subject, k_predicate, k_hop, k_graph);\n\n\t\t\t\t\t// outgoing triples\n\t\t\t\t\tyield* factory.pairs(k_graph, k_hop, z_objects, h_prefixes);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// other\n\t\t\tdefault: {\n\t\t\t\tthrow new Error(`invalid object type: ${typeof z_objects}`);\n\t\t\t}\n\t\t}\n\t},\n\n\tfrom: {\n\t\tterm(z_term) {\n\t\t\tif(z_term.isGraphyTerm) return z_term;\n\n\t\t\treturn factory.from.rdfjs_term(z_term);\n\t\t},\n\n\t\tquad(g_quad) {\n\t\t\tif(g_quad.isGraphyQuad) return g_quad;\n\n\t\t\tlet g_from = factory.from;\n\t\t\treturn new Quad(\n\t\t\t\tg_from.rdfjs_term(g_quad.subject),\n\t\t\t\tg_from.rdfjs_term(g_quad.predicate),\n\t\t\t\tg_from.rdfjs_term(g_quad.object),\n\t\t\t\tg_quad.graph? g_from.rdfjs_term(g_quad.graph): KT_DEFAULT_GRAPH,\n\t\t\t);\n\t\t},\n\n\t\trdfjs_term(g_term) {\n\t\t\tswitch(g_term.termType) {\n\t\t\t\tcase 'NamedNode': return new NamedNode(g_term.value);\n\t\t\t\tcase 'BlankNode': return new BlankNode(g_term.value);\n\t\t\t\tcase 'Literal': return factory.literal(g_term.value, g_term.language\n\t\t\t\t\t? g_term.language\n\t\t\t\t\t: (g_term.datatype\n\t\t\t\t\t\t? new NamedNode(g_term.datatype.value)\n\t\t\t\t\t\t: null));\n\t\t\t\tcase 'DefaultGraph': return new DefaultGraph();\n\t\t\t\tdefault: {\n\t\t\t\t\tthrow new TypeError(`invalid termType: ${g_term.termType}`);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tsparql_result(g_term) {\n\t\t\tswitch(g_term.type) {\n\t\t\t\tcase 'uri': {\n\t\t\t\t\treturn new NamedNode(g_term.value);\n\t\t\t\t}\n\n\t\t\t\tcase 'literal':\n\t\t\t\tcase 'typed-literal': {\n\t\t\t\t\tif('xml:lang' in g_term) {\n\t\t\t\t\t\treturn new LanguagedLiteral(g_term.value, g_term['xml:lang']);\n\t\t\t\t\t}\n\t\t\t\t\telse if('datatype' in g_term && 'http://www.w3.org/2001/XMLSchema#string' !== g_term.datatype) {\n\t\t\t\t\t\treturn new ExplicitlyDatatypedLiteral(g_term.value, new NamedNode(g_term.datatype));\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn new SimpleLiteral(g_term.value);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcase 'bnode': {\n\t\t\t\t\treturn new BlankNode(g_term.value);\n\t\t\t\t}\n\n\t\t\t\tdefault: {\n\t\t\t\t\tthrow new Error(`unexpected SPARQL Result JSON Format Term type: ${g_term.type}`);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n\n\tto: {\n\t\tboolean: s_boolean => Literal_Boolean.from(s_boolean),\n\t\tinteger: s_integer => Literal_Integer.from(s_integer),\n\t\tdecimal: s_decimal => Literal_Decimal.from(s_decimal),\n\t\tdouble: s_double => Literal_Double.from(s_double),\n\t},\n\n\n\t/**\n\t * @param  {Object} gc_comment -\n\t * @return {string} a `concise-term string` directive to be used as a key in `concise-term structs`\n\t * \tin order to write a comment to the document (only works with supporting serializers)\n\t */\n\tcomment(gc_comment={}) {\n\t\treturn `\\`[${uuid_v4()}]${JSON.stringify({...gc_comment, type:'comment'})}`;\n\t},\n\n\t/**\n\t * @param  {integer} [line_count=1] - number of newlines to insert\n\t * @return {string} a `concise-term string` directive to be used as a key in `concise-term structs`\n\t * \tin order to write the given number of newlines to the document (only works with supporting serializers)\n\t */\n\tnewlines() {\n\t\t// if(!Number.isInteger(n_line_count)) throw new TypeError('graphy/core.data.factory#newlines() expects `line_count` argument to be an integer');\n\t\treturn `\\`[${uuid_v4()}]{\"type\":\"newlines\"}`;\n\t},\n\n\t/**\n\t * @param {string} s_key - key that identifies which aspect to configure. e.g., 'lists'\n\t * @return {string} a `concise-term string` directive to be used as a key in `concise-term structs`\n\t * \tin order to write the given number of newlines to the document (only works with supporting serializers)\n\t */\n\tconfig(s_key) {\n\t\tif('string' !== typeof s_key) throw new TypeError(`Expected 'key' argument to be a string, instead found ${typeof s_key}`);\n\t\treturn `\\`[${uuid_v4()}]{\"type\":\"config\",\"value\":${JSON.stringify(s_key)}}`;\n\t},\n\n\t/**\n\t * @param {AnyQuad} g_quad - quad to hash\n\t * @return {string} a sha256 hash of the quad\n\t */\n\thash(g_quad) {\n\t\t// normalize quad\n\t\tlet k_quad = factory.from.quad(g_quad);\n\n\t\t// create hash\n\t\tlet d_hash = crypto.createHash('sha256');\n\n\t\t// verbose quad\n\t\td_hash.update(k_quad.verbose());\n\n\t\t// return hash string\n\t\treturn d_hash.digest('hex');\n\t},\n\n\n\tcache_prefixes,\n\tcachePrefixes: cache_prefixes,\n\tterse,\n\n\tclean_iri,\n\tcleanIri: clean_iri,\n\n\t$_PREFIX_CACHE,\n};\n\nObject.assign(factory, {\n\tc3: factory.triples,\n\tc4: factory.quads,\n\tfromTerm: factory.from.term,\n\tfromQuad: factory.from.quad,\n});\n","export async function jsonLdParser () {\n  const JsonLdParser = (await import('@rdfjs/parser-jsonld')).default\n\n  return new JsonLdParser()\n}\n\nexport async function n3Parser () {\n  const N3Parser = (await import('@rdfjs/parser-n3')).default\n  return new N3Parser()\n}\n\nexport async function rdfXmlParser () {\n  const module = await import('rdfxml-streaming-parser')\n\n  let RdfXmlParser\n  if (module.default) {\n    RdfXmlParser = module.default.RdfXmlParser\n  } else {\n    RdfXmlParser = module.RdfXmlParser\n  }\n\n  return new RdfXmlParser()\n}\n","export async function jsonLdSerializer () {\n  const JsonLdSerializer = (await import('@rdfjs/serializer-jsonld')).default\n\n  return new JsonLdSerializer({ encoding: 'string' })\n}\n\nexport async function nTriplesSerializer () {\n  const NTriplesSerializer = (await import('@rdfjs/serializer-ntriples')).default\n\n  return new NTriplesSerializer()\n}\n","import {\n  jsonLdParser,\n  n3Parser,\n  rdfXmlParser\n} from './parsers.js'\nimport {\n  jsonLdSerializer,\n  nTriplesSerializer\n} from './serializers.js'\nimport { SinkMap } from '@rdf-esm/sink-map'\n\nconst parserMap = new SinkMap()\nconst serializerMap = new SinkMap()\n\nparserMap.set('application/ld+json', jsonLdParser)\nparserMap.set('application/trig', n3Parser)\nparserMap.set('application/n-quads', n3Parser)\nparserMap.set('application/n-triples', n3Parser)\nparserMap.set('text/n3', n3Parser)\nparserMap.set('text/turtle', n3Parser)\nparserMap.set('application/rdf+xml', rdfXmlParser)\n\nserializerMap.set('application/ld+json', jsonLdSerializer)\nserializerMap.set('application/n-quads', nTriplesSerializer)\nserializerMap.set('application/n-triples', nTriplesSerializer)\nserializerMap.set('text/n3', nTriplesSerializer)\nserializerMap.set('text/turtle', nTriplesSerializer)\n\nexport const parsers = parserMap\nexport const serializers = serializerMap\n","import stream from 'readable-stream'\n\nclass SinkMap extends Map {\n  import (key, input, options) {\n    const sink = this.get(key)\n\n    if (!sink) {\n      return null\n    }\n\n    if (typeof sink === 'function') {\n      const passThrough = new stream.PassThrough({ objectMode: true })\n      Promise.resolve().then(async () => {\n        const sinkInstance = await sink()\n        this.set(key, sinkInstance)\n\n        const origStream = sinkInstance.import(input, options)\n        origStream.on('prefix', (prefix, ns) => {\n          passThrough.emit('prefix', prefix, ns)\n        })\n        origStream.on('error', err => {\n          passThrough.emit('error', err)\n          passThrough.emit('end')\n        })\n\n        origStream.pipe(passThrough)\n      })\n\n      return passThrough\n    }\n\n    return sink.import(input, options)\n  }\n}\n\nexport { SinkMap }\n","export function blankNode (blankNode) {\n  return '_:' + blankNode.value // TODO: escape special chars\n}\n","export function dataset (dataset, toNT) {\n  return [...dataset].map(quad => toNT(quad)).join('\\n') + '\\n'\n}\n","export function defaultGraph () {\n  return ''\n}\n","export function namedNode (namedNode) {\n  return '<' + namedNode.value + '>'\n}\n","import { namedNode } from './namedNode.js'\n\nconst echarRegEx = /[\"\\\\\\\\\\n\\r]/\nconst echarRegExAll = /[\"\\\\\\\\\\n\\r]/g\n\nconst echarReplacement = {\n  '\"': '\\\\\"',\n  '\\\\': '\\\\\\\\',\n  '\\n': '\\\\n',\n  '\\r': '\\\\r'\n}\n\nfunction echarReplacer (char) {\n  return echarReplacement[char]\n}\n\nfunction escapeValue (value) {\n  if (echarRegEx.test(value)) {\n    return value.replace(echarRegExAll, echarReplacer)\n  }\n\n  return value\n}\n\nexport function literal (literal) {\n  const escapedValue = escapeValue(literal.value)\n\n  if (literal.datatype.value === 'http://www.w3.org/2001/XMLSchema#string') {\n    return '\"' + escapedValue + '\"'\n  }\n\n  if (literal.datatype.value === 'http://www.w3.org/1999/02/22-rdf-syntax-ns#langString') {\n    return '\"' + escapedValue + '\"@' + literal.language\n  }\n\n  return '\"' + escapedValue + '\"^^' + namedNode(literal.datatype)\n}\n","export function quad (quad, toNT) {\n  const subjectString = toNT(quad.subject)\n  const predicateString = toNT(quad.predicate)\n  const objectString = toNT(quad.object)\n  const graphString = toNT(quad.graph)\n\n  return `${subjectString} ${predicateString} ${objectString} ${graphString ? graphString + ' ' : ''}.`\n}\n","export function variable (variable) {\n  return '?' + variable.value\n}\n","import { blankNode } from './lib/blankNode.js'\nimport { dataset } from './lib/dataset.js'\nimport { defaultGraph } from './lib/defaultGraph.js'\nimport { literal } from './lib/literal.js'\nimport { namedNode } from './lib/namedNode.js'\nimport { quad } from './lib/quad.js'\nimport { variable } from './lib/variable.js'\n\nexport function toNT (term) {\n  if (!term) {\n    return null\n  }\n\n  if (term.termType === 'BlankNode') {\n    return blankNode(term)\n  }\n\n  if (term.termType === 'DefaultGraph') {\n    return defaultGraph()\n  }\n\n  if (term.termType === 'Literal') {\n    return literal(term)\n  }\n\n  if (term.termType === 'NamedNode') {\n    return namedNode(term)\n  }\n\n  // legacy quad support without .termType\n  if (term.termType === 'Quad' || (term.subject && term.predicate && term.object && term.graph)) {\n    return quad(term, toNT)\n  }\n\n  if (term.termType === 'Variable') {\n    return variable(term)\n  }\n\n  if (term[Symbol.iterator]) {\n    return dataset(term, toNT)\n  }\n\n  throw new Error(`unknown termType ${term.termType}`)\n}\n","import { toNT } from '@rdf-esm/to-ntriples'\n\nexport default class TermMap {\n  constructor (entries) {\n    this.index = new Map()\n\n    if (entries) {\n      for (const [term, value] of entries) {\n        this.set(term, value)\n      }\n    }\n  }\n\n  get size () {\n    return this.index.size\n  }\n\n  clear () {\n    this.index.clear()\n  }\n\n  delete (term) {\n    return this.index.delete(toNT(term))\n  }\n\n  * entries () {\n    for (const [, { term, value }] of this.index) {\n      yield [term, value]\n    }\n  }\n\n  forEach (callback, thisArg) {\n    for (const entry of this.entries()) {\n      callback.call(thisArg, entry[1], entry[0], this)\n    }\n  }\n\n  get (term) {\n    const item = this.index.get(toNT(term))\n\n    return item && item.value\n  }\n\n  has (term) {\n    return this.index.has(toNT(term))\n  }\n\n  * keys () {\n    for (const [, { term }] of this.index) {\n      yield term\n    }\n  }\n\n  set (term, value) {\n    const key = toNT(term)\n\n    this.index.set(key, { term, value })\n\n    return this\n  }\n\n  * values () {\n    for (const [, { value }] of this.index) {\n      yield value\n    }\n  }\n\n  [Symbol.iterator] () {\n    return this.entries()[Symbol.iterator]()\n  }\n}\n","import stream from 'readable-stream'\nimport { rdf, xsd } from '@tpluscode/rdf-ns-builders'\nimport TermMap from '@rdf-esm/term-map'\nimport graphy from '@graphy/core.data.factory'\n\nfunction isListNode(predicates) {\n  return predicates.has(rdf.first) && predicates.has(rdf.rest)\n}\n\nexport class TransformToConciseHash extends stream.Transform {\n  constructor({\n    prefixes = {},\n    strict = false,\n    preserveListNodeProperties = false,\n  } = {}) {\n    super({ objectMode: true })\n\n    this.prefixes = prefixes\n    this.graphs = new TermMap()\n    this.blankNodes = new TermMap()\n    this.strict = strict\n    this.preserveListNodeProperties = preserveListNodeProperties\n  }\n\n  _transform({ subject, predicate, object, graph }, _, cb) {\n    const nodes = this.getGraph(graph)\n    const node = nodes.get(subject) || { predicates: new TermMap() }\n\n    const objects = node.predicates.get(predicate) || []\n    node.predicates.set(predicate, [...objects, object])\n\n    if (object.termType === 'BlankNode') {\n      const usageCount = this.blankNodes.get(object) || 0\n      this.blankNodes.set(object, usageCount + 1)\n    }\n\n    nodes.set(subject, node)\n    cb()\n  }\n\n  _flush() {\n    const value = [...this.graphs].reduce((graphs, [graph, nodes]) => {\n      const graphKey = this.toHashKey(graph)\n      let graphHash = graphs[graphKey] || {}\n\n      graphHash = [...nodes].reduce(\n        this.toConciseHash(graph).bind(this),\n        graphHash\n      )\n\n      return {\n        ...graphs,\n        [graphKey]: graphHash,\n      }\n    }, {})\n\n    this.push({\n      type: this.strict ? 'c4r' : 'c4',\n      value,\n    })\n    this.push(null)\n  }\n\n  toConciseHash(graph) {\n    return (hash, [node, { predicates }]) => {\n      if (!this.strict && this.blankNodes.get(node) === 1) {\n        return hash\n      }\n\n      const nodeKey = this.toHashKey(node)\n\n      return {\n        ...hash,\n        [nodeKey]: this.createPropertyMap(graph, predicates),\n      }\n    }\n  }\n\n  createPropertyMap(graph, predicates, level = 0) {\n    const nestedObject = node => {\n      if (!this.strict && this.blankNodes.get(node) === 1) {\n        const entry = this.graphs.get(graph).get(node)\n\n        if (entry) {\n          return this.createPropertyMap(graph, entry.predicates, level + 1)\n        }\n      }\n\n      return this.toHashKey(node)\n    }\n\n    if (\n      !this.strict &&\n      isListNode(predicates) &&\n      !this.preserveListNodeProperties\n    ) {\n      const [first] = predicates.get(rdf.first)\n      const [restNode] = predicates.get(rdf.rest)\n\n      // top-level list node\n      if (level === 0) {\n        const rest = restNode.equals(rdf.nil)\n          ? this.toHashKey(rdf.nil)\n          : [...nestedObject(restNode)]\n\n        return {\n          [this.toHashKey(rdf.first)]: [nestedObject(first)],\n          [this.toHashKey(rdf.rest)]: [rest],\n        }\n      }\n\n      if (restNode.equals(rdf.nil)) {\n        return [nestedObject(first)]\n      }\n\n      const rest = nestedObject(restNode)\n      return [nestedObject(first), ...rest]\n    }\n\n    return [...predicates].reduce((map, [predicate, objects]) => {\n      const propertyKey = this.toHashKey(predicate)\n\n      const objectMaps = objects.map(nestedObject.bind(this))\n\n      return {\n        ...map,\n        [propertyKey]: objectMaps,\n      }\n    }, {})\n  }\n\n  getGraph(graph) {\n    const nodes = this.graphs.get(graph) || new TermMap()\n    this.graphs.set(graph, nodes)\n    return nodes\n  }\n\n  literalHash(term) {\n    if (term.datatype && !this.strict) {\n      switch (term.datatype.value) {\n        case xsd.integer.value: {\n          const number = +term.value\n          if (Number.isInteger(number)) {\n            return number\n          }\n          break\n        }\n        case xsd.decimal.value: {\n          const dec = +term.value\n          if (!Number.isNaN(dec) && !Number.isInteger(dec)) {\n            return dec\n          }\n          break\n        }\n        case xsd.boolean.value: {\n          if (term.value === 'true') {\n            return true\n          }\n          if (term.value === 'false') {\n            return false\n          }\n          break\n        }\n        default:\n      }\n    }\n\n    return graphy.fromTerm(term).concise(this.prefixes)\n  }\n\n  toHashKey(term) {\n    if (term.termType === 'Literal') {\n      return this.literalHash(term)\n    }\n\n    if (term.equals(rdf.type)) {\n      return 'a'\n    }\n\n    return graphy.fromTerm(term).concise(this.prefixes)\n  }\n}\n","import { TransformToConciseHash } from './TransformToConciseHash.js'\n\nasync function serializer(importScribe, { strict, ...defaults } = {}) {\n  const create = (await importScribe).default\n\n  return {\n    import(quadStream, { preserveListNodeProperties, ...options } = {}) {\n      const prefixes = {\n        ...(defaults.prefixes || {}),\n        ...(options.prefixes || {}),\n      }\n\n      const writer = create({\n        prefixes,\n      })\n\n      quadStream\n        .pipe(\n          new TransformToConciseHash({\n            prefixes,\n            strict,\n            preserveListNodeProperties,\n          })\n        )\n        .pipe(writer)\n\n      return writer\n    },\n  }\n}\n\nexport const turtle = ({ prefixes } = {}) =>\n  serializer(import('@graphy/content.ttl.write'), { prefixes })\nexport const rdfXml = ({ prefixes } = {}) =>\n  serializer(import('@graphy/content.xml.scribe'), { strict: true, prefixes })\nexport const trig = ({ prefixes } = {}) =>\n  serializer(import('@graphy/content.trig.write'), { prefixes })\n","async function parser(module) {\n  const create = (await module).default\n\n  return {\n    import(quadStream, options) {\n      return quadStream.pipe(options ? create(options) : create())\n    },\n  }\n}\n\nexport const trig = () => parser(import('@graphy/content.trig.read'))\nexport const nq = () => parser(import('@graphy/content.nq.read'))\n","export default async function (defaults = {}) {\n  const JsonLdSerializer = (await import('@rdfjs/serializer-jsonld-ext'))\n    .default\n\n  class Serializer extends JsonLdSerializer {\n    import(stream, { prefixes = {} } = {}) {\n      return super.import(stream, {\n        context: {\n          ...(defaults.prefixes || {}),\n          ...prefixes,\n        },\n      })\n    }\n  }\n\n  return new Serializer({\n    compact: true,\n    skipGraphProperty: true,\n    encoding: 'string',\n  })\n}\n","import * as formatsCommon from '@rdf-esm/formats-common'\nimport { SinkMap } from '@rdf-esm/sink-map'\nimport * as graphy from './serializers/graphy.js'\nimport * as graphyReader from './parsers/graphy.js'\nimport jsonld from './serializers/jsonld.js'\n\nexport const serializers = new SinkMap([...formatsCommon.serializers])\nexport const parsers = new SinkMap([...formatsCommon.parsers])\n\nexport const formats = {\n  jsonLd: 'application/ld+json',\n  ntriples: 'application/n-triples',\n  nquads: 'application/n-quads',\n  notation3: 'text/n3',\n  rdfXml: 'application/rdf+xml',\n  trig: 'application/trig',\n  turtle: 'text/turtle',\n}\n\nserializers.set(formats.jsonLd, jsonld)\nserializers.set(formats.notation3, graphy.turtle)\nserializers.set(formats.turtle, graphy.turtle)\nserializers.set(formats.trig, graphy.trig)\nserializers.set(formats.rdfXml, graphy.rdfXml)\n\nparsers.set(formats.notation3, graphyReader.trig)\nparsers.set(formats.turtle, graphyReader.trig)\nparsers.set(formats.trig, graphyReader.trig)\nparsers.set(formats.ntriples, graphyReader.nq)\nparsers.set(formats.nquads, graphyReader.nq)\n"],"names":["crypto","R_INVALID_IRIREF","F_REPLACE_INVALID_IRIREF","s_","s_v","s_code","codePointAt","toString","length","padStart","clean_iri","p_iri_dirty","replace","RT_AVOID_PNAME_NS","RT_AVOID_PNAME_LOCAL","RT_BOOLEAN_TRUE","RT_BOOLEAN_FALSE","S_UUID_V4","R_UUID_V4","uuid_v4","dt_now","Date","now","performance","s","x_r","Math","random","floor","$_PREFIX_CACHE","Symbol","R_REGEX_ESCAPE","SR_PN_LOCAL","cache_prefixes","h_prefixes","b_terse","a_cache","h_inverse","si_prefix","p_iri","test","push","_r_iris","RegExp","join","_h_inverse","Object","freeze","terse","g_cache","m_iri","exec","si_best_prefix","s_best_suffix","nl_best_prefix_iri","p_prefix_iri","indexOf","s_suffix","slice","concise","s_best_prefix_id","s_prefix_id","startsWith","R_C1N_DECONSTRUCT","c1_to_nt","sc1_in","b_verbose","EphemeralBlankNode","JSON","stringify","i_contents","factory","c1","GenericTerm","valueOf","this","equals","z_other","termType","value","assign","prototype","isGraphyTerm","NamedNode","constructor","s_iri","super","b_opt","verbose","isolate","isNamedNode","KT_RDF_TYPE","isRdfTypeAlias","KT_RDF_LANG_STRING","G_ISOLATE_RDF_LANG_STRING","KT_RDF_FIRST","KT_RDF_REST","KT_RDF_NIL","KT_XSD_DATE","KT_XSD_DATETIME","KT_XSD_STRING","GenericLiteral","datatype","language","st_datatype","isLiteral","isSimple","LanguagedLiteral","s_value","s_lang","toLowerCase","isLanguaged","DatatypedLiteral","isDatatyped","ExplicitlyDatatypedLiteral","kt_datatype","RawLiteral","SimpleLiteral","KT_XSD_INTEGER","Literal_Integer","static","s_literal","kt","x_value","number","includes","isNumeric","isInteger","KT_XSD_DOUBLE","Literal_Double","toExponential","isDouble","KT_XSD_DECIMAL","Literal_Decimal","isDecimal","KT_XSD_BOOLEAN","Literal_Boolean","b_value","boolean","isBoolean","Literal_PositiveInfinity","Infinity","isInfinite","Literal_NegativeInfinity","Literal_NaN","NaN","BlankNode","b_anonymous","isAnonymous","isNaN","create","isBlankNode","isEphemeral","defineProperty","get","Variable","s_label","Error","DefaultGraph","NoGraph","isVariable","isDefaultGraph","KT_DEFAULT_GRAPH","Quad","h_subject","h_predicate","h_object","h_graph","subject","predicate","object","graph","isGraphyQuad","b_default_graph","g_raw","namedNode","blankNode","literal","defaultGraph","quad","kt_subject","kt_predicate","kt_object","kt_graph","integer","w","from","double","decimal","module","exports","adopt","dc_factory","dc_extend","b_use_extend","kt_xsd_boolean","kt_xsd_double","kt_xsd_decimal","kt_xsd_integer","simpleLiteral","languagedLiteral","datatypedLiteral","raw","unfiltered","z_datatype_or_lang","s_language","x","Number","isFinite","date","dt","toISOString","dateTime","ephemeral","anonymous","z_label","TypeError","w_value","s_type","variable","triple","e_stack","console","warn","stack","term","z_term","w_prefixes","rdfjs_term","sc1_term","s_datatype","c1_node_explicit","c1_node","sc1_node","c1_named_node","c1_prefixed_node","i_colon","hc4_quads","sc1_graph","triples","hc3_triples","k_graph","sc1_subject","k_subject","hc2_pairs","pairs","sc1_predicate","k_predicate","z_objects","objects","a_objects","a_rest","k_hop","collection","b_nested","Array","isArray","z_item","g_quad","g_from","g_term","sparql_result","type","to","s_boolean","s_integer","s_decimal","s_double","comment","gc_comment","newlines","config","s_key","hash","k_quad","d_hash","createHash","update","digest","cachePrefixes","cleanIri","c3","c4","quads","fromTerm","fromQuad","async","jsonLdParser","JsonLdParser","default","n3Parser","N3Parser","rdfXmlParser","RdfXmlParser","jsonLdSerializer","JsonLdSerializer","encoding","nTriplesSerializer","NTriplesSerializer","parserMap","serializerMap","set","parsers","serializers","SinkMap","Map","import","key","input","options","sink","passThrough","objectMode","Promise","resolve","then","sinkInstance","origStream","on","prefix","ns","emit","err","pipe","dataset","toNT","map","echarRegEx","echarRegExAll","echarReplacement","echarReplacer","char","escapeValue","escapedValue","subjectString","predicateString","objectString","graphString","iterator","TermMap","entries","index","size","clear","delete","forEach","callback","thisArg","entry","call","item","has","isListNode","predicates","rdf","TransformToConciseHash","prefixes","strict","preserveListNodeProperties","graphs","blankNodes","_transform","_","cb","nodes","getGraph","node","usageCount","_flush","reduce","graphKey","toHashKey","graphHash","toConciseHash","bind","nodeKey","createPropertyMap","level","nestedObject","first","restNode","rest","propertyKey","objectMaps","literalHash","xsd","dec","serializer","importScribe","defaults","quadStream","writer","turtle","rdfXml","trig","parser","nq","Serializer","stream","context","compact","skipGraphProperty","f","formats","jsonLd","ntriples","nquads","notation3","jsonld"],"sourceRoot":""}