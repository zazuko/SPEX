"use strict";(self["webpackChunk_zazuko_spex"]=self["webpackChunk_zazuko_spex"]||[]).push([[668],{56668:function(t,e,a){a.r(e),a.d(e,{default:function(){return G}});var s=a(66252),n=a(3577),o=a(49963);const r=(0,s._)("h2",{class:"font-bold text-lg px-4 py-2 bg-gray-200"},"SHACL editor",-1),l={class:"field"},i=(0,s._)("label",{class:"label",for:"format"},"Format",-1),c={class:"select"},d=["value"],u=(0,s._)("span",null,"Update",-1),p={class:"flex-grow flex flex-col"},f=(0,s._)("h2",{class:"font-bold text-lg px-4 py-2 bg-gray-200"},"Representation",-1),h={key:0,class:"section"},m={class:"message is-danger"},w={class:"message-body"};function v(t,e,a,v,b,g){const y=(0,s.up)("rdf-editor"),k=(0,s.up)("ArrowPathIcon"),_=(0,s.up)("Pane"),x=(0,s.up)("ResourceCard"),P=(0,s.up)("GraphLayout"),S=(0,s.up)("Splitpanes");return(0,s.wg)(),(0,s.j4)(S,{class:"default-theme"},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{size:"40"},{default:(0,s.w5)((()=>[r,(0,s.Wm)(y,{class:"w-full h-full overflow-hidden",format:b.format,value:b.shacl,ref:"shaclEditor"},null,8,["format","value"]),(0,s._)("div",l,[i,(0,s._)("div",c,[(0,s.wy)((0,s._)("select",{id:"format","onUpdate:modelValue":e[0]||(e[0]=t=>b.format=t)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(b.formats,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t,value:t},(0,n.zw)(t),9,d)))),128))],512),[[o.bM,b.format]])])]),(0,s._)("button",{class:"button is-primary",onClick:e[1]||(e[1]=(...t)=>g.loadShacl&&g.loadShacl(...t))},[(0,s.Wm)(k,{class:"icon"}),u])])),_:1}),(0,s.Wm)(_,null,{default:(0,s.w5)((()=>[(0,s.Wm)(S,{horizontal:""},{default:(0,s.w5)((()=>[(0,s.Wm)(_,null,{default:(0,s.w5)((()=>[(0,s._)("div",p,[f,(0,s.Wm)(P,{nodes:b.datamodel.tables,links:g.links,"active-links":b.activeLinks},{node:(0,s.w5)((({node:t})=>[(0,s.Wm)(x,{resource:t,"active-links":b.activeLinks},null,8,["resource","active-links"])])),_:1},8,["nodes","links","active-links"]),b.error?((0,s.wg)(),(0,s.iD)("div",h,[(0,s._)("div",m,[(0,s._)("div",w," Error loading data: "+(0,n.zw)(b.error),1)])])):(0,s.kq)("",!0)])])),_:1})])),_:1})])),_:1})])),_:1})}a(57658);var b=a(27886),g=a(74919),y=a(80211),k=a(22886);a(72723);async function _(){const t=(await Promise.all([a.e(844),a.e(246)]).then(a.t.bind(a,94246,19))).default;return new t}async function x(){const t=(await a.e(976).then(a.t.bind(a,41976,19))).default;return new t}async function P(){const t=await a.e(751).then(a.t.bind(a,23751,19));let e;return e=t.default?t.default.RdfXmlParser:t.RdfXmlParser,new e}async function S(){const t=(await a.e(149).then(a.t.bind(a,28149,19))).default;return new t({encoding:"string"})}async function z(){const t=(await a.e(137).then(a.t.bind(a,8137,19))).default;return new t}var W=a(88473);class L extends Map{import(t,e,a){const s=this.get(t);if(!s)return null;if("function"===typeof s){const n=new W.PassThrough({objectMode:!0});return Promise.resolve().then((async()=>{const o=await s();this.set(t,o);const r=o.import(e,a);r.on("prefix",((t,e)=>{n.emit("prefix",t,e)})),r.on("error",(t=>{n.emit("error",t),n.emit("end")})),r.pipe(n)})),n}return s.import(e,a)}}const C=new L,E=new L;C.set("application/ld+json",_),C.set("application/trig",x),C.set("application/n-quads",x),C.set("application/n-triples",x),C.set("text/n3",x),C.set("text/turtle",x),C.set("application/rdf+xml",P),E.set("application/ld+json",S),E.set("application/n-quads",z),E.set("application/n-triples",z),E.set("text/n3",z),E.set("text/turtle",z);const M=C;var R=a(2363),Z=a(54803),j=a(58027),q=a(81407);const X=[...M.keys()],A="\n@prefix sh: <http://www.w3.org/ns/shacl#> .\n@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .\n";var D={components:{GraphLayout:y.Y,Splitpanes:k.F,Pane:k.X,ArrowPathIcon:b.Z,ResourceCard:q.Z},data(){return{format:"text/turtle",formats:X,shacl:A,datamodel:{tables:[],viewports:[],isIntrospected:!1},error:null,activeLinks:[]}},computed:{links(){const t=this.datamodel.tables,e=new Set(t.map((({id:t})=>t)));return t.flatMap((t=>t.properties.map((e=>({...e,table:t}))))).reduce(((t,a)=>(a.values.forEach((s=>{const n=a.table.id,o=s.id;e.has(o)&&t.push({source:n,target:o,sourceProperty:a.id,label:a.name})})),t)),[])}},methods:{async loadShacl(){const t=this.$refs.shaclEditor;this.error=null,this.datamodel.tables=[];const e=t=>(0,g.F)(t)||t;try{const a=await t.quads,s=R.ZP.dataset(a),n=R.ZP.clownface({dataset:s}).has(j.E_.type,j.sh.NodeShape);this.datamodel.tables=(0,Z.NV)(n,e)}catch(a){this.error=a.toString()}}}},F=a(83744);const I=(0,F.Z)(D,[["render",v]]);var G=I}}]);
//# sourceMappingURL=668.4e710bba.js.map