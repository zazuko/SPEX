{"version":3,"file":"js/5.18cd20f3.js","mappings":"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","sources":["webpack://@zazuko/spex/./node_modules/@graphy/content.nq.read/main.js","webpack://@zazuko/spex/./node_modules/@graphy/core.iso.stream/main.js"],"sourcesContent":["\n\n\n// queueMicrotask shim\n{\n\t// not defined or not a function\n\tif('function' !== typeof queueMicrotask) {\n\t\t// create resolved promise\n\t\tlet dp_resolve = Promise.resolve();\n\n\t\t// try to redefine\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-global-assign\n\t\t\tqueueMicrotask = fk => dp_resolve.then(fk)\n\t\t\t\t.catch(e_callback => setTimeout(() => {\n\t\t\t\t\tthrow e_callback;\n\t\t\t\t}, 0));\n\t\t}\n\t\t// oh well, at least we tried\n\t\tcatch(e_define) {}\n\t}\n}\n\n\n\nconst stream = require('@graphy/core.iso.stream');\nconst factory = require('@graphy/core.data.factory');\n\nconst RT_ABSOLUTE_IRI_VALID = /^[a-z][a-z0-9+\\-.]*:(?:[^\\0-\\x20<>\"{}|^`\\\\]|\\\\u[A-Fa-f0-9]{4}|\\\\U[A-Fa-f0-9]{8})*$/;\nconst RT_ABSOLUTE_IRI_ESCAPELESS_VALID = /^[a-z][a-z0-9+\\-.]*:[^\\0-\\x20<>\"{}|^`]*$/;\nconst RT_NAMED_NODE_VALID = /^([^\\0-\\x20<>\"{}|^`\\\\]|\\\\u[A-Fa-f0-9]{4}|\\\\U[A-Fa-f0-9]{8})*$/;\nconst RT_NAMED_NODE_ESCAPELESS_VALID = /^([^\\0-\\x20<>\"{}|^`])*$/;\n\nconst R_UNICODE_ANY = /\\\\u([0-9A-Fa-f]{4})|\\\\U([0-9A-Fa-f]{8})/g;\n\nconst F_REPLACE_UNICODE_ANY = \t(s_, s_4, s_8) => String.fromCodePoint(parseInt(s_4 || s_8, 16));\n\n\nconst R_CLEAN = /\\s*(?:#[^\\n]*\\n\\s*)*\\s*/y;\nconst R_CLEAN_COMMENTS = /\\s*(#[^\\n]*\\n\\s*)*\\s*/y;\nconst RT_HAS_ESCAPES = /[\\\\]/;\nconst R_EOL = /[^\\n]+\\n/y;\n\n// eslint-disable-next-line no-misleading-character-class\nconst RT_BLANK_NODE_LABEL_VALID = /^(?:[A-Za-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u{02ff}\\u{0370}-\\u{037d}\\u{037f}-\\u{1fff}\\u{200c}-\\u{200d}\\u{2070}-\\u{218f}\\u{2c00}-\\u{2fef}\\u{3001}-\\u{d7ff}\\u{f900}-\\u{fdcf}\\u{fdf0}-\\u{fffd}\\u{10000}-\\u{effff}_0-9])(?:(?:[A-Za-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u{02ff}\\u{0370}-\\u{037d}\\u{037f}-\\u{1fff}\\u{200c}-\\u{200d}\\u{2070}-\\u{218f}\\u{2c00}-\\u{2fef}\\u{3001}-\\u{d7ff}\\u{f900}-\\u{fdcf}\\u{fdf0}-\\u{fffd}\\u{10000}-\\u{effff}_\\-0-9\\xb7\\u{0300}-\\u{036f}\\u{203f}-\\u{2040}.])*[A-Za-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u{02ff}\\u{0370}-\\u{037d}\\u{037f}-\\u{1fff}\\u{200c}-\\u{200d}\\u{2070}-\\u{218f}\\u{2c00}-\\u{2fef}\\u{3001}-\\u{d7ff}\\u{f900}-\\u{fdcf}\\u{fdf0}-\\u{fffd}\\u{10000}-\\u{effff}_\\-0-9\\xb7\\u{0300}-\\u{036f}\\u{203f}-\\u{2040}])?$/u;\nconst RT_LANGUAGE_VALID = /^[a-z]+(-[a-z0-9]+)*$/;\n\nconst R_WS = /\\s*/y;\nconst R_HWS = /[ \\t]*/y;\nconst R_LANGTAG = /@([A-Za-z]+(?:-[A-Za-z0-9-]+)*)(?:\\s+|(?=[.,;\\])#]))/y;\n\nconst R_IRIREF = /<([^>]*)>\\s*/y;\n\n\n\nconst F_REPLACE_STRLIT_CONTENTS = (s_, s_whitespace, s_auto, s_4, s_8, s_invalid) => {\n\tif(s_whitespace) {\n\t\tswitch(s_whitespace) {\n\t\t\tcase 't': return '\\t';\n\t\t\tcase 'n': return '\\n';\n\t\t\tcase 'r': return '\\r';\n\t\t\tcase 'f': return '\\f';\n\t\t\tcase 'b': return '\\b';\n\t\t\tdefault: {\n\t\t\t\tconsole.assert(`bad regex escape char mapping: '${s_whitespace}'`);\n\t\t\t}\n\t\t}\n\t}\n\telse if(s_auto) {\n\t\treturn s_auto;\n\t}\n\telse if(s_4) {\n\t\treturn String.fromCodePoint(parseInt(s_4, 16));\n\t}\n\telse if(s_8) {\n\t\treturn String.fromCodePoint(parseInt(s_8, 16));\n\t}\n\telse if(s_invalid) {\n\t\t// pointless escape\n\t\tif('\\\\' === s_invalid[0]) {\n\t\t\t\t// // relaxed\n\t\t\t\t// return s_invalid[1];\n\t\t\t// if relaxed then return s_invalid, otherwise throw:\n\t\t\tthrow new Error(`expected string_literal but invalid escape sequence within contents: '${s_invalid}'. failed to parse a valid token`);\n\t\t}\n\t\t// bad character\n\t\telse {\n\t\t\tthrow new Error(`expected string_literal but invalid whitespace character within contents: ${JSON.stringify(s_invalid)}. failed to parse a valid token`);\n\t\t}\n\t}\n\telse {\n\t\tconsole.assert(`unexpected no match branch in escape sequence replace callback`);\n\t}\n};\n\n\nconst R_STRLIT_SHORT_CONTENTS_ESCAPES_HARD = /(?:\\\\(?:([tnrfb])|([\\\\\"'])|u([0-9A-Fa-f]{4})|U([0-9A-Fa-f]{8}))|([\\r\\n]|\\\\.))/g;\nconst R_STRLIT_SHORT_CONTENTS_ESCAPES_SOFT = /(?:\\\\(?:([tnrfb])|([\\\\\"'])|u([0-9A-Fa-f]{4})|U([0-9A-Fa-f]{8}))|([\\r\\n]|\\\\[^uU]|\\\\u[^]{4}|\\\\U[^]{8}))/g;\n\nconst unescape_literal_short_hard = s_literal => s_literal\n\t.replace(R_STRLIT_SHORT_CONTENTS_ESCAPES_HARD, F_REPLACE_STRLIT_CONTENTS);\n\nconst unescape_literal_short_soft = (s_literal) => {\n\tlet m_incomplete = R_STRLIT_ESCAPE_INCOMPLETE.exec(s_literal);\n\n\t// incomplete escape\n\tif(m_incomplete) {\n\t\tlet i_safe = m_incomplete.index;\n\n\t\t// rewind\n\t\treturn [\n\t\t\ts_literal.slice(0, i_safe)\n\t\t\t\t.replace(R_STRLIT_SHORT_CONTENTS_ESCAPES_SOFT, F_REPLACE_STRLIT_CONTENTS),\n\t\t\ts_literal.slice(i_safe),\n\t\t];\n\t}\n\t// done\n\telse {\n\t\treturn [\n\t\t\ts_literal\n\t\t\t\t.replace(R_STRLIT_SHORT_CONTENTS_ESCAPES_SOFT, F_REPLACE_STRLIT_CONTENTS),\n\t\t\t'',\n\t\t];\n\t}\n};\n\n// lookbehind regexes\nconst [\n\tR_STRLIT_ESCAPE_INCOMPLETE,\n\tR_STRLIT_SHORT_DOUBLE_TERM,\n] = (() => {\n\tfunction RegExp_$lookbehind_polyfill(s_input) {\n\t\tlet m_match = RegExp.prototype.exec.call(this, s_input);\n\n\t\tif(m_match) {\n\t\t\tlet i_start = m_match[0].length - m_match[1].length;\n\t\t\tm_match.index += i_start;\n\t\t\tm_match[0] = m_match[0].slice(i_start);\n\t\t}\n\n\t\treturn m_match;\n\t}\n\tlet mk_lookbehind_regex = (() => {\n\t\ttry {\n\t\t\tnew RegExp('(?<!h)i');  // eslint-disable-line no-new\n\t\t}\n\t\tcatch(e_compile) {\n\t\t\treturn (f_lookbehind, r_polyfill, f_polyfill) => {\n\t\t\t\tr_polyfill.exec = f_polyfill;\n\t\t\t\treturn r_polyfill;\n\t\t\t};\n\t\t}\n\t\treturn f_lookbehind => f_lookbehind();\n\t})();\n\treturn [\n\t\t// R_STRLIT_ESCAPE_INCOMPLETE\n\t\tmk_lookbehind_regex(\n\t\t\t() => new RegExp('(?<!(?:[^\\\\\\\\]|^)(?:\\\\\\\\\\\\\\\\)*\\\\\\\\)\\\\\\\\(|u[0-9A-Fa-f]{0,3}|U[0-9A-Fa-f]{0,7})$'),\n\t\t\t/^(?:(?:[^\\\\]|\\\\.)*)(\\\\(?:|u[0-9A-Fa-f]{0,3}|U[0-9A-Fa-f]{0,7}))$/,\n\t\t\tfunction RegExp_$lookbehind_polyfill_n(s_input) {\n\t\t\t\tlet m_match = RegExp.prototype.exec.call(this, s_input);\n\t\t\t\tif(m_match) {\n\t\t\t\t\tm_match.index += m_match[0].length - m_match[1].length;\n\t\t\t\t}\n\n\t\t\t\treturn m_match;\n\t\t\t},\n\t\t),\n\t\t// R_STRLIT_SHORT_DOUBLE_TERM\n\t\tmk_lookbehind_regex(\n\t\t\t() => new RegExp('(?<!(?:[^\\\\\\\\]|^)(?:\\\\\\\\\\\\\\\\)*\\\\\\\\)\"\\\\s*', 'g'),\n\t\t\t/(?:[^\\\\\"]|\\\\.)*(\"\\s*)/y,\n\t\t\tRegExp_$lookbehind_polyfill,\n\t\t),\n\n\t];\n})();\n\n\n\nconst R_QUAD_ESCAPELESS_SP = /(?:<([^\\\\>]*)>|_:([^\\x20\\t<]+))[\\x20\\t]*<([^\\\\>]*)>[\\x20\\t]*(?:(?:(<[^\\\\>]*)>|_:([^\\x20\\t<]+))[\\x20\\t]*(?:<([^\\\\>]*)>|_:([^\\x20\\t<]+)|)[\\x20\\t]*\\.\\s*(#[^\\n]*\\n\\s*|\\n\\s*)+|\"([^\"\\\\]*)(?:(\")(?:\\^\\^<([^\\\\>]*)>|@([^\\x20\\t.]+)|)[\\x20\\t]*(?:<([^\\\\>]*)>|_:([^\\x20\\t<]+)|)[\\x20\\t]*\\.\\s*(#[^\\n]*\\n\\s*|\\n\\s*)+)?)/y;\nconst R_QUAD = /(?:<([^>]*)>|_:([^\\x20\\t<]+))[\\x20\\t]*<([^>]*)>[\\x20\\t]*(?:(?:(<[^>]*)>|_:([^\\x20\\t<]+))[\\x20\\t]*(?:<([^>]*)>|_:([^\\x20\\t<]+)|)[\\x20\\t]*\\.\\s*(#[^\\n]*\\n\\s*|\\n\\s*)+|\"((?:[^\"\\\\]|\\\\.)*)(?:(\")(?:\\^\\^<([^>]*)>|@([^\\x20\\t.]+)|)[\\x20\\t]*(?:<([^>]*)>|_:([^\\x20\\t<]+)|)[\\x20\\t]*\\.\\s*(#[^\\n]*\\n\\s*|\\n\\s*)+)?)/y;\nconst R_BLANK_NODE = /_:([^\\x20\\t<]+)/y;\n\n\n\nclass NQuads_Reader extends stream.Transform {\n\tconstructor(g_impls) {\n\t\tsuper({\n\t\t\t// do not decode strings into buffers\n\t\t\tdecodeStrings: false,\n\n\t\t\t// accept strings as input on writable side\n\t\t\twritableObjectMode: false,\n\n\t\t\t// output quad objects on readable side\n\t\t\treadableObjectMode: true,\n\n\t\t\t// implementations\n\t\t\tflush: g_impls.flush,\n\t\t\ttransform: g_impls.transform,\n\t\t});\n\n\t\t// when the writable side is piped into\n\t\tthis.on('pipe', (ds_input) => {\n\t\t\tthis._ds_input = ds_input;\n\n\t\t\t// input stream has encoding option; ensure stream encoding is utf8\n\t\t\tif('function' === typeof ds_input.setEncoding) {\n\t\t\t\tds_input.setEncoding('utf8');\n\t\t\t}\n\t\t});\n\t}\n\n\t// intercept pipe\n\tpipe(ds_out) {\n\t\tlet ds_dst = ds_out;\n\n\t\t// non-object mode\n\t\tif(!ds_dst._writableState.objectMode) {\n\t\t\t// transform to JSON\n\t\t\tds_out = stream.quads_to_json();\n\t\t}\n\t\t// yet object mode and graphy writable\n\t\telse if(ds_out.isGraphyWritable) {\n\t\t\t// transform to quad-stream\n\t\t\tds_out = stream.quads_to_writable();\n\t\t}\n\n\t\t// interim stream created\n\t\tif(ds_out !== ds_dst) {\n\t\t\t// forward output to super\n\t\t\tsuper.pipe(ds_out);\n\n\t\t\t// pipe outpu to destination\n\t\t\treturn ds_out.pipe(ds_dst);\n\t\t}\n\t\t// forward as-is to super\n\t\telse {\n\t\t\treturn super.pipe(ds_dst);\n\t\t}\n\t}\n}\n\nclass Reader {\n\tconstructor(g_config) {\n\t\tlet {\n\t\t\t// input medium\n\t\t\tinput: g_input=null,\n\n\t\t\t// relax validation\n\t\t\trelax: b_relax=false,\n\n\t\t\t// debug\n\t\t\tdebug: b_debug=false,\n\t\t} = g_config;\n\n\t\t// allow relative iris flag\n\t\tlet b_allow_relative_iris = g_config.allow_relative_iris || g_config.allowRelativeIRIs || g_config.allowRelativeIris || false;\n\n\t\t// adopt factory\n\t\tlet dc_factory = this._dc_factory = factory.adopt(g_config.dataFactory || g_config.data_factory || factory.unfiltered);\n\n\t\tlet f_quad = this._f_quad = dc_factory.quad;\n\n\t\t// fields\n\t\tObject.assign(this, {\n\t\t\t// string buffer, accept left-over string from previous data chunk\n\t\t\ts: g_config.prepend || '',\n\n\t\t\t// string buffer length\n\t\t\tn: 0,\n\n\t\t\t_b_debug: b_debug,\n\n\t\t\t_b_relax: b_relax,\n\n\t\t\t_b_destroyed: false,\n\n\t\t\t_b_trim_start: true,\n\n\t\t\t_f_state: this.statement,\n\n\t\t\t_kt_subject: null,\n\t\t\t_kt_predicate: null,\n\t\t\t_kt_object: null,\n\n\t\t\t_s_literal: '',\n\t\t});\n\n\t\tthis._kt_default_graph = dc_factory.defaultGraph();\n\t\tthis._kt_rdfs_lang_string = dc_factory.namedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#langString');\n\n\t\t// clean regex\n\t\tlet r_clean = this._r_clean = R_CLEAN;\n\n\t\tif(g_config.relaxed) {\n\t\t\tconsole.warn((new Error(`no such option 'relaxed'; did you mean 'relax' ?`)).stack.replace(/^Error:/, 'Warning:'));\n\t\t}\n\t\tif('validate' in g_config) {\n\t\t\tconsole.warn((new Error(`option 'validate' has been removed and validation is now on by default. Use 'relax' option if you wish to disable validation.`)).stack.replace(/^Error:/, 'Warning:'));\n\t\t}\n\n\t\tlet namedNode = dc_factory.namedNode;\n\t\tlet blankNode = dc_factory.blankNode;\n\t\tlet languagedLiteral = dc_factory.languagedLiteral;\n\n\t\t// test for valid named node\n\t\tlet rt_named_node_valid = b_allow_relative_iris? RT_NAMED_NODE_VALID: RT_ABSOLUTE_IRI_VALID;\n\n\t\t// test for valid named node escapeless\n\t\tlet rt_named_node_valid_escapeless = b_allow_relative_iris? RT_NAMED_NODE_ESCAPELESS_VALID: RT_ABSOLUTE_IRI_ESCAPELESS_VALID;\n\n\t\t// validation\n\t\tlet k_self = this;\n\t\tObject.assign(this, !b_relax\n\t\t\t? {\n\t\t\t\tcreate_named_node(p_iri) {\n\t\t\t\t\tif(!rt_named_node_valid.test(p_iri)) return k_self._error(`invalid IRI: \"${p_iri}\"`);\n\t\t\t\t\treturn namedNode(p_iri);\n\t\t\t\t},\n\n\t\t\t\tcreate_named_node_escapeless(p_iri) {\n\t\t\t\t\tif(!rt_named_node_valid_escapeless.test(p_iri)) return k_self._error(`invalid IRI: \"${p_iri}\"`);\n\t\t\t\t\treturn namedNode(p_iri);\n\t\t\t\t},\n\n\t\t\t\tcreate_blank_node(s_label) {\n\t\t\t\t\tif(!RT_BLANK_NODE_LABEL_VALID.test(s_label)) return k_self._error(`Invalid blank node label: \"${s_label}\"`);\n\t\t\t\t\treturn blankNode(s_label);\n\t\t\t\t},\n\n\t\t\t\tcreate_languaged_literal(s_contents, s_language) {\n\t\t\t\t\tif(!RT_LANGUAGE_VALID.test(s_language)) {\n\t\t\t\t\t\treturn k_self._error(`Invalid literal language tag: ${s_language}`);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn languagedLiteral(s_contents, s_language);\n\t\t\t\t},\n\t\t\t}\n\t\t\t: {\n\t\t\t\tcreate_named_node: namedNode,\n\n\t\t\t\tcreate_named_node_escapeless: namedNode,\n\n\t\t\t\tcreate_blank_node: blankNode,\n\n\t\t\t\tcreate_languaged_literal: languagedLiteral,\n\t\t\t});\n\n\t\t// transform stream\n\t\tlet ds_transform;\n\n\t\t// whether or not data has been received before\n\t\tlet b_init = false;\n\n\t\t// create transform\n\t\tds_transform = this.transform = new NQuads_Reader({\n\t\t\t// on data event\n\t\t\ttransform: (s_chunk, s_encoding, fk_chunk) => {\n\t\t\t\t// first transform\n\t\t\t\tif(!b_init) {\n\t\t\t\t\t// notify that data will begin\n\t\t\t\t\tds_transform.emit('ready');\n\n\t\t\t\t\t// do not emit 'ready' event again\n\t\t\t\t\tb_init = false;\n\t\t\t\t}\n\n\t\t\t\t// concatenate current chunk to previous chunk\n\t\t\t\tlet s = this.s += s_chunk;\n\n\t\t\t\t// remove whitespace & comments from beginning\n\t\t\t\tif(this._b_trim_start) {\n\t\t\t\t\tr_clean.lastIndex = 0;\n\t\t\t\t\tlet m_clean = r_clean.exec(s);\n\t\t\t\t\tif(this.emit_comments) {\n\t\t\t\t\t\tthis.emit_comments(m_clean[1]);\n\t\t\t\t\t}\n\n\t\t\t\t\t// update index and prepare to match statement\n\t\t\t\t\tthis.i = r_clean.lastIndex;\n\t\t\t\t}\n\t\t\t\t// do not remove whitespace; reset index\n\t\t\t\telse {\n\t\t\t\t\tthis.i = 0;\n\t\t\t\t}\n\n\t\t\t\t// cache chunk length\n\t\t\t\tthis.n = s.length;\n\n\t\t\t\t// resume parsing\n\t\t\t\ttry {\n\t\t\t\t\tthis.parse(true);\n\t\t\t\t}\n\t\t\t\t// read error occurred; emit and destroy stream\n\t\t\t\tcatch(e_read) {\n\t\t\t\t\treturn ds_transform.destroy(e_read);\n\t\t\t\t}\n\n\t\t\t\t// emit progress event updates\n\t\t\t\tds_transform.emit('progress', s_chunk.length);\n\n\t\t\t\t// done transforming this chunk\n\t\t\t\tfk_chunk();\n\t\t\t},\n\n\t\t\t// once there's no more data to consume, invoke eof\n\t\t\tflush: (fk_flush) => {\n\t\t\t\t// there is still unparsed data\n\t\t\t\tif(this.s.length) {\n\t\t\t\t\t// append newline to end so we can match token\n\t\t\t\t\tthis.s += '\\n';\n\n\t\t\t\t\t// remove whitespace & comments from beginning\n\t\t\t\t\tif(this._b_trim_start) {\n\t\t\t\t\t\tr_clean.lastIndex = 0;\n\t\t\t\t\t\tlet m_clean = r_clean.exec(this.s);\n\t\t\t\t\t\tif(this.emit_comments) {\n\t\t\t\t\t\t\tthis.emit_comments(m_clean[1]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// update index and prepare to match statement\n\t\t\t\t\t\tthis.i = r_clean.lastIndex;\n\t\t\t\t\t}\n\t\t\t\t\t// do not remove whitespace; reset index\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.i = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t// parse\n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis.parse();\n\t\t\t\t\t}\n\t\t\t\t\t// read error occurred; pass to flush errback and exit method\n\t\t\t\t\tcatch(e_read) {\n\t\t\t\t\t\t// destroying during flush means overriding push\n\t\t\t\t\t\treturn ds_transform.demolish(e_read);\n\t\t\t\t\t}\n\n\t\t\t\t\t// still unparsed characters; pass to flush errback and exit method\n\t\t\t\t\tif(this.s.length) {\n\t\t\t\t\t\treturn ds_transform.demolish(new Error(`parsing error occurred in state: statement\\n  ${this.s.substr(0, 50)}\\n  ^ starting here`));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// invalid state\n\t\t\t\tif(this._f_state !== this.statement) {\n\t\t\t\t\treturn ds_transform.demolish(new Error(`parsing error occurred in state: ${this._f_state.name}\\n  ${this.s.substr(0, 50)}\\n  ^ starting here`));\n\t\t\t\t}\n\n\t\t\t\t// make buffer's alloc eligible for gc\n\t\t\t\tthis.s = null;\n\n\t\t\t\t// final progress update: no additional bytes were read\n\t\t\t\tds_transform.emit('progress', 0);\n\n\t\t\t\t// call end event listener\n\t\t\t\tds_transform.emit('eof');\n\n\t\t\t\t// done flushing, close read stream\n\t\t\t\tfk_flush();\n\t\t\t},\n\t\t});\n\n\t\t// destroy\n\t\tds_transform._destroy = (...a_args) => {\n\t\t\tthis.destroy(...a_args);\n\t\t};\n\n\t\t// data quad\n\t\tthis._f_data_quad = (kt_subject, kt_predicate, kt_object, kt_graph) => ds_transform.push(f_quad(kt_subject, kt_predicate, kt_object, kt_graph));\n\n\t\t// new listener added\n\t\tds_transform.on('newListener', (s_event) => {\n\t\t\t// comment\n\t\t\tif('comment' === s_event) {\n\t\t\t\tr_clean = R_CLEAN_COMMENTS;\n\t\t\t\tthis.emit_comments = (s_captured) => {\n\t\t\t\t\tif(!s_captured) return;\n\t\t\t\t\tlet a_comments = s_captured.slice(1).replace(/\\n\\s+$/, '').split(/\\n+\\s*#/g);\n\n\t\t\t\t\tfor(let s_comment of a_comments) {\n\t\t\t\t\t\tds_transform.emit('comment', s_comment);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\t// bind events to transform stream\n\t\tthis.bind(g_config);\n\n\t\t// input given\n\t\tif(g_input) {\n\t\t\t// input is stream\n\t\t\tif(g_input.stream) {\n\t\t\t\tlet ds_input = g_input.stream;\n\n\t\t\t\t// go async so caller has chance to bind event listeners\n\t\t\t\tqueueMicrotask(() => {\n\t\t\t\t\tds_input.pipe(ds_transform);\n\t\t\t\t});\n\t\t\t}\n\t\t\t// string\n\t\t\telse if('string' === typeof g_input.string) {\n\t\t\t\tlet s_input = g_input.string;\n\n\t\t\t\t// go async so caller has chance to bind event listeners\n\t\t\t\tqueueMicrotask(() => {\n\t\t\t\t\tds_transform.end(s_input, 'utf8');\n\t\t\t\t});\n\t\t\t}\n\t\t\t// invalid arg\n\t\t\telse {\n\t\t\t\tthrow new TypeError(`Invalid argument for input parameter: ${'object' === typeof g_input? JSON.stringify(g_input): g_input}`);\n\t\t\t}\n\t\t}\n\n\t\tds_transform._graphy_reader = this;\n\t}\n\n\t_error(s_message) {\n\t\tthis._b_destroyed = true;\n\t\tthrow new Error(s_message);\n\t}\n\n\n\n\tbind(g_config) {\n\t\tlet ds_transform = this.transform;\n\t\tif(g_config.error) ds_transform.on('error', g_config.error);\n\t\tif(g_config.comment) ds_transform.on('comment', g_config.comment);\n\t\tif(g_config.read) ds_transform.once('read', g_config.read);\n\t\tif(g_config.progress) ds_transform.on('progress', g_config.progress);\n\t\tif(g_config.eof) ds_transform.once('eof', g_config.eof);\n\t\tif(g_config.end) ds_transform.once('end', g_config.end);\n\t\tif(g_config.finish) ds_transform.once('finish', g_config.finish);\n\t\tif(g_config.data) ds_transform.on('data', g_config.data);\n\t}\n\n\t// begin parsing, keep applying until no more stack bail-outs\n\tparse() {\n\t\tlet f_sync = this._f_state();\n\t\twhile('function' === typeof f_sync) {\n\t\t\tf_sync = f_sync.apply(this);\n\t\t}\n\t}\n\n\tstatement() {\n\t\tlet s = this.s;\n\t\tlet n = this.n;\n\t\tlet i = this.i;\n\t\tlet f_data_quad = this._f_data_quad;\n\t\tlet create_named_node = this.create_named_node;\n\t\tlet create_named_node_escapeless = this.create_named_node_escapeless;\n\t\tlet create_languaged_literal = this.create_languaged_literal;\n\t\tlet create_blank_node = this.create_blank_node;\n\t\tlet simpleLiteral = this._dc_factory.simpleLiteral;\n\t\tlet datatypedLiteral = this._dc_factory.datatypedLiteral;\n\t\tlet kt_default_graph = this._kt_default_graph;\n\n\t\t// match triples/quads\n\t\tfor(;;) {\n\t\t\t// prepare sticky regex index\n\t\t\tR_QUAD_ESCAPELESS_SP.lastIndex = i;\n\t\t\t// execute regex\n\t\t\tlet m_statement_e_sp = R_QUAD_ESCAPELESS_SP.exec(s);\n\n\t\t\t// regex was a match\n\t\t\tif(m_statement_e_sp) {\n\t\t\t\t// advance index\n\t\t\t\ti = R_QUAD_ESCAPELESS_SP.lastIndex;\n\n\t\t\t\t// prep object term\n\t\t\t\tlet kt_object;\n\t\t\t\t// where to find the graph component\n\t\t\t\tlet b_graph_late = false;\n\n\t\t\t\t// object term type is named node\n\t\t\t\tif(m_statement_e_sp[4]) {\n\t\t\t\t\tlet p_object = m_statement_e_sp[4].slice(1);\n\t\t\t\t\tkt_object = create_named_node_escapeless(p_object);\n\t\t\t\t}\n\t\t\t\t// object term type is blank node\n\t\t\t\telse if(m_statement_e_sp[5]) {\n\t\t\t\t\tkt_object = create_blank_node(m_statement_e_sp[5]);\n\t\t\t\t}\n\t\t\t\t// object term type is literal\n\t\t\t\telse {\n\t\t\t\t\t// graph is in late capture group\n\t\t\t\t\tb_graph_late = true;\n\n\t\t\t\t\t// contents\n\t\t\t\t\tlet s_contents = m_statement_e_sp[9];\n\t\t\t\t\t// string terminator\n\t\t\t\t\tif(m_statement_e_sp[10]) {\n\t\t\t\t\t\t// datatype is present\n\t\t\t\t\t\tif(m_statement_e_sp[11]) {\n\t\t\t\t\t\t\t// create datatype term\n\t\t\t\t\t\t\tlet kt_datatype = this.create_named_node_escapeless(m_statement_e_sp[11]);\n\t\t\t\t\t\t\t// create object term\n\t\t\t\t\t\t\tkt_object = datatypedLiteral(s_contents, kt_datatype);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// language tag is present\n\t\t\t\t\t\telse if(m_statement_e_sp[12]) {\n\t\t\t\t\t\t\t// normalize language\n\t\t\t\t\t\t\tlet s_language = m_statement_e_sp[12].toLowerCase();\n\t\t\t\t\t\t\t// create object term\n\t\t\t\t\t\t\tkt_object = create_languaged_literal(s_contents, s_language);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// simple literal\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tkt_object = simpleLiteral(s_contents);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// no string terminator\n\t\t\t\t\telse {\n\t\t\t\t\t\t// save contents\n\t\t\t\t\t\tthis._s_literal = s_contents;\n\t\t\t\t\t\t// update index\n\t\t\t\t\t\tthis.i = i;\n\t\t\t\t\t\t// save subject\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet s_subject = m_statement_e_sp[1];\n\t\t\t\t\t\t\t// named node\n\t\t\t\t\t\t\tif(s_subject || 'string' === typeof s_subject) {\n\t\t\t\t\t\t\t\tthis._kt_subject = create_named_node_escapeless(s_subject);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// blank node\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tthis._kt_subject = create_blank_node(m_statement_e_sp[2]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// save predicate\n\t\t\t\t\t\tthis._kt_predicate = create_named_node_escapeless(m_statement_e_sp[3]);\n\t\t\t\t\t\t// parse contents\n\t\t\t\t\t\tlet z_bail = this.strlit_contents();\n\t\t\t\t\t\t// bail out of stack\n\t\t\t\t\t\tif(z_bail && this.statement !== z_bail) {\n\t\t\t\t\t\t\treturn z_bail;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// statement completed\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// clean\n\t\t\t\t\t\t\tlet r_clean = this._r_clean;\n\t\t\t\t\t\t\tr_clean.lastIndex = this.i;\n\t\t\t\t\t\t\tlet m_clean = r_clean.exec(s);\n\t\t\t\t\t\t\tif(this.emit_comments) {\n\t\t\t\t\t\t\t\tthis.emit_comments(m_clean[1]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// update local index and prepare to match next statement\n\t\t\t\t\t\t\ti = r_clean.lastIndex;\n\t\t\t\t\t\t\t// resume\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet kt_graph = kt_default_graph;\n\n\t\t\t\t// graph after literal\n\t\t\t\tif(b_graph_late) {\n\t\t\t\t\t// ref capture group\n\t\t\t\t\tlet s_graph = m_statement_e_sp[13];\n\n\t\t\t\t\t// named node\n\t\t\t\t\tif(s_graph || 'string' === typeof s_graph) {\n\t\t\t\t\t\tkt_graph = create_named_node_escapeless(s_graph);\n\t\t\t\t\t}\n\t\t\t\t\t// blank node\n\t\t\t\t\telse if(m_statement_e_sp[14]) {\n\t\t\t\t\t\tkt_graph = create_blank_node(m_statement_e_sp[14]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// graph after node\n\t\t\t\telse {\n\t\t\t\t\t// ref capture group\n\t\t\t\t\tlet s_graph = m_statement_e_sp[6];\n\n\t\t\t\t\t// named node\n\t\t\t\t\tif(s_graph || 'string' === typeof s_graph) {\n\t\t\t\t\t\tkt_graph = create_named_node_escapeless(s_graph);\n\t\t\t\t\t}\n\t\t\t\t\t// blank node\n\t\t\t\t\telse if(m_statement_e_sp[7]) {\n\t\t\t\t\t\tkt_graph = create_blank_node(m_statement_e_sp[7]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet kt_subject;\n\t\t\t\t{\n\t\t\t\t\tlet s_subject = m_statement_e_sp[1];\n\t\t\t\t\t// named node\n\t\t\t\t\tif(s_subject || 'string' === typeof s_subject) {\n\t\t\t\t\t\tkt_subject = create_named_node_escapeless(s_subject);\n\t\t\t\t\t}\n\t\t\t\t\t// blank node\n\t\t\t\t\telse {\n\t\t\t\t\t\tkt_subject = create_blank_node(m_statement_e_sp[2]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet s_predicate = m_statement_e_sp[3];\n\t\t\t\t// emit data event\n\t\t\t\tf_data_quad(\n\t\t\t\t\tkt_subject,\n\t\t\t\t\tcreate_named_node_escapeless(s_predicate),\n\t\t\t\t\tkt_object,\n\t\t\t\t\tkt_graph,\n\t\t\t\t);\n\t\t\t\t// comments\n\t\t\t\tif(this.emit_comments) {\n\t\t\t\t\tthis.emit_comments(m_statement_e_sp[8] || m_statement_e_sp[15]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// prepare sticky regex index\n\t\t\t\tR_QUAD.lastIndex = i;\n\t\t\t\t// execute regex\n\t\t\t\tlet m_statement = R_QUAD.exec(s);\n\n\t\t\t\t// regex was a match\n\t\t\t\tif(m_statement) {\n\t\t\t\t\t// advance index\n\t\t\t\t\ti = R_QUAD.lastIndex;\n\n\t\t\t\t\t// prep object term\n\t\t\t\t\tlet kt_object;\n\t\t\t\t\t// where to find the graph component\n\t\t\t\t\tlet b_graph_late = false;\n\n\t\t\t\t\t// object term type is named node\n\t\t\t\t\tif(m_statement[4]) {\n\t\t\t\t\t\tlet p_object = m_statement[4].slice(1);\n\t\t\t\t\t\tkt_object = create_named_node(RT_HAS_ESCAPES.test(p_object)? p_object.replace(R_UNICODE_ANY, F_REPLACE_UNICODE_ANY): p_object);\n\t\t\t\t\t}\n\t\t\t\t\t// object term type is blank node\n\t\t\t\t\telse if(m_statement[5]) {\n\t\t\t\t\t\tkt_object = create_blank_node(RT_HAS_ESCAPES.test(m_statement[5])? m_statement[5].replace(R_UNICODE_ANY, F_REPLACE_UNICODE_ANY): m_statement[5]);\n\t\t\t\t\t}\n\t\t\t\t\t// object term type is literal\n\t\t\t\t\telse {\n\t\t\t\t\t\t// graph is in late capture group\n\t\t\t\t\t\tb_graph_late = true;\n\n\t\t\t\t\t\t// contents\n\t\t\t\t\t\tlet s_contents = m_statement[9];\n\t\t\t\t\t\t// string terminator\n\t\t\t\t\t\tif(m_statement[10]) {\n\t\t\t\t\t\t\t// unescape contents\n\t\t\t\t\t\t\ts_contents = unescape_literal_short_hard(s_contents);\n\n\t\t\t\t\t\t\t// datatype is present\n\t\t\t\t\t\t\tif(m_statement[11]) {\n\t\t\t\t\t\t\t\t// create datatype term\n\t\t\t\t\t\t\t\tlet kt_datatype = this.create_named_node(m_statement[11]);\n\t\t\t\t\t\t\t\t// create object term\n\t\t\t\t\t\t\t\tkt_object = datatypedLiteral(s_contents, kt_datatype);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// language tag is present\n\t\t\t\t\t\t\telse if(m_statement[12]) {\n\t\t\t\t\t\t\t\t// normalize language\n\t\t\t\t\t\t\t\tlet s_language = m_statement[12].toLowerCase();\n\t\t\t\t\t\t\t\t// create object term\n\t\t\t\t\t\t\t\tkt_object = create_languaged_literal(s_contents, s_language);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// simple literal\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tkt_object = simpleLiteral(s_contents);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// no string terminator\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// save contents\n\t\t\t\t\t\t\tthis._s_literal = s_contents;\n\t\t\t\t\t\t\t// update index\n\t\t\t\t\t\t\tthis.i = i;\n\t\t\t\t\t\t\t// save subject\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet s_subject = m_statement[1];\n\t\t\t\t\t\t\t\t// named node\n\t\t\t\t\t\t\t\tif(s_subject || 'string' === typeof s_subject) {\n\t\t\t\t\t\t\t\t\tthis._kt_subject = create_named_node(RT_HAS_ESCAPES.test(s_subject)? s_subject.replace(R_UNICODE_ANY, F_REPLACE_UNICODE_ANY): s_subject);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// blank node\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tthis._kt_subject = create_blank_node(m_statement[2]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// save predicate\n\t\t\t\t\t\t\tthis._kt_predicate = create_named_node(RT_HAS_ESCAPES.test(m_statement[3])? m_statement[3].replace(R_UNICODE_ANY, F_REPLACE_UNICODE_ANY): m_statement[3]);\n\t\t\t\t\t\t\t// parse contents\n\t\t\t\t\t\t\tlet z_bail = this.strlit_contents();\n\t\t\t\t\t\t\t// bail out of stack\n\t\t\t\t\t\t\tif(z_bail && this.statement !== z_bail) {\n\t\t\t\t\t\t\t\treturn z_bail;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// statement completed\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// clean\n\t\t\t\t\t\t\t\tlet r_clean = this._r_clean;\n\t\t\t\t\t\t\t\tr_clean.lastIndex = this.i;\n\t\t\t\t\t\t\t\tlet m_clean = r_clean.exec(s);\n\t\t\t\t\t\t\t\tif(this.emit_comments) {\n\t\t\t\t\t\t\t\t\tthis.emit_comments(m_clean[1]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// update local index and prepare to match next statement\n\t\t\t\t\t\t\t\ti = r_clean.lastIndex;\n\t\t\t\t\t\t\t\t// resume\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet kt_graph = kt_default_graph;\n\n\t\t\t\t\t// graph after literal\n\t\t\t\t\tif(b_graph_late) {\n\t\t\t\t\t\t// ref capture group\n\t\t\t\t\t\tlet s_graph = m_statement[13];\n\n\t\t\t\t\t\t// named node\n\t\t\t\t\t\tif(s_graph || 'string' === typeof s_graph) {\n\t\t\t\t\t\t\tkt_graph = create_named_node(RT_HAS_ESCAPES.test(s_graph)? s_graph.replace(R_UNICODE_ANY, F_REPLACE_UNICODE_ANY): s_graph);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// blank node\n\t\t\t\t\t\telse if(m_statement[14]) {\n\t\t\t\t\t\t\tkt_graph = create_blank_node(m_statement[14]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// graph after node\n\t\t\t\t\telse {\n\t\t\t\t\t\t// ref capture group\n\t\t\t\t\t\tlet s_graph = m_statement[6];\n\n\t\t\t\t\t\t// named node\n\t\t\t\t\t\tif(s_graph || 'string' === typeof s_graph) {\n\t\t\t\t\t\t\tkt_graph = create_named_node(RT_HAS_ESCAPES.test(s_graph)? s_graph.replace(R_UNICODE_ANY, F_REPLACE_UNICODE_ANY): s_graph);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// blank node\n\t\t\t\t\t\telse if(m_statement[7]) {\n\t\t\t\t\t\t\tkt_graph = create_blank_node(m_statement[7]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlet kt_subject;\n\t\t\t\t\t{\n\t\t\t\t\t\tlet s_subject = m_statement[1];\n\t\t\t\t\t\t// named node\n\t\t\t\t\t\tif(s_subject || 'string' === typeof s_subject) {\n\t\t\t\t\t\t\tkt_subject = create_named_node(RT_HAS_ESCAPES.test(s_subject)? s_subject.replace(R_UNICODE_ANY, F_REPLACE_UNICODE_ANY): s_subject);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// blank node\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tkt_subject = create_blank_node(m_statement[2]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet s_predicate = m_statement[3];\n\t\t\t\t\t// emit data event\n\t\t\t\t\tf_data_quad(\n\t\t\t\t\t\tkt_subject,\n\t\t\t\t\t\tcreate_named_node(RT_HAS_ESCAPES.test(s_predicate)? s_predicate.replace(R_UNICODE_ANY, F_REPLACE_UNICODE_ANY): s_predicate),\n\t\t\t\t\t\tkt_object,\n\t\t\t\t\t\tkt_graph,\n\t\t\t\t\t);\n\t\t\t\t\t// comments\n\t\t\t\t\tif(this.emit_comments) {\n\t\t\t\t\t\tthis.emit_comments(m_statement[8] || m_statement[15]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// prepare sticky regex index\n\t\t\t\t\tR_EOL.lastIndex = i;\n\n\t\t\t\t\tif(R_EOL.exec(s)) {\n\t\t\t\t\t\t// advance index\n\t\t\t\t\t\ti = R_EOL.lastIndex;\n\t\t\t\t\t\tthis._error(`Failed to read statement:\\n\\`${s.substr(i, 80).replace(/\\n/g, '\\u23CE')} [...]\\`\\n ^ starting here`);\n\n\t\t\t\t\t// match counter: 2\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// break loop to retry on next chunk if eos\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} // brace #2\n\t\t\t} // brace #1\n\t\t} // end of while\n\n\t\t// update unparsed data string\n\t\tthis.s = s.substr(i);\n\n\t\t// resume here\n\t\tthis._f_state = this.statement;\n\n\t\t// exit\n\t\treturn 1;\n\t}\n\n\n\tstrlit_contents() {\n\t\tlet {s, n, i} = this;\n\n\t\t// try to find end\n\t\tR_STRLIT_SHORT_DOUBLE_TERM.lastIndex = i;\n\t\tlet m_term = R_STRLIT_SHORT_DOUBLE_TERM.exec(s);\n\n\t\t// end is in this chunk\n\t\tif(m_term) {\n\t\t\t// index of terminator\n\t\t\tlet i_term = m_term.index;\n\n\t\t\t// extract dirty potion\n\t\t\tlet s_dirty = s.slice(i, i_term);\n\n\t\t\t// clean and save\n\t\t\tthis._s_literal += unescape_literal_short_hard(s_dirty);\n\n\t\t\t// advance index beyond terminator\n\t\t\tthis.i = i_term + m_term[0].length;\n\n\t\t\t// resume eating whitespace at start of next chunk\n\t\t\tthis._b_trim_start = true;\n\n\t\t\t// proceed with datatype_or_lang, then bail out of stack or resume parsing\n\t\t\treturn this.datatype_or_langtag() || this.statement;\n\t\t}\n\t\t// end is not in this chunk\n\t\telse {\n\t\t\t// extract whole portion\n\t\t\tlet s_dirty = s.slice(i);\n\n\t\t\t// unescape to clean part\n\t\t\tlet [s_clean, s_incomplete] = unescape_literal_short_soft(s_dirty);\n\n\t\t\t// save\n\t\t\tthis._s_literal += s_clean;\n\n\t\t\t// set unparsed index\n\t\t\tthis.i = i = n - s_incomplete.length;\n\n\t\t\t// do not eat whitespace at start of next chunk\n\t\t\tthis._b_trim_start = false;\n\t\t}\n\n\t\t// not yet eos\n\t\tif(i < this.n) {\n\t\t\t// expected token was not found\n\t\t\tif(0 === i) {\n\t\t\t\t// we've exceeded the maximum token length\n\t\t\t\tif(this.n > this.max_token_length) {\n\t\t\t\t\treturn this.parse_error('strlit_contents');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// resume here\n\t\tthis._f_state = this.strlit_contents;\n\n\t\t// store what is unparsed\n\t\tthis.s = s.slice(i);\n\n\t\t// if we're not parsing a stream, then this is an error\n\t\tif(this.eos) this.eos();\n\t\treturn 1;\n\t}\n\n\n\n\t// parse state for datatype_or_langtag\n\tdatatype_or_langtag() {\n\t\t// destruct chunk, length, and index\n\t\tlet {s, n, i} = this;\n\n\t\t// ref character\n\t\tlet x = s[i];\n\n\t\twhile(i < n) {  // eslint-disable-line no-unmodified-loop-condition\n\t\t\t// datatype\n\t\t\tif('^' === x) {\n\t\t\t\t// enough to speculate datatype\n\t\t\t\tif((i+2) < n) {\n\t\t\t\t\t// correct token\n\t\t\t\t\tif('^' === s[i+1]) {\n\t\t\t\t\t\t// advance index beyond token\n\t\t\t\t\t\tR_IRIREF.lastIndex = i + 2;\n\n\t\t\t\t\t\t// execute regex\n\t\t\t\t\t\tlet m_iriref = R_IRIREF.exec(s);\n\n\t\t\t\t\t\t// regex was a match\n\t\t\t\t\t\tif(m_iriref) {\n\t\t\t\t\t\t\t// advance index\n\t\t\t\t\t\t\tthis.i = R_IRIREF.lastIndex;\n\n\t\t\t\t\t\t\t// prepare iri\n\t\t\t\t\t\t\tlet p_datatype = m_iriref[1].replace(R_UNICODE_ANY, F_REPLACE_UNICODE_ANY);\n\n\t\t\t\t\t\t\t// create datatype term\n\t\t\t\t\t\t\tlet kt_datatype = this.create_named_node(p_datatype);\n\n\t\t\t\t\t\t\t// create object term\n\t\t\t\t\t\t\tthis._kt_object = this._dc_factory.datatypedLiteral(this._s_literal, kt_datatype);\n\n\t\t\t\t\t\t\t// free literal string\n\t\t\t\t\t\t\tthis._s_literal = '';\n\n\t\t\t\t\t\t\t// graph state\n\t\t\t\t\t\t\treturn this.post_object();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// failed to match; try again next chunk\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// invalid\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis._error(`Failed to read token after literal:\\n\\`${s.substr(i+1, 80).replace(/\\n/g, '\\u23CE')} [...]\\`\\n ^ starting here`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// not enough to speculate; try again next chunk\n\t\t\t\telse {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// language tag\n\t\t\telse if('@' === x) {\n\t\t\t\t// prepare sticky regex index\n\t\t\t\tR_LANGTAG.lastIndex = i;\n\t\t\t\t// execute regex\n\t\t\t\tlet m_langtag = R_LANGTAG.exec(s);\n\n\t\t\t\t// regex was a match\n\t\t\t\tif(m_langtag) {\n\t\t\t\t\t// advance index\n\t\t\t\t\tthis.i = R_LANGTAG.lastIndex;\n\n\t\t\t\t\t// use direct factory method since regex is validation\n\t\t\t\t\tthis._kt_object = this._dc_factory.languagedLiteral(this._s_literal, m_langtag[1]);\n\n\t\t\t\t\t// free literal string\n\t\t\t\t\tthis._s_literal = '';\n\n\t\t\t\t\t// graph state\n\t\t\t\t\treturn this.post_object();\n\t\t\t\t}\n\t\t\t\t// interrupted by eos; try again next chunk\n\t\t\t\telse {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// graph component\n\t\t\telse if('<' === x || '_' === x) {\n\t\t\t\t// save simple literal\n\t\t\t\tthis._kt_object = this._dc_factory.simpleLiteral(this._s_literal);\n\n\t\t\t\t// free literal string\n\t\t\t\tthis._s_literal = '';\n\n\t\t\t\t// continue parsing graph component\n\t\t\t\treturn this.graph();\n\t\t\t}\n\t\t\t// triple terminator\n\t\t\telse if('.' === x) {\n\t\t\t\t// save simple literal\n\t\t\t\tlet kt_object = this._dc_factory.simpleLiteral(this._s_literal);\n\n\t\t\t\t// free literal string\n\t\t\t\tthis._s_literal = '';\n\n\t\t\t\t// advance index beyond terminator\n\t\t\t\tthis.i = i + 1;\n\n\t\t\t\t// emit data event\n\t\t\t\tthis._f_data_quad(this._kt_subject, this._kt_predicate, kt_object, this._kt_default_graph);\n\n\t\t\t\t// reset state\n\t\t\t\treturn this.statement;\n\n\t\t\t\t// // consume whitespace (and incidentally reset index)\n\t\t\t\t// R_WS.lastIndex = i + 1;\n\t\t\t\t// R_WS.exec(s);\n\t\t\t\t// this.i = R_WS.lastIndex;\n\n\t\t\t\t// // done\n\t\t\t\t// return;\n\t\t\t}\n\t\t\t// other\n\t\t\telse {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// ran out of characters\n\t\t// update index value\n\t\tthis.i = i;\n\n\t\t// not yet eos\n\t\tif(i < this.n) {\n\t\t\t// expected token was not found\n\t\t\tif(0 === i) {\n\t\t\t\t// we've exceeded the maximum token length\n\t\t\t\tif(this.n > this.max_token_length) {\n\t\t\t\t\treturn this.parse_error('datatype_or_langtag');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// resume here\n\t\tthis._f_state = this.datatype_or_langtag;\n\n\t\t// store what is unparsed\n\t\tthis.s = s.slice(i);\n\n\t\t// if we're not parsing a stream, then this is an error\n\t\tif(this.eos) this.eos();\n\t\treturn 1;\n\t}\n\n\tstatement_term() {\n\t\tlet {s, n, i} = this;\n\n\t\t// find full stop\n\t\tlet i_stop = s.indexOf('.', i);\n\n\t\t// found\n\t\tif(i_stop > -1) {\n\t\t\t// consume whitespace again\n\t\t\tthis._b_trim_start = true;\n\n\t\t\t// advance beyond token\n\t\t\tthis.i = i_stop + 1;\n\n\t\t\t// reset state\n\t\t\treturn this.statement;\n\t\t}\n\t\t// anything other than whitespace\n\t\telse if(!/^\\s*$/.test(s.slice(i))) {\n\t\t\tthis.parse_error('statement_term');\n\t\t}\n\n\t\t// do not consume whitespace\n\t\tthis._b_trim_start = false;\n\n\t\t// resume here\n\t\tthis._f_state = this.statement_term;\n\n\t\t// store what is unparsed\n\t\tthis.s = s.slice(i);\n\n\t\t// if we're not parsing a stream, then this is an error\n\t\tif(this.eos) this.eos();\n\t\treturn 1;\n\t}\n\n\tpost_object() {\n\t\tlet {s, n, i} = this;\n\n\t\t// eat horizontal whitespace\n\t\tR_HWS.lastIndex = i;\n\t\tR_HWS.exec(s);\n\t\ti = R_HWS.lastIndex;\n\n\t\t// ran out of characters\n\t\tif(i >= n) {\n\t\t\t// resume here\n\t\t\tthis._f_state = this.post_object;\n\n\t\t\t// store what is unparsed\n\t\t\tthis.s = s.slice(i);\n\n\t\t\t// if we're not parsing a stream, then this is an error\n\t\t\tif(this.eos) this.eos();\n\t\t\treturn 1;\n\t\t}\n\n\t\t// depending on char\n\t\tswitch(s[i]) {\n\t\t\t// statement term\n\t\t\tcase '.': {\n\t\t\t\t// advance index beyond terminator\n\t\t\t\tthis.i = i + 1;\n\n\t\t\t\t// emit data event\n\t\t\t\tthis._f_data_quad(this._kt_subject, this._kt_predicate, this._kt_object, this._kt_default_graph);\n\n\t\t\t\t// reset state\n\t\t\t\treturn this.statement;\n\t\t\t}\n\n\t\t\t// graph\n\t\t\tcase '<':\n\t\t\tcase '_': {\n\t\t\t\t// save index\n\t\t\t\tthis.i = i;\n\n\t\t\t\t// consume graph component\n\t\t\t\treturn this.graph();\n\t\t\t}\n\n\t\t\t// invalid\n\t\t\tdefault: {\n\t\t\t\t// save index\n\t\t\t\tthis.i = i;\n\n\t\t\t\t// emit parsing error\n\t\t\t\tthis.parse_error('post_object');\n\t\t\t}\n\t\t}\n\t}\n\n\tgraph() {\n\t\tlet {s, n, i} = this;\n\n\n\t\t// prepare sticky regex index\n\t\tR_IRIREF.lastIndex = i;\n\t\t// execute regex\n\t\tlet m_iriref = R_IRIREF.exec(s);\n\n\t\t// regex was a match\n\t\tif(m_iriref) {\n\t\t\t// advance index\n\t\t\tthis.i = R_IRIREF.lastIndex;\n\t\t\t// create graph term\n\t\t\tlet kt_graph = this.create_named_node(m_iriref[1]);\n\n\t\t\t// emit data event\n\t\t\tthis._f_data_quad(this._kt_subject, this._kt_predicate, this._kt_object, kt_graph);\n\n\t\t\t// complete with statement_term\n\t\t\treturn this.statement_term();\n\t\t}\n\t\telse {\n\t\t\t// prepare sticky regex index\n\t\t\tR_BLANK_NODE.lastIndex = i;\n\t\t\t// execute regex\n\t\t\tlet m_blank = R_BLANK_NODE.exec(s);\n\n\t\t\t// regex was a match\n\t\t\tif(m_blank) {\n\t\t\t\t// advance index\n\t\t\t\tthis.i = R_BLANK_NODE.lastIndex;\n\t\t\t\t// create graph term\n\t\t\t\tlet kt_graph = this._dc_factory.blankNode(m_blank[1]);\n\n\t\t\t\t// emit data event\n\t\t\t\tthis._f_data_quad(this._kt_subject, this._kt_predicate, this._kt_object, kt_graph);\n\n\t\t\t\t// complete with statement_term\n\t\t\t\treturn this.statement_term();\n\t\t\t}\n\t\t} // brace #1\n\n\n\t\t// resume here\n\t\tthis._f_state = this.graph;\n\n\t\t// store what is unparsed\n\t\tthis.s = s.slice(i);\n\n\t\t// if we're not parsing a stream, then this is an error\n\t\tif(this.eos) this.eos();\n\t\treturn 1;\n\t}\n\n\tparse_error(s_state) {\n\t\treturn this._error(`Failed to read ${s_state}:\\n\\`${this.s.substr(this.i, 80).replace(/\\n/g, '\\u23CE')} [...]\\`\\n ^ starting here`);\n\t}\n\n\tdestroy(e_destroy) {\n\t\tthis._f_data_quad = () => {};\n\n\t\tif(!e_destroy && this._ds_input) {\n\t\t\tthis._ds_input.destroy(e_destroy);\n\t\t}\n\n\t\tthis.transform.demolish(e_destroy);\n\t}\n}\n\n\nmodule.exports = function(...a_args) {\n\tlet g_config = {};\n\n\t// at least one argument\n\tif(a_args.length) {\n\t\tlet z_arg_0 = a_args[0];\n\n\t\t// input given unspecified\n\t\tif(z_arg_0 && z_arg_0.input && 'undefined' === typeof z_arg_0.input.string && !z_arg_0.input.stream) {\n\t\t\tz_arg_0 = z_arg_0.input;\n\t\t}\n\n\t\t// string\n\t\tif('string' === typeof z_arg_0) {\n\t\t\tg_config.input = {string:z_arg_0};\n\t\t}\n\t\t// null\n\t\telse if(null === z_arg_0) {\n\t\t\tg_config.input = null;\n\t\t}\n\t\t// node stream\n\t\telse if('function' === typeof z_arg_0.setEncoding) {\n\t\t\tg_config.input = {stream:z_arg_0};\n\t\t}\n\t\t// whatwg stream\n\t\telse if('function' === typeof z_arg_0.pipeTo) {\n\t\t\tthrow new TypeError(`Sorry, WHATWG streams are currently not supported :(`);\n\t\t// g_config.input = {stream:z_arg_0};\n\t\t}\n\t\t// config struct\n\t\telse if(z_arg_0 && 'object' === typeof z_arg_0 && '[object Object]' === Object.prototype.toString.call(z_arg_0)) {\n\t\t\tg_config = z_arg_0;\n\n\t\t\t// more args; invalid\n\t\t\tif(a_args.length > 1) {\n\t\t\t\tthrow new TypeError(`unexpected argument(s) after config struct: ${a_args.slice(1)}`);\n\t\t\t}\n\t\t}\n\t\t// unknown\n\t\telse {\n\t\t\tthrow new TypeError(`unexpected input type: ${z_arg_0}`);\n\t\t}\n\n\t\t// more args\n\t\tif(a_args.length > 1) {\n\t\t\t// copy onto struct\n\t\t\tObject.assign(g_config, a_args[1]);\n\n\t\t\t// more args\n\t\t\tif(a_args.length > 2) {\n\t\t\t\tthrow new TypeError(`unexpected argument(s) after input and config struct: ${a_args.slice(2)}`);\n\t\t\t}\n\t\t}\n\t}\n\n\t// create reader, return transform stream\n\treturn (new Reader(g_config)).transform;\n};\n","const stream = require('readable-stream');\n\n\n\nclass Readable extends stream.Readable {\n\tconstructor(gc_readable={}) {\n\t\tsuper(gc_readable);\n\n\t\t// use iterator\n\t\tif(gc_readable.iterator) {\n\t\t\tthrow new Error('readable stream iterator shortcut not yet implemented');\n\t\t}\n\t}\n\n\tuntil(s_event, b_return_stream) {\n\t\treturn new Promise((fk_until, fe_until) => {\n\t\t\t// convert error to rejected promise\n\t\t\tthis.on('error', (e_stream) => {\n\t\t\t\tfe_until(e_stream);\n\t\t\t});\n\n\t\t\t// special cases returns `this`\n\t\t\tif(b_return_stream) {\n\t\t\t\tthis.once(s_event, (...a_args) => {\n\t\t\t\t\tfk_until(this, ...a_args);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.once(s_event, fk_until);\n\t\t\t}\n\t\t});\n\t}\n\n\tbucket(s_encoding='utf8') {\n\t\tlet g_readable = this._readableState;\n\n\t\t// object mode\n\t\tif(g_readable.objectMode) {\n\t\t\t// async operation\n\t\t\treturn new Promise((fk_bucket, fe_bucket) => {\n\t\t\t\tlet a_data = [];\n\n\t\t\t\t// pipe to writable\n\t\t\t\tthis.pipe(new stream.Writable({\n\t\t\t\t\twrite(w_event, s_write_encoding, fk_write) {\n\t\t\t\t\t\ta_data.push(w_event);\n\t\t\t\t\t\tfk_write();\n\t\t\t\t\t},\n\n\t\t\t\t\twritev(a_chunks, fk_writev) {\n\t\t\t\t\t\ta_data.push(...a_chunks);\n\t\t\t\t\t\tfk_writev();\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t\t\t// error\n\t\t\t\t\t.on('error', (e_stream) => {\n\t\t\t\t\t\tfe_bucket(e_stream);\n\t\t\t\t\t})\n\t\t\t\t\t// wait for it to finish\n\t\t\t\t\t.on('finish', () => {\n\t\t\t\t\t\tfk_bucket(a_data);\n\t\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t// utf8-encoded strings\n\t\telse if('utf8' === s_encoding || 'utf-8' === s_encoding) {\n\t\t\t// async operation\n\t\t\treturn new Promise((fk_bucket, fe_bucket) => {\n\t\t\t\tlet s_data = '';\n\n\t\t\t\t// set encoding\n\t\t\t\tthis.setEncoding(s_encoding);\n\n\t\t\t\t// pipe to writable\n\t\t\t\tthis.pipe(new stream.Writable({\n\t\t\t\t\tdecodeStrings: false,\n\n\t\t\t\t\twrite(s_chunk, s_write_encoding, fk_write) {\n\t\t\t\t\t\ts_data += s_chunk;\n\t\t\t\t\t\tfk_write();\n\t\t\t\t\t},\n\n\t\t\t\t\twritev(a_chunks, fk_writev) {\n\t\t\t\t\t\ts_data += a_chunks.join('');\n\t\t\t\t\t\tfk_writev();\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t\t\t// error\n\t\t\t\t\t.on('error', (e_stream) => {\n\t\t\t\t\t\tfe_bucket(e_stream);\n\t\t\t\t\t})\n\t\t\t\t\t// wait for it to finish\n\t\t\t\t\t.on('finish', () => {\n\t\t\t\t\t\tfk_bucket(s_data);\n\t\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t// buffer\n\t\telse if('buffer' === s_encoding) {\n\t\t\t// async operation\n\t\t\treturn new Promise((fk_bucket, fe_bucket) => {\n\t\t\t\tlet ab_data = Buffer.from([]);\n\n\t\t\t\t// pipe to writable\n\t\t\t\tthis.pipe(new stream.Writable({\n\t\t\t\t\tdecodeStrings: true,\n\n\t\t\t\t\twrite(ab_chunk, s_write_encoding, fk_write) {\n\t\t\t\t\t\tab_data = Buffer.concat([ab_data, ab_chunk], ab_data.length+ab_chunk.length);\n\t\t\t\t\t\tfk_write();\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t\t\t// error\n\t\t\t\t\t.on('error', (e_stream) => {\n\t\t\t\t\t\tfe_bucket(e_stream);\n\t\t\t\t\t})\n\t\t\t\t\t// wait for it to finish\n\t\t\t\t\t.on('finish', () => {\n\t\t\t\t\t\tfk_bucket(ab_data);\n\t\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n}\n\nclass Writable extends stream.Writable {\n\tuntil(s_event, b_return_stream) {\n\t\treturn new Promise((fk_until, fe_until) => {\n\t\t\t// convert error to rejected promise\n\t\t\tthis.on('error', (e_stream) => {\n\t\t\t\tfe_until(e_stream);\n\t\t\t});\n\n\t\t\t// special cases returns `this`\n\t\t\tif(b_return_stream) {\n\t\t\t\tthis.once(s_event, (...a_args) => {\n\t\t\t\t\tfk_until(this, ...a_args);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.once(s_event, fk_until);\n\t\t\t}\n\t\t});\n\t}\n\n\t// rdfjs impl\n\timport(ds_source) {\n\t\tds_source\n\t\t\t.on('data', w_chunk => this.write(w_chunk))\n\t\t\t.on('end', () => this.end())\n\t\t\t.on('error', e_read => this.emit('error', e_read));\n\n\t\treturn this;\n\t}\n}\n\nclass Duplex extends stream.Duplex {\n\tuntil(s_event, b_return_stream) {\n\t\treturn new Promise((fk_until, fe_until) => {\n\t\t\t// convert error to rejected promise\n\t\t\tthis.on('error', (e_stream) => {\n\t\t\t\tfe_until(e_stream);\n\t\t\t});\n\n\t\t\t// special cases returns `this`\n\t\t\tif(b_return_stream) {\n\t\t\t\tthis.once(s_event, (...a_args) => {\n\t\t\t\t\tfk_until(this, ...a_args);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.once(s_event, fk_until);\n\t\t\t}\n\t\t});\n\t}\n\n\tbucket(s_encoding='utf8') {\n\t\tlet g_readable = this._readableState;\n\n\t\t// object mode\n\t\tif(g_readable.objectMode) {\n\t\t\t// async operation\n\t\t\treturn new Promise((fk_bucket, fe_bucket) => {\n\t\t\t\tlet a_data = [];\n\n\t\t\t\t// pipe to writable\n\t\t\t\tthis.pipe(new stream.Writable({\n\t\t\t\t\twrite(w_event, s_write_encoding, fk_write) {\n\t\t\t\t\t\ta_data.push(w_event);\n\t\t\t\t\t\tfk_write();\n\t\t\t\t\t},\n\n\t\t\t\t\twritev(a_chunks, fk_writev) {\n\t\t\t\t\t\ta_data.push(...a_chunks);\n\t\t\t\t\t\tfk_writev();\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t\t\t// error\n\t\t\t\t\t.on('error', (e_stream) => {\n\t\t\t\t\t\tfe_bucket(e_stream);\n\t\t\t\t\t})\n\t\t\t\t\t// wait for it to finish\n\t\t\t\t\t.on('finish', () => {\n\t\t\t\t\t\tfk_bucket(a_data);\n\t\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t// utf8-encoded strings\n\t\telse if('utf8' === s_encoding || 'utf-8' === s_encoding) {\n\t\t\t// async operation\n\t\t\treturn new Promise((fk_bucket, fe_bucket) => {\n\t\t\t\tlet s_data = '';\n\n\t\t\t\t// set encoding\n\t\t\t\tthis.setEncoding(s_encoding);\n\n\t\t\t\t// pipe to writable\n\t\t\t\tthis.pipe(new stream.Writable({\n\t\t\t\t\tdecodeStrings: false,\n\n\t\t\t\t\twrite(s_chunk, s_write_encoding, fk_write) {\n\t\t\t\t\t\ts_data += s_chunk;\n\t\t\t\t\t\tfk_write();\n\t\t\t\t\t},\n\n\t\t\t\t\twritev(a_chunks, fk_writev) {\n\t\t\t\t\t\ts_data += a_chunks.join('');\n\t\t\t\t\t\tfk_writev();\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t\t\t// error\n\t\t\t\t\t.on('error', (e_stream) => {\n\t\t\t\t\t\tfe_bucket(e_stream);\n\t\t\t\t\t})\n\t\t\t\t\t// wait for it to finish\n\t\t\t\t\t.on('finish', () => {\n\t\t\t\t\t\tfk_bucket(s_data);\n\t\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t// buffer\n\t\telse if('buffer' === s_encoding) {\n\t\t\t// async operation\n\t\t\treturn new Promise((fk_bucket, fe_bucket) => {\n\t\t\t\tlet ab_data = Buffer.from([]);\n\n\t\t\t\t// pipe to writable\n\t\t\t\tthis.pipe(new stream.Writable({\n\t\t\t\t\tdecodeStrings: true,\n\n\t\t\t\t\twrite(ab_chunk, s_write_encoding, fk_write) {\n\t\t\t\t\t\tab_data = Buffer.concat([ab_data, ab_chunk], ab_data.length+ab_chunk.length);\n\t\t\t\t\t\tfk_write();\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t\t\t// error\n\t\t\t\t\t.on('error', (e_stream) => {\n\t\t\t\t\t\tfe_bucket(e_stream);\n\t\t\t\t\t})\n\t\t\t\t\t// wait for it to finish\n\t\t\t\t\t.on('finish', () => {\n\t\t\t\t\t\tfk_bucket(ab_data);\n\t\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n}\n\nclass Transform extends stream.Transform {\n\tuntil(s_event, b_return_stream) {\n\t\treturn new Promise((fk_until, fe_until) => {\n\t\t\t// convert error to rejected promise\n\t\t\tthis.on('error', (e_stream) => {\n\t\t\t\tfe_until(e_stream);\n\t\t\t});\n\n\t\t\t// special cases returns `this`\n\t\t\tif(b_return_stream) {\n\t\t\t\tthis.once(s_event, (...a_args) => {\n\t\t\t\t\tfk_until(this, ...a_args);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.once(s_event, fk_until);\n\t\t\t}\n\t\t});\n\t}\n\n\tbucket(s_encoding='utf8') {\n\t\tlet g_readable = this._readableState;\n\n\t\t// object mode\n\t\tif(g_readable.objectMode) {\n\t\t\t// async operation\n\t\t\treturn new Promise((fk_bucket, fe_bucket) => {\n\t\t\t\tlet a_data = [];\n\n\t\t\t\t// pipe to writable\n\t\t\t\tthis.pipe(new stream.Writable({\n\t\t\t\t\twrite(w_event, s_write_encoding, fk_write) {\n\t\t\t\t\t\ta_data.push(w_event);\n\t\t\t\t\t\tfk_write();\n\t\t\t\t\t},\n\n\t\t\t\t\twritev(a_chunks, fk_writev) {\n\t\t\t\t\t\ta_data.push(...a_chunks);\n\t\t\t\t\t\tfk_writev();\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t\t\t// error\n\t\t\t\t\t.on('error', (e_stream) => {\n\t\t\t\t\t\tfe_bucket(e_stream);\n\t\t\t\t\t})\n\t\t\t\t\t// wait for it to finish\n\t\t\t\t\t.on('finish', () => {\n\t\t\t\t\t\tfk_bucket(a_data);\n\t\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t// utf8-encoded strings\n\t\telse if('utf8' === s_encoding || 'utf-8' === s_encoding) {\n\t\t\t// async operation\n\t\t\treturn new Promise((fk_bucket, fe_bucket) => {\n\t\t\t\tlet s_data = '';\n\n\t\t\t\t// set encoding\n\t\t\t\tthis.setEncoding(s_encoding);\n\n\t\t\t\t// pipe to writable\n\t\t\t\tthis.pipe(new stream.Writable({\n\t\t\t\t\tdecodeStrings: false,\n\n\t\t\t\t\twrite(s_chunk, s_write_encoding, fk_write) {\n\t\t\t\t\t\ts_data += s_chunk;\n\t\t\t\t\t\tfk_write();\n\t\t\t\t\t},\n\n\t\t\t\t\twritev(a_chunks, fk_writev) {\n\t\t\t\t\t\ts_data += a_chunks.join('');\n\t\t\t\t\t\tfk_writev();\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t\t\t// error\n\t\t\t\t\t.on('error', (e_stream) => {\n\t\t\t\t\t\tfe_bucket(e_stream);\n\t\t\t\t\t})\n\t\t\t\t\t// wait for it to finish\n\t\t\t\t\t.on('finish', () => {\n\t\t\t\t\t\tfk_bucket(s_data);\n\t\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t// buffer\n\t\telse if('buffer' === s_encoding) {\n\t\t\t// async operation\n\t\t\treturn new Promise((fk_bucket, fe_bucket) => {\n\t\t\t\tlet ab_data = Buffer.from([]);\n\n\t\t\t\t// pipe to writable\n\t\t\t\tthis.pipe(new stream.Writable({\n\t\t\t\t\tdecodeStrings: true,\n\n\t\t\t\t\twrite(ab_chunk, s_write_encoding, fk_write) {\n\t\t\t\t\t\tab_data = Buffer.concat([ab_data, ab_chunk], ab_data.length+ab_chunk.length);\n\t\t\t\t\t\tfk_write();\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t\t\t// error\n\t\t\t\t\t.on('error', (e_stream) => {\n\t\t\t\t\t\tfe_bucket(e_stream);\n\t\t\t\t\t})\n\t\t\t\t\t// wait for it to finish\n\t\t\t\t\t.on('finish', () => {\n\t\t\t\t\t\tfk_bucket(ab_data);\n\t\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\t// rdfjs impl\n\timport(ds_source) {\n\t\tds_source\n\t\t\t.on('data', w_chunk => this.write(w_chunk))\n\t\t\t.on('end', () => this.end())\n\t\t\t.on('error', e_read => this.emit('error', e_read));\n\n\t\treturn this;\n\t}\n\n\tdemolish(e_destroy) {\n\t\t// do not allow to push\n\t\tthis.push = (z_chunk) => {\n\t\t\t// ignore eof signals from node core\n\t\t\tif(null === z_chunk) return;\n\n\t\t\t// anything else is bad\n\t\t\tthrow new Error(`[ERR_STREAM_DESTROYED]: Cannot push after stream was destroyed`);\n\t\t};\n\n\t\t// do not allow to emit 'end'\n\t\tthis.emit = function(s_event, ...a_args) {\n\t\t\tif('end' === s_event) return;\n\n\t\t\tObject.getPrototypeOf(this).emit.apply(this, [s_event, ...a_args]);\n\t\t};\n\n\t\t// an error was given, destroy the stream as well\n\t\tif(e_destroy) {\n\t\t\treturn stream.Transform.prototype.destroy.call(this, e_destroy);\n\t\t}\n\t}\n}\n\n// eslint-disable-next-line no-new-func\nconst b_is_node = (new Function(/* syntax: js */ `try {return this===global;}catch(e){return false;}`))();\n\n// deduce the runtime environment\nconst [B_BROWSER, B_BROWSERIFY] = (() => 'undefined' === typeof process\n\t? [true, false]\n\t: (process.browser\n\t\t? [true, true]\n\t\t: ('undefined' === process.versions || 'undefined' === process.versions.node\n\t\t\t? [true, false]\n\t\t\t: [false, false])))();\n\n// node.js or browserify; patch for node < v10\nif(B_BROWSERIFY || (b_is_node && (+(/^v(\\d+)/.exec(process.version)[1])) < 10)) {\n\t// override destroy methods\n\tTransform.prototype.destroy = Duplex.prototype.destroy = function(e_destroy, fke_destroy) {\n\t\tthis._readableState.destroyed = true;\n\t\tthis._writableState.destroyed = true;\n\n\t\tlet f_emit_close = () => {\n\t\t\tif(!this._writableState.emitClose) return;\n\t\t\tif(!this._readableState.emitClose) return;\n\t\t\tthis.emit('close');\n\t\t};\n\n\t\tthis._destroy(e_destroy || null, (e_destroy_re) => {\n\t\t\tif(!fke_destroy && e_destroy_re) {\n\t\t\t\tprocess.nextTick(() => {\n\t\t\t\t\tthis.emit('error', e_destroy_re);\n\t\t\t\t\tf_emit_close();\n\t\t\t\t});\n\t\t\t\tthis._writableState.errorEmitted = true;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tprocess.nextTick(f_emit_close);\n\t\t\t\tif(fke_destroy) fke_destroy(e_destroy_re);\n\t\t\t}\n\t\t});\n\n\t\treturn this;\n\t};\n\n\t// override default _destroy implementations\n\tTransform.prototype._destroy = Duplex.prototype._destroy = (e_destroy, fke_destroy) => fke_destroy(e_destroy);\n}\n\nclass QuadsToOther extends Transform {\n\tconstructor(gc_transform={}) {\n\t\tsuper({\n\t\t\t...gc_transform,\n\t\t\twritableObjectMode: true,\n\t\t\treadableObjectMode: true,\n\t\t});\n\n\t\tthis._as_inputs = new Set();\n\n\t\t// forward prefix and comment events\n\t\tthis.on('pipe', (ds_src) => {\n\t\t\tthis._as_inputs.add(ds_src);\n\n\t\t\tds_src\n\t\t\t\t.on('prefix', (...a_args) => {\n\t\t\t\t\tthis.emit('prefix', ...a_args);\n\t\t\t\t})\n\t\t\t\t.on('comment', (...a_args) => {\n\t\t\t\t\tthis.emit('comment', ...a_args);\n\t\t\t\t});\n\t\t});\n\n\t\tthis.on('unpipe', (ds_src) => {\n\t\t\tthis._as_inputs.delete(ds_src);\n\t\t});\n\t}\n\n\t_destroy() {\n\t\tfor(let ds_input of this._as_inputs) {\n\t\t\tds_input.destroy();\n\t\t}\n\t}\n}\n\nclass Quads_To_JSON_Transform extends QuadsToOther {\n\t// serializse json\n\t_transform(g_quad, s_encoding, fk_transform) {\n\t\tfk_transform(null, JSON.stringify(g_quad.isolate())+'\\n');\n\t}\n}\n\nclass Quads_To_Writable extends QuadsToOther {\n\t_transform(g_quad, s_encoding, fk_transform) {\n\t\tfk_transform(null, {\n\t\t\ttype: 'quad',\n\t\t\tvalue: g_quad,\n\t\t});\n\t}\n}\n\nTransform.QuadsToOther = QuadsToOther;\n\nmodule.exports = {\n\t...stream,\n\tReadable,\n\tWritable,\n\tDuplex,\n\tTransform,\n\n\tQuadsToOther,\n\n\t// create a transform from quad objects into JSON strings for trivial serialization\n\tquads_to_json() {\n\t\treturn new Quads_To_JSON_Transform();\n\t},\n\n\t// create a transform from quad objects into writable data events\n\tquads_to_writable() {\n\t\treturn new Quads_To_Writable();\n\t},\n\n\t// create a simple, single-event readable stream\n\tsource(w_push, s_encoding=null) {\n\t\t// encoding not explicit, string given; assume utf8\n\t\tif(!s_encoding && 'string' === typeof w_push) s_encoding = 'utf8';\n\n\t\t// readable\n\t\treturn new Readable({\n\t\t\tobjectMode: !s_encoding && 'string' !== typeof w_push && !Buffer.isBuffer(w_push),\n\n\t\t\tread() {\n\t\t\t\tthis.push(w_push, s_encoding);\n\t\t\t\tthis.push(null);\n\t\t\t},\n\t\t});\n\t},\n};\n"],"names":["queueMicrotask","dp_resolve","Promise","resolve","fk","then","catch","e_callback","setTimeout","e_define","stream","factory","RT_ABSOLUTE_IRI_VALID","RT_ABSOLUTE_IRI_ESCAPELESS_VALID","RT_NAMED_NODE_VALID","RT_NAMED_NODE_ESCAPELESS_VALID","R_UNICODE_ANY","F_REPLACE_UNICODE_ANY","s_","s_4","s_8","String","fromCodePoint","parseInt","R_CLEAN","R_CLEAN_COMMENTS","RT_HAS_ESCAPES","R_EOL","RT_BLANK_NODE_LABEL_VALID","RT_LANGUAGE_VALID","R_HWS","R_LANGTAG","R_IRIREF","F_REPLACE_STRLIT_CONTENTS","s_whitespace","s_auto","s_invalid","console","assert","Error","JSON","stringify","R_STRLIT_SHORT_CONTENTS_ESCAPES_HARD","R_STRLIT_SHORT_CONTENTS_ESCAPES_SOFT","unescape_literal_short_hard","s_literal","replace","unescape_literal_short_soft","m_incomplete","R_STRLIT_ESCAPE_INCOMPLETE","exec","i_safe","index","slice","R_STRLIT_SHORT_DOUBLE_TERM","RegExp_$lookbehind_polyfill","s_input","m_match","RegExp","prototype","call","this","i_start","length","mk_lookbehind_regex","e_compile","f_lookbehind","r_polyfill","f_polyfill","R_QUAD_ESCAPELESS_SP","R_QUAD","R_BLANK_NODE","NQuads_Reader","Transform","constructor","g_impls","super","decodeStrings","writableObjectMode","readableObjectMode","flush","transform","on","ds_input","_ds_input","setEncoding","pipe","ds_out","ds_dst","_writableState","objectMode","isGraphyWritable","quads_to_writable","quads_to_json","Reader","g_config","input","g_input","relax","b_relax","debug","b_debug","b_allow_relative_iris","allow_relative_iris","allowRelativeIRIs","allowRelativeIris","dc_factory","_dc_factory","adopt","dataFactory","data_factory","unfiltered","f_quad","_f_quad","quad","Object","assign","s","prepend","n","_b_debug","_b_relax","_b_destroyed","_b_trim_start","_f_state","statement","_kt_subject","_kt_predicate","_kt_object","_s_literal","_kt_default_graph","defaultGraph","_kt_rdfs_lang_string","namedNode","r_clean","_r_clean","relaxed","warn","stack","ds_transform","blankNode","languagedLiteral","rt_named_node_valid","rt_named_node_valid_escapeless","k_self","create_named_node","create_named_node_escapeless","create_blank_node","create_languaged_literal","p_iri","test","_error","s_label","s_contents","s_language","b_init","s_chunk","s_encoding","fk_chunk","emit","lastIndex","m_clean","emit_comments","i","parse","e_read","destroy","fk_flush","demolish","substr","name","_destroy","a_args","_f_data_quad","kt_subject","kt_predicate","kt_object","kt_graph","push","s_event","s_captured","a_comments","split","s_comment","bind","string","TypeError","end","_graphy_reader","s_message","error","comment","read","once","progress","eof","finish","data","f_sync","apply","f_data_quad","simpleLiteral","datatypedLiteral","kt_default_graph","m_statement_e_sp","b_graph_late","p_object","s_subject","z_bail","strlit_contents","kt_datatype","toLowerCase","s_graph","s_predicate","m_statement","m_term","i_term","s_dirty","datatype_or_langtag","s_clean","s_incomplete","max_token_length","parse_error","eos","x","m_langtag","post_object","graph","m_iriref","p_datatype","statement_term","i_stop","indexOf","m_blank","s_state","e_destroy","module","exports","z_arg_0","pipeTo","toString","Readable","gc_readable","iterator","until","b_return_stream","fk_until","fe_until","e_stream","bucket","g_readable","_readableState","fk_bucket","fe_bucket","a_data","Writable","write","w_event","s_write_encoding","fk_write","writev","a_chunks","fk_writev","s_data","join","ab_data","Buffer","from","ab_chunk","concat","import","ds_source","w_chunk","Duplex","z_chunk","getPrototypeOf","b_is_node","Function","B_BROWSER","B_BROWSERIFY","process","browser","versions","node","version","fke_destroy","destroyed","f_emit_close","emitClose","e_destroy_re","nextTick","errorEmitted","QuadsToOther","gc_transform","_as_inputs","Set","ds_src","add","delete","Quads_To_JSON_Transform","_transform","g_quad","fk_transform","isolate","Quads_To_Writable","type","value","source","w_push","isBuffer"],"sourceRoot":""}