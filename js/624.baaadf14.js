(self["webpackChunk_zazuko_spex"]=self["webpackChunk_zazuko_spex"]||[]).push([[624],{92624:function(e,t,r){const n=r(61605),i=r(70680);class a extends n{constructor(e){super(i,e)}}e.exports=a},70680:function(e,t,r){const n=r(68825),{JsonLdParser:i}=r(95758),{Transform:a}=r(88473),o="null:";function s(e){return t=>"NamedNode"!==t.termType?null:t.value.startsWith(o)?e.namedNode(t.value.slice(o.length)):null}function l(e){const t=s(e);return r=>{const n=t(r.subject),i=t(r.predicate),a=t(r.object),o=t(r.graph);return n||i||a||o?e.quad(n||r.subject,i||r.predicate,a||r.object,o||r.graph):r}}class d{constructor(e,{baseIRI:t=o,context:r=null,factory:s=n}={}){const d=new i({baseIRI:t,context:r,dataFactory:s,streamingProfile:!1});e.pipe(d);const c=l(s),u=new a({objectMode:!0,transform:(e,t,r)=>{r(null,c(e))}});return d.on("context",(e=>{Object.entries(e).forEach((([e,t])=>{u.emit("prefix",e,s.namedNode(t))}))})),d.on("error",(e=>u.destroy(e))),d.pipe(u),u}}e.exports=d},95456:function(e){"use strict";e.exports=function e(t){return null===t||"object"!==typeof t||null!=t.toJSON?JSON.stringify(t):Array.isArray(t)?"["+t.reduce(((t,r,n)=>{const i=0===n?"":",",a=void 0===r||"symbol"===typeof r?null:r;return t+i+e(a)}),"")+"]":"{"+Object.keys(t).sort().reduce(((r,n,i)=>{if(void 0===t[n]||"symbol"===typeof t[n])return r;const a=0===r.length?"":",";return r+a+e(n)+":"+e(t[n])}),"")+"}"}},31905:function(){(function(e){(function(t){var r={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function n(e){return e&&DataView.prototype.isPrototypeOf(e)}if(r.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(e){return e&&i.indexOf(Object.prototype.toString.call(e))>-1};function o(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function s(e){return"string"!==typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r.iterable&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function c(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function u(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function f(e){var t=new FileReader,r=u(t);return t.readAsArrayBuffer(e),r}function h(e){var t=new FileReader,r=u(t);return t.readAsText(e),r}function p(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:r.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:r.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():r.arrayBuffer&&r.blob&&n(e)?(this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||a(e))?this._bodyArrayBuffer=g(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var e=c(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?c(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var e=c(this);if(e)return e;if(this._bodyBlob)return h(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(p(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(I)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=o(e),t=s(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},d.prototype["delete"]=function(e){delete this.map[o(e)]},d.prototype.get=function(e){return e=o(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(o(e))},d.prototype.set=function(e,t){this.map[o(e)]=s(t)},d.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),l(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),l(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),l(e)},r.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function C(e){var t=e.toUpperCase();return E.indexOf(t)>-1?t:e}function w(e,t){t=t||{};var r=t.body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=C(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function I(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function _(e){var t=new d,r=e.replace(/\r?\n[\t ]+/g," ");return r.split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t}function R(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},y.call(w.prototype),y.call(R.prototype),R.prototype.clone=function(){return new R(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},R.error=function(){var e=new R(null,{status:0,statusText:""});return e.type="error",e};var O=[301,302,303,307,308];R.redirect=function(e,t){if(-1===O.indexOf(t))throw new RangeError("Invalid status code");return new R(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(b){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function x(e,n){return new Promise((function(i,a){var o=new w(e,n);if(o.signal&&o.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function l(){s.abort()}s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:_(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;i(new R(t,e))},s.onerror=function(){a(new TypeError("Network request failed"))},s.ontimeout=function(){a(new TypeError("Network request failed"))},s.onabort=function(){a(new t.DOMException("Aborted","AbortError"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&r.blob&&(s.responseType="blob"),o.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",l),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",l)}),s.send("undefined"===typeof o._bodyInit?null:o._bodyInit)}))}x.polyfill=!0,e.fetch||(e.fetch=x,e.Headers=d,e.Request=w,e.Response=R),t.Headers=d,t.Request=w,t.Response=R,t.fetch=x,Object.defineProperty(t,"__esModule",{value:!0})})({})})("undefined"!==typeof self?self:this)},12475:function(e,t,r){"use strict";var n=r(48764)["Buffer"],i=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/\s|\uFEFF|\xA0/,s=/\r?\n[\x20\x09]+/g,l=/[;,"]/,d=/[;,"]|\s/,c=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,u={IDLE:1,URI:2,ATTR:4};function f(e){return e.replace(a,"")}function h(e){return o.test(e)}function p(e,t){while(h(e[t]))t++;return t}function g(e){return d.test(e)||!c.test(e)}function y(e,t){return Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every((r=>r in t&&e[r]===t[r]))}class E{constructor(e){this.refs=[],e&&this.parse(e)}rel(e){for(var t=[],r=e.toLowerCase(),n=0;n<this.refs.length;n++)this.refs[n].rel.toLowerCase()===r&&t.push(this.refs[n]);return t}get(e,t){e=e.toLowerCase();for(var r=[],n=0;n<this.refs.length;n++)this.refs[n][e]===t&&r.push(this.refs[n]);return r}set(e){return this.refs.push(e),this}setUnique(e){return this.refs.some((t=>y(t,e)))||this.refs.push(e),this}has(e,t){e=e.toLowerCase();for(var r=0;r<this.refs.length;r++)if(this.refs[r][e]===t)return!0;return!1}parse(e,t){t=t||0,e=t?e.slice(t):e,e=f(e).replace(s,"");var r=u.IDLE,n=e.length,i=(t=0,null);while(t<n)if(r===u.IDLE){if(h(e[t])){t++;continue}if("<"!==e[t])throw new Error('Unexpected character "'+e[t]+'" at offset '+t);null!=i&&(null!=i.rel?this.refs.push(...E.expandRelations(i)):this.refs.push(i));var a=e.indexOf(">",t);if(-1===a)throw new Error("Expected end of URI delimiter at offset "+t);i={uri:e.slice(t+1,a)},t=a,r=u.URI,t++}else if(r===u.URI){if(h(e[t])){t++;continue}if(";"===e[t])r=u.ATTR,t++;else{if(","!==e[t])throw new Error('Unexpected character "'+e[t]+'" at offset '+t);r=u.IDLE,t++}}else{if(r!==u.ATTR)throw new Error('Unknown parser state "'+r+'"');if(";"===e[t]||h(e[t])){t++;continue}a=e.indexOf("=",t);if(-1===a)throw new Error("Expected attribute delimiter at offset "+t);var o=f(e.slice(t,a)).toLowerCase(),d="";if(t=a+1,t=p(e,t),'"'===e[t]){t++;while(t<n){if('"'===e[t]){t++;break}"\\"===e[t]&&t++,d+=e[t],t++}}else{a=t+1;while(!l.test(e[a])&&a<n)a++;d=e.slice(t,a),t=a}switch(i[o]&&E.isSingleOccurenceAttr(o)||("*"===o[o.length-1]?i[o]=E.parseExtendedValue(d):(d="type"===o?d.toLowerCase():d,null!=i[o]?Array.isArray(i[o])?i[o].push(d):i[o]=[i[o],d]:i[o]=d)),e[t]){case",":r=u.IDLE;break;case";":r=u.ATTR;break}t++}return null!=i&&(null!=i.rel?this.refs.push(...E.expandRelations(i)):this.refs.push(i)),i=null,this}toString(){for(var e=[],t="",r=null,n=0;n<this.refs.length;n++)r=this.refs[n],t=Object.keys(this.refs[n]).reduce((function(e,t){return"uri"===t?e:e+"; "+E.formatAttribute(t,r[t])}),"<"+r.uri+">"),e.push(t);return e.join(", ")}}E.isCompatibleEncoding=function(e){return i.test(e)},E.parse=function(e,t){return(new E).parse(e,t)},E.isSingleOccurenceAttr=function(e){return"rel"===e||"type"===e||"media"===e||"title"===e||"title*"===e},E.isTokenAttr=function(e){return"rel"===e||"type"===e||"anchor"===e},E.escapeQuotes=function(e){return e.replace(/"/g,'\\"')},E.expandRelations=function(e){var t=e.rel.split(" ");return t.map((function(t){var r=Object.assign({},e);return r.rel=t,r}))},E.parseExtendedValue=function(e){var t=/([^']+)?(?:'([^']*)')?(.+)/.exec(e);return{language:t[2].toLowerCase(),encoding:E.isCompatibleEncoding(t[1])?null:t[1].toLowerCase(),value:E.isCompatibleEncoding(t[1])?decodeURIComponent(t[3]):t[3]}},E.formatExtendedAttribute=function(e,t){var r=(t.encoding||"utf-8").toUpperCase(),i=t.language||"en",a="";return a=n.isBuffer(t.value)&&E.isCompatibleEncoding(r)?t.value.toString(r):n.isBuffer(t.value)?t.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):encodeURIComponent(t.value),e+"="+r+"'"+i+"'"+a},E.formatAttribute=function(e,t){return Array.isArray(t)?t.map((t=>E.formatAttribute(e,t))).join("; "):"*"===e[e.length-1]||"string"!==typeof t?E.formatExtendedAttribute(e,t):(E.isTokenAttr(e)?t=g(t)?'"'+E.escapeQuotes(t)+'"':E.escapeQuotes(t):g(t)&&(t=encodeURIComponent(t),t=t.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),t='"'+t+'"'),e+"="+t)},e.exports=E},11288:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(98931),t),i(r(87011),t),i(r(97378),t),i(r(91891),t),i(r(29e3),t),i(r(35656),t),i(r(24990),t)},98931:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultExpandOptions=t.ContextParser=void 0,r(31905);const n=r(68912),i=r(87011),a=r(97378),o=r(35656),s=r(24990),l=r(95456);class d{constructor(e){e=e||{},this.documentLoader=e.documentLoader||new a.FetchDocumentLoader,this.documentCache={},this.validateContext=!e.skipValidation,this.expandContentTypeToBase=!!e.expandContentTypeToBase,this.remoteContextsDepthLimit=e.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps=!("redirectSchemaOrgHttps"in e)||!!e.redirectSchemaOrgHttps}static validateLanguage(e,t,r){if("string"!==typeof e)throw new i.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(e)}'`,r);if(!s.Util.REGEX_LANGUAGE_TAG.test(e)){if(t)throw new i.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(e)}'`,r);return!1}return!0}static validateDirection(e,t){if("string"!==typeof e)throw new i.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(e)}'`,i.ERROR_CODES.INVALID_BASE_DIRECTION);if(!s.Util.REGEX_DIRECTION_TAG.test(e)){if(t)throw new i.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(e)}'`,i.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(e){for(const t of Object.keys(e)){const r=e[t];if(r&&"object"===typeof r&&r["@reverse"]&&!r["@id"]){if("string"!==typeof r["@reverse"]||s.Util.isValidKeyword(r["@reverse"]))throw new i.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${r["@reverse"]}'`,i.ERROR_CODES.INVALID_IRI_MAPPING);r["@id"]=r["@reverse"],s.Util.isPotentialKeyword(r["@reverse"])?delete r["@reverse"]:r["@reverse"]=!0}}return e}expandPrefixedTerms(e,t){const r=e.getContextRaw();for(const n of Object.keys(r))if(s.Util.EXPAND_KEYS_BLACKLIST.indexOf(n)<0&&!s.Util.isReservedInternalKeyword(n)){const a=r[n];if(s.Util.isPotentialKeyword(n)&&s.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(n)>=0&&("@type"!==n||"object"===typeof r[n]&&!r[n]["@protected"]&&"@set"!==r[n]["@container"]))throw new i.ErrorCoded(`Keywords can not be aliased to something else.\nTried mapping ${n} to ${JSON.stringify(a)}`,i.ERROR_CODES.KEYWORD_REDEFINITION);if(s.Util.ALIAS_RANGE_BLACKLIST.indexOf(s.Util.getContextValueId(a))>=0)throw new i.ErrorCoded(`Aliasing to certain keywords is not allowed.\nTried mapping ${n} to ${JSON.stringify(a)}`,i.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(a&&s.Util.isPotentialKeyword(s.Util.getContextValueId(a))&&!0===a["@prefix"])throw new i.ErrorCoded(`Tried to use keyword aliases as prefix: '${n}': '${JSON.stringify(a)}'`,i.ERROR_CODES.INVALID_TERM_DEFINITION);while(s.Util.isPrefixValue(r[n])){const i=r[n];let a=!1;if("string"===typeof i)r[n]=e.expandTerm(i,!0),a=a||i!==r[n];else{const o=i["@id"],l=i["@type"],d=!("@prefix"in i)||s.Util.isValidIri(n);if("@id"in i)void 0!==o&&null!==o&&"string"===typeof o&&(r[n]["@id"]=e.expandTerm(o,!0),a=a||o!==r[n]["@id"]);else if(!s.Util.isPotentialKeyword(n)&&d){const t=e.expandTerm(n,!0);t!==n&&(r[n]["@id"]=t,a=!0)}!l||"string"!==typeof l||"@vocab"===l||i["@container"]&&i["@container"]["@type"]||!d||(r[n]["@type"]=e.expandTerm(l,!0),t&&l===r[n]["@type"]&&(r[n]["@type"]=e.expandTerm(l,!1)),a=a||l!==r[n]["@type"])}if(!a)break}}}normalize(e,{processingMode:t,normalizeLanguageTags:r}){if(r||1===t)for(const n of Object.keys(e))if("@language"===n&&"string"===typeof e[n])e[n]=e[n].toLowerCase();else{const t=e[n];t&&"object"===typeof t&&"string"===typeof t["@language"]&&(t["@language"]=t["@language"].toLowerCase())}}containersToHash(e){for(const t of Object.keys(e)){const r=e[t];if(r&&"object"===typeof r)if("string"===typeof r["@container"])r["@container"]={[r["@container"]]:!0};else if(Array.isArray(r["@container"])){const e={};for(const t of r["@container"])e[t]=!0;r["@container"]=e}}}applyScopedProtected(e,{processingMode:t}){if(t&&t>=1.1&&e["@protected"]){for(const t of Object.keys(e))if(!s.Util.isReservedInternalKeyword(t)&&!s.Util.isPotentialKeyword(t)&&!s.Util.isTermProtected(e,t)){const r=e[t];r&&"object"===typeof r?"@protected"in e[t]||(e[t]["@protected"]=!0):e[t]={"@id":r,"@protected":!0}}delete e["@protected"]}}validateKeywordRedefinitions(e,t,r){for(const n of Object.keys(t))if(s.Util.isTermProtected(e,n)){if("string"===typeof t[n]){const i=s.Util.isSimpleTermDefinitionPrefix(t[n],r);t[n]={"@id":t[n]},i&&(t[n]["@prefix"]=!0,e[n]["@prefix"]=!0)}const a=l(e[n]);t[n]["@protected"]=!0;const o=l(t[n]);if(a!==o)throw new i.ErrorCoded(`Attempted to override the protected keyword ${n} from ${JSON.stringify(s.Util.getContextValueId(e[n]))} to ${JSON.stringify(s.Util.getContextValueId(t[n]))}`,i.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}}validate(e,{processingMode:t}){for(const r of Object.keys(e)){if(s.Util.isReservedInternalKeyword(r))continue;if(""===r)throw new i.ErrorCoded(`The empty term is not allowed, got: '${r}': '${JSON.stringify(e[r])}'`,i.ERROR_CODES.INVALID_TERM_DEFINITION);const n=e[r],a=typeof n;if(s.Util.isPotentialKeyword(r)){switch(r.substr(1)){case"vocab":if(null!==n&&"string"!==a)throw new i.ErrorCoded(`Found an invalid @vocab IRI: ${n}`,i.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(null!==n&&"string"!==a)throw new i.ErrorCoded(`Found an invalid @base IRI: ${e[r]}`,i.ERROR_CODES.INVALID_BASE_IRI);break;case"language":null!==n&&d.validateLanguage(n,!0,i.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(null!==n&&"number"!==a)throw new i.ErrorCoded(`Found an invalid @version number: ${n}`,i.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":null!==n&&d.validateDirection(n,!0);break;case"propagate":if(1===t)throw new i.ErrorCoded(`Found an illegal @propagate keyword: ${n}`,i.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(null!==n&&"boolean"!==a)throw new i.ErrorCoded(`Found an invalid @propagate value: ${n}`,i.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(s.Util.isValidKeyword(r)&&s.Util.isValidKeyword(s.Util.getContextValueId(n)))throw new i.ErrorCoded(`Illegal keyword alias in term value, found: '${r}': '${s.Util.getContextValueId(n)}'`,i.ERROR_CODES.KEYWORD_REDEFINITION)}else if(null!==n)switch(a){case"string":if(s.Util.getPrefix(n,e)===r)throw new i.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.CYCLIC_IRI_MAPPING);if(s.Util.isValidIriWeak(r)){if("@type"===n)throw new i.ErrorCoded(`IRIs can not be mapped to @type, found: '${r}': '${n}'`,i.ERROR_CODES.INVALID_IRI_MAPPING);if(s.Util.isValidIri(n)&&n!==new o.JsonLdContextNormalized(e).expandTerm(r))throw new i.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${r}': '${n}'`,i.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!s.Util.isCompactIri(r)&&!("@id"in n)&&("@id"===n["@type"]?!e["@base"]:!e["@vocab"]))throw new i.ErrorCoded(`Missing @id in context entry: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.INVALID_IRI_MAPPING);for(const l of Object.keys(n)){const c=n[l];if(c)switch(l){case"@id":if(s.Util.isValidKeyword(c)&&"@type"!==c&&"@id"!==c&&"@graph"!==c&&"@nest"!==c)throw new i.ErrorCoded(`Illegal keyword alias in term value, found: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.INVALID_IRI_MAPPING);if(s.Util.isValidIriWeak(r)){if("@type"===c)throw new i.ErrorCoded(`IRIs can not be mapped to @type, found: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.INVALID_IRI_MAPPING);if(s.Util.isValidIri(c)&&c!==new o.JsonLdContextNormalized(e).expandTerm(r))throw new i.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.INVALID_IRI_MAPPING)}if("string"!==typeof c)throw new i.ErrorCoded(`Detected non-string @id in context entry: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.INVALID_IRI_MAPPING);if(s.Util.getPrefix(c,e)===r)throw new i.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if("@type"===n["@container"]&&"@id"!==c&&"@vocab"!==c)throw new i.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${r}': '${c}'`,i.ERROR_CODES.INVALID_TYPE_MAPPING);if("string"!==typeof c)throw new i.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(a)}'`,i.ERROR_CODES.INVALID_TYPE_MAPPING);if("@id"!==c&&"@vocab"!==c&&(1===t||"@json"!==c)&&(1===t||"@none"!==c)&&("_"===c[0]||!s.Util.isValidIri(c)))throw new i.ErrorCoded(`A context @type must be an absolute IRI, found: '${r}': '${c}'`,i.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if("string"===typeof c&&n["@id"]&&n["@id"]!==c)throw new i.ErrorCoded(`Found non-matching @id and @reverse term values in '${r}':'${c}' and '${n["@id"]}'`,i.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in n)throw new i.ErrorCoded(`@nest is not allowed in the reverse property '${r}'`,i.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(1===t&&(Object.keys(c).length>1||s.Util.CONTAINERS_1_0.indexOf(Object.keys(c)[0])<0))throw new i.ErrorCoded(`Invalid term @container for '${r}' ('${Object.keys(c)}') in 1.0, must be only one of ${s.Util.CONTAINERS_1_0.join(", ")}`,i.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const e of Object.keys(c)){if("@list"===e&&n["@reverse"])throw new i.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${r}'`,i.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(s.Util.CONTAINERS.indexOf(e)<0)throw new i.ErrorCoded(`Invalid term @container for '${r}' ('${e}'), must be one of ${s.Util.CONTAINERS.join(", ")}`,i.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":d.validateLanguage(c,!0,i.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":d.validateDirection(c,!0);break;case"@prefix":if(null!==c&&"boolean"!==typeof c)throw new i.ErrorCoded(`Found an invalid term @prefix boolean in: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in n)&&!s.Util.isValidIri(r))throw new i.ErrorCoded(`Invalid @prefix definition for '${r}' ('${JSON.stringify(n)}'`,i.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(1===t||!n["@container"]||!n["@container"]["@index"])throw new i.ErrorCoded(`Attempt to add illegal key to value object: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(s.Util.isPotentialKeyword(c)&&"@nest"!==c)throw new i.ErrorCoded(`Found an invalid term @nest value in: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new i.ErrorCoded(`Found an invalid term value: '${r}': '${n}'`,i.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(e,t,r){return"string"===typeof e||(r&&!("@base"in e)&&t.parentContext&&"object"===typeof t.parentContext&&"@base"in t.parentContext&&(e["@base"]=t.parentContext["@base"],t.parentContext["@__baseDocument"]&&(e["@__baseDocument"]=!0)),t.baseIRI&&!t.external&&("@base"in e?null===e["@base"]||"string"!==typeof e["@base"]||s.Util.isValidIri(e["@base"])||(e["@base"]=(0,n.resolve)(e["@base"],t.parentContext&&t.parentContext["@base"]||t.baseIRI)):(e["@base"]=t.baseIRI,e["@__baseDocument"]=!0))),e}normalizeContextIri(e,t){if(!s.Util.isValidIri(e))try{e=(0,n.resolve)(e,t)}catch(r){throw new Error(`Invalid context IRI: ${e}`)}return this.redirectSchemaOrgHttps&&e.startsWith("http://schema.org")&&(e="https://schema.org/"),e}async parseInnerContexts(e,t){for(const n of Object.keys(e)){const a=e[n];if(a&&"object"===typeof a&&"@context"in a&&null!==a["@context"]&&!t.ignoreScopedContexts){if(this.validateContext)try{const r=Object.assign({},e);r[n]=Object.assign({},r[n]),delete r[n]["@context"],await this.parse(a["@context"],Object.assign(Object.assign({},t),{external:!1,parentContext:r,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(r){throw new i.ErrorCoded(r.message,i.ERROR_CODES.INVALID_SCOPED_CONTEXT)}a["@context"]=(await this.parse(a["@context"],Object.assign(Object.assign({},t),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:e}))).getContextRaw()}}return e}async parse(e,r={}){const{baseIRI:n,parentContext:a,external:l,processingMode:c=d.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:u,ignoreProtection:f,minimalProcessing:h}=r;let p=a;const g=r.remoteContexts||{};if(Object.keys(g).length>=this.remoteContextsDepthLimit)throw new i.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(g),i.ERROR_CODES.CONTEXT_OVERFLOW);if(null===e||void 0===e){if(!f&&p&&s.Util.hasProtectedTerms(p))throw new i.ErrorCoded("Illegal context nullification when terms are protected",i.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new o.JsonLdContextNormalized(this.applyBaseEntry({},r,!1))}if("string"===typeof e){const t=this.normalizeContextIri(e,n),i=this.getOverriddenLoad(t,r);if(i)return new o.JsonLdContextNormalized(i);const a=await this.parse(await this.load(t),Object.assign(Object.assign({},r),{baseIRI:t,external:!0,remoteContexts:Object.assign(Object.assign({},g),{[t]:!0})}));return this.applyBaseEntry(a.getContextRaw(),r,!0),a}if(Array.isArray(e)){const t=[],i=await Promise.all(e.map(((e,i)=>{if("string"===typeof e){const a=this.normalizeContextIri(e,n);t[i]=a;const o=this.getOverriddenLoad(a,r);return o||this.load(a)}return e})));if(h)return new o.JsonLdContextNormalized(i);const a=await i.reduce(((e,n,i)=>e.then((e=>this.parse(n,Object.assign(Object.assign({},r),{baseIRI:t[i]||r.baseIRI,external:!!t[i]||r.external,parentContext:e.getContextRaw(),remoteContexts:t[i]?Object.assign(Object.assign({},g),{[t[i]]:!0}):g}))))),Promise.resolve(new o.JsonLdContextNormalized(p||{})));return this.applyBaseEntry(a.getContextRaw(),r,!0),a}if("object"===typeof e){if("@context"in e)return await this.parse(e["@context"],r);e=JSON.parse(JSON.stringify(e)),p&&!h&&(p=JSON.parse(JSON.stringify(p)));let a={};if(l&&delete e["@base"],this.applyBaseEntry(e,r,!0),this.containersToHash(e),h)return new o.JsonLdContextNormalized(e);let g={};if("@import"in e){if(!(c>=1.1))throw new i.ErrorCoded("Context importing is not supported in JSON-LD 1.0",i.ERROR_CODES.INVALID_CONTEXT_ENTRY);if("string"!==typeof e["@import"])throw new i.ErrorCoded("An @import value must be a string, but got "+typeof e["@import"],i.ERROR_CODES.INVALID_IMPORT_VALUE);g=await this.loadImportContext(this.normalizeContextIri(e["@import"],n)),delete e["@import"]}a=Object.assign(Object.assign(Object.assign(Object.assign({},a),"object"===typeof p?p:{}),g),e);const y=new o.JsonLdContextNormalized(a);return await this.parseInnerContexts(a,r),(a&&a["@version"]||d.DEFAULT_PROCESSING_MODE)>=1.1&&(e["@vocab"]&&"string"===typeof e["@vocab"]||""===e["@vocab"])&&(p&&"@vocab"in p&&e["@vocab"].indexOf(":")<0?a["@vocab"]=p["@vocab"]+e["@vocab"]:(s.Util.isCompactIri(e["@vocab"])||e["@vocab"]in y.getContextRaw())&&(a["@vocab"]=y.expandTerm(e["@vocab"],!0))),this.idifyReverseTerms(a),this.expandPrefixedTerms(y,this.expandContentTypeToBase),!f&&p&&c>=1.1&&this.validateKeywordRedefinitions(p,a,t.defaultExpandOptions),this.normalize(a,{processingMode:c,normalizeLanguageTags:u}),this.applyScopedProtected(a,{processingMode:c}),this.validateContext&&this.validate(a,{processingMode:c}),y}throw new i.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${e}`,i.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(e){const t=this.documentCache[e];if(t)return"string"===typeof t?t:Array.isArray(t)?t.slice():Object.assign({},t);let r;try{r=await this.documentLoader.load(e)}catch(n){throw new i.ErrorCoded(`Failed to load remote context ${e}: ${n.message}`,i.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in r))throw new i.ErrorCoded(`Missing @context in remote context at ${e}`,i.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[e]=r["@context"]}getOverriddenLoad(e,t){if(e in(t.remoteContexts||{})){if(t.ignoreRemoteScopedContexts)return e;throw new i.ErrorCoded("Detected a cyclic context inclusion of "+e,i.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(e){const t=await this.load(e);if("object"!==typeof t||Array.isArray(t))throw new i.ErrorCoded("An imported context must be a single object: "+e,i.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in t)throw new i.ErrorCoded("An imported context can not import another context: "+e,i.ERROR_CODES.INVALID_CONTEXT_ENTRY);return this.containersToHash(t),t}}t.ContextParser=d,d.DEFAULT_PROCESSING_MODE=1.1,t.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},87011:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_CODES=t.ErrorCoded=void 0;class r extends Error{constructor(e,t){super(e),this.code=t}}t.ErrorCoded=r,function(e){e["COLLIDING_KEYWORDS"]="colliding keywords",e["CONFLICTING_INDEXES"]="conflicting indexes",e["CYCLIC_IRI_MAPPING"]="cyclic IRI mapping",e["INVALID_ID_VALUE"]="invalid @id value",e["INVALID_INDEX_VALUE"]="invalid @index value",e["INVALID_NEST_VALUE"]="invalid @nest value",e["INVALID_PREFIX_VALUE"]="invalid @prefix value",e["INVALID_PROPAGATE_VALUE"]="invalid @propagate value",e["INVALID_REVERSE_VALUE"]="invalid @reverse value",e["INVALID_IMPORT_VALUE"]="invalid @import value",e["INVALID_VERSION_VALUE"]="invalid @version value",e["INVALID_BASE_IRI"]="invalid base IRI",e["INVALID_CONTAINER_MAPPING"]="invalid container mapping",e["INVALID_CONTEXT_ENTRY"]="invalid context entry",e["INVALID_CONTEXT_NULLIFICATION"]="invalid context nullification",e["INVALID_DEFAULT_LANGUAGE"]="invalid default language",e["INVALID_INCLUDED_VALUE"]="invalid @included value",e["INVALID_IRI_MAPPING"]="invalid IRI mapping",e["INVALID_JSON_LITERAL"]="invalid JSON literal",e["INVALID_KEYWORD_ALIAS"]="invalid keyword alias",e["INVALID_LANGUAGE_MAP_VALUE"]="invalid language map value",e["INVALID_LANGUAGE_MAPPING"]="invalid language mapping",e["INVALID_LANGUAGE_TAGGED_STRING"]="invalid language-tagged string",e["INVALID_LANGUAGE_TAGGED_VALUE"]="invalid language-tagged value",e["INVALID_LOCAL_CONTEXT"]="invalid local context",e["INVALID_REMOTE_CONTEXT"]="invalid remote context",e["INVALID_REVERSE_PROPERTY"]="invalid reverse property",e["INVALID_REVERSE_PROPERTY_MAP"]="invalid reverse property map",e["INVALID_REVERSE_PROPERTY_VALUE"]="invalid reverse property value",e["INVALID_SCOPED_CONTEXT"]="invalid scoped context",e["INVALID_SCRIPT_ELEMENT"]="invalid script element",e["INVALID_SET_OR_LIST_OBJECT"]="invalid set or list object",e["INVALID_TERM_DEFINITION"]="invalid term definition",e["INVALID_TYPE_MAPPING"]="invalid type mapping",e["INVALID_TYPE_VALUE"]="invalid type value",e["INVALID_TYPED_VALUE"]="invalid typed value",e["INVALID_VALUE_OBJECT"]="invalid value object",e["INVALID_VALUE_OBJECT_VALUE"]="invalid value object value",e["INVALID_VOCAB_MAPPING"]="invalid vocab mapping",e["IRI_CONFUSED_WITH_PREFIX"]="IRI confused with prefix",e["KEYWORD_REDEFINITION"]="keyword redefinition",e["LOADING_DOCUMENT_FAILED"]="loading document failed",e["LOADING_REMOTE_CONTEXT_FAILED"]="loading remote context failed",e["MULTIPLE_CONTEXT_LINK_HEADERS"]="multiple context link headers",e["PROCESSING_MODE_CONFLICT"]="processing mode conflict",e["PROTECTED_TERM_REDEFINITION"]="protected term redefinition",e["CONTEXT_OVERFLOW"]="context overflow",e["INVALID_BASE_DIRECTION"]="invalid base direction",e["RECURSIVE_CONTEXT_INCLUSION"]="recursive context inclusion",e["INVALID_STREAMING_KEY_ORDER"]="invalid streaming key order",e["INVALID_EMBEDDED_NODE"]="invalid embedded node",e["INVALID_ANNOTATION"]="invalid annotation"}(t.ERROR_CODES||(t.ERROR_CODES={}))},97378:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FetchDocumentLoader=void 0,r(31905);const n=r(87011),i=r(12475),a=r(68912);class o{constructor(e){this.fetcher=e}async load(e){const t=await(this.fetcher||fetch)(e,{headers:new Headers({accept:"application/ld+json"})});if(t.ok&&t.headers){let r=t.headers.get("Content-Type");if(r){const e=r.indexOf(";");e>0&&(r=r.substr(0,e))}if("application/ld+json"===r)return await t.json();if(t.headers.has("Link")){let r;if(t.headers.forEach(((t,n)=>{if("link"===n){const n=(0,i.parse)(t);for(const t of n.get("type","application/ld+json"))if("alternate"===t.rel){if(r)throw new Error("Multiple JSON-LD alternate links were found on "+e);r=(0,a.resolve)(t.uri,e)}}})),r)return this.load(r)}throw new n.ErrorCoded(`Unsupported JSON-LD media type ${r}`,n.ERROR_CODES.LOADING_DOCUMENT_FAILED)}throw new Error(t.statusText||`Status code: ${t.status}`)}}t.FetchDocumentLoader=o},91891:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},29e3:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},35656:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonLdContextNormalized=void 0;const n=r(68912),i=r(98931),a=r(87011),o=r(24990);class s{constructor(e){this.contextRaw=e}getContextRaw(){return this.contextRaw}expandTerm(e,t,r=i.defaultExpandOptions){const s=this.contextRaw[e];if(null===s||s&&null===s["@id"])return null;let l=!0;if(s&&t){const t=o.Util.getContextValueId(s);if(t&&t!==e){if("string"===typeof t&&(o.Util.isValidIri(t)||o.Util.isValidKeyword(t)))return t;o.Util.isPotentialKeyword(t)||(l=!1)}}const d=o.Util.getPrefix(e,this.contextRaw),c=this.contextRaw["@vocab"],u=(!!c||""===c)&&c.indexOf(":")<0,f=this.contextRaw["@base"],h=o.Util.isPotentialKeyword(e);if(d){const t=this.contextRaw[d],n=o.Util.getContextValueId(t);if(n){if("string"!==typeof t&&r.allowPrefixForcing){if("_"!==n[0]&&!h&&!t["@prefix"]&&!(e in this.contextRaw))return e}else if(!o.Util.isSimpleTermDefinitionPrefix(n,r))return e;return n+e.substr(d.length+1)}}else{if(t&&(c||""===c||r.allowVocabRelativeToBase&&f&&u)&&!h&&!o.Util.isCompactIri(e)){if(u){if(r.allowVocabRelativeToBase)return(c||f?(0,n.resolve)(c,f):"")+e;throw new a.ErrorCoded(`Relative vocab expansion for term '${e}' with vocab '${c}' is not allowed.`,a.ERROR_CODES.INVALID_VOCAB_MAPPING)}return c+e}if(!t&&f&&!h&&!o.Util.isCompactIri(e))return(0,n.resolve)(e,f)}if(l)return e;throw new a.ErrorCoded(`Invalid IRI mapping found for context entry '${e}': '${JSON.stringify(s)}'`,a.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(e,t){if(t&&this.contextRaw["@vocab"]&&e.startsWith(this.contextRaw["@vocab"]))return e.substr(this.contextRaw["@vocab"].length);if(!t&&this.contextRaw["@base"]&&e.startsWith(this.contextRaw["@base"]))return e.substr(this.contextRaw["@base"].length);const r={prefix:"",suffix:e};for(const n in this.contextRaw){const i=this.contextRaw[n];if(i&&!o.Util.isPotentialKeyword(n)){const a=o.Util.getContextValueId(i);if(e.startsWith(a)){const i=e.substr(a.length);if(i)i.length<r.suffix.length&&(r.prefix=n,r.suffix=i);else if(t)return n}}}return r.prefix?r.prefix+":"+r.suffix:e}}t.JsonLdContextNormalized=s},24990:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;class r{static isCompactIri(e){return e.indexOf(":")>0&&!(e&&"#"===e[0])}static getPrefix(e,t){if(e&&"#"===e[0])return null;const r=e.indexOf(":");if(r>=0){if(e.length>r+1&&"/"===e.charAt(r+1)&&"/"===e.charAt(r+2))return null;const n=e.substr(0,r);if("_"===n)return null;if(t[n])return n}return null}static getContextValueId(e){if(null===e||"string"===typeof e)return e;const t=e["@id"];return t||null}static isSimpleTermDefinitionPrefix(e,t){return!r.isPotentialKeyword(e)&&("_"===e[0]||t.allowPrefixNonGenDelims||r.isPrefixIriEndingWithGenDelim(e))}static isPotentialKeyword(e){return"string"===typeof e&&r.KEYWORD_REGEX.test(e)}static isPrefixIriEndingWithGenDelim(e){return r.ENDS_WITH_GEN_DELIM.test(e)}static isPrefixValue(e){return e&&("string"===typeof e||e&&"object"===typeof e)}static isValidIri(e){return Boolean(e&&r.IRI_REGEX.test(e))}static isValidIriWeak(e){return!!e&&":"!==e[0]&&r.IRI_REGEX_WEAK.test(e)}static isValidKeyword(e){return r.VALID_KEYWORDS[e]}static isTermProtected(e,t){const r=e[t];return!("string"===typeof r)&&r&&r["@protected"]}static hasProtectedTerms(e){for(const t of Object.keys(e))if(r.isTermProtected(e,t))return!0;return!1}static isReservedInternalKeyword(e){return e.startsWith("@__")}}t.Util=r,r.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,r.IRI_REGEX_WEAK=/(?::[^:])|\//,r.KEYWORD_REGEX=/^@[a-z]+$/i,r.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,r.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,r.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,r.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},r.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],r.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],r.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],r.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],r.CONTAINERS_1_0=["@list","@set","@index"]},95758:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(55170),t)},98386:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextTree=void 0;class r{constructor(){this.subTrees={}}getContext(e){if(e.length>0){const[t,...r]=e,n=this.subTrees[t];if(n){const e=n.getContext(r);if(e)return e.then((({context:e,depth:t})=>({context:e,depth:t+1})))}}return this.context?this.context.then((e=>({context:e,depth:0}))):null}setContext(e,t){if(0===e.length)this.context=t;else{const[n,...i]=e;let a=this.subTrees[n];a||(a=this.subTrees[n]=new r),a.setContext(i,t)}}removeContext(e){this.setContext(e,null)}}t.ContextTree=r},55170:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonLdParser=void 0;const n=r(2222),i=r(11288),a=r(42830),o=r(81889),s=r(36753),l=r(38215),d=r(49488),c=r(42613),u=r(73330),f=r(52709),h=r(67406),p=r(61323),g=r(51820),y=r(72963),E=r(93322),C=r(51478),w=r(22754),I=r(12475);class _ extends a.Transform{constructor(e){super({readableObjectMode:!0}),e=e||{},this.options=e,this.parsingContext=new C.ParsingContext(Object.assign({parser:this},e)),this.util=new w.Util({dataFactory:e.dataFactory,parsingContext:this.parsingContext}),this.jsonParser=new n,this.contextJobs=[],this.typeJobs=[],this.contextAwaitingJobs=[],this.lastDepth=0,this.lastKeys=[],this.lastOnValueJob=Promise.resolve(),this.attachJsonParserListeners(),this.on("end",(()=>{"undefined"!==typeof this.jsonParser.mode&&this.emit("error",new Error("Unclosed document"))}))}static fromHttpResponse(e,t,r,n){let a,o;if("application/ld+json"!==t){if("application/json"!==t&&!t.endsWith("+json"))throw new i.ErrorCoded(`Unsupported JSON-LD media type ${t}`,i.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(r&&r.has("Link")&&r.forEach(((t,r)=>{if("link"===r){const r=I.parse(t);for(const t of r.get("rel","http://www.w3.org/ns/json-ld#context")){if(a)throw new i.ErrorCoded("Multiple JSON-LD context link headers were found on "+e,i.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);a=t.uri}}})),!a&&!(null===n||void 0===n?void 0:n.ignoreMissingContextLinkHeader))throw new i.ErrorCoded(`Missing context link header for media type ${t} on ${e}`,i.ERROR_CODES.LOADING_DOCUMENT_FAILED)}if(r&&r.has("Content-Type")){const e=r.get("Content-Type"),t=/; *profile=([^"]*)/.exec(e);t&&"http://www.w3.org/ns/json-ld#streaming"===t[1]&&(o=!0)}return new _(Object.assign({baseIRI:e,context:a,streamingProfile:o},n||{}))}import(e){const t=new a.PassThrough({readableObjectMode:!0});e.on("error",(e=>r.emit("error",e))),e.on("data",(e=>t.push(e))),e.on("end",(()=>t.push(null)));const r=t.pipe(new _(this.options));return r}_transform(e,t,r){this.jsonParser.write(e),this.lastOnValueJob.then((()=>r()),(e=>r(e)))}async newOnValueJob(e,t,r,n){let a=!0;if(n&&r<this.lastDepth){const e=this.parsingContext.listPointerStack[this.lastDepth];e&&(e.value&&this.emit("data",this.util.dataFactory.quad(e.value,this.util.rdfRest,this.util.rdfNil,this.util.getDefaultGraph())),e.listId.listHead=!0,this.parsingContext.idStack[e.listRootDepth+1]=[e.listId],this.parsingContext.listPointerStack.splice(this.lastDepth,1)),await s.EntryHandlerContainer.isBufferableContainerHandler(this.parsingContext,this.lastKeys,this.lastDepth)?(this.parsingContext.pendingContainerFlushBuffers.push({depth:this.lastDepth,keys:this.lastKeys.slice(0,this.lastKeys.length)}),a=!1):await this.flushBuffer(this.lastDepth,this.lastKeys)}const o=await this.util.unaliasKeyword(e[r],e,r),l=await this.util.unaliasKeywordParent(e,r);this.parsingContext.emittedStack[r]=!0;let d=!0;i.Util.isValidKeyword(o)&&"@reverse"===l&&"@context"!==o&&this.emit("error",new i.ErrorCoded(`Found the @id '${t}' inside an @reverse property`,i.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP));let c=!1;this.parsingContext.validationStack.length>1&&(c=this.parsingContext.validationStack[this.parsingContext.validationStack.length-1].property);for(let i=Math.max(1,this.parsingContext.validationStack.length-1);i<e.length-1;i++){const t=this.parsingContext.validationStack[i]||(this.parsingContext.validationStack[i]=await this.validateKey(e.slice(0,i+1),i,c));if(!t.valid){this.parsingContext.emittedStack[r]=!1,d=!1;break}!c&&t.property&&(c=!0)}if(this.util.isLiteral(r)&&(d=!1),d)for(const i of _.ENTRY_HANDLERS){const n=await i.test(this.parsingContext,this.util,o,e,r);if(n){await i.handle(this.parsingContext,this.util,o,e,t,r,n),i.isStackProcessor()&&(this.parsingContext.processingStack[r]=!0);break}}0===r&&Array.isArray(t)&&await this.util.validateValueIndexes(t),a&&r<this.lastDepth&&this.flushStacks(this.lastDepth),this.lastDepth=r,this.lastKeys=e,this.parsingContext.unaliasedKeywordCacheStack.splice(r-1)}flushStacks(e){this.parsingContext.processingStack.splice(e,1),this.parsingContext.processingType.splice(e,1),this.parsingContext.emittedStack.splice(e,1),this.parsingContext.idStack.splice(e,1),this.parsingContext.graphStack.splice(e+1,1),this.parsingContext.graphContainerTermStack.splice(e,1),this.parsingContext.jsonLiteralStack.splice(e,1),this.parsingContext.validationStack.splice(e-1,2),this.parsingContext.literalStack.splice(e,this.parsingContext.literalStack.length-e)}async flushBuffer(e,t){let r=this.parsingContext.idStack[e];r||(r=this.parsingContext.idStack[e]=[this.util.dataFactory.blankNode()]);const n=this.parsingContext.unidentifiedValuesBuffer[e];if(n){for(const i of r){const r=await this.util.getDepthOffsetGraph(e,t),a=this.parsingContext.graphStack[e]||r>=0?this.parsingContext.idStack[e-r-1]:[await this.util.getGraphContainerValue(t,e)];if(a)for(const t of a){this.parsingContext.emittedStack[e]=!0;for(const r of n)r.reverse?this.parsingContext.emitQuad(e,this.util.dataFactory.quad(r.object,r.predicate,i,t)):this.parsingContext.emitQuad(e,this.util.dataFactory.quad(i,r.predicate,r.object,t))}else{const r=this.parsingContext.getUnidentifiedGraphBufferSafe(e-await this.util.getDepthOffsetGraph(e,t)-1);for(const e of n)e.reverse?r.push({object:i,predicate:e.predicate,subject:e.object}):r.push({object:e.object,predicate:e.predicate,subject:i})}}this.parsingContext.unidentifiedValuesBuffer.splice(e,1),this.parsingContext.literalStack.splice(e,1),this.parsingContext.jsonLiteralStack.splice(e,1)}const i=this.parsingContext.unidentifiedGraphsBuffer[e];if(i){for(const t of r){const r=1!==e||"BlankNode"!==t.termType||this.parsingContext.topLevelProperties?t:this.util.getDefaultGraph();this.parsingContext.emittedStack[e]=!0;for(const t of i)this.parsingContext.emitQuad(e,this.util.dataFactory.quad(t.subject,t.predicate,t.object,r))}this.parsingContext.unidentifiedGraphsBuffer.splice(e,1)}}async validateKey(e,t,r){for(const n of _.ENTRY_HANDLERS)if(await n.validate(this.parsingContext,this.util,e,t,r))return{valid:!0,property:r||n.isPropertyHandler()};return{valid:!1,property:!1}}attachJsonParserListeners(){this.jsonParser.onValue=e=>{const t=this.jsonParser.stack.length,r=new Array(t+1).fill(0).map(((e,r)=>r===t?this.jsonParser.key:this.jsonParser.stack[r].key));if(!this.isParsingContextInner(t)){const n=()=>this.newOnValueJob(r,e,t,!0);if(this.parsingContext.streamingProfile||this.parsingContext.contextTree.getContext(r.slice(0,-1)))this.lastOnValueJob=this.lastOnValueJob.then(n);else if("@context"===r[t]){let e=this.contextJobs[t];e||(e=this.contextJobs[t]=[]),e.push(n)}else"@type"===r[t]||"number"===typeof r[t]&&"@type"===r[t-1]?this.typeJobs.push({job:n,keys:r.slice(0,r.length-1)}):this.contextAwaitingJobs.push({job:n,keys:r});this.parsingContext.streamingProfile||0!==t||(this.lastOnValueJob=this.lastOnValueJob.then((()=>this.executeBufferedJobs())))}},this.jsonParser.onError=e=>{this.emit("error",e)}}isParsingContextInner(e){for(let t=e;t>0;t--)if("@context"===this.jsonParser.stack[t-1].key)return!0;return!1}async executeBufferedJobs(){for(const e of this.contextJobs)if(e)for(const t of e)await t();this.parsingContext.unaliasedKeywordCacheStack.splice(0);for(const e of this.contextAwaitingJobs){if(this.typeJobs.length>0){const t=[],r=[];for(let a=0;a<this.typeJobs.length;a++){const n=this.typeJobs[a];w.Util.isPrefixArray(n.keys,e.keys)&&(t.push(n),r.push(a))}const n=t.sort(((e,t)=>e.keys.length-t.keys.length));for(const e of n)await e.job();const i=r.sort().reverse();for(const e of i)this.typeJobs.splice(e,1)}await e.job()}}}t.JsonLdParser=_,_.DEFAULT_PROCESSING_MODE="1.1",_.ENTRY_HANDLERS=[new o.EntryHandlerArrayValue,new c.EntryHandlerKeywordContext,new f.EntryHandlerKeywordId,new h.EntryHandlerKeywordIncluded,new u.EntryHandlerKeywordGraph,new p.EntryHandlerKeywordNest,new g.EntryHandlerKeywordType,new E.EntryHandlerKeywordValue,new s.EntryHandlerContainer,new y.EntryHandlerKeywordUnknownFallback,new d.EntryHandlerPredicate,new l.EntryHandlerInvalidFallback]},51478:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParsingContext=void 0;const n=r(11288),i=r(87011),a=r(98386),o=r(55170);class s{constructor(e){this.contextParser=new n.ContextParser({documentLoader:e.documentLoader,skipValidation:e.skipContextValidation}),this.streamingProfile=!!e.streamingProfile,this.baseIRI=e.baseIRI,this.produceGeneralizedRdf=!!e.produceGeneralizedRdf,this.allowSubjectList=!!e.allowSubjectList,this.processingMode=e.processingMode||o.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!e.strictValues,this.validateValueIndexes=!!e.validateValueIndexes,this.defaultGraph=e.defaultGraph,this.rdfDirection=e.rdfDirection,this.normalizeLanguageTags=e.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=e.streamingProfileAllowOutOfOrderPlainType,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new a.ContextTree,this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=e.parser,e.context?(this.rootContext=this.parseContext(e.context),this.rootContext.then((e=>this.validateContext(e)))):this.rootContext=Promise.resolve(new n.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}))}async parseContext(e,t,r){return this.contextParser.parse(e,{baseIRI:this.baseIRI,ignoreProtection:r,normalizeLanguageTags:this.normalizeLanguageTags,parentContext:t,processingMode:this.activeProcessingMode})}validateContext(e){const t=e.getContextRaw()["@version"];if(t){if(this.activeProcessingMode&&t>this.activeProcessingMode)throw new i.ErrorCoded(`Unsupported JSON-LD version '${t}' under active processing mode ${this.activeProcessingMode}.`,i.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&t<this.activeProcessingMode)throw new i.ErrorCoded(`Invalid JSON-LD version ${t} under active processing mode ${this.activeProcessingMode}.`,i.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=t}}async getContext(e,t=1){const r=e;while("number"===typeof e[e.length-1])e=e.slice(0,e.length-1);t&&(e=e.slice(0,-t));const i=await this.getContextPropagationAware(e),a=i.context;let o=a.getContextRaw();for(let s=i.depth;s<r.length-t;s++){const e=r[s],i=o[e];if(i&&"object"===typeof i&&"@context"in i){const a=(await this.parseContext(i,o,!0)).getContextRaw(),l=!(e in a)||a[e]["@context"]["@propagate"];!1===l&&s!==r.length-1-t||(o=a,delete o["@propagate"],o[e]=Object.assign({},o[e]),"@id"in i&&(o[e]["@id"]=i["@id"]),delete o[e]["@context"],!1!==l&&this.contextTree.setContext(r.slice(0,s+t),Promise.resolve(new n.JsonLdContextNormalized(o))))}}return new n.JsonLdContextNormalized(o)}async getContextPropagationAware(e){const t=e.length;let r,i=null;do{r=!1,i&&"@__propagateFallback"in i.context.getContextRaw()?i.context=new n.JsonLdContextNormalized(i.context.getContextRaw()["@__propagateFallback"]):(i&&(e=e.slice(0,i.depth-1)),i=await this.contextTree.getContext(e)||{context:await this.rootContext,depth:0});const t=e[e.length-1];if(t in i.context.getContextRaw()){const e=i.context.getContextRaw()[t];e&&"object"===typeof e&&"@context"in e&&(r=!0)}}while(i.depth>0&&!1===i.context.getContextRaw()["@propagate"]&&i.depth!==t&&!r);return 0===i.depth&&!1===i.context.getContextRaw()["@propagate"]&&i.depth!==t&&(i.context=new n.JsonLdContextNormalized({})),i}async newOnValueJob(e,t,r,n){await this.parser.newOnValueJob(e,t,r,n)}async handlePendingContainerFlushBuffers(){if(this.pendingContainerFlushBuffers.length>0){for(const e of this.pendingContainerFlushBuffers)await this.parser.flushBuffer(e.depth,e.keys),this.parser.flushStacks(e.depth);return this.pendingContainerFlushBuffers.splice(0,this.pendingContainerFlushBuffers.length),!0}return!1}emitQuad(e,t){1===e&&(this.topLevelProperties=!0),this.parser.push(t)}emitError(e){this.parser.emit("error",e)}emitContext(e){this.parser.emit("context",e)}getUnidentifiedValueBufferSafe(e){let t=this.unidentifiedValuesBuffer[e];return t||(t=[],this.unidentifiedValuesBuffer[e]=t),t}getUnidentifiedGraphBufferSafe(e){let t=this.unidentifiedGraphsBuffer[e];return t||(t=[],this.unidentifiedGraphsBuffer[e]=t),t}getExpandOptions(){return s.EXPAND_OPTIONS[this.activeProcessingMode]}shiftStack(e,t){const r=this.idStack[e+t];if(r&&(this.idStack[e]=r,this.emittedStack[e]=!0,delete this.idStack[e+t]),this.pendingContainerFlushBuffers.length)for(const n of this.pendingContainerFlushBuffers)n.depth>=e+t&&(n.depth-=t,n.keys.splice(e,t));this.unidentifiedValuesBuffer[e+t]&&(this.unidentifiedValuesBuffer[e]=this.unidentifiedValuesBuffer[e+t],delete this.unidentifiedValuesBuffer[e+t])}}t.ParsingContext=s,s.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}}},22754:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;const n=r(11288),i=r(41640),a=r(36753),o=r(95456);class s{constructor(e){this.parsingContext=e.parsingContext,this.dataFactory=e.dataFactory||new i.DataFactory,this.rdfFirst=this.dataFactory.namedNode(s.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(s.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(s.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(s.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(s.RDF+"JSON")}static getContextValue(e,t,r,n){const i=e.getContextRaw()[r];if(!i)return n;const a=i[t];return void 0===a?n:a}static getContextValueContainer(e,t){return s.getContextValue(e,"@container",t,{"@set":!0})}static getContextValueType(e,t){const r=s.getContextValue(e,"@type",t,null);return"@none"===r?null:r}static getContextValueLanguage(e,t){return s.getContextValue(e,"@language",t,e.getContextRaw()["@language"]||null)}static getContextValueDirection(e,t){return s.getContextValue(e,"@direction",t,e.getContextRaw()["@direction"]||null)}static isContextValueReverse(e,t){return!!s.getContextValue(e,"@reverse",t,null)}static getContextValueIndex(e,t){return s.getContextValue(e,"@index",t,e.getContextRaw()["@index"]||null)}static isPropertyReverse(e,t,r){return"@reverse"===r!==s.isContextValueReverse(e,t)}static isValidIri(e){return null!==e&&n.Util.isValidIri(e)}static isPrefixArray(e,t){if(e.length>t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}async validateValueIndexes(e){if(this.parsingContext.validateValueIndexes){const t={};for(const r of e)if(r&&"object"===typeof r){const e=r["@id"],i=r["@index"];if(e&&i){const r=t[e];if(r&&r!==i)throw new n.ErrorCoded(`Conflicting @index value for ${e}`,n.ERROR_CODES.CONFLICTING_INDEXES);t[e]=i}}}}async valueToTerm(e,t,r,i,a){if("@json"===s.getContextValueType(e,t))return[this.dataFactory.literal(this.valueToJsonString(r),this.rdfJson)];const o=typeof r;switch(o){case"object":if(null===r||void 0===r)return[];if(Array.isArray(r))return"@list"in s.getContextValueContainer(e,t)?0===r.length?[this.rdfNil]:this.parsingContext.idStack[i+1]||[]:(await this.validateValueIndexes(r),[]);if(e=await this.getContextSelfOrPropertyScoped(e,t),"@context"in r&&(e=await this.parsingContext.parseContext(r["@context"],(await this.parsingContext.getContext(a,0)).getContextRaw())),r=await this.unaliasKeywords(r,a,i,e),"@value"in r){let o,s,l,d,c;for(t in r){const e=r[t];switch(t){case"@value":o=e;break;case"@language":s=e;break;case"@direction":l=e;break;case"@type":d=e;break;case"@index":c=e;break;default:throw new n.ErrorCoded(`Unknown value entry '${t}' in @value: ${JSON.stringify(r)}`,n.ERROR_CODES.INVALID_VALUE_OBJECT)}}if("@json"===await this.unaliasKeyword(d,a,i,!0,e))return[this.dataFactory.literal(this.valueToJsonString(o),this.rdfJson)];if(null===o)return[];if("object"===typeof o)throw new n.ErrorCoded(`The value of an '@value' can not be an object, got '${JSON.stringify(o)}'`,n.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);if(this.parsingContext.validateValueIndexes&&c&&"string"!==typeof c)throw new n.ErrorCoded(`The value of an '@index' must be a string, got '${JSON.stringify(c)}'`,n.ERROR_CODES.INVALID_INDEX_VALUE);if(s){if("string"!==typeof o)throw new n.ErrorCoded(`When an '@language' is set, the value of '@value' must be a string, got '${JSON.stringify(o)}'`,n.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);if(!n.ContextParser.validateLanguage(s,this.parsingContext.strictValues,n.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING))return[];(this.parsingContext.normalizeLanguageTags||1===this.parsingContext.activeProcessingMode)&&(s=s.toLowerCase())}if(l){if("string"!==typeof o)throw new Error(`When an '@direction' is set, the value of '@value' must be a string, got '${JSON.stringify(o)}'`);if(!n.ContextParser.validateDirection(l,this.parsingContext.strictValues))return[]}if(s&&l&&this.parsingContext.rdfDirection){if(d)throw new n.ErrorCoded(`Can not have '@language', '@direction' and '@type' in a value: '${JSON.stringify(r)}'`,n.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(i,o,s,l))}if(s){if(d)throw new n.ErrorCoded(`Can not have both '@language' and '@type' in a value: '${JSON.stringify(r)}'`,n.ERROR_CODES.INVALID_VALUE_OBJECT);return[this.dataFactory.literal(o,s)]}if(l&&this.parsingContext.rdfDirection){if(d)throw new n.ErrorCoded(`Can not have both '@direction' and '@type' in a value: '${JSON.stringify(r)}'`,n.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(i,o,s,l))}if(d){if("string"!==typeof d)throw new n.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_TYPED_VALUE);const t=this.createVocabOrBaseTerm(e,d);if(!t)throw new n.ErrorCoded(`Invalid '@type' value, got '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_TYPED_VALUE);if("NamedNode"!==t.termType)throw new n.ErrorCoded(`Illegal value type (${t.termType}): ${d}`,n.ERROR_CODES.INVALID_TYPED_VALUE);return[this.dataFactory.literal(o,t)]}return await this.valueToTerm(new n.JsonLdContextNormalized({}),t,o,i,a)}if("@set"in r){if(Object.keys(r).length>1)throw new n.ErrorCoded(`Found illegal neighbouring entries next to @set for key: '${t}'`,n.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);return[]}if("@list"in r){if(Object.keys(r).length>1)throw new n.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${t}'`,n.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);const e=r["@list"];return Array.isArray(e)?0===e.length?[this.rdfNil]:this.parsingContext.idStack[i+1]||[]:await this.valueToTerm(await this.parsingContext.getContext(a),t,e,i-1,a.slice(0,-1))}if("@reverse"in r&&"boolean"===typeof r["@reverse"])return[];if("@graph"in s.getContextValueContainer(await this.parsingContext.getContext(a),t)){const e=this.parsingContext.graphContainerTermStack[i+1];return e?Object.values(e):[this.dataFactory.blankNode()]}return"@id"in r?(Object.keys(r).length>1&&(e=await this.parsingContext.getContext(a,0)),"@context"in r&&(e=await this.parsingContext.parseContext(r["@context"],e.getContextRaw())),"@vocab"===r["@type"]?this.nullableTermToArray(this.createVocabOrBaseTerm(e,r["@id"])):this.nullableTermToArray(this.resourceToTerm(e,r["@id"]))):this.parsingContext.emittedStack[i+1]||r&&"object"===typeof r&&0===Object.keys(r).length?this.parsingContext.idStack[i+1]||(this.parsingContext.idStack[i+1]=[this.dataFactory.blankNode()]):[];case"string":return this.nullableTermToArray(this.stringValueToTerm(i,await this.getContextSelfOrPropertyScoped(e,t),t,r,null));case"boolean":return this.nullableTermToArray(this.stringValueToTerm(i,await this.getContextSelfOrPropertyScoped(e,t),t,Boolean(r).toString(),this.dataFactory.namedNode(s.XSD_BOOLEAN)));case"number":return this.nullableTermToArray(this.stringValueToTerm(i,await this.getContextSelfOrPropertyScoped(e,t),t,r,this.dataFactory.namedNode(r%1===0&&r<1e21?s.XSD_INTEGER:s.XSD_DOUBLE)));default:return this.parsingContext.emitError(new Error(`Could not determine the RDF type of a ${o}`)),[]}}async getContextSelfOrPropertyScoped(e,t){const r=e.getContextRaw()[t];return r&&"object"===typeof r&&"@context"in r&&(e=await this.parsingContext.parseContext(r,e.getContextRaw(),!0)),e}nullableTermToArray(e){return e?[e]:[]}predicateToTerm(e,t){const r=e.expandTerm(t,!0,this.parsingContext.getExpandOptions());return r?"_"===r[0]&&":"===r[1]?this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(r.substr(2)):null:s.isValidIri(r)?this.dataFactory.namedNode(r):r&&this.parsingContext.strictValues?(this.parsingContext.emitError(new n.ErrorCoded(`Invalid predicate IRI: ${r}`,n.ERROR_CODES.INVALID_IRI_MAPPING)),null):null:null}resourceToTerm(e,t){if(t.startsWith("_:"))return this.dataFactory.blankNode(t.substr(2));const r=e.expandTerm(t,!1,this.parsingContext.getExpandOptions());if(!s.isValidIri(r)){if(!r||!this.parsingContext.strictValues)return null;this.parsingContext.emitError(new Error(`Invalid resource IRI: ${r}`))}return this.dataFactory.namedNode(r)}createVocabOrBaseTerm(e,t){if(t.startsWith("_:"))return this.dataFactory.blankNode(t.substr(2));const r=this.parsingContext.getExpandOptions();let n=e.expandTerm(t,!0,r);if(n===t&&(n=e.expandTerm(t,!1,r)),!s.isValidIri(n)){if(!n||!this.parsingContext.strictValues||n.startsWith("@"))return null;this.parsingContext.emitError(new Error(`Invalid term IRI: ${n}`))}return this.dataFactory.namedNode(n)}intToString(e,t){if("number"===typeof e){if(Number.isFinite(e)){const r=e%1===0;return!r||t&&t.value===s.XSD_DOUBLE?e.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):Number(e).toString()}return e>0?"INF":"-INF"}return e}stringValueToTerm(e,t,r,n,i){const a=s.getContextValueType(t,r);if(a)if("@id"===a){if(!i)return this.resourceToTerm(t,this.intToString(n,i))}else if("@vocab"===a){if(!i)return this.createVocabOrBaseTerm(t,this.intToString(n,i))}else i=this.dataFactory.namedNode(a);if(!i){const a=s.getContextValueLanguage(t,r),o=s.getContextValueDirection(t,r);return o&&this.parsingContext.rdfDirection?this.createLanguageDirectionLiteral(e,this.intToString(n,i),a,o):this.dataFactory.literal(this.intToString(n,i),a)}return this.dataFactory.literal(this.intToString(n,i),i)}createLanguageDirectionLiteral(e,t,r,n){if("i18n-datatype"===this.parsingContext.rdfDirection)return r||(r=""),this.dataFactory.literal(t,this.dataFactory.namedNode(`https://www.w3.org/ns/i18n#${r}_${n}`));{const i=this.dataFactory.blankNode(),a=this.getDefaultGraph();return this.parsingContext.emitQuad(e,this.dataFactory.quad(i,this.dataFactory.namedNode(s.RDF+"value"),this.dataFactory.literal(t),a)),r&&this.parsingContext.emitQuad(e,this.dataFactory.quad(i,this.dataFactory.namedNode(s.RDF+"language"),this.dataFactory.literal(r),a)),this.parsingContext.emitQuad(e,this.dataFactory.quad(i,this.dataFactory.namedNode(s.RDF+"direction"),this.dataFactory.literal(n),a)),i}}valueToJsonString(e){return o(e)}async unaliasKeyword(e,t,r,i,a){if(Number.isInteger(e))return e;if(!i){const e=this.parsingContext.unaliasedKeywordCacheStack[r];if(e)return e}if(!n.Util.isPotentialKeyword(e)){a=a||await this.parsingContext.getContext(t);let r=a.getContextRaw()[e];r&&"object"===typeof r&&(r=r["@id"]),n.Util.isValidKeyword(r)&&(e=r)}return i?e:this.parsingContext.unaliasedKeywordCacheStack[r]=e}async unaliasKeywordParent(e,t){return await this.unaliasKeyword(t>0&&e[t-1],e,t-1)}async unaliasKeywords(e,t,r,n){const i={};for(const a in e)i[await this.unaliasKeyword(a,t,r+1,!0,n)]=e[a];return i}isLiteral(e){for(let t=e;t>=0;t--)if(this.parsingContext.literalStack[t]||this.parsingContext.jsonLiteralStack[t])return!0;return!1}async getDepthOffsetGraph(e,t){for(let r=e-1;r>0;r--)if("@graph"===await this.unaliasKeyword(t[r],t,r)){const n=(await a.EntryHandlerContainer.getContainerHandler(this.parsingContext,t,r)).containers;return a.EntryHandlerContainer.isComplexGraphContainer(n)?-1:e-r-1}return-1}validateReverseSubject(e){if("Literal"===e.termType)throw new n.ErrorCoded(`Found illegal literal in subject position: ${e.value}`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}getDefaultGraph(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph()}async getGraphContainerValue(e,t){let r=this.getDefaultGraph();const{containers:n,depth:i}=await a.EntryHandlerContainer.getContainerHandler(this.parsingContext,e,t);if("@graph"in n){const t=a.EntryHandlerContainer.getContainerGraphIndex(n,i,e),o=this.parsingContext.graphContainerTermStack[i];if(r=o?o[t]:null,!r){let a=null;if("@id"in n){const t=await this.getContainerKey(e[i],e,i);null!==t&&(a=await this.resourceToTerm(await this.parsingContext.getContext(e),t))}a||(a=this.dataFactory.blankNode()),this.parsingContext.graphContainerTermStack[i]||(this.parsingContext.graphContainerTermStack[i]={}),r=this.parsingContext.graphContainerTermStack[i][t]=a}}return r}async getPropertiesDepth(e,t){let r=t;for(let n=t-1;n>0;n--)if("number"!==typeof e[n]){const t=await this.unaliasKeyword(e[n],e,n);if("@reverse"===t)return n;if("@nest"!==t)return r;r=n}return r}async getContainerKey(e,t,r){const n=await this.unaliasKeyword(e,t,r);return"@none"===n?null:n}}t.Util=s,s.XSD="http://www.w3.org/2001/XMLSchema#",s.XSD_BOOLEAN=s.XSD+"boolean",s.XSD_INTEGER=s.XSD+"integer",s.XSD_DOUBLE=s.XSD+"double",s.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#"},70496:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerHandlerIdentifier=void 0;class r{canCombineWithGraph(){return!0}async handle(e,t,r,n,i,a){let o;if(t.emittedStack[a+1]&&t.idStack[a+1])o=t.idStack[a+1][0];else{const e=await r.getContainerKey(n[a],n,a),i=null!==e?await r.resourceToTerm(await t.getContext(n),n[a]):r.dataFactory.blankNode();if(!i)return void(t.emittedStack[a]=!1);o=i,t.idStack[a+1]=[o]}let s=t.idStack[a];s||(s=t.idStack[a]=[]),s.some((e=>e.equals(o)))||s.push(o),await t.handlePendingContainerFlushBuffers()||(t.emittedStack[a]=!1)}}t.ContainerHandlerIdentifier=r},34910:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerHandlerIndex=void 0;const n=r(11288),i=r(49488),a=r(22754);class o{canCombineWithGraph(){return!0}async handle(e,t,r,o,s,l){if(!Array.isArray(s)){const d="@graph"in e,c=await t.getContext(o),u=o[l-1],f=a.Util.getContextValueIndex(c,u);if(f){if(n.Util.isPotentialKeyword(f))throw new n.ErrorCoded(`Keywords can not be used as @index value, got: ${f}`,n.ERROR_CODES.INVALID_TERM_DEFINITION);if("string"!==typeof f)throw new n.ErrorCoded(`@index values must be strings, got: ${f}`,n.ERROR_CODES.INVALID_TERM_DEFINITION);if("object"!==typeof s){if("@id"!==a.Util.getContextValueType(c,u))throw new n.ErrorCoded(`Property-based index containers require nodes as values or strings with @type: @id, but got: ${s}`,n.ERROR_CODES.INVALID_VALUE_OBJECT);const e=r.resourceToTerm(c,s);e&&(t.idStack[l+1]=[e])}const e=r.createVocabOrBaseTerm(c,f);if(e){const n=await r.valueToTerm(c,f,await r.getContainerKey(o[l],o,l),l,o);if(d){const i=await r.getGraphContainerValue(o,l+1);for(const a of n)t.emitQuad(l,r.dataFactory.quad(i,e,a,r.getDefaultGraph()))}else for(const a of n)await i.EntryHandlerPredicate.handlePredicateObject(t,r,o,l+1,e,a,!1)}}const h=d?2:1;await t.newOnValueJob(o.slice(0,o.length-h),s,l-h,!0),await t.handlePendingContainerFlushBuffers()}t.emittedStack[l]=!1}}t.ContainerHandlerIndex=o},33275:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerHandlerLanguage=void 0;const n=r(11288);class i{canCombineWithGraph(){return!1}async handle(e,t,r,i,a,o){const s=await r.getContainerKey(i[o],i,o);if(Array.isArray(a))a=a.map((e=>({"@value":e,"@language":s})));else{if("string"!==typeof a)throw new n.ErrorCoded(`Got invalid language map value, got '${JSON.stringify(a)}', but expected string`,n.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);a={"@value":a,"@language":s}}await t.newOnValueJob(i.slice(0,i.length-1),a,o-1,!0),t.emittedStack[o]=!1}}t.ContainerHandlerLanguage=i},8358:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerHandlerType=void 0;const n=r(49488),i=r(22754);class a{canCombineWithGraph(){return!1}async handle(e,t,r,a,o,s){if(!Array.isArray(o)){if("string"===typeof o){const e=await t.getContext(a),n=i.Util.getContextValueType(e,a[s-1]),l="@vocab"===n?await r.createVocabOrBaseTerm(e,o):await r.resourceToTerm(e,o);if(l){const e={"@id":"NamedNode"===l.termType?l.value:o};await t.newOnValueJob(a.slice(0,a.length-1),e,s-1,!0),t.idStack[s+1]=[l]}}else{const e=!!t.idStack[s+1];e||delete t.idStack[s],await t.newOnValueJob(a.slice(0,a.length-1),o,s-1,!0),e||(t.idStack[s+1]=t.idStack[s])}const e=await r.getContainerKey(a[s],a,s),l=null!==e?r.createVocabOrBaseTerm(await t.getContext(a),e):null;l&&await n.EntryHandlerPredicate.handlePredicateObject(t,r,a,s+1,r.rdfType,l,!1),await t.handlePendingContainerFlushBuffers()}t.emittedStack[s]=!1}}t.ContainerHandlerType=a},81889:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerArrayValue=void 0;const n=r(22754);class i{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(e,t,r,n,i){return this.test(e,t,null,r,n)}async test(e,t,r,n,i){return"number"===typeof n[i]}async handle(e,t,r,i,a,o){let s=await t.unaliasKeywordParent(i,o);if("@list"===s){let r=null,n=0;for(let e=o-2;e>0;e--){const t=i[e];if("string"===typeof t||"number"===typeof t){n=e,r=t;break}}if(null!==r){const s=await t.valueToTerm(await e.getContext(i),r,a,o,i);for(const r of s)await this.handleListElement(e,t,r,a,o,i.slice(0,n),n);0===s.length&&await this.handleListElement(e,t,null,a,o,i.slice(0,n),n)}}else if("@set"===s)await e.newOnValueJob(i.slice(0,-2),a,o-2,!1);else if(void 0!==s&&"@type"!==s){for(let e=o-1;e>0;e--)if("number"!==typeof i[e]){s=await t.unaliasKeyword(i[e],i,e);break}const r=await e.getContext(i.slice(0,-1));if("@list"in n.Util.getContextValueContainer(r,s)){e.emittedStack[o+1]=!0;const r=await t.valueToTerm(await e.getContext(i),s,a,o,i);for(const n of r)await this.handleListElement(e,t,n,a,o,i.slice(0,-1),o-1);0===r.length&&await this.handleListElement(e,t,null,a,o,i.slice(0,-1),o-1)}else e.shiftStack(o,1),await e.newOnValueJob(i.slice(0,-1),a,o-1,!1),e.contextTree.removeContext(i.slice(0,-1))}}async handleListElement(e,t,r,n,i,a,o){let s=e.listPointerStack[i];if(null!==n&&null!==(await t.unaliasKeywords(n,a,i))["@value"]){if(s&&s.value){const r=t.dataFactory.blankNode();e.emitQuad(i,t.dataFactory.quad(s.value,t.rdfRest,r,t.getDefaultGraph())),s.value=r}else{const e=t.dataFactory.blankNode();s={value:e,listRootDepth:o,listId:e}}r&&e.emitQuad(i,t.dataFactory.quad(s.value,t.rdfFirst,r,t.getDefaultGraph()))}else s||(s={listRootDepth:o,listId:t.rdfNil});e.listPointerStack[i]=s}}t.EntryHandlerArrayValue=i},36753:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerContainer=void 0;const n=r(70496),i=r(34910),a=r(33275),o=r(8358),s=r(22754);class l{static isSimpleGraphContainer(e){return"@graph"in e&&("@set"in e&&2===Object.keys(e).length||1===Object.keys(e).length)}static isComplexGraphContainer(e){return"@graph"in e&&("@set"in e&&Object.keys(e).length>2||!("@set"in e)&&Object.keys(e).length>1)}static getContainerGraphIndex(e,t,r){let n=l.isSimpleGraphContainer(e),i="";for(let a=t;a<r.length;a++)n&&"number"!==typeof r[a]||(i+=":"+r[a]),n||"number"===typeof r[a]||(n=!0);return i}static async getContainerHandler(e,t,r){const n={containers:{"@set":!0},depth:r,fallback:!0};let i=!1;const a=await e.getContext(t,2);for(let o=r-1;o>=0;o--)if("number"!==typeof t[o]){const e=s.Util.getContextValue(a,"@container",t[o],!1);if(e&&l.isSimpleGraphContainer(e))return{containers:e,depth:o+1,fallback:!1};const r=s.Util.getContextValue(a,"@container",t[o-1],!1);if(r){const e="@graph"in r;for(const t in l.CONTAINER_HANDLERS)if(r[t])return e?l.CONTAINER_HANDLERS[t].canCombineWithGraph()?{containers:r,depth:o,fallback:!1}:n:i?n:{containers:r,depth:o,fallback:!1};return n}if(i)return n;i=!0}return n}static async isBufferableContainerHandler(e,t,r){const n=await l.getContainerHandler(e,t,r);return!n.fallback&&!("@graph"in n.containers)}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(e,t,r,n,i){return!!await this.test(e,t,null,r,n)}async test(e,t,r,n,i){const a=s.Util.getContextValueContainer(await e.getContext(n,2),n[i-1]);for(const o in l.CONTAINER_HANDLERS)if(a[o])return{containers:a,handler:l.CONTAINER_HANDLERS[o]};return null}async handle(e,t,r,n,i,a,o){return o.handler.handle(o.containers,e,t,n,i,a)}}t.EntryHandlerContainer=l,l.CONTAINER_HANDLERS={"@id":new n.ContainerHandlerIdentifier,"@index":new i.ContainerHandlerIndex,"@language":new a.ContainerHandlerLanguage,"@type":new o.ContainerHandlerType}},38215:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerInvalidFallback=void 0;class r{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(e,t,r,n,i){return!1}async test(e,t,r,n,i){return!0}async handle(e,t,r,n,i,a){e.emittedStack[a]=!1}}t.EntryHandlerInvalidFallback=r},49488:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerPredicate=void 0;const n=r(11288),i=r(22754);class a{static async handlePredicateObject(e,t,r,n,i,a,o){const s=await t.getPropertiesDepth(r,n),l=await t.getDepthOffsetGraph(n,r),d=n-l,c=e.idStack[s];if(c)for(const u of c){const c=l>=0;if(c){const r=e.idStack[d-1];if(r)for(const s of r)o?(t.validateReverseSubject(a),e.emitQuad(n,t.dataFactory.quad(a,i,u,s))):e.emitQuad(n,t.dataFactory.quad(u,i,a,s));else o?(t.validateReverseSubject(a),e.getUnidentifiedGraphBufferSafe(d-1).push({subject:a,predicate:i,object:u})):e.getUnidentifiedGraphBufferSafe(d-1).push({subject:u,predicate:i,object:a})}else{const l=await t.getGraphContainerValue(r,s);o?(t.validateReverseSubject(a),e.emitQuad(n,t.dataFactory.quad(a,i,u,l))):e.emitQuad(n,t.dataFactory.quad(u,i,a,l))}}else o&&t.validateReverseSubject(a),e.getUnidentifiedValueBufferSafe(s).push({predicate:i,object:a,reverse:o})}isPropertyHandler(){return!0}isStackProcessor(){return!0}async validate(e,t,r,n,a){const o=r[n];if(o){const a=await e.getContext(r);if(!e.jsonLiteralStack[n]&&await t.predicateToTerm(a,r[n]))return"@json"===i.Util.getContextValueType(a,o)&&(e.jsonLiteralStack[n+1]=!0),!0}return!1}async test(e,t,r,n,i){return n[i]}async handle(e,t,r,o,s,l,d){const c=o[l],u=await e.getContext(o),f=await t.predicateToTerm(u,r);if(f){const d=await t.valueToTerm(u,r,s,l,o);if(d.length)for(let h of d){const d=i.Util.isPropertyReverse(u,c,await t.unaliasKeywordParent(o,l));if(s){const a="@list"in i.Util.getContextValueContainer(u,r);if(a||s["@list"]){if((a&&!Array.isArray(s)&&!s["@list"]||s["@list"]&&!Array.isArray(s["@list"]))&&h!==t.rdfNil){const r=t.dataFactory.blankNode();e.emitQuad(l,t.dataFactory.quad(r,t.rdfRest,t.rdfNil,t.getDefaultGraph())),e.emitQuad(l,t.dataFactory.quad(r,t.rdfFirst,h,t.getDefaultGraph())),h=r}if(d&&!e.allowSubjectList)throw new n.ErrorCoded(`Found illegal list value in subject position at ${r}`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}}await a.handlePredicateObject(e,t,o,l,f,h,d)}}}}t.EntryHandlerPredicate=a},4479:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeyword=void 0;class r{constructor(e){this.keyword=e}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(e,t,r,n,i){return!1}async test(e,t,r,n,i){return r===this.keyword}}t.EntryHandlerKeyword=r},42613:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordContext=void 0;const n=r(11288),i=r(4479);class a extends i.EntryHandlerKeyword{constructor(){super("@context")}isStackProcessor(){return!1}async handle(e,t,r,i,a,o){e.streamingProfile&&(e.processingStack[o]||e.processingType[o]||void 0!==e.idStack[o])&&e.emitError(new n.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",n.ERROR_CODES.INVALID_STREAMING_KEY_ORDER));const s=e.getContext(i),l=e.parseContext(a,(await s).getContextRaw());e.contextTree.setContext(i.slice(0,-1),l),e.emitContext(a),await e.validateContext(await l)}}t.EntryHandlerKeywordContext=a},73330:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordGraph=void 0;const n=r(4479);class i extends n.EntryHandlerKeyword{constructor(){super("@graph")}async handle(e,t,r,n,i,a){e.graphStack[a+1]=!0}}t.EntryHandlerKeywordGraph=i},52709:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordId=void 0;const n=r(11288),i=r(4479);class a extends i.EntryHandlerKeyword{constructor(){super("@id")}isStackProcessor(){return!1}async handle(e,t,r,i,a,o){"string"!==typeof a&&e.emitError(new n.ErrorCoded(`Found illegal @id '${a}'`,n.ERROR_CODES.INVALID_ID_VALUE));const s=await t.getPropertiesDepth(i,o);void 0!==e.idStack[s]&&(e.idStack[s][0].listHead?e.emitError(new n.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${i[o-1]}'`,n.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):e.emitError(new n.ErrorCoded(`Found duplicate @ids '${e.idStack[s][0].value}' and '${a}'`,n.ERROR_CODES.COLLIDING_KEYWORDS))),e.idStack[s]=t.nullableTermToArray(await t.resourceToTerm(await e.getContext(i),a))}}t.EntryHandlerKeywordId=a},67406:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordIncluded=void 0;const n=r(11288),i=r(4479);class a extends i.EntryHandlerKeyword{constructor(){super("@included")}async handle(e,t,r,i,a,o){"object"!==typeof a&&e.emitError(new n.ErrorCoded(`Found illegal @included '${a}'`,n.ERROR_CODES.INVALID_INCLUDED_VALUE));const s=await t.unaliasKeywords(a,i,o,await e.getContext(i));"@value"in s&&e.emitError(new n.ErrorCoded(`Found an illegal @included @value node '${JSON.stringify(a)}'`,n.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in s&&e.emitError(new n.ErrorCoded(`Found an illegal @included @list node '${JSON.stringify(a)}'`,n.ERROR_CODES.INVALID_INCLUDED_VALUE)),e.emittedStack[o]=!1}}t.EntryHandlerKeywordIncluded=a},61323:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordNest=void 0;const n=r(11288),i=r(4479);class a extends i.EntryHandlerKeyword{constructor(){super("@nest")}async handle(e,t,r,i,a,o){"object"!==typeof a&&e.emitError(new n.ErrorCoded(`Found invalid @nest entry for '${r}': '${a}'`,n.ERROR_CODES.INVALID_NEST_VALUE)),"@value"in await t.unaliasKeywords(a,i,o,await e.getContext(i))&&e.emitError(new n.ErrorCoded(`Found an invalid @value node for '${r}'`,n.ERROR_CODES.INVALID_NEST_VALUE)),e.emittedStack[o]=!1}}t.EntryHandlerKeywordNest=a},51820:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordType=void 0;const n=r(11288),i=r(22754),a=r(49488),o=r(4479);class s extends o.EntryHandlerKeyword{constructor(){super("@type")}isStackProcessor(){return!1}async handle(e,t,r,o,s,l){const d=o[l],c=await e.getContext(o),u=t.rdfType,f=i.Util.isPropertyReverse(c,d,await t.unaliasKeywordParent(o,l)),h=Array.isArray(s)?s:[s];for(const i of h){"string"!==typeof i&&e.emitError(new n.ErrorCoded(`Found illegal @type '${i}'`,n.ERROR_CODES.INVALID_TYPE_VALUE));const r=t.createVocabOrBaseTerm(c,i);r&&await a.EntryHandlerPredicate.handlePredicateObject(e,t,o,l,u,r,f)}let p=Promise.resolve(c),g=!1;for(const n of h.sort()){const t=i.Util.getContextValue(c,"@context",n,null);t&&(g=!0,p=p.then((r=>e.parseContext(t,r.getContextRaw()))))}!e.streamingProfile||!g&&e.streamingProfileAllowOutOfOrderPlainType||!e.processingStack[l]&&!e.idStack[l]||e.emitError(new n.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",n.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),g&&(p=p.then((e=>("@propagate"in e.getContextRaw()||(e.getContextRaw()["@propagate"]=!1),!1===e.getContextRaw()["@propagate"]&&(e.getContextRaw()["@__propagateFallback"]=c.getContextRaw()),e))),e.contextTree.setContext(o.slice(0,o.length-1),p)),e.processingType[l]=!0}}t.EntryHandlerKeywordType=s},72963:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordUnknownFallback=void 0;const n=r(11288);class i{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(e,t,r,i,a){const o=await t.unaliasKeyword(r[i],r,i);return!!n.Util.isPotentialKeyword(o)&&!(!a&&"@list"===o)}async test(e,t,r,i,a){return n.Util.isPotentialKeyword(r)}async handle(e,t,r,a,o,s){const l=i.VALID_KEYWORDS_TYPES[r];void 0!==l?l&&typeof o!==l.type&&e.emitError(new n.ErrorCoded(`Invalid value type for '${r}' with value '${o}'`,l.errorCode)):e.strictValues&&e.emitError(new Error(`Unknown keyword '${r}' with value '${o}'`)),e.emittedStack[s]=!1}}t.EntryHandlerKeywordUnknownFallback=i,i.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:n.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:n.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null}},93322:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordValue=void 0;const n=r(4479);class i extends n.EntryHandlerKeyword{constructor(){super("@value")}async validate(e,t,r,n,i){const a=r[n];return a&&!e.literalStack[n]&&await this.test(e,t,a,r,n)&&(e.literalStack[n]=!0),super.validate(e,t,r,n,i)}async test(e,t,r,n,i){return"@value"===await t.unaliasKeyword(n[i],n.slice(0,n.length-1),i-1,!0)}async handle(e,t,r,n,i,a){e.literalStack[a]=!0,delete e.unidentifiedValuesBuffer[a],delete e.unidentifiedGraphsBuffer[a],e.emittedStack[a]=!1}}t.EntryHandlerKeywordValue=i},41640:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(7970),t),i(r(37498),t),i(r(16381),t),i(r(72808),t),i(r(92016),t),i(r(63387),t),i(r(71573),t)},7970:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlankNode=void 0;class r{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}}t.BlankNode=r},37498:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataFactory=void 0;const n=r(7970),i=r(16381),a=r(72808),o=r(92016),s=r(63387),l=r(71573);let d=0;class c{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${d++}_`}namedNode(e){return new o.NamedNode(e)}blankNode(e){return new n.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new a.Literal(e,t)}variable(e){return new l.Variable(e)}defaultGraph(){return i.DefaultGraph.INSTANCE}quad(e,t,r,n){return new s.Quad(e,t,r,n||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(a.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}}t.DataFactory=c},16381:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultGraph=void 0;class r{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&"DefaultGraph"===e.termType}}t.DefaultGraph=r,r.INSTANCE=new r},72808:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Literal=void 0;const n=r(92016);class i{constructor(e,t){this.termType="Literal",this.value=e,"string"===typeof t?(this.language=t,this.datatype=i.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=i.XSD_STRING)}equals(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)}}t.Literal=i,i.RDF_LANGUAGE_STRING=new n.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),i.XSD_STRING=new n.NamedNode("http://www.w3.org/2001/XMLSchema#string")},92016:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamedNode=void 0;class r{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}}t.NamedNode=r},63387:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Quad=void 0;class r{constructor(e,t,r,n){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=r,this.graph=n}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}}t.Quad=r},71573:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Variable=void 0;class r{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&"Variable"===e.termType&&e.value===this.value}}t.Variable=r},68912:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(9336),t)},9336:function(e,t){"use strict";function r(e,t){t=t||"";const r=t.indexOf("#");if(r>0&&(t=t.substr(0,r)),!e.length){if(t.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${t}' for value '${e}'`);return t}if(e.startsWith("?")){const r=t.indexOf("?");return r>0&&(t=t.substr(0,r)),t+e}if(e.startsWith("#"))return t+e;if(!t.length){const t=e.indexOf(":");if(t<0)throw new Error(`Found invalid relative IRI '${e}' for a missing baseIRI`);return i(e,t)}const a=e.indexOf(":");if(a>=0)return i(e,a);const o=t.indexOf(":");if(o<0)throw new Error(`Found invalid baseIRI '${t}' for value '${e}'`);const s=t.substr(0,o+1);if(0===e.indexOf("//"))return s+i(e,a);let l;if(t.indexOf("//",o)===o+1){if(l=t.indexOf("/",o+3),l<0)return t.length>o+3?t+"/"+i(e,a):s+i(e,a)}else if(l=t.indexOf("/",o+1),l<0)return s+i(e,a);if(0===e.indexOf("/"))return t.substr(0,l)+n(e);let d=t.substr(l);const c=d.lastIndexOf("/");return c>=0&&c<d.length-1&&(d=d.substr(0,c+1),"."===e[0]&&"."!==e[1]&&"/"!==e[1]&&e[2]&&(e=e.substr(1))),e=d+e,e=n(e),t.substr(0,l)+e}function n(e){const t=[];let r=0;while(r<e.length)switch(e[r]){case"/":if("."===e[r+1])if("."===e[r+2]){if(!a(e[r+3])){t.push([]),r++;break}t.pop(),e[r+3]||t.push([]),r+=3}else{if(!a(e[r+2])){t.push([]),r++;break}e[r+2]||t.push([]),r+=2}else t.push([]),r++;break;case"#":case"?":t.length||t.push([]),t[t.length-1].push(e.substr(r)),r=e.length;break;default:t.length||t.push([]),t[t.length-1].push(e[r]),r++;break}return"/"+t.map((e=>e.join(""))).join("/")}function i(e,t){let r=t+1;t>=0?"/"===e[t+1]&&"/"===e[t+2]&&(r=t+3):"/"===e[0]&&"/"===e[1]&&(r=2);const i=e.indexOf("/",r);if(i<0)return e;const a=e.substr(0,i),o=e.substr(i);return a+n(o)}function a(e){return!e||"#"===e||"?"===e||"/"===e}Object.defineProperty(t,"__esModule",{value:!0}),t.removeDotSegmentsOfPath=t.removeDotSegments=t.resolve=void 0,t.resolve=r,t.removeDotSegments=n,t.removeDotSegmentsOfPath=i}}]);
//# sourceMappingURL=624.baaadf14.js.map