"use strict";(self["webpackChunk_zazuko_spex"]=self["webpackChunk_zazuko_spex"]||[]).push([[9],{54009:function(a,e,t){t.r(e),t.d(e,{default:function(){return Z}});var s=t(66252),l=t(3577),o=t(49963);const r=(0,s._)("h2",{class:"font-bold text-lg px-4 py-2 bg-gray-200"},"SHACL editor",-1),n={class:"field"},i=(0,s._)("label",{class:"label",for:"format"},"Format",-1),c={class:"select"},d=["value"],u=(0,s._)("span",null,"Update",-1),p={class:"flex-grow flex flex-col"},f=(0,s._)("h2",{class:"font-bold text-lg px-4 py-2 bg-gray-200"},"Representation",-1),h={key:0,class:"section"},m={class:"message is-danger"},w={class:"message-body"};function v(a,e,t,v,k,_){const b=(0,s.up)("rdf-editor"),g=(0,s.up)("ArrowPathIcon"),y=(0,s.up)("Pane"),x=(0,s.up)("ResourceCard"),S=(0,s.up)("GraphLayout"),z=(0,s.up)("Splitpanes");return(0,s.wg)(),(0,s.j4)(z,{class:"default-theme"},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{size:"40"},{default:(0,s.w5)((()=>[r,(0,s.Wm)(b,{class:"w-full h-full overflow-hidden",format:k.format,value:k.shacl,ref:"shaclEditor"},null,8,["format","value"]),(0,s._)("div",n,[i,(0,s._)("div",c,[(0,s.wy)((0,s._)("select",{id:"format","onUpdate:modelValue":e[0]||(e[0]=a=>k.format=a)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(k.formats,(a=>((0,s.wg)(),(0,s.iD)("option",{key:a,value:a},(0,l.zw)(a),9,d)))),128))],512),[[o.bM,k.format]])])]),(0,s._)("button",{class:"button is-primary",onClick:e[1]||(e[1]=(...a)=>_.loadShacl&&_.loadShacl(...a))},[(0,s.Wm)(g,{class:"icon"}),u])])),_:1}),(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(z,{horizontal:""},{default:(0,s.w5)((()=>[(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s._)("div",p,[f,(0,s.Wm)(S,{nodes:k.datamodel.tables,links:_.links,"active-links":k.activeLinks},{node:(0,s.w5)((({node:a})=>[(0,s.Wm)(x,{resource:a,"active-links":k.activeLinks},null,8,["resource","active-links"])])),_:1},8,["nodes","links","active-links"]),k.error?((0,s.wg)(),(0,s.iD)("div",h,[(0,s._)("div",m,[(0,s._)("div",w," Error loading data: "+(0,l.zw)(k.error),1)])])):(0,s.kq)("",!0)])])),_:1})])),_:1})])),_:1})])),_:1})}t(57658);var k=t(27886),_=t(36705),b=t(80211),g=t(22886),y=(t(75279),t(50186)),x=t(54803),S=t(58027),z=t(81407);const W=[...parsers.keys()],L="\n@prefix sh: <http://www.w3.org/ns/shacl#> .\n@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .\n";var C={components:{GraphLayout:b.Y,Splitpanes:g.F,Pane:g.X,ArrowPathIcon:k.Z,ResourceCard:z.Z},data(){return{format:"text/turtle",formats:W,shacl:L,datamodel:{tables:[],viewports:[],isIntrospected:!1},error:null,activeLinks:[]}},computed:{links(){const a=this.datamodel.tables,e=new Set(a.map((({id:a})=>a)));return a.flatMap((a=>a.properties.map((e=>({...e,table:a}))))).reduce(((a,t)=>(t.values.forEach((s=>{const l=t.table.id,o=s.id;e.has(o)&&a.push({source:l,target:o,sourceProperty:t.id,label:t.name})})),a)),[])}},methods:{async loadShacl(){const a=this.$refs.shaclEditor;this.error=null,this.datamodel.tables=[];const e=a=>(0,_.Fi)(a)||a;try{const t=await a.quads,s=y.Z.dataset(t),l=y.Z.clownface({dataset:s}).has(S.E_.type,S.sh.NodeShape);this.datamodel.tables=(0,x.NV)(l,e)}catch(t){this.error=t.toString()}}}},E=t(83744);const P=(0,E.Z)(C,[["render",v]]);var Z=P}}]);
//# sourceMappingURL=9.66b2bd1c.js.map